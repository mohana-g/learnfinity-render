/*! For license information please see main.8c57a884.js.LICENSE.txt */
(()=>{var __webpack_modules__={839:(e,t,n)=>{"use strict";var r=n(43),i=n(749);function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s,o=a(r),l=a(i);t.UJ=void 0,(s=t.UJ||(t.UJ={}))[s.Text=1]="Text",s[s.Link=2]="Link",s[s.FreeText=3]="FreeText",s[s.Line=4]="Line",s[s.Square=5]="Square",s[s.Circle=6]="Circle",s[s.Polygon=7]="Polygon",s[s.Polyline=8]="Polyline",s[s.Highlight=9]="Highlight",s[s.Underline=10]="Underline",s[s.Squiggly=11]="Squiggly",s[s.StrikeOut=12]="StrikeOut",s[s.Stamp=13]="Stamp",s[s.Caret=14]="Caret",s[s.Ink=15]="Ink",s[s.Popup=16]="Popup",s[s.FileAttachment=17]="FileAttachment";var c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)};function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u,h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)};t.z4=void 0,(u=t.z4||(t.z4={})).RightToLeft="RTL",u.LeftToRight="LTR";var p,f=o.createContext({currentTheme:"light",direction:t.z4.LeftToRight,setCurrentTheme:function(){}}),m=function(e){var t=[];return Object.keys(e).forEach((function(n){n&&e[n]&&t.push(n)})),t.join(" ")},g="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,v=function(e){var t=o.useRef(null),n=e.once,r=e.threshold,i=e.onVisibilityChanged;return g((function(){var e=t.current;if(e){var a=new IntersectionObserver((function(t){t.forEach((function(t){var r=t.isIntersecting,s=t.intersectionRatio;i({isVisible:r,ratio:s}),r&&n&&(a.unobserve(e),a.disconnect())}))}),{threshold:r||0});return a.observe(e),function(){a.unobserve(e),a.disconnect()}}}),[]),t},y=function(e){var n=e.children,r=e.ignoreDirection,i=void 0!==r&&r,a=e.size,s=void 0===a?24:a,l=o.useContext(f).direction,c=!i&&l===t.z4.RightToLeft,d="".concat(s||24,"px");return o.createElement("svg",{"aria-hidden":"true",className:m({"rpv-core__icon":!0,"rpv-core__icon--rtl":c}),focusable:"false",height:d,viewBox:"0 0 24 24",width:d},n)},b=function(){return o.createElement(y,{size:16},o.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},_=function(e){var n=e.children,r=e.testId,i=e.onClick,a=o.useContext(f).direction===t.z4.RightToLeft,s=r?{"data-testid":r}:{};return o.createElement("button",h({className:m({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":a}),type:"button",onClick:i},s),n)},w=function(e){var t=e.size,n=void 0===t?"4rem":t,r=e.testId,i=o.useState(!1),a=i[0],s=i[1],l=r?{"data-testid":r}:{},c=v({onVisibilityChanged:function(e){s(e.isVisible)}});return o.createElement("div",h({},l,{className:m({"rpv-core__spinner":!0,"rpv-core__spinner--animating":a}),ref:c,style:{height:n,width:n}}))},x=function(e){var n=e.ariaLabel,r=void 0===n?"":n,i=e.autoFocus,a=void 0!==i&&i,s=e.placeholder,l=void 0===s?"":s,c=e.testId,d=e.type,u=void 0===d?"text":d,p=e.value,v=void 0===p?"":p,y=e.onChange,b=e.onKeyDown,_=void 0===b?function(){}:b,w=o.useContext(f).direction,x=o.useRef(),C=w===t.z4.RightToLeft,k={ref:x,"data-testid":"","aria-label":r,className:m({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":C}),placeholder:l,value:v,onChange:function(e){return y(e.target.value)},onKeyDown:_};return c&&(k["data-testid"]=c),g((function(){if(a){var e=x.current;if(e){var t=window.scrollX,n=window.scrollY;e.focus(),window.scrollTo(t,n)}}}),[]),"text"===u?o.createElement("input",h({type:"text"},k)):o.createElement("input",h({type:"password"},k))},C=function(){var e=o.useRef(!1);return o.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),e},k=function(e){var t=o.useRef(e);return o.useEffect((function(){t.current=e}),[e]),t.current};!function(e){e.NotRenderedYet="NotRenderedYet",e.Rendering="Rendering",e.Rendered="Rendered"}(p||(p={}));var S,P=-9999,A=function(e){var t=e.doc,n=t.numPages,r=t.loadingTask.docId,i=o.useMemo((function(){return Array(n).fill(null).map((function(e,t){return{pageIndex:t,renderStatus:p.NotRenderedYet,visibility:P}}))}),[r]),a=o.useRef({currentRenderingPage:-1,startRange:0,endRange:n-1,visibilities:i}),s=function(e,t){a.current.visibilities[e].visibility=t};return{getHighestPriorityPage:function(){var e=a.current.visibilities.slice(a.current.startRange,a.current.endRange+1).filter((function(e){return e.visibility>P}));if(!e.length)return-1;for(var t=e[0].pageIndex,r=e[e.length-1].pageIndex,i=e.length,s=0;s<i;s++){if(e[s].renderStatus===p.Rendering)return-1;if(e[s].renderStatus===p.NotRenderedYet)return e[s].pageIndex}return r+1<n&&a.current.visibilities[r+1].renderStatus!==p.Rendered?r+1:t-1>=0&&a.current.visibilities[t-1].renderStatus!==p.Rendered?t-1:-1},isInRange:function(e){return e>=a.current.startRange&&e<=a.current.endRange},markNotRendered:function(){for(var e=0;e<n;e++)a.current.visibilities[e].renderStatus=p.NotRenderedYet},markRendered:function(e){a.current.visibilities[e].renderStatus=p.Rendered},markRendering:function(e){-1!==a.current.currentRenderingPage&&a.current.currentRenderingPage!==e&&a.current.visibilities[a.current.currentRenderingPage].renderStatus===p.Rendering&&(a.current.visibilities[a.current.currentRenderingPage].renderStatus=p.NotRenderedYet),a.current.visibilities[e].renderStatus=p.Rendering,a.current.currentRenderingPage=e},setOutOfRange:function(e){s(e,P)},setRange:function(e,t){a.current.startRange=e,a.current.endRange=t;for(var r=0;r<n;r++)(r<e||r>t)&&(a.current.visibilities[r].visibility=P,a.current.visibilities[r].renderStatus=p.NotRenderedYet)},setVisibility:s}},E={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},T=o.createContext({l10n:E,setL10n:function(){}}),I=0,F=function(){return I++},R=function(e,t,n){var r=function(e){var r=t.current;if(r){var i=e.target;if(i instanceof Element&&i.shadowRoot){var a=e.composedPath();a.length>0&&!r.contains(a[0])&&n()}else r.contains(i)||n()}};o.useEffect((function(){if(e){var t={capture:!0};return document.addEventListener("click",r,t),function(){document.removeEventListener("click",r,t)}}}),[])},N=function(e){var t=function(t){"Escape"===t.key&&e()};o.useEffect((function(){return document.addEventListener("keyup",t),function(){document.removeEventListener("keyup",t)}}),[])},j=function(e){var n=e.ariaControlsSuffix,r=e.children,i=e.closeOnClickOutside,a=e.closeOnEscape,s=e.onToggle,l=o.useRef(),c=o.useContext(f).direction===t.z4.RightToLeft;return o.useEffect((function(){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}),[]),N((function(){l.current&&a&&s()})),R(i,l,s),g((function(){var e=l.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]),o.createElement("div",{"aria-modal":"true",className:m({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":c}),id:"rpv-core__modal-body-".concat(n),ref:l,role:"dialog",tabIndex:-1},r)},M=function(e){var t=e.children;return o.createElement("div",{className:"rpv-core__modal-overlay"},t)};t.$K=void 0,(S=t.$K||(t.$K={})).Close="Close",S.Open="Open",S.Toggle="Toggle";var O,L=function(e){var n=o.useState(e),r=n[0],i=n[1];return{opened:r,toggle:function(e){switch(e){case t.$K.Close:i(!1);break;case t.$K.Open:i(!0);break;case t.$K.Toggle:default:i((function(e){return!e}))}}}},D=function(e){var t=e.content,n=e.isOpened,r=void 0!==n&&n,i=e.target,a=L(r),s=a.opened,l=a.toggle;return o.createElement(o.Fragment,null,i&&i(l,s),s&&t(l))};t.yX=void 0,(O=t.yX||(t.yX={})).TopLeft="TOP_LEFT",O.TopCenter="TOP_CENTER",O.TopRight="TOP_RIGHT",O.RightTop="RIGHT_TOP",O.RightCenter="RIGHT_CENTER",O.RightBottom="RIGHT_BOTTOM",O.BottomLeft="BOTTOM_LEFT",O.BottomCenter="BOTTOM_CENTER",O.BottomRight="BOTTOM_RIGHT",O.LeftTop="LEFT_TOP",O.LeftCenter="LEFT_CENTER",O.LeftBottom="LEFT_BOTTOM";var B,q,U,G,z,H,W,V=function(e,n,r,i,a){g((function(){var s=n.current,o=e.current,l=r.current;if(o&&s&&l){var c=l.getBoundingClientRect(),d=function(e,n,r,i){var a=n.getBoundingClientRect(),s=e.getBoundingClientRect(),o=s.height,l=s.width,c=0,d=0;switch(r){case t.yX.TopLeft:c=a.top-o,d=a.left;break;case t.yX.TopCenter:c=a.top-o,d=a.left+a.width/2-l/2;break;case t.yX.TopRight:c=a.top-o,d=a.left+a.width-l;break;case t.yX.RightTop:c=a.top,d=a.left+a.width;break;case t.yX.RightCenter:c=a.top+a.height/2-o/2,d=a.left+a.width;break;case t.yX.RightBottom:c=a.top+a.height-o,d=a.left+a.width;break;case t.yX.BottomLeft:c=a.top+a.height,d=a.left;break;case t.yX.BottomCenter:c=a.top+a.height,d=a.left+a.width/2-l/2;break;case t.yX.BottomRight:c=a.top+a.height,d=a.left+a.width-l;break;case t.yX.LeftTop:c=a.top,d=a.left-l;break;case t.yX.LeftCenter:c=a.top+a.height/2-o/2,d=a.left-l;break;case t.yX.LeftBottom:c=a.top+a.height-o,d=a.left-l}return{left:d+(i.left||0),top:c+(i.top||0)}}(o,s,i,a),u=d.top,h=d.left;o.style.top="".concat(u-c.top,"px"),o.style.left="".concat(h-c.left,"px")}}),[])},K=function(e){var n,r=e.customClassName,i=e.position;return o.createElement("div",{className:m((n={"rpv-core__arrow":!0,"rpv-core__arrow--tl":i===t.yX.TopLeft,"rpv-core__arrow--tc":i===t.yX.TopCenter,"rpv-core__arrow--tr":i===t.yX.TopRight,"rpv-core__arrow--rt":i===t.yX.RightTop,"rpv-core__arrow--rc":i===t.yX.RightCenter,"rpv-core__arrow--rb":i===t.yX.RightBottom,"rpv-core__arrow--bl":i===t.yX.BottomLeft,"rpv-core__arrow--bc":i===t.yX.BottomCenter,"rpv-core__arrow--br":i===t.yX.BottomRight,"rpv-core__arrow--lt":i===t.yX.LeftTop,"rpv-core__arrow--lc":i===t.yX.LeftCenter,"rpv-core__arrow--lb":i===t.yX.LeftBottom},n["".concat(r)]=""!==r,n))})},Y=function(e){var n=e.ariaControlsSuffix,r=e.children,i=e.closeOnClickOutside,a=e.offset,s=e.position,l=e.targetRef,c=e.onClose,d=o.useRef(),u=o.useRef(),h=o.useRef(),p=o.useContext(f).direction===t.z4.RightToLeft;R(i,d,c),V(d,l,h,s,a),g((function(){var e=u.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]);var v="rpv-core__popover-body-inner-".concat(n);return o.createElement(o.Fragment,null,o.createElement("div",{ref:h,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{"aria-describedby":v,className:m({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":p}),id:"rpv-core__popover-body-".concat(n),ref:d,role:"dialog",tabIndex:-1},o.createElement(K,{customClassName:"rpv-core__popover-body-arrow",position:s}),o.createElement("div",{id:v,ref:u},r)))},X=function(e){var t=e.closeOnEscape,n=e.onClose,r=o.useRef();return N((function(){r.current&&t&&n()})),o.createElement("div",{className:"rpv-core__popover-overlay",ref:r})},J=function(e){var n=e.ariaControlsSuffix,r=e.children,i=e.contentRef,a=e.offset,s=e.position,l=e.targetRef,c=o.useRef(),d=o.useContext(f).direction===t.z4.RightToLeft;return V(i,l,c,s,a),o.createElement(o.Fragment,null,o.createElement("div",{ref:c,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{className:m({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":d}),id:"rpv-core__tooltip-body-".concat(n),ref:i,role:"tooltip"},o.createElement(K,{customClassName:"rpv-core__tooltip-body-arrow",position:s}),o.createElement("div",{className:"rpv-core__tooltip-body-content"},r)))};t._8=void 0,(B=t._8||(t._8={}))[B.PreRender=0]="PreRender",B[B.DidRender=1]="DidRender",t.bH=void 0,(q=t.bH||(t.bH={})).Attachments="UseAttachments",q.Bookmarks="UseOutlines",q.ContentGroup="UseOC",q.Default="UserNone",q.FullScreen="FullScreen",q.Thumbnails="UseThumbs",t.a9=void 0,(U=t.a9||(t.a9={})).RequiredPassword="RequiredPassword",U.WrongPassword="WrongPassword",t.pT=void 0,(G=t.pT||(t.pT={})).Backward="Backward",G.Forward="Forward",t.VT=void 0,(z=t.VT||(t.VT={})).Page="Page",z.Horizontal="Horizontal",z.Vertical="Vertical",z.Wrapped="Wrapped",t.dD=void 0,(H=t.dD||(t.dD={})).ActualSize="ActualSize",H.PageFit="PageFit",H.PageWidth="PageWidth",t.nE=void 0,(W=t.nE||(t.nE={})).DualPage="DualPage",W.DualPageWithCover="DualPageWithCover",W.SinglePage="SinglePage";var Q,Z=function(e,t){return e.reduce((function(e,n,r){return r%t?e[e.length-1].push(n):e.push([n]),e}),[])},$=function(e,n){switch(n[1].name){case"XYZ":return{bottomOffset:function(e,t){return null===n[3]?t:n[3]},leftOffset:function(e,t){return null===n[2]?0:n[2]},pageIndex:e,scaleTo:n[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:t.dD.PageFit};case"FitH":case"FitBH":return{bottomOffset:n[2],leftOffset:0,pageIndex:e,scaleTo:t.dD.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:1}}},ee=new Map,te=new Map,ne=function(e,t){return"".concat(e.loadingTask.docId,"___").concat(t.num,"R").concat(0===t.gen?"":t.gen)},re=function(e,t,n){ee.set(ne(e,t),n)},ie=function(e,t){if(!e)return Promise.reject("The document is not loaded yet");var n="".concat(e.loadingTask.docId,"___").concat(t),r=te.get(n);return r?Promise.resolve(r):new Promise((function(r,i){e.getPage(t+1).then((function(i){te.set(n,i),i.ref&&re(e,i.ref,t),r(i)}))}))},ae=function(e,t){return new Promise((function(n){new Promise((function(n){"string"==typeof t?e.getDestination(t).then((function(e){n(e)})):n(t)})).then((function(r){if("object"==typeof r[0]&&null!==r[0]){var i=r[0],a=function(e,t){var n=ne(e,t);return ee.has(n)?ee.get(n):null}(e,i);null===a?e.getPageIndex(i).then((function(r){re(e,i,r),ae(e,t).then((function(e){return n(e)}))})):n($(a,r))}else{var s=$(r[0],r);n(s)}}))}))};!function(e){e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Beveled=3]="Beveled",e[e.Inset=4]="Inset",e[e.Underline=5]="Underline"}(Q||(Q={}));var se,oe=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),le=function(e,t,n,r){var i=parseInt(e,10);return i>=t&&i<=n?i:r},ce=function(e){return e.contentsObj?e.contentsObj.str:e.contents||""},de=function(e){return e.titleObj?e.titleObj.str:e.title||""},ue=function(e){var n=e.annotation,r=o.useContext(f).direction,i=de(n),a=ce(n),s=r===t.z4.RightToLeft,l=o.useRef(),c="";if(n.modificationDate){var d=function(e){var t=oe.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=le(t[2],1,12,1)-1,i=le(t[3],1,31,1),a=le(t[4],0,23,0),s=le(t[5],0,59,0),o=le(t[6],0,59,0),l=t[7]||"Z",c=le(t[8],0,23,0),d=le(t[9],0,59,0);switch(l){case"-":a+=c,s+=d;break;case"+":a-=c,s-=d}return new Date(Date.UTC(n,r,i,a,s,o))}(n.modificationDate);c=d?"".concat(d.toLocaleDateString(),", ").concat(d.toLocaleTimeString()):""}return o.useLayoutEffect((function(){if(l.current){var e=document.querySelector('[data-annotation-id="'.concat(n.id,'"]'));if(e){var t=e;return t.style.zIndex+=1,function(){t.style.zIndex="".concat(parseInt(t.style.zIndex,10)-1)}}}}),[]),o.createElement("div",{ref:l,className:m({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":s}),style:{top:n.annotationType===t.UJ.Popup?"":"100%"}},i&&o.createElement(o.Fragment,null,o.createElement("div",{className:m({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!s,"rpv-core__annotation-popup-title--rtl":s})},i),o.createElement("div",{className:"rpv-core__annotation-popup-date"},c)),a&&o.createElement("div",{className:"rpv-core__annotation-popup-content"},a.split("\n").map((function(e,t){return o.createElement(o.Fragment,{key:t},e,o.createElement("br",null))}))))};!function(e){e.Click="Click",e.Hover="Hover"}(se||(se={}));var he,pe=function(e){var n,r=e.annotation,i=e.children,a=e.ignoreBorder,s=e.hasPopup,l=e.isRenderable,c=e.page,d=e.viewport,u=r.rect,h=function(){var e=L(!1),n=e.opened,r=e.toggle,i=o.useState(se.Hover),a=i[0],s=i[1];return{opened:n,closeOnHover:function(){a===se.Hover&&r(t.$K.Close)},openOnHover:function(){a===se.Hover&&r(t.$K.Open)},toggleOnClick:function(){switch(a){case se.Click:n&&s(se.Hover),r(t.$K.Toggle);break;case se.Hover:s(se.Click),r(t.$K.Open)}}}}(),p=h.closeOnHover,f=h.opened,m=h.openOnHover,g=h.toggleOnClick,v=(n=[u[0],c.view[3]+c.view[1]-u[1],u[2],c.view[3]+c.view[1]-u[3]],[Math.min(n[0],n[2]),Math.min(n[1],n[3]),Math.max(n[0],n[2]),Math.max(n[1],n[3])]),y=u[2]-u[0],b=u[3]-u[1],_={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!a&&r.borderStyle.width>0){switch(r.borderStyle.style){case Q.Dashed:_.borderStyle="dashed";break;case Q.Solid:_.borderStyle="solid";break;case Q.Underline:_=Object.assign({borderBottomStyle:"solid"},_);case Q.Beveled:case Q.Inset:}var w=r.borderStyle.width;_.borderWidth="".concat(w,"px"),r.borderStyle.style!==Q.Underline&&(y-=2*w,b-=2*w);var x=r.borderStyle,C=x.horizontalCornerRadius,k=x.verticalCornerRadius;(C>0||k>0)&&(_.borderRadius="".concat(C,"px / ").concat(k,"px")),r.color?_.borderColor="rgb(".concat(0|r.color[0],", ").concat(0|r.color[1],", ").concat(0|r.color[2],")"):_.borderWidth="0"}return o.createElement(o.Fragment,null,l&&i({popup:{opened:f,closeOnHover:p,openOnHover:m,toggleOnClick:g},slot:{attrs:{style:Object.assign({height:"".concat(b,"px"),left:"".concat(v[0],"px"),top:"".concat(v[1],"px"),transform:"matrix(".concat(d.transform.join(","),")"),transformOrigin:"-".concat(v[0],"px -").concat(v[1],"px"),width:"".concat(y,"px")},_)},children:o.createElement(o.Fragment,null,s&&f&&o.createElement(ue,{annotation:r}))}}))},fe=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s);return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},me=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s),c=t.rect,d=c[2]-c[0],u=c[3]-c[1],p=t.borderStyle.width;return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:"".concat(u,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(u),width:"".concat(d,"px")},o.createElement("circle",{cy:u/2,fill:"none",rx:d/2-p/2,ry:u/2-p/2,stroke:"transparent",strokeWidth:p||1})),e.slot.children)}))},ge=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=de(t),a=ce(t),s=!(!1!==t.hasPopup||!i&&!a),l=function(){var e,n,r,i,a=t.file;a&&(e=a.filename,r="string"==typeof(n=a.content)?"":URL.createObjectURL(new Blob([n],{type:""})),(i=document.createElement("a")).style.display="none",i.href=r||e,i.setAttribute("download",function(e){var t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e}(e)),document.body.appendChild(i),i.click(),document.body.removeChild(i),r&&URL.revokeObjectURL(r))};return o.createElement(pe,{annotation:t,hasPopup:s,ignoreBorder:!0,isRenderable:!0,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onDoubleClick:l,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ve=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s);return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ye=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=de(t),a=ce(t),s=!(!i&&!a),l=!t.parentType||-1!==["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(t.parentType);return g((function(){if(t.parentId){var e=document.querySelector('[data-annotation-id="'.concat(t.parentId,'"]')),n=document.querySelector('[data-annotation-id="'.concat(t.id,'"]'));if(e&&n){var r=parseFloat(e.style.left),i=parseFloat(e.style.top)+parseFloat(e.style.height);n.style.left="".concat(r,"px"),n.style.top="".concat(i,"px"),n.style.transformOrigin="-".concat(r,"px -").concat(i,"px")}}}),[]),o.createElement(pe,{annotation:t,hasPopup:l,ignoreBorder:!1,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":t.id}),o.createElement(ue,{annotation:t}))}))},be=function(e){var n=e.annotation,r=e.childAnnotation,i=e.page,a=e.viewport,s=!1===n.hasPopup,l=de(n),c=ce(n),d=!!(n.hasPopup||l||c);if(n.quadPoints&&n.quadPoints.length>0){var u=n.quadPoints.map((function(e){return Object.assign({},n,{rect:[e[2].x,e[2].y,e[1].x,e[1].y],quadPoints:[]})}));return o.createElement(o.Fragment,null,u.map((function(e,t){return o.createElement(be,{key:t,annotation:e,childAnnotation:r,page:i,viewport:a})})))}return o.createElement(pe,{annotation:n,hasPopup:s,ignoreBorder:!0,isRenderable:d,page:i,viewport:a},(function(e){return o.createElement(o.Fragment,null,o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":n.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children),r&&r.annotationType===t.UJ.Popup&&e.popup.opened&&o.createElement(ye,{annotation:r,page:i,viewport:a}))}))},_e=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s),c=t.rect,d=c[2]-c[0],u=c[3]-c[1],p=t.borderStyle.width;return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.inkLists&&t.inkLists.length&&o.createElement("svg",{height:"".concat(u,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(u),width:"".concat(d,"px")},t.inkLists.map((function(e,t){return o.createElement("polyline",{key:t,fill:"none",stroke:"transparent",strokeWidth:p||1,points:e.map((function(e){return"".concat(e.x-c[0],",").concat(c[3]-e.y)})).join(" ")})}))),e.slot.children)}))},we=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s),c=t.rect,d=c[2]-c[0],u=c[3]-c[1],p=t.borderStyle.width;return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:"".concat(u,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(u),width:"".concat(d,"px")},o.createElement("line",{stroke:"transparent",strokeWidth:p||1,x1:c[2]-t.lineCoordinates[0],x2:c[2]-t.lineCoordinates[2],y1:c[3]-t.lineCoordinates[1],y2:c[3]-t.lineCoordinates[3]})),e.slot.children)}))},xe=/^([^\w]*)(javascript|data|vbscript)/im,Ce=/&#(\w+)(^\w|;)?/g,ke=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Se=/^([^:]+):/gm,Pe=function(e){var t,n=e.annotation,r=e.doc,i=e.outlines,a=e.page,s=e.viewport,l=e.onExecuteNamedAction,c=e.onJumpToDest,d=!!(n.url||n.dest||n.action||n.unsafeUrl),u={};if(n.url||n.unsafeUrl){var p=function(e,t){void 0===t&&(t="about:blank");var n,r=(n=e||"",n.replace(Ce,(function(e,t){return String.fromCharCode(t)}))).replace(ke,"").trim();if(!r)return t;var i=r[0];if("."===i||"/"===i)return r;var a=r.match(Se);if(!a)return r;var s=a[0];return xe.test(s)?t:r}(n.url||n.unsafeUrl,"");p?u={"data-target":"external",href:p,rel:"noopener noreferrer nofollow",target:n.newWindow?"_blank":"",title:p}:d=!1}else u={href:"","data-annotation-link":n.id,onClick:function(e){e.preventDefault(),n.action?l(n.action):ae(r,n.dest).then((function(e){var t=e.pageIndex,n=e.bottomOffset,r=e.leftOffset,i=e.scaleTo;c(t,n,r,i)}))}};var f=i&&i.length&&n.dest&&"string"==typeof n.dest?null===(t=i.find((function(e){return e.dest===n.dest})))||void 0===t?void 0:t.title:"";return f&&(u=Object.assign({},u,{title:f,"aria-label":f})),o.createElement(pe,{annotation:n,hasPopup:!1,ignoreBorder:!1,isRenderable:d,page:a,viewport:s},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":n.id,"data-testid":"core__annotation--link-".concat(n.id)}),o.createElement("a",h({},u)))}))},Ae=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s),c=t.rect,d=c[2]-c[0],u=c[3]-c[1],p=t.borderStyle.width;return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&o.createElement("svg",{height:"".concat(u,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(u),width:"".concat(d,"px")},o.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:p||1,points:t.vertices.map((function(e){return"".concat(e.x-c[0],",").concat(c[3]-e.y)})).join(" ")})),e.slot.children)}))},Ee=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s),c=t.rect,d=c[2]-c[0],u=c[3]-c[1],p=t.borderStyle.width;return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&o.createElement("svg",{height:"".concat(u,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(u),width:"".concat(d,"px")},o.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:p||1,points:t.vertices.map((function(e){return"".concat(e.x-c[0],",").concat(c[3]-e.y)})).join(" ")})),e.slot.children)}))},Te=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s),c=t.rect,d=c[2]-c[0],u=c[3]-c[1],p=t.borderStyle.width;return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:"".concat(u,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(u),width:"".concat(d,"px")},o.createElement("rect",{height:u-p,fill:"none",stroke:"transparent",strokeWidth:p||1,x:p/2,y:p/2,width:d-p})),e.slot.children)}))},Ie=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s);return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Fe=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s);return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Re=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s);return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Ne=function(){return o.createElement(y,{size:16},o.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),o.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),o.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),o.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},je=function(){return o.createElement(y,{size:16},o.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),o.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),o.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),o.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),o.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),o.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),o.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),o.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),o.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),o.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Me=function(){return o.createElement(y,{size:16},o.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),o.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Oe=function(){return o.createElement(y,{size:16},o.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),o.createElement("path",{d:"M6 4.5L6 0.5"}),o.createElement("path",{d:"M18 4.5L18 0.5"}),o.createElement("path",{d:"M10 4.5L10 0.5"}),o.createElement("path",{d:"M14 4.5L14 0.5"}))},Le=function(){return o.createElement(y,{size:16},o.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),o.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),o.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},De=function(){return o.createElement(y,{size:16},o.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Be=function(e){var n=e.annotation,r=e.childAnnotation,i=e.page,a=e.viewport,s=!1===n.hasPopup,l=de(n),c=ce(n),d=!!(n.hasPopup||l||c),u=n.name?n.name.toLowerCase():"";return o.createElement(pe,{annotation:n,hasPopup:s,ignoreBorder:!1,isRenderable:d,page:i,viewport:a},(function(e){return o.createElement(o.Fragment,null,o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":n.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),u&&o.createElement("div",{className:"rpv-core__annotation-text-icon"},"check"===u&&o.createElement(b,null),"comment"===u&&o.createElement(Ne,null),"help"===u&&o.createElement(je,null),"insert"===u&&o.createElement(De,null),"key"===u&&o.createElement(Me,null),"note"===u&&o.createElement(Oe,null),("newparagraph"===u||"paragraph"===u)&&o.createElement(Le,null)),e.slot.children),r&&r.annotationType===t.UJ.Popup&&e.popup.opened&&o.createElement(ye,{annotation:r,page:i,viewport:a}))}))},qe=function(e){var t=e.annotation,n=e.page,r=e.viewport,i=!1===t.hasPopup,a=de(t),s=ce(t),l=!!(t.hasPopup||a||s);return o.createElement(pe,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:n,viewport:r},(function(e){return o.createElement("div",h({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Ue=function(e){var n=e.annotations,r=e.doc,i=e.outlines,a=e.page,s=e.pageIndex,l=e.plugins,c=e.rotation,d=e.scale,u=e.onExecuteNamedAction,h=e.onJumpToDest,p=o.useRef(),f=a.getViewport({rotation:c,scale:d}).clone({dontFlip:!0}),m=n.filter((function(e){return!e.parentId}));return g((function(){var e=p.current;e&&l.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender({annotations:m,container:e,pageIndex:s,rotation:c,scale:d})}))}),[]),o.createElement("div",{ref:p,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(s)},m.map((function(e){var s=n.find((function(t){return t.parentId===e.id}));switch(e.annotationType){case t.UJ.Caret:return o.createElement(fe,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Circle:return o.createElement(me,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.FileAttachment:return o.createElement(ge,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.FreeText:return o.createElement(ve,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Highlight:return o.createElement(be,{key:e.id,annotation:e,childAnnotation:s,page:a,viewport:f});case t.UJ.Ink:return o.createElement(_e,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Line:return o.createElement(we,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Link:return o.createElement(Pe,{key:e.id,annotation:e,doc:r,outlines:i,page:a,viewport:f,onExecuteNamedAction:u,onJumpToDest:h});case t.UJ.Polygon:return o.createElement(Ae,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Polyline:return o.createElement(Ee,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Popup:return o.createElement(ye,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Square:return o.createElement(Te,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Squiggly:return o.createElement(Ie,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Stamp:return o.createElement(Fe,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.StrikeOut:return o.createElement(Re,{key:e.id,annotation:e,page:a,viewport:f});case t.UJ.Text:return o.createElement(Be,{key:e.id,annotation:e,childAnnotation:s,page:a,viewport:f});case t.UJ.Underline:return o.createElement(qe,{key:e.id,annotation:e,page:a,viewport:f});default:return o.createElement(o.Fragment,{key:e.id})}})))},Ge=function(e){var t=e.page,n=e.renderAnnotations,r=C(),i=o.useState({loading:!0,annotations:[]}),a=i[0],s=i[1];return o.useEffect((function(){t.getAnnotations({intent:"display"}).then((function(e){r.current&&s({loading:!1,annotations:e})}))}),[]),a.loading?o.createElement(o.Fragment,null):n(a.annotations)},ze=function(e){var t=e.doc,n=e.outlines,r=e.page,i=e.pageIndex,a=e.plugins,s=e.rotation,l=e.scale,c=e.onExecuteNamedAction,d=e.onJumpToDest;return o.createElement(Ge,{page:r,renderAnnotations:function(e){return o.createElement(Ue,{annotations:e,doc:t,outlines:n,page:r,pageIndex:i,plugins:a,rotation:s,scale:l,onExecuteNamedAction:c,onJumpToDest:d})}})},He=function(e,t){var n=e%t;return 0===n?e:Math.floor(e-n)},We=function(e){var n=e.canvasLayerRef,r=e.height,i=e.page,a=e.pageIndex,s=e.plugins,l=e.rotation,c=e.scale,d=e.width,u=e.onRenderCanvasCompleted,h=o.useRef();return g((function(){var e=h.current;e&&e.cancel();var r=n.current;r.removeAttribute("data-testid"),s.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:r,pageIndex:a,rotation:l,scale:c,status:t._8.PreRender})}));var o=i.getViewport({rotation:l,scale:c}),d=window.devicePixelRatio||1,p=Math.sqrt(16777216/(o.width*o.height)),f=d>p;f?r.style.transform="scale(1, 1)":r.style.removeProperty("transform");var m=Math.min(p,d),g=function(e){var t,n;if(Math.floor(e)===e)return[e,1];var r=1/e;if(r>8)return[1,8];if(Math.floor(r)===r)return[1,r];for(var i=e>1?r:e,a=0,s=1,o=1,l=1;;){var c=a+o,d=s+l;if(d>8)break;i<=c/d?(o=(t=[c,d])[0],l=t[1]):(a=(n=[c,d])[0],s=n[1])}return i<(a/s+o/l)/2?i===e?[a,s]:[s,a]:i===e?[o,l]:[l,o]}(m),v=g[0],y=g[1];r.width=He(o.width*m,v),r.height=He(o.height*m,v),r.style.width="".concat(He(o.width,y),"px"),r.style.height="".concat(He(o.height,y),"px"),r.hidden=!0;var b=r.getContext("2d",{alpha:!1}),_=f||1!==d?[m,0,0,m,0,0]:null;return h.current=i.render({canvasContext:b,transform:_,viewport:o}),h.current.promise.then((function(){r.hidden=!1,r.setAttribute("data-testid","core__canvas-layer-".concat(a)),s.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:r,pageIndex:a,rotation:l,scale:c,status:t._8.DidRender})})),u()}),(function(){u()})),function(){r&&(r.width=0,r.height=0)}}),[]),o.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(r,"px"),width:"".concat(d,"px")}},o.createElement("canvas",{ref:n}))},Ve=function(e){var t=e.height,n=e.page,r=e.rotation,i=e.scale,a=e.width,s=o.useRef();return g((function(){var e=s.current,o=n.getViewport({rotation:r,scale:i});n.getOperatorList().then((function(r){!function(){var e=s.current;e&&(e.innerHTML="")}(),new l.SVGGraphics(n.commonObjs,n.objs).getSVG(r,o).then((function(n){n.style.height="".concat(t,"px"),n.style.width="".concat(a,"px"),e.appendChild(n)}))}))}),[]),o.createElement("div",{className:"rpv-core__svg-layer",ref:s})},Ke=function(e){var n=e.containerRef,r=e.page,i=e.pageIndex,a=e.plugins,s=e.rotation,c=e.scale,d=e.onRenderTextCompleted,u=o.useRef(),h=function(){var e=n.current;e&&([].slice.call(e.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(t){return e.removeChild(t)})),[].slice.call(e.querySelectorAll('br[role="presentation"]')).forEach((function(t){return e.removeChild(t)})))};return g((function(){var e=u.current;e&&e.cancel();var o=n.current;if(o){o.removeAttribute("data-testid");var p=r.getViewport({rotation:s,scale:c});return a.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:o,pageIndex:i,scale:c,status:t._8.PreRender})})),r.getTextContent().then((function(e){h(),u.current=l.renderTextLayer({container:o,textContent:e,textContentSource:e,viewport:p}),u.current.promise.then((function(){o.setAttribute("data-testid","core__text-layer-".concat(i)),[].slice.call(o.children).forEach((function(e){e.classList.contains("rpv-core__text-layer-text--not")||e.classList.add("rpv-core__text-layer-text")})),a.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:o,pageIndex:i,scale:c,status:t._8.DidRender})})),d()}),(function(){o.removeAttribute("data-testid"),d()}))})),function(){var e;h(),null===(e=u.current)||void 0===e||e.cancel()}}}),[]),o.createElement("div",{className:"rpv-core__text-layer",ref:n})},Ye=function(e){var n=e.doc,r=e.measureRef,i=e.outlines,a=e.pageIndex,s=e.pageRotation,l=e.pageSize,c=e.plugins,d=e.renderPage,u=e.renderQueueKey,h=e.rotation,p=e.scale,f=e.shouldRender,g=e.viewMode,v=e.onExecuteNamedAction,y=e.onJumpToDest,b=e.onRenderCompleted,_=e.onRotatePage,x=C(),k=o.useState(null),S=k[0],P=k[1],A=o.useState(!1),E=A[0],T=A[1],I=o.useState(!1),F=I[0],R=I[1],N=o.useRef(),j=o.useRef(),M=Math.abs(h+s)%180==0,O=l.pageWidth*p,L=l.pageHeight*p,D=M?O:L,B=M?L:O,q=(l.rotation+h+s)%360,U=o.useRef(0),G=d||function(e){return o.createElement(o.Fragment,null,e.canvasLayer.children,e.textLayer.children,e.annotationLayer.children)};return o.useEffect((function(){P(null),T(!1),R(!1)}),[s,h,p]),o.useEffect((function(){f&&x.current&&!S&&ie(n,a).then((function(e){x.current&&(U.current=u,P(e))}))}),[f,S]),o.useEffect((function(){E&&F&&(u!==U.current?(P(null),T(!1),R(!1)):b(a))}),[E,F]),o.createElement("div",{className:m({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":g===t.nE.DualPage,"rpv-core__page-layer--dual-cover":g===t.nE.DualPageWithCover,"rpv-core__page-layer--single":g===t.nE.SinglePage}),"data-testid":"core__page-layer-".concat(a),ref:r,style:{height:"".concat(B,"px"),width:"".concat(D,"px")}},S?o.createElement(o.Fragment,null,G({annotationLayer:{attrs:{},children:o.createElement(ze,{doc:n,outlines:i,page:S,pageIndex:a,plugins:c,rotation:q,scale:p,onExecuteNamedAction:v,onJumpToDest:y})},canvasLayer:{attrs:{},children:o.createElement(We,{canvasLayerRef:N,height:B,page:S,pageIndex:a,plugins:c,rotation:q,scale:p,width:D,onRenderCanvasCompleted:function(){x.current&&T(!0)}})},canvasLayerRendered:E,doc:n,height:B,pageIndex:a,rotation:q,scale:p,svgLayer:{attrs:{},children:o.createElement(Ve,{height:B,page:S,rotation:q,scale:p,width:D})},textLayer:{attrs:{},children:o.createElement(Ke,{containerRef:j,page:S,pageIndex:a,plugins:c,rotation:q,scale:p,onRenderTextCompleted:function(){x.current&&R(!0)}})},textLayerRendered:F,width:D,markRendered:b,onRotatePage:function(e){return _(a,e)}}),c.map((function(e,t){return e.renderPageLayer?o.createElement(o.Fragment,{key:t},e.renderPageLayer({canvasLayerRef:N,canvasLayerRendered:E,doc:n,height:B,pageIndex:a,rotation:q,scale:p,textLayerRef:j,textLayerRendered:F,width:D})):o.createElement(o.Fragment,{key:t})}))):o.createElement(w,{testId:"core__page-layer-loading-".concat(a)}))},Xe=function(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e};!function(e){e.Horizontal="Horizontal",e.Vertical="Vertical",e.Both="Both"}(he||(he={}));var Je=function(e){return 1-Math.pow(1-e,4)},Qe=1e-4,Ze={left:0,top:0},$e={capture:!1,passive:!0},et=function(e){var t=e.elementRef,n=e.isRtl,r=e.scrollDirection,i=e.onSmoothScroll,a=function(e){var t=C(),n=o.useRef(0),r=o.useState(e),i=r[0],a=r[1],s=o.useCallback((function(e){cancelAnimationFrame(n.current),n.current=requestAnimationFrame((function(){t.current&&a(e)}))}),[]);return o.useEffect((function(){return function(){cancelAnimationFrame(n.current)}}),[]),[i,s]}(Ze),s=a[0],l=a[1],c=o.useState(t.current),d=c[0],u=c[1],h=n?-1:1,p=o.useRef(r);p.current=r;var f=o.useCallback((function(){return i(!1)}),[]),m=o.useCallback((function(){if(d)switch(p.current){case he.Horizontal:l({left:h*d.scrollLeft,top:0});break;case he.Both:l({left:h*d.scrollLeft,top:d.scrollTop});break;case he.Vertical:default:l({left:0,top:d.scrollTop})}}),[d]);g((function(){u(t.current)})),g((function(){if(d)return d.addEventListener("scroll",m,$e),function(){d.removeEventListener("scroll",m,$e)}}),[d]);var v=o.useCallback((function(e,n){var r=t.current;if(r){var a={left:0,top:0};switch(p.current){case he.Horizontal:a.left=h*e.left;break;case he.Both:a.left=h*e.left,a.top=e.top;break;case he.Vertical:default:a.top=e.top}if(n)i(!0),function(e,t,n,r,i,a){void 0===i&&(i=function(e){return e}),void 0===a&&(a=function(){});var s=0,o=0;switch(t){case he.Horizontal:o=e.scrollLeft,s=0;case he.Both:o=e.scrollLeft,s=e.scrollTop;break;case he.Vertical:default:o=0,s=e.scrollTop}if(!(s===n.top&&t===he.Vertical||o===n.left&&t===he.Horizontal)){var l,c=-1,d=o-n.left,u=s-n.top,h=function(r){-1===c&&(c=r);var p=r-c,f=Math.min(p/400,1),m=i(f),g={left:o-d*m,top:s-u*m};switch(t){case he.Horizontal:e.scrollLeft=g.left;break;case he.Both:e.scrollLeft=g.left,e.scrollTop=g.top;break;case he.Vertical:default:e.scrollTop=g.top}Math.abs(g.top-n.top)<=Qe&&Math.abs(g.left-n.left)<=Qe&&a(),p<400?l=window.requestAnimationFrame(h):window.cancelAnimationFrame(l)};l=window.requestAnimationFrame(h)}}(r,p.current,a,0,Je,f);else switch(p.current){case he.Horizontal:r.scrollLeft=a.left;break;case he.Both:r.scrollLeft=a.left,r.scrollTop=a.top;break;case he.Vertical:default:r.scrollTop=a.top}}}),[t]);return{scrollOffset:s,scrollTo:v}},tt=function(e,t,n){return Math.max(e,Math.min(n,t))},nt=function(e,n){if(n!==t.nE.DualPageWithCover)return 0;if(!function(e){var t=e.length;if(1===t)return!1;for(var n=1;n<t;n++)if(e[n].height!==e[0].height||e[n].width!==e[0].width)return!0;return!1}(e))return 2*e[0].width;var r=Z(e.slice(1),2).map((function(e){return 2===e.length?e[0].width+e[1].width:e[0].width})),i=[e[0].width].concat(r);return Math.max.apply(Math,i)},rt={left:0,top:0},it={left:0,top:0},at={left:0,top:0},st={left:0,top:0},ot={height:0,width:0},lt={left:0,top:0},ct="data-virtual-index",dt=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],ut=function(e){var n=e.isRtl,r=e.numberOfItems,i=e.parentRef,a=e.setStartRange,s=e.setEndRange,l=e.sizes,c=e.scrollMode,d=e.viewMode,u=o.useState(!1),p=u[0],f=u[1],m=o.useCallback((function(e){return f(e)}),[]),v=o.useRef(c);v.current=c;var y=o.useRef(d);y.current=d;var b=c===t.VT.Wrapped||d===t.nE.DualPageWithCover||d===t.nE.DualPage?he.Both:c===t.VT.Horizontal?he.Horizontal:he.Vertical,_=et({elementRef:i,isRtl:n,scrollDirection:b,onSmoothScroll:m}),w=_.scrollOffset,x=_.scrollTo,C=function(e){var t=e.elementRef,n=o.useState(t.current),r=n[0],i=n[1],a=o.useRef(!1),s=o.useReducer(Xe,{height:0,width:0}),l=s[0],c=s[1];return g((function(){t.current!==r&&i(t.current)})),g((function(){if(r&&!a.current){a.current=!0;var e=r.getBoundingClientRect(),t=e.height,n=e.width;c({rect:{height:t,width:n}})}}),[r]),o.useEffect((function(){if(r){var e=new ResizeObserver((function(e,t){e.forEach((function(e){if(e.target===r){var t=e.contentRect,n=t.height,i=t.width;c({rect:{height:n,width:i}})}}))}));return e.observe(r),function(){e.unobserve(r)}}}),[r]),l}({elementRef:i}),k=o.useRef({scrollOffset:lt,measurements:[],parentRect:ot,totalSize:ot});k.current.scrollOffset=w,k.current.parentRect=C;var S=o.useMemo((function(){return Array(r).fill(-1)}),[]),P=o.useState(S),A=P[0],E=P[1],T=o.useMemo((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.isIntersecting?e.intersectionRatio:-1,n=e.target.getAttribute(ct);if(n){var i=parseInt(n,10);0<=i&&i<r&&E((function(e){return e[i]=t,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0)}))}}))}),{threshold:dt});return e}),[]),I=o.useMemo((function(){return c===t.VT.Page&&d===t.nE.SinglePage?function(e,t,n){for(var r=[],i=0;i<e;i++){var a={height:Math.max(t.height,n[i].height),width:Math.max(t.width,n[i].width)},s=0===i?st:r[i-1].end,o={left:s.left+a.width,top:s.top+a.height};r[i]={index:i,start:s,size:a,end:o,visibility:-1}}return r}(r,C,l):d===t.nE.DualPageWithCover?function(e,n,r,i){for(var a=[],s=0,o=0,l=at,c=0;c<e;c++){var d=0===c?{height:i===t.VT.Page?Math.max(n.height,r[c].height):r[c].height,width:i===t.VT.Page?Math.max(n.width,r[c].width):r[c].width}:{height:i===t.VT.Page?Math.max(n.height,r[c].height):r[c].height,width:Math.max(n.width/2,r[c].width)};i===t.VT.Page?l=0===c?at:{left:c%2==0?d.width:0,top:Math.floor((c-1)/2)*d.height+a[0].end.top}:0===c?(l=at,s=r[0].height,o=0):c%2==1?(l={left:0,top:s+=o},o=c===e-1?r[c].height:Math.max(r[c].height,r[c+1].height)):l={left:a[c-1].end.left,top:s};var u={left:l.left+d.width,top:l.top+d.height};a[c]={index:c,start:l,size:d,end:u,visibility:-1}}return a}(r,C,l,c):d===t.nE.DualPage?function(e,n,r,i){for(var a=[],s=0,o=0,l=it,c=0;c<e;c++){var d={height:i===t.VT.Page?Math.max(n.height,r[c].height):r[c].height,width:Math.max(n.width/2,r[c].width)};i===t.VT.Page?l={left:c%2==0?0:d.width,top:Math.floor(c/2)*d.height}:c%2==0?(l={left:0,top:s+=o},o=c===e-1?r[c].height:Math.max(r[c].height,r[c+1].height)):l={left:a[c-1].end.left,top:s};var u={left:l.left+d.width,top:l.top+d.height};a[c]={index:c,start:l,size:d,end:u,visibility:-1}}return a}(r,C,l,c):function(e,n,r,i){for(var a=[],s=0,o={left:0,top:0},l=0,c=rt,d=0;d<e;d++){var u=r[d];if(0===d)s=u.width,o={left:0,top:0},l=u.height;else switch(i){case t.VT.Wrapped:(s+=u.width)<n.width?(c={left:a[d-1].end.left,top:o.top},l=Math.max(l,u.height)):(s=u.width,o={left:(c={left:o.left,top:o.top+l}).left,top:c.top},l=u.height);break;case t.VT.Horizontal:case t.VT.Vertical:default:c=a[d-1].end}var h={left:c.left+u.width,top:c.top+u.height};a[d]={index:d,start:c,size:u,end:h,visibility:-1}}return a}(r,C,l,c)}),[c,l,d,C]),F=I[r-1]?{height:I[r-1].end.top,width:I[r-1].end.left}:ot;k.current.measurements=I,k.current.totalSize=F;var R=function(e,t,n,r){var i=0;switch(e){case he.Horizontal:i=r.left;break;case he.Vertical:default:i=r.top}var a=t.length-1,s=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,a=r(i);if(a<n)e=i+1;else{if(!(a>n))return i;t=i-1}}return e>0?e-1:0}(0,a,i,(function(n){switch(e){case he.Horizontal:return t[n].start.left;case he.Both:case he.Vertical:default:return t[n].start.top}}));if(e===he.Both)for(var o=t[s].start.top;s-1>=0&&t[s-1].start.top===o&&t[s-1].start.left>=r.left;)s--;for(var l=s;l<=a;){var c={top:t[l].start.top-r.top,left:t[l].start.left-r.left},d={height:n.height-c.top,width:n.width-c.left};if(e===he.Horizontal&&d.width<0)break;if(e===he.Vertical&&d.height<0)break;if(e===he.Both&&(d.width<0||d.height<0))break;l++}return{start:s,end:l}}(b,k.current.measurements,k.current.parentRect,k.current.scrollOffset),N=R.start,j=R.end,M=N+A.slice(tt(0,r,N),tt(0,r,j)).reduce((function(e,t,n,r){return t>r[e]?n:e}),0),O=M=tt(0,r-1,M),L=a(N),D=s(j);switch(d){case t.nE.DualPageWithCover:M>0&&(O=M%2==1?M:M-1),L=0===L?0:L%2==1?L:L-1,r-(D=D%2==1?D-1:D)<=2&&(D=r-1);break;case t.nE.DualPage:O=M%2==0?M:M-1,L=L%2==0?L:L-1,D=D%2==1?D:D-1;break;case t.nE.SinglePage:default:O=M}var B=o.useMemo((function(){for(var e=[],t=function(t){var n=I[t],r=h(h({},n),{visibility:void 0!==A[t]?A[t]:-1,measureRef:function(e){e&&(e.setAttribute(ct,"".concat(t)),T.observe(e))}});e.push(r)},n=L;n<=D;n++)t(n);return e}),[L,D,A,I]),q=o.useCallback((function(e,n){var i=k.current.measurements[tt(0,r-1,e)],a=v.current===t.VT.Page?lt:n;i&&x({left:a.left+i.start.left,top:a.top+i.start.top},!0)}),[x]),U=o.useCallback((function(e,n){var r=k.current.measurements,i=r[e].start,a=r.find((function(e){return e.start.top-i.top>1e-12}));if(a){var s=a.index;switch(y.current){case t.nE.DualPage:s=s%2==0?s:s+1;break;case t.nE.DualPageWithCover:s=s%2==1?s:s+1}q(s,n)}}),[]),G=o.useCallback((function(e,n){for(var i=k.current.measurements,a=i[e].start,s=e,o=!1,l=r-1;l>=0;l--)if(a.top-i[l].start.top>1e-12){o=!0,s=i[l].index;break}if(o){switch(y.current){case t.nE.DualPage:s=s%2==0?s:s-1;break;case t.nE.DualPageWithCover:s=s%2==0?s-1:s}s===e&&(s=e-1),q(s,n)}}),[]),z=o.useCallback((function(e,n){if(y.current!==t.nE.DualPageWithCover&&y.current!==t.nE.DualPage)switch(v.current){case t.VT.Wrapped:U(e,n);break;case t.VT.Horizontal:case t.VT.Vertical:default:q(e+1,n)}else U(e,n)}),[]),H=o.useCallback((function(e,n){if(y.current!==t.nE.DualPageWithCover&&y.current!==t.nE.DualPage)switch(v.current){case t.VT.Wrapped:G(e,n);break;case t.VT.Horizontal:case t.VT.Vertical:default:q(e-1,n)}else G(e,n)}),[]),W=o.useCallback((function(){return function(e,n){switch(n){case t.VT.Horizontal:return{position:"relative",height:"100%",width:"".concat(e.width,"px")};case t.VT.Vertical:default:return{position:"relative",height:"".concat(e.height,"px"),width:"100%"}}}(F,v.current)}),[F]),V=o.useCallback((function(e){return function(e,n,r){return r!==t.VT.Page?{}:{height:"".concat(n.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(e.start.top,"px)")}}(e,C,v.current)}),[C]),K=o.useCallback((function(e){return function(e,n,r,i,a){var s,o,l,c,d,u,h,p=n?"right":"left",f=n?-1:1,m=r.length,g=e.start.left*f,v=e.size,y=v.height,b=v.width;if(i===t.nE.DualPageWithCover){var _=a===t.VT.Page?0:e.start.top;return 0===e.index||m%2==0&&e.index===m-1?((s={height:"".concat(y,"px"),minWidth:"".concat(nt(r,i),"px"),width:"100%"})[p]=0,s.position="absolute",s.top=0,s.transform="translate(".concat(g,"px, ").concat(_,"px)"),s):((o={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,o.position="absolute",o.top=0,o.transform="translate(".concat(g,"px, ").concat(_,"px)"),o)}if(i===t.nE.DualPage)return(l={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,l.position="absolute",l.top=0,l.transform="translate(".concat(g,"px, ").concat(a===t.VT.Page?0:e.start.top,"px)"),l;switch(a){case t.VT.Horizontal:return(c={height:"100%",width:"".concat(b,"px")})[p]=0,c.position="absolute",c.top=0,c.transform="translateX(".concat(g,"px)"),c;case t.VT.Page:return(d={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,d.position="absolute",d.top=0,d;case t.VT.Wrapped:return(u={height:"".concat(y,"px"),width:"".concat(b,"px")})[p]=0,u.position="absolute",u.top=0,u.transform="translate(".concat(g,"px, ").concat(e.start.top,"px)"),u;case t.VT.Vertical:default:return(h={height:"".concat(y,"px"),width:"100%"})[p]=0,h.position="absolute",h.top=0,h.transform="translateY(".concat(e.start.top,"px)"),h}}(e,n,l,y.current,v.current)}),[n,l]),Y=o.useCallback((function(e,n){var i=k.current,a=i.measurements,s=i.scrollOffset,o=a[tt(0,r-1,n)];if(o){var l=v.current===t.VT.Page?{left:o.start.left,top:o.start.top}:{left:s.left*e,top:s.top*e};x(l,!1)}}),[]);return o.useEffect((function(){return function(){T.disconnect()}}),[]),{boundingClientRect:C,isSmoothScrolling:p,startIndex:N,startRange:L,endIndex:j,endRange:D,maxVisbilityIndex:O,virtualItems:B,getContainerStyles:W,getItemContainerStyles:V,getItemStyles:K,scrollToItem:q,scrollToNextItem:z,scrollToPreviousItem:H,zoom:Y}},ht=function(e,n,r,i,a,s){var o=r;switch(!0){case a===t.nE.DualPageWithCover&&s>=3:case a===t.nE.DualPage&&s>=3:o=2*r;break;default:o=r}switch(i){case t.dD.ActualSize:return 1;case t.dD.PageFit:return Math.min((e.clientWidth-17)/o,(e.clientHeight-16)/n);case t.dD.PageWidth:return(e.clientWidth-17)/o}},pt=function(e){var t=[];return e.map((function(e){t=t.concat(e).concat(function(e){var t=[];return e.items&&e.items.length>0&&(t=t.concat(pt(e.items))),t}(e))})),t},ft={buildPageStyles:function(){return{}},transformSize:function(e){return e.size}},mt={left:0,top:0},gt=function(e){var n=e.currentFile,r=e.defaultScale,i=e.doc,a=e.initialPage,s=e.initialRotation,l=e.initialScale,c=e.pageLayout,d=e.pageSizes,u=e.plugins,p=e.renderPage,v=e.scrollMode,y=e.viewMode,b=e.viewerState,_=e.onDocumentLoad,w=e.onOpenFile,x=e.onPageChange,S=e.onRotate,P=e.onRotatePage,E=e.onZoom,I=i.numPages,F=i.loadingTask.docId,R=o.useContext(T).l10n,N=o.useContext(f),j=N.direction===t.z4.RightToLeft,M=o.useRef(),O=o.useRef(),L=o.useState(a),D=L[0],B=L[1],q=o.useRef(null),U=o.useState(s),G=U[0],z=U[1],H=k(G),W=o.useState(!1),V=W[0],K=W[1],Y=o.useState(new Map),X=Y[0],J=Y[1],Q=o.useState(v),$=Q[0],ne=Q[1],re=k($),ae=o.useState(y),se=ae[0],oe=ae[1],le=k(se),ce=function(e){var t=C(),n=o.useState([]),r=n[0],i=n[1];return o.useEffect((function(){e.getOutline().then((function(e){if(t.current&&null!==e){var n=pt(e);i(n)}}))}),[]),r}(i),de=o.useState(l),ue=de[0],he=de[1],pe=k(ue),fe=o.useRef(b),me=o.useRef("string"==typeof r?r:null),ge=o.useState(-1),ve=ge[0],ye=ge[1],be=o.useState(0),_e=be[0],we=be[1],xe=A({doc:i});o.useEffect((function(){return function(){ee.clear(),te.clear()}}),[F]);var Ce,ke,Se,Pe=o.useMemo((function(){return Object.assign({},ft,c)}),[]),Ae=o.useMemo((function(){return Array(I).fill(0).map((function(e,t){var n=[d[t].pageHeight,d[t].pageWidth],r=Math.abs(G)%180==0?{height:n[0],width:n[1]}:{height:n[1],width:n[0]},i={height:r.height*ue,width:r.width*ue};return Pe.transformSize({numPages:I,pageIndex:t,size:i})}))}),[G,ue]),Ee=o.useCallback((function(e){return Math.max(e-3,0)}),[]),Te=o.useCallback((function(e){return Math.min(e+3,I-1)}),[I]),Ie=ut({isRtl:j,numberOfItems:I,parentRef:O,scrollMode:$,setStartRange:Ee,setEndRange:Te,sizes:Ae,viewMode:se}),Fe=(Ce=function(e){me.current&&(ye(-1),He(me.current))},ke=o.useRef(),Se=function(){ke.current&&clearTimeout(ke.current)},o.useEffect((function(){return function(){return Se()}}),[]),o.useCallback((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Se(),ke.current=setTimeout((function(){Ce.apply(void 0,e)}),200)}),[Ce,200]));!function(e){var t=e.targetRef,n=e.onResize;g((function(){var e=new ResizeObserver((function(e){e.forEach((function(e){n(e.target)}))})),r=t.current;if(r)return e.observe(r),function(){e.unobserve(r)}}),[])}({targetRef:O,onResize:Fe});var Re=function(e){var t=e;u.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),fe.current=t},Ne=function(){return O.current},je=function(){return fe.current},Me=o.useCallback((function(e,n,r,a){var s=O.current,o=fe.current;s&&o&&ie(i,e).then((function(i){var l=i.getViewport({scale:1}),c=0,u=("function"==typeof n?n(l.width,l.height):n)||0,h=("function"==typeof r?r(l.width,l.height):r)||0,p=o.scale;switch(a){case t.dD.PageFit:c=0,h=0,He(t.dD.PageFit);break;case t.dD.PageWidth:p=ht(s,d[e].pageHeight,d[e].pageWidth,t.dD.PageWidth,y,I),c=(l.height-u)*p,h*=p,He(p);break;default:c=(l.height-u)*p,h*=p}switch(o.scrollMode){case t.VT.Horizontal:Ie.scrollToItem(e,{left:h,top:0});break;case t.VT.Vertical:default:Ie.scrollToItem(e,{left:0,top:c})}}))}),[]),Oe=o.useCallback((function(){Ie.scrollToNextItem(fe.current.pageIndex,mt)}),[]),Le=o.useCallback((function(e){0<=e&&e<I&&Ie.scrollToItem(e,mt)}),[]),De=o.useCallback((function(){Ie.scrollToPreviousItem(fe.current.pageIndex,mt)}),[]),Be=o.useCallback((function(e){var t,n;"pdf"===(t=e.name,n=t.split(/\./).pop(),n?n.toLowerCase():"").toLowerCase()&&new Promise((function(t){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){var e=new Uint8Array(n.result);t(e)}})).then((function(t){w(e.name,t)}))}),[w]),qe=o.useCallback((function(e){var n=e===t.pT.Backward?-90:90,r=fe.current.rotation,a=360===r||-360===r?n:r+n;xe.markNotRendered(),z(a),Re(h(h({},fe.current),{rotation:a})),S({direction:e,doc:i,rotation:a})}),[]),Ue=o.useCallback((function(e,n){var r=n===t.pT.Backward?-90:90,a=fe.current.pagesRotation,o=(a.has(e)?a.get(e):s)+r,l=a.set(e,o);J(l),K((function(e){return!e})),Re(h(h({},fe.current),{pagesRotation:l,rotatedPage:e})),P({direction:n,doc:i,pageIndex:e,rotation:o}),xe.markRendering(e),ye(e)}),[]),Ge=o.useCallback((function(e){Re(h(h({},fe.current),{scrollMode:e})),ne(e)}),[]),ze=o.useCallback((function(e){Re(h(h({},fe.current),{viewMode:e})),oe(e)}),[]),He=o.useCallback((function(e){var t=O.current,n=fe.current.pageIndex;if(!(n<0||n>=I)){var r=d[n].pageHeight,a=d[n].pageWidth,s=t?"string"==typeof e?ht(t,r,a,e,fe.current.viewMode,I):e:1;me.current="string"==typeof e?e:null,s!==fe.current.scale&&(we((function(e){return e+1})),xe.markNotRendered(),he(s),E({doc:i,scale:s}),Re(h(h({},fe.current),{scale:s})))}}),[]);o.useEffect((function(){var e={getPagesContainer:Ne,getViewerState:je,jumpToDestination:Me,jumpToNextPage:Oe,jumpToPreviousPage:De,jumpToPage:Le,openFile:Be,rotate:qe,rotatePage:Ue,setViewerState:Re,switchScrollMode:Ge,switchViewMode:ze,zoom:He};return u.forEach((function(t){t.install&&t.install(e)})),function(){u.forEach((function(t){t.uninstall&&t.uninstall(e)}))}}),[F]),o.useEffect((function(){_({doc:i,file:n}),u.forEach((function(e){e.onDocumentLoad&&e.onDocumentLoad({doc:i,file:n})}))}),[F]),g((function(){var e=Ie.boundingClientRect;e.height>0&&e.width>0&&a&&Le(a)}),[F,Ie.boundingClientRect]),g((function(){var e=fe.current.pageIndex;e>-1&&re!==$&&Ie.scrollToItem(e,mt)}),[$]),g((function(){var e=fe.current.pageIndex;e>-1&&H!==G&&Ie.scrollToItem(e,mt)}),[G]),g((function(){0!=pe&&pe!=fe.current.scale&&Ie.zoom(fe.current.scale/pe,fe.current.pageIndex)}),[ue]),g((function(){if(le!==fe.current.viewMode){var e=Ie.startRange,t=Ie.endRange,n=Ie.virtualItems;xe.markNotRendered(),xe.setRange(e,t);for(var r=function(e){var t=n.find((function(t){return t.index===e}));t&&xe.setVisibility(e,t.visibility)},i=e;i<=t;i++)r(i);Ve()}}),[se]),g((function(){var e=fe.current.pageIndex;e>-1&&le!==se&&Ie.scrollToItem(e,mt)}),[se]),o.useEffect((function(){Ie.isSmoothScrolling||null!==q.current&&q.current===D||(q.current=D,x({currentPage:D,doc:i}))}),[D,Ie.isSmoothScrolling]),o.useEffect((function(){var e=Ie.startRange,t=Ie.endRange,n=Ie.maxVisbilityIndex,r=Ie.virtualItems,i=n;B(i),Re(h(h({},fe.current),{pageIndex:i})),xe.setRange(e,t);for(var a=function(e){var t=r.find((function(t){return t.index===e}));t&&xe.setVisibility(e,t.visibility)},s=e;s<=t;s++)a(s);Ve()}),[Ie.startRange,Ie.endRange,Ie.maxVisbilityIndex,V,G,ue]);var We=o.useCallback((function(e){xe.markRendered(e),Ve()}),[_e]),Ve=function(){var e=xe.getHighestPriorityPage();e>-1&&xe.isInRange(e)&&(xe.markRendering(e),ye(e))},Ke=function(e){var t=D-1,n=D+1;switch(e){case"FirstPage":Le(0);break;case"LastPage":Le(I-1);break;case"NextPage":n<I&&Le(n);break;case"PrevPage":t>=0&&Le(t)}},Xe=o.useCallback((function(){var e=Ie.virtualItems,n=[];switch(se){case t.nE.DualPage:n=Z(e,2);break;case t.nE.DualPageWithCover:e.length&&(n=0===e[0].index?[[e[0]]].concat(Z(e.slice(1),2)):Z(e,2));break;case t.nE.SinglePage:default:n=Z(e,1)}var r=R&&R.core?R.core.pageLabel:"Page {{pageIndex}}",a={attrs:{"data-testid":"core__inner-container",ref:M,style:{height:"100%"}},children:o.createElement(o.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:m({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":$===t.VT.Horizontal,"rpv-core__inner-pages--rtl":j,"rpv-core__inner-pages--single":$===t.VT.Page,"rpv-core__inner-pages--vertical":$===t.VT.Vertical,"rpv-core__inner-pages--wrapped":$===t.VT.Wrapped}),ref:O,style:{height:"100%",position:"relative"}},children:o.createElement("div",{style:Object.assign({"--scale-factor":ue},Ie.getContainerStyles())},n.map((function(e){return o.createElement("div",{className:m({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":$===t.VT.Page}),style:Ie.getItemContainerStyles(e[0]),key:"".concat(e[0].index,"-").concat(se)},e.map((function(e){var n=se===t.nE.DualPageWithCover&&(0===e.index||I%2==0&&e.index===I-1);return o.createElement("div",{"aria-label":r.replace("{{pageIndex}}","".concat(e.index+1)),className:m({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":se===t.nE.DualPage&&e.index%2==0,"rpv-core__inner-page--dual-odd":se===t.nE.DualPage&&e.index%2==1,"rpv-core__inner-page--dual-cover":n,"rpv-core__inner-page--dual-cover-even":se===t.nE.DualPageWithCover&&!n&&e.index%2==0,"rpv-core__inner-page--dual-cover-odd":se===t.nE.DualPageWithCover&&!n&&e.index%2==1,"rpv-core__inner-page--single":se===t.nE.SinglePage&&$===t.VT.Page}),role:"region",key:"".concat(e.index,"-").concat(se),style:Object.assign({},Ie.getItemStyles(e),Pe.buildPageStyles({numPages:I,pageIndex:e.index,scrollMode:$,viewMode:se}))},o.createElement(Ye,{doc:i,measureRef:e.measureRef,outlines:ce,pageIndex:e.index,pageRotation:X.has(e.index)?X.get(e.index):0,pageSize:d[e.index],plugins:u,renderPage:p,renderQueueKey:_e,rotation:G,scale:ue,shouldRender:ve===e.index,viewMode:se,onExecuteNamedAction:Ke,onJumpToDest:Me,onRenderCompleted:We,onRotatePage:Ue}))})))})))}};return u.forEach((function(e){e.renderViewer&&(a=e.renderViewer({containerRef:M,doc:i,pagesContainerRef:O,pagesRotation:X,pageSizes:d,rotation:G,slot:a,themeContext:N,jumpToPage:Le,openFile:Be,rotate:qe,rotatePage:Ue,switchScrollMode:Ge,switchViewMode:ze,zoom:He}))})),a}),[u,Ie]),Je=o.useCallback((function(e){return o.createElement("div",h({},e.attrs,{style:e.attrs&&e.attrs.style?e.attrs.style:{}}),e.children,e.subSlot&&Je(e.subSlot))}),[]);return Je(Xe())},vt=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],yt=function(e){var n=e.defaultScale,r=e.doc,i=e.render,a=e.scrollMode,s=e.viewMode,l=o.useRef(),c=o.useState({pageSizes:[],scale:0}),d=c[0],u=c[1];return o.useLayoutEffect((function(){var e=Array(r.numPages).fill(0).map((function(e,t){return new Promise((function(e,n){ie(r,t).then((function(t){var n=t.getViewport({scale:1});e({pageHeight:n.height,pageWidth:n.width,rotation:n.rotation})}))}))}));Promise.all(e).then((function(e){var i=l.current;if(i&&0!==e.length){var o=e[0].pageWidth,c=e[0].pageHeight,d=i.parentElement,h=(d.clientWidth-45)/o,p=(d.clientHeight-45)/c,f=h;switch(a){case t.VT.Horizontal:f=Math.min(h,p);break;case t.VT.Vertical:default:f=h}var m,g,v=n?"string"==typeof n?ht(d,c,o,n,s,r.numPages):n:(m=f,-1===(g=vt.findIndex((function(e){return e>=m})))||0===g?m:vt[g-1]);u({pageSizes:e,scale:v})}}))}),[r.loadingTask.docId]),0===d.pageSizes.length||0===d.scale?o.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:l},o.createElement(w,null)):i(d.pageSizes,d.scale)},bt=function(){},_t=function(e){function t(t,n){var r=e.call(this)||this;return r.verifyPassword=t,r.passwordStatus=n,r}return d(t,e),t}(bt),wt=function(e){var n=e.passwordStatus,r=e.renderProtectedView,i=e.verifyPassword,a=e.onDocumentAskPassword,s=o.useContext(T).l10n,l=o.useState(""),c=l[0],d=l[1],u=o.useContext(f).direction===t.z4.RightToLeft,h=function(){return i(c)};return o.useEffect((function(){a&&a({verifyPassword:i})}),[]),r?r({passwordStatus:n,verifyPassword:i}):o.createElement("div",{className:"rpv-core__asking-password-wrapper"},o.createElement("div",{className:m({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":u})},o.createElement("div",{className:"rpv-core__asking-password-message"},n===t.a9.RequiredPassword&&s.core.askingPassword.requirePasswordToOpen,n===t.a9.WrongPassword&&s.core.wrongPassword.tryAgain),o.createElement("div",{className:"rpv-core__asking-password-body"},o.createElement("div",{className:m({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!u,"rpv-core__asking-password-input--rtl":u})},o.createElement(x,{testId:"core__asking-password-input",type:"password",value:c,onChange:d,onKeyDown:function(e){"Enter"===e.key&&h()}})),o.createElement(_,{onClick:h},s.core.askingPassword.submit))))},xt=function(e){function t(t){var n=e.call(this)||this;return n.doc=t,n}return d(t,e),t}(bt),Ct=function(e){function t(t){var n=e.call(this)||this;return n.error=t,n}return d(t,e),t}(bt),kt=function(e){function t(t){var n=e.call(this)||this;return n.percentages=t,n}return d(t,e),t}(bt),St=function(e){var n=e.characterMap,r=e.file,i=e.httpHeaders,a=e.render,s=e.renderError,c=e.renderLoader,d=e.renderProtectedView,u=e.transformGetDocumentParams,h=e.withCredentials,p=e.onDocumentAskPassword,g=o.useContext(f).direction===t.z4.RightToLeft,v=o.useState(new kt(0)),y=v[0],b=v[1],_=o.useRef(""),x=C();return o.useEffect((function(){_.current="",b(new kt(0));var e=new l.PDFWorker({name:"PDFWorker_".concat(Date.now())}),a=Object.assign({httpHeaders:i,withCredentials:h,worker:e},"string"==typeof r?{url:r}:{data:r},n?{cMapUrl:n.url,cMapPacked:n.isCompressed}:{}),s=u?u(a):a,o=l.getDocument(s);return o.onPassword=function(e,n){switch(n){case l.PasswordResponses.NEED_PASSWORD:x.current&&b(new _t(e,t.a9.RequiredPassword));break;case l.PasswordResponses.INCORRECT_PASSWORD:x.current&&b(new _t(e,t.a9.WrongPassword))}},o.onProgress=function(e){var t=e.total>0?Math.min(100,100*e.loaded/e.total):100;x.current&&""===_.current&&b(new kt(t))},o.promise.then((function(e){_.current=e.loadingTask.docId,x.current&&b(new xt(e))}),(function(t){return x.current&&!e.destroyed&&b(new Ct({message:t.message||"Cannot load document",name:t.name}))})),function(){o.destroy(),e.destroy()}}),[r]),y instanceof _t?o.createElement(wt,{passwordStatus:y.passwordStatus,renderProtectedView:d,verifyPassword:y.verifyPassword,onDocumentAskPassword:p}):y instanceof xt?a(y.doc):y instanceof Ct?s?s(y.error):o.createElement("div",{className:m({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":g})},o.createElement("div",{className:"rpv-core__doc-error-text"},y.error.message)):o.createElement("div",{"data-testid":"core__doc-loading",className:m({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":g})},c?c(y.percentages):o.createElement(w,null))};t.Viewer=function(e){var n=e.characterMap,r=e.defaultScale,i=e.fileUrl,a=e.httpHeaders,s=void 0===a?{}:a,l=e.initialPage,c=void 0===l?0:l,d=e.pageLayout,u=e.initialRotation,h=void 0===u?0:u,p=e.localization,m=e.plugins,g=void 0===m?[]:m,y=e.renderError,b=e.renderLoader,_=e.renderPage,w=e.renderProtectedView,x=e.scrollMode,C=void 0===x?t.VT.Vertical:x,S=e.transformGetDocumentParams,P=e.theme,A=void 0===P?{direction:t.z4.LeftToRight,theme:"light"}:P,I=e.viewMode,F=void 0===I?t.nE.SinglePage:I,R=e.withCredentials,N=void 0!==R&&R,j=e.onDocumentAskPassword,M=e.onDocumentLoad,O=void 0===M?function(){}:M,L=e.onPageChange,D=void 0===L?function(){}:L,B=e.onRotate,q=void 0===B?function(){}:B,U=e.onRotatePage,G=void 0===U?function(){}:U,z=e.onSwitchTheme,H=void 0===z?function(){}:z,W=e.onZoom,V=void 0===W?function(){}:W,K=o.useState({data:i,name:"string"==typeof i?i:"",shouldLoad:!1}),Y=K[0],X=K[1],J=function(e,t){X({data:t,name:e,shouldLoad:!0})},Q=o.useState(!1),Z=Q[0],$=Q[1],ee=k(Y);o.useEffect((function(){var e,t,n,r;e=ee.data,r=typeof(t=i),"string"===(n=typeof e)&&"string"===r&&e===t||"object"===n&&"object"===r&&e.length===t.length&&e.every((function(e,n){return e===t[n]}))||X({data:i,name:"string"==typeof i?i:"",shouldLoad:Z})}),[i,Z]);var te=v({onVisibilityChanged:function(e){$(e.isVisible),e.isVisible&&X((function(e){return Object.assign({},e,{shouldLoad:!0})}))}}),ne="string"==typeof A?{direction:t.z4.LeftToRight,theme:A}:A,re=o.useState(p||E),ie=re[0],ae=re[1],se={l10n:ie,setL10n:ae},oe=Object.assign({},{direction:ne.direction},function(e,t){var n=o.useMemo((function(){return"auto"===e?"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}),[]),r=o.useState(n),i=r[0],a=r[1],s=k(i);return o.useEffect((function(){if("auto"===e){var t=window.matchMedia("(prefers-color-scheme: dark)"),n=function(e){a(e.matches?"dark":"light")};return t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}}),[]),o.useEffect((function(){i!==s&&t&&t(i)}),[i]),o.useEffect((function(){e!==i&&a(e)}),[e]),{currentTheme:i,setCurrentTheme:a}}(ne.theme||"light",H));return o.useEffect((function(){p&&ae(p)}),[p]),o.createElement(T.Provider,{value:se},o.createElement(f.Provider,{value:oe},o.createElement("div",{ref:te,className:"rpv-core__viewer rpv-core__viewer--".concat(oe.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Y.shouldLoad&&o.createElement(St,{characterMap:n,file:Y.data,httpHeaders:s,render:function(e){return o.createElement(yt,{defaultScale:r,doc:e,render:function(t,n){return o.createElement(gt,{currentFile:{data:Y.data,name:Y.name},defaultScale:r,doc:e,initialPage:c,initialRotation:h,initialScale:n,pageLayout:d,pageSizes:t,plugins:g,renderPage:_,scrollMode:C,viewMode:F,viewerState:{file:Y,pageIndex:-1,pageHeight:t[0].pageHeight,pageWidth:t[0].pageWidth,pagesRotation:new Map,rotation:h,scale:n,scrollMode:C,viewMode:F},onDocumentLoad:O,onOpenFile:J,onPageChange:D,onRotate:q,onRotatePage:G,onZoom:V})},scrollMode:C,viewMode:F})},renderError:y,renderLoader:b,renderProtectedView:w,transformGetDocumentParams:S,withCredentials:N,onDocumentAskPassword:j}))))},t.Worker=function(e){var t=e.children,n=e.workerUrl;return l.GlobalWorkerOptions.workerSrc=n,o.createElement(o.Fragment,null,t)}},237:(e,t,n)=>{"use strict";e.exports=n(839)},749:(module,__unused_webpack_exports,__webpack_require__)=>{var _objectSpread=__webpack_require__(897).default,_classPrivateGetter=__webpack_require__(183).default,_defineProperty=__webpack_require__(693).default,_classPrivateMethodInitSpec=__webpack_require__(312).default,_assertClassBrand=__webpack_require__(756).default,_classPrivateFieldInitSpec=__webpack_require__(459).default,_classPrivateFieldGet=__webpack_require__(668).default,_classPrivateFieldSet=__webpack_require__(88).default,root,factory;root=globalThis,factory=()=>(()=>{"use strict";var __webpack_modules__=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=function(e,t){e||o(t)},t.bytesToString=d,t.createValidAbsoluteUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=f(e)}catch(r){}}const i=t?new URL(e,t):new URL(e);if(function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch(i){}return null},t.getModificationDate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getUuid=function(){var e,t;if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.randomUUID))return crypto.randomUUID();const n=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.getRandomValues))crypto.getRandomValues(n);else for(let r=0;r<32;r++)n[r]=Math.floor(255*Math.random());return d(n)},t.getVerbosityLevel=function(){return a},t.info=function(e){a>=i.INFOS&&console.log("Info: ".concat(e))},t.isArrayBuffer=function(e){return"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.byteLength)},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},t.isNodeJS=void 0,t.normalizeUnicode=function(e){return g||(g=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,v=new Map([["\ufb05","\u017ft"]])),e.replaceAll(g,((e,t,n)=>t?t.normalize("NFKC"):v.get(n)))},t.objectFromMap=function(e){const t=Object.create(null);for(const[n,r]of e)t[n]=r;return t},t.objectSize=function(e){return Object.keys(e).length},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(a=e)},t.shadow=l,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=u,t.stringToPDFString=function(e){if(e[0]>="\xef"){let t;if("\xfe"===e[0]&&"\xff"===e[1]?t="utf-16be":"\xff"===e[0]&&"\xfe"===e[1]?t="utf-16le":"\xef"===e[0]&&"\xbb"===e[1]&&"\xbf"===e[2]&&(t="utf-8"),t)try{const n=new TextDecoder(t,{fatal:!0}),r=u(e);return n.decode(r)}catch(n){s('stringToPDFString: "'.concat(n,'".'))}}const t=[];for(let r=0,i=e.length;r<i;r++){const n=p[e.charCodeAt(r)];t.push(n?String.fromCharCode(n):e.charAt(r))}return t.join("")},t.stringToUTF8String=f,t.unreachable=o,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=s;const n="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n,t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.MAX_IMAGE_SIZE_TO_CACHE=1e7,t.LINE_FACTOR=1.35,t.LINE_DESCENT_FACTOR=.35;const r=.35/1.35;t.BASELINE_FACTOR=r,t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.AnnotationEditorPrefix="pdfjs_internal_editor_",t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},t.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"};const i={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=i,t.CMapCompressionType={NONE:0,BINARY:1},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let a=i.WARNINGS;function s(e){a>=i.WARNINGS&&console.log("Warning: ".concat(e))}function o(e){throw new Error(e)}function l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const c=function(){function e(t,n){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();function d(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||o("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let i=0;i<t;i+=n){const a=Math.min(i+n,t),s=e.subarray(i,a);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function u(e){"string"!==typeof e&&o("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}t.BaseException=c,t.PasswordException=class extends c{constructor(e,t){super(e,"PasswordException"),this.code=t}},t.UnknownErrorException=class extends c{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},t.InvalidPDFException=class extends c{constructor(e){super(e,"InvalidPDFException")}},t.MissingPDFException=class extends c{constructor(e){super(e,"MissingPDFException")}},t.UnexpectedResponseException=class extends c{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},t.FormatError=class extends c{constructor(e){super(e,"FormatError")}},t.AbortException=class extends c{constructor(e){super(e,"AbortException")}},t.FeatureTest=class{static get isLittleEndian(){return l(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return l(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return l(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){return"undefined"===typeof navigator?l(this,"platform",{isWin:!1,isMac:!1}):l(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var e,t;return l(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}};const h=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));t.Util=class{static makeHexColor(e,t,n){return"#".concat(h[e]).concat(h[t]).concat(h[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[2],t[2]=n,n=t[1],t[1]=t[3],t[3]=n,e[1]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],s=(n+a)/2,o=Math.sqrt((n+a)**2-4*(n*a-i*r))/2,l=s+o||1,c=s-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static bezierBoundingBox(e,t,n,r,i,a,s,o){const l=[],c=[[],[]];let d,u,h,p,f,m,g,v;for(let w=0;w<2;++w)if(0===w?(u=6*e-12*n+6*i,d=-3*e+9*n-9*i+3*s,h=3*n-3*e):(u=6*t-12*r+6*a,d=-3*t+9*r-9*a+3*o,h=3*r-3*t),Math.abs(d)<1e-12){if(Math.abs(u)<1e-12)continue;p=-h/u,0<p&&p<1&&l.push(p)}else g=u*u-4*h*d,v=Math.sqrt(g),g<0||(f=(-u+v)/(2*d),0<f&&f<1&&l.push(f),m=(-u-v)/(2*d),0<m&&m<1&&l.push(m));let y,b=l.length;const _=b;for(;b--;)p=l[b],y=1-p,c[0][b]=y*y*y*e+3*y*y*p*n+3*y*p*p*i+p*p*p*s,c[1][b]=y*y*y*t+3*y*y*p*r+3*y*p*p*a+p*p*p*o;return c[0][_]=e,c[1][_]=t,c[0][_+1]=s,c[1][_+1]=o,c[0].length=c[1].length=_+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}};const p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(e){return decodeURIComponent(escape(e))}var m=new WeakMap;t.PromiseCapability=class{constructor(){_classPrivateFieldInitSpec(this,m,!1),this.promise=new Promise(((e,t)=>{this.resolve=t=>{_classPrivateFieldSet(m,this,!0),e(t)},this.reject=e=>{_classPrivateFieldSet(m,this,!0),t(e)}}))}get settled(){return _classPrivateFieldGet(m,this)}};let g=null,v=null;t.AnnotationPrefix="pdfjs_internal_id_"},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(e){var t,n;if("string"===typeof e||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),"object"!==typeof e)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const r=new PDFDocumentLoadingTask,{docId:i}=r,a=e.url?getUrlProp(e.url):null,s=e.data?getDataProp(e.data):null,o=e.httpHeaders||null,l=!0===e.withCredentials,c=null!==(t=e.password)&&void 0!==t?t:null,d=e.range instanceof PDFDataRangeTransport?e.range:null,u=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let h=e.worker instanceof PDFWorker?e.worker:null;const p=e.verbosity,f="string"!==typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,m="string"===typeof e.cMapUrl?e.cMapUrl:null,g=!1!==e.cMapPacked,v=e.CMapReaderFactory||DefaultCMapReaderFactory,y="string"===typeof e.standardFontDataUrl?e.standardFontDataUrl:null,b=e.StandardFontDataFactory||DefaultStandardFontDataFactory,_=!0!==e.stopAtErrors,w=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,x=!1!==e.isEvalSupported,C="boolean"===typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!_util.isNodeJS,k=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,S="boolean"===typeof e.disableFontFace?e.disableFontFace:_util.isNodeJS,P=!0===e.fontExtraProperties,A=!0===e.enableXfa,E=e.ownerDocument||globalThis.document,T=!0===e.disableRange,I=!0===e.disableStream,F=!0===e.disableAutoFetch,R=!0===e.pdfBug,N=d?d.length:null!==(n=e.length)&&void 0!==n?n:NaN,j="boolean"===typeof e.useSystemFonts?e.useSystemFonts:!_util.isNodeJS&&!S,M="boolean"===typeof e.useWorkerFetch?e.useWorkerFetch:v===_display_utils.DOMCMapReaderFactory&&b===_display_utils.DOMStandardFontDataFactory&&m&&y&&(0,_display_utils.isValidFetchUrl)(m,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(y,document.baseURI),O=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:E}),L=e.filterFactory||new DefaultFilterFactory({docId:i,ownerDocument:E});(0,_util.setVerbosityLevel)(p);const D={canvasFactory:O,filterFactory:L};if(M||(D.cMapReaderFactory=new v({baseUrl:m,isCompressed:g}),D.standardFontDataFactory=new b({baseUrl:y})),!h){const e={verbosity:p,port:_worker_options.GlobalWorkerOptions.workerPort};h=e.port?PDFWorker.fromPort(e):new PDFWorker(e),r._worker=h}const B={docId:i,apiVersion:"3.11.174",data:s,password:c,disableAutoFetch:F,rangeChunkSize:u,length:N,docBaseUrl:f,enableXfa:A,evaluatorOptions:{maxImageSize:w,disableFontFace:S,ignoreErrors:_,isEvalSupported:x,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:k,fontExtraProperties:P,useSystemFonts:j,cMapUrl:M?m:null,standardFontDataUrl:M?y:null}},q={ignoreErrors:_,isEvalSupported:x,disableFontFace:S,fontExtraProperties:P,enableXfa:A,ownerDocument:E,disableAutoFetch:F,pdfBug:R,styleElement:null};return h.promise.then((function(){if(r.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(h,B),t=new Promise((function(e){let t;var n;d?t=new _transport_stream.PDFDataTransportStream({length:N,initialData:d.initialData,progressiveDone:d.progressiveDone,contentDispositionFilename:d.contentDispositionFilename,disableRange:T,disableStream:I},d):s||(n={url:a,length:N,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:T,disableStream:I},t=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(n):(0,_display_utils.isValidFetchUrl)(n.url)?new _displayFetch_stream.PDFFetchStream(n):new _displayNetwork.PDFNetworkStream(n)),e(t)}));return Promise.all([e,t]).then((function(e){let[t,n]=e;if(r.destroyed)throw new Error("Loading aborted");const a=new _message_handler.MessageHandler(i,t,h.port),s=new WorkerTransport(a,r,n,q,D);r._transport=s,a.send("Ready",null)}))})).catch(r._capability.reject),r}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const n=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(_util.isNodeJS&&"string"===typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return(0,_util.stringToBytes)(e);if("object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{constructor(){var e,t;this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d".concat((_docId._=(e=_docId._,t=e++,e),t)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var e,t;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(t=this._transport)||void 0===t?void 0:t.destroy())}catch(r){var n;throw null!==(n=this._worker)&&void 0!==n&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}var _docId={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then((e=>{if(!e)return e;const t=[];for(const n in e)t.push(...e[n]);return t})))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_PDFPageProxy_brand=new WeakSet;class PDFPageProxy{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classPrivateMethodInitSpec(this,_PDFPageProxy_brand),_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,null),_classPrivateFieldInitSpec(this,_pendingCleanup,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new _display_utils.StatTimer:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:r,viewport:i,intent:a="display",annotationMode:s=_util.AnnotationMode.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:h=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(a,s,h);_classPrivateFieldSet(_pendingCleanup,this,!1),_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this),c||(c=this._transport.getOptionalContentConfig());let f=this._intentStates.get(p.cacheKey);f||(f=Object.create(null),this._intentStates.set(p.cacheKey,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const m=!!(p.renderingIntent&_util.RenderingIntentFlag.PRINT);var g;f.displayReadyCapability||(f.displayReadyCapability=new _util.PromiseCapability,f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(g=this._stats)||void 0===g||g.time("Page Request"),this._pumpOperatorList(p));const v=e=>{var t,n;f.renderTasks.delete(y),(this._maybeCleanupAfterRender||m)&&_classPrivateFieldSet(_pendingCleanup,this,!0),_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!m),e?(y.capability.reject(e),this._abortOperatorList({intentState:f,reason:e instanceof Error?e:new Error(e)})):y.capability.resolve(),null===(t=this._stats)||void 0===t||t.timeEnd("Rendering"),null===(n=this._stats)||void 0===n||n.timeEnd("Overall")},y=new InternalRenderTask({callback:v,params:{canvasContext:r,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:u});((n=f).renderTasks||(n.renderTasks=new Set)).add(y);const b=y.task;return Promise.all([f.displayReadyCapability.promise,c]).then((e=>{var t;let[n,r]=e;this.destroyed?v():(null===(t=this._stats)||void 0===t||t.time("Rendering"),y.initializeGraphics({transparency:n,optionalContentConfig:r}),y.operatorListChanged())})).catch(v),b}getOperatorList(){let{intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,!0);let i,a=this._intentStates.get(r.cacheKey);var s,o;return a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability||(i=Object.create(null),i.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(i))},a.opListReadCapability=new _util.PromiseCapability,((s=a).renderTasks||(s.renderTasks=new Set)).add(i),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(o=this._stats)||void 0===o||o.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>_xfa_text.XfaText.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const r=t.getReader(),i={items:[],styles:Object.create(null)};!function t(){r.read().then((function(n){let{value:r,done:a}=n;a?e(i):(Object.assign(i.styles,r.styles),i.items.push(...r.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),_classPrivateFieldSet(_pendingCleanup,this,!1),_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classPrivateFieldSet(_pendingCleanup,this,!0);const t=_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!1);return e&&t&&this._stats&&(this._stats=new _display_utils.StatTimer),t}_startRenderPage(e,t){var n,r;const i=this._intentStates.get(t);i&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(r=i.displayReadyCapability)||void 0===r||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:r}=e;const{map:i,transfers:a}=r,s=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:i},a).getReader(),o=this._intentStates.get(n);o.streamReader=s;const l=()=>{s.read().then((e=>{let{value:t,done:n}=e;n?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,o),l())}),(e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const e of o.renderTasks)e.operatorListChanged();_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else{if(!o.opListReadCapability)throw e;o.opListReadCapability.reject(e)}}}))};l()}_abortOperatorList(e){let{intentState:t,reason:n,force:r=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let e=RENDERING_CANCELLED_TIMEOUT;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function _tryCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this),!_classPrivateFieldGet(_pendingCleanup,this)||this.destroyed)return!1;if(e)return _classPrivateFieldSet(_delayedCleanupTimeout,this,setTimeout((()=>{_classPrivateFieldSet(_delayedCleanupTimeout,this,null),_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!1)}),DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_classPrivateFieldSet(_pendingCleanup,this,!1),!0}function _abortDelayedCleanup(){_classPrivateFieldGet(_delayedCleanupTimeout,this)&&(clearTimeout(_classPrivateFieldGet(_delayedCleanupTimeout,this)),_classPrivateFieldSet(_delayedCleanupTimeout,this,null))}exports.PDFPageProxy=PDFPageProxy;var _listeners=new WeakMap,_deferred=new WeakMap;class LoopbackPort{constructor(){_classPrivateFieldInitSpec(this,_listeners,new Set),_classPrivateFieldInitSpec(this,_deferred,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};_classPrivateFieldGet(_deferred,this).then((()=>{for(const e of _classPrivateFieldGet(_listeners,this))e.call(this,n)}))}addEventListener(e,t){_classPrivateFieldGet(_listeners,this).add(t)}removeEventListener(e,t){_classPrivateFieldGet(_listeners,this).delete(t)}terminate(){_classPrivateFieldGet(_listeners,this).clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"===typeof document){var _document;const e=null===(_document=document)||void 0===_document||null===(_document=_document.currentScript)||void 0===_document?void 0:_document.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(i){return!1}const r=new URL(t,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([t]))};class PDFWorker{constructor(){let{name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){var r;if(null!==(r=_workerPorts._)&&void 0!==r&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(_workerPorts._||(_workerPorts._=new WeakMap)).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),n=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",i),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||r()};e.addEventListener("error",i),n.on("test",(t=>{e.removeEventListener("error",i),this.destroyed?r():t?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())})),n.on("ready",(t=>{if(e.removeEventListener("error",i),this.destroyed)r();else try{a()}catch(n){this._setupFakeWorker()}}));const a=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void a()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const n="fake".concat(PDFWorkerUtil.fakeWorkerId++),r=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(r,t);const i=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(e=_workerPorts._)||void 0===e||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=null===(t=_assertClassBrand(PDFWorker,this,_workerPorts)._)||void 0===t?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={_:void 0};exports.PDFWorker=PDFWorker;var _methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_passwordCapability=new WeakMap,_WorkerTransport_brand=new WeakSet;class WorkerTransport{constructor(e,t,n,r,i){_classPrivateMethodInitSpec(this,_WorkerTransport_brand),_classPrivateFieldInitSpec(this,_methodPromises,new Map),_classPrivateFieldInitSpec(this,_pageCache,new Map),_classPrivateFieldInitSpec(this,_pagePromises,new Map),_classPrivateFieldInitSpec(this,_passwordCapability,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=_util.RenderingIntentFlag.DISPLAY,a=_annotation_storage.SerializableEmpty;switch(e){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(e))}switch(t){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,a=(i&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(t))}return r&&(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:"".concat(i,"_").concat(a.hash),annotationStorageSerializable:a}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,null===(e=_classPrivateFieldGet(_passwordCapability,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of _classPrivateFieldGet(_pageCache,this).values())t.push(r._destroy());_classPrivateFieldGet(_pageCache,this).clear(),_classPrivateFieldGet(_pagePromises,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldGet(_methodPromises,this).clear(),this.filterFactory.destroy(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:r}=e;r?t.close():((0,_util.assert)(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const n=new _util.PromiseCapability,r=this._fullReader;return r.headersReady.then((()=>{var e;r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&(null===(e=t.onProgress)||void 0===e||e.call(t,this._lastProgress)),r.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})});n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),n.reject),n.promise})),e.on("GetRangeReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:r}=e;r?t.close():((0,_util.assert)(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(n,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":n=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(_classPrivateFieldSet(_passwordCapability,this,new _util.PromiseCapability),t.onPassword){const r=e=>{e instanceof Error?_classPrivateFieldGet(_passwordCapability,this).reject(e):_classPrivateFieldGet(_passwordCapability,this).resolve({password:e})};try{t.onPassword(r,e.code)}catch(n){_classPrivateFieldGet(_passwordCapability,this).reject(n)}}else _classPrivateFieldGet(_passwordCapability,this).reject(new _util.PasswordException(e.message,e.code));return _classPrivateFieldGet(_passwordCapability,this).promise})),e.on("DataLoaded",(e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{this.destroyed||_classPrivateFieldGet(_pageCache,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{var n;let[r,i,a]=t;if(!this.destroyed&&!this.commonObjs.has(r))switch(i){case"Font":const t=this._params;if("error"in a){const e=a.error;(0,_util.warn)("Error during font loading: ".concat(e)),this.commonObjs.resolve(r,e);break}const s=t.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new _font_loader.FontFaceObject(a,{isEvalSupported:t.isEvalSupported,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,inspectFont:s});this.fontLoader.bind(o).catch((t=>e.sendWithPromise("FontFallback",{id:r}))).finally((()=>{!t.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(r,o)}));break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error("Got unknown common object type ".concat(i))}})),e.on("obj",(e=>{let[t,n,r,i]=e;if(this.destroyed)return;const a=_classPrivateFieldGet(_pageCache,this).get(n);if(!a.objs.has(t))switch(r){case"Image":if(a.objs.resolve(t,i),i){let e;if(i.bitmap){const{width:t,height:n}=i;e=t*n*4}else{var s;e=(null===(s=i.data)||void 0===s?void 0:s.length)||0}e>_util.MAX_IMAGE_SIZE_TO_CACHE&&(a._maybeCleanupAfterRender=!0)}break;case"Pattern":a.objs.resolve(t,i);break;default:throw new Error("Got unknown object type ".concat(r))}})),e.on("DocProgress",(e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfers:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},r).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=_classPrivateFieldGet(_pagePromises,this).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((e=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(t,e,this,this._params.pdfBug);return _classPrivateFieldGet(_pageCache,this).set(t,n),n}));return _classPrivateFieldGet(_pagePromises,this).set(t,r),r}getPageIndex(e){return"object"!==typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetFieldObjects")}hasJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((e=>new _optional_content_config.OptionalContentConfig(e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=_classPrivateFieldGet(_methodPromises,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,n,r,i;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(r=null===(i=this._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==r?r:null}}));return _classPrivateFieldGet(_methodPromises,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of _classPrivateFieldGet(_pageCache,this).values())if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),e||this.fontLoader.clear(),_classPrivateFieldGet(_methodPromises,this).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}function _cacheSimpleMethod(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=_classPrivateFieldGet(_methodPromises,this).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return _classPrivateFieldGet(_methodPromises,this).set(e,r),r}var _objs=new WeakMap,_PDFObjects_brand=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand),_classPrivateFieldInitSpec(this,_objs,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,e);return n.capability.promise.then((()=>t(n.data))),null}const n=_classPrivateFieldGet(_objs,this)[e];if(null===n||void 0===n||!n.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=_classPrivateFieldGet(_objs,this)[e];return(null===t||void 0===t?void 0:t.capability.settled)||!1}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,e);n.data=t,n.capability.resolve()}clear(){for(const t in _classPrivateFieldGet(_objs,this)){var e;const{data:n}=_classPrivateFieldGet(_objs,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}_classPrivateFieldSet(_objs,this,Object.create(null))}}function _ensureObj(e){var t;return(t=_classPrivateFieldGet(_objs,this))[e]||(t[e]={capability:new _util.PromiseCapability,data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(e){_classPrivateFieldInitSpec(this,_internalRenderTask,null),_classPrivateFieldSet(_internalRenderTask,this,e),this.onContinue=null}get promise(){return _classPrivateFieldGet(_internalRenderTask,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classPrivateFieldGet(_internalRenderTask,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=_classPrivateFieldGet(_internalRenderTask,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(_internalRenderTask,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(e){let{callback:t,params:n,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null}=e;this.callback=t,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t,n;let{transparency:r=!1,optionalContentConfig:i}=e;if(this.cancelled)return;if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:s,transform:o,background:l}=this.params;this.gfx=new _canvas.CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:r,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),_canvasInUse._.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),_canvasInUse._.delete(this._canvas),this.callback())))}}var _canvasInUse={_:new WeakSet};const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var r=n(1),i=n(4),a=n(8);const s=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=s;var o=new WeakMap,l=new WeakMap,c=new WeakSet;class d{constructor(){_classPrivateMethodInitSpec(this,c),_classPrivateFieldInitSpec(this,o,!1),_classPrivateFieldInitSpec(this,l,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=_classPrivateFieldGet(l,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return _classPrivateFieldGet(l,this).get(e)}remove(e){if(_classPrivateFieldGet(l,this).delete(e),0===_classPrivateFieldGet(l,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of _classPrivateFieldGet(l,this).values())if(e instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=_classPrivateFieldGet(l,this).get(e);let r=!1;if(void 0!==n)for(const[i,a]of Object.entries(t))n[i]!==a&&(r=!0,n[i]=a);else r=!0,_classPrivateFieldGet(l,this).set(e,t);r&&_assertClassBrand(c,this,u).call(this),t instanceof i.AnnotationEditor&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return _classPrivateFieldGet(l,this).has(e)}getAll(){return _classPrivateFieldGet(l,this).size>0?(0,r.objectFromMap)(_classPrivateFieldGet(l,this)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return _classPrivateFieldGet(l,this).size}resetModified(){_classPrivateFieldGet(o,this)&&(_classPrivateFieldSet(o,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new p(this)}get serializable(){if(0===_classPrivateFieldGet(l,this).size)return s;const e=new Map,t=new a.MurmurHash3_64,n=[],r=Object.create(null);let o=!1;for(const[a,s]of _classPrivateFieldGet(l,this)){const n=s instanceof i.AnnotationEditor?s.serialize(!1,r):s;n&&(e.set(a,n),t.update("".concat(a,":").concat(JSON.stringify(n))),o||(o=!!n.bitmap))}if(o)for(const i of e.values())i.bitmap&&n.push(i.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfers:n}:s}}function u(){_classPrivateFieldGet(o,this)||(_classPrivateFieldSet(o,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}t.AnnotationStorage=d;var h=new WeakMap;class p extends d{constructor(e){super(),_classPrivateFieldInitSpec(this,h,void 0);const{map:t,hash:n,transfers:r}=e.serializable,i=structuredClone(t,r?{transfer:r}:null);_classPrivateFieldSet(h,this,{map:i,hash:n,transfers:r})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet(h,this)}}t.PrintAnnotationStorage=p},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=n(5),a=n(1),s=n(6),o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,_=new WeakMap,w=new WeakSet;class x{constructor(e){_classPrivateMethodInitSpec(this,w),_classPrivateFieldInitSpec(this,o,""),_classPrivateFieldInitSpec(this,l,!1),_classPrivateFieldInitSpec(this,c,null),_classPrivateFieldInitSpec(this,d,null),_classPrivateFieldInitSpec(this,u,null),_classPrivateFieldInitSpec(this,h,!1),_classPrivateFieldInitSpec(this,p,null),_classPrivateFieldInitSpec(this,f,this.focusin.bind(this)),_classPrivateFieldInitSpec(this,m,this.focusout.bind(this)),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldInitSpec(this,y,!1),_defineProperty(this,"_initialOptions",Object.create(null)),_defineProperty(this,"_uiManager",null),_defineProperty(this,"_focusEventsAllowed",!0),_defineProperty(this,"_l10nPromise",null),_classPrivateFieldInitSpec(this,b,!1),_classPrivateFieldInitSpec(this,_,x._zIndex++),this.constructor===x&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,s];const[C,k]=this.parentDimensions;this.x=e.x/C,this.y=e.y/k,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new R({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(x._l10nPromise||(x._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map((t=>[t,e.get(t)])))),null!==t&&void 0!==t&&t.strings)for(const r of t.strings)x._l10nPromise.set(r,e.get(r));if(-1!==x._borderLineWidth)return;const n=getComputedStyle(document.documentElement);x._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return _classPrivateFieldGet(b,this)}set _isDraggable(e){var t;_classPrivateFieldSet(b,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(_,this)}setParent(e){null!==e&&(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions),this.parent=e}focusin(e){this._focusEventsAllowed&&(_classPrivateFieldGet(g,this)?_classPrivateFieldSet(g,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){_assertClassBrand(w,this,C).call(this,this.parentDimensions,e,t)}translateInPage(e,t){_assertClassBrand(w,this,C).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[s,o]=_assertClassBrand(w,this,k).call(this);i+=s,a+=o,this.div.style.left="".concat((100*i).toFixed(2),"%"),this.div.style.top="".concat((100*a).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[e,t]=this.pageDimensions;let{x:n,y:r,width:i,height:a}=this;switch(i*=e,a*=t,n*=e,r*=t,this.rotation){case 0:n=Math.max(0,Math.min(e-i,n)),r=Math.max(0,Math.min(t-a,r));break;case 90:n=Math.max(0,Math.min(e-a,n)),r=Math.min(t,Math.max(i,r));break;case 180:n=Math.min(e,Math.max(i,n)),r=Math.min(t,Math.max(a,r));break;case 270:n=Math.min(e,Math.max(a,n)),r=Math.max(0,Math.min(t-i,r))}this.x=n/=e,this.y=r/=t;const[s,o]=_assertClassBrand(w,this,k).call(this);n+=s,r+=o;const{style:l}=this.div;l.left="".concat((100*n).toFixed(2),"%"),l.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return S.call(x,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return S.call(x,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,r=t*e,i=n*e;return a.FeatureTest.isCSSRoundSupported?[Math.round(r),Math.round(i)]:[r,i]}setDims(e,t){var n;const[r,i]=this.parentDimensions;this.div.style.width="".concat((100*e/r).toFixed(2),"%"),_classPrivateFieldGet(h,this)||(this.div.style.height="".concat((100*t/i).toFixed(2),"%")),null===(n=_classPrivateFieldGet(c,this))||void 0===n||n.classList.toggle("small",e<x.SMALL_EDITOR_SIZE||t<x.SMALL_EDITOR_SIZE)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=!_classPrivateFieldGet(h,this)&&t.endsWith("%");if(r&&i)return;const[a,s]=this.parentDimensions;r||(e.width="".concat((100*parseFloat(n)/a).toFixed(2),"%")),_classPrivateFieldGet(h,this)||i||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(_classPrivateFieldGet(c,this))return;const e=_classPrivateFieldSet(c,this,document.createElement("button"));e.className="altText";const t=await x._l10nPromise.get("editor_alt_text_button_label");if(e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",s.noContextMenu),e.addEventListener("pointerdown",(e=>e.stopPropagation())),e.addEventListener("click",(e=>{e.preventDefault(),this._uiManager.editAltText(this)}),{capture:!0}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(t.preventDefault(),this._uiManager.editAltText(this))})),_assertClassBrand(w,this,I).call(this),this.div.append(e),!x.SMALL_EDITOR_SIZE){const t=40;x.SMALL_EDITOR_SIZE=Math.min(128,Math.round(e.getBoundingClientRect().width*(1+t/100)))}}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:_classPrivateFieldGet(o,this),decorative:_classPrivateFieldGet(l,this)}}set altTextData(e){let{altText:t,decorative:n}=e;_classPrivateFieldGet(o,this)===t&&_classPrivateFieldGet(l,this)===n||(_classPrivateFieldSet(o,this,t),_classPrivateFieldSet(l,this,n),_assertClassBrand(w,this,I).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(f,this)),this.div.addEventListener("focusout",_classPrivateFieldGet(m,this));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*t/e).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*e/t).toFixed(2),"%"));const[n,r]=this.getInitialTranslation();return this.translate(n,r),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=a.FeatureTest.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(_classPrivateFieldSet(g,this,!0),_assertClassBrand(w,this,F).call(this,e))}moveInDOM(){var e;null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){const n=this.parentScale,[r,i]=this.pageDimensions,[a,s]=this.pageTranslation,o=e/n,l=t/n,c=this.x*r,d=this.y*i,u=this.width*r,h=this.height*i;switch(this.rotation){case 0:return[c+o+a,i-d-l-h+s,c+o+u+a,i-d-l+s];case 90:return[c+l+a,i-d+o+s,c+l+h+a,i-d+o+u+s];case 180:return[c-o-u+a,i-d+l+s,c-o+a,i-d+l+h+s];case 270:return[c-l-h+a,i-d-o-u+s,c-l+a,i-d-o+s];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,a]=e,s=i-n,o=a-r;switch(this.rotation){case 0:return[n,t-a,s,o];case 90:return[n,t-r,o,s];case 180:return[i,t-r,s,o];case 270:return[i,t-a,o,s];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(y,this,!0)}disableEditMode(){_classPrivateFieldSet(y,this,!1)}isInEditMode(){return _classPrivateFieldGet(y,this)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;null===(e=this.div)||void 0===e||e.addEventListener("focusin",_classPrivateFieldGet(f,this)),null===(t=this.div)||void 0===t||t.addEventListener("focusout",_classPrivateFieldGet(m,this))}serialize(){(0,a.unreachable)("An editor must be serializable")}static deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation;const[i,a]=r.pageDimensions,[s,o,l,c]=r.getRectInCurrentCoords(e.rect,a);return r.x=s/i,r.y=o/a,r.width=l/i,r.height=c/a,r}remove(){var e;this.div.removeEventListener("focusin",_classPrivateFieldGet(f,this)),this.div.removeEventListener("focusout",_classPrivateFieldGet(m,this)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),null===(e=_classPrivateFieldGet(c,this))||void 0===e||e.remove(),_classPrivateFieldSet(c,this,null),_classPrivateFieldSet(d,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(_assertClassBrand(w,this,A).call(this),_classPrivateFieldGet(p,this).classList.remove("hidden"))}select(){var e;this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor")}unselect(){var e,t,n;null===(e=_classPrivateFieldGet(p,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(e,t){}disableEditing(){_classPrivateFieldGet(c,this)&&(_classPrivateFieldGet(c,this).hidden=!0)}enableEditing(){_classPrivateFieldGet(c,this)&&(_classPrivateFieldGet(c,this).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(v,this)}set isEditing(e){_classPrivateFieldSet(v,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){_classPrivateFieldSet(h,this,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}}function C(e,t,n){let[r,i]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/r,this.y+=n/i,this.fixAndSetPosition()}function k(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=r,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}function S(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function P(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function A(){if(_classPrivateFieldGet(p,this))return;_classPrivateFieldSet(p,this,document.createElement("div")),_classPrivateFieldGet(p,this).classList.add("resizers");const e=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||e.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of e){const e=document.createElement("div");_classPrivateFieldGet(p,this).append(e),e.classList.add("resizer",t),e.addEventListener("pointerdown",_assertClassBrand(w,this,E).bind(this,t)),e.addEventListener("contextmenu",s.noContextMenu)}this.div.prepend(_classPrivateFieldGet(p,this))}function E(e,t){t.preventDefault();const{isMac:n}=a.FeatureTest.platform;if(0!==t.button||t.ctrlKey&&n)return;const r=_assertClassBrand(w,this,T).bind(this,e),i=this._isDraggable;this._isDraggable=!1;const s={passive:!0,capture:!0};window.addEventListener("pointermove",r,s);const o=this.x,l=this.y,c=this.width,d=this.height,u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{this._isDraggable=i,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",r,s),this.parent.div.style.cursor=u,this.div.style.cursor=h;const e=this.x,t=this.y,n=this.width,a=this.height;e===o&&t===l&&n===c&&a===d||this.addCommands({cmd:()=>{this.width=n,this.height=a,this.x=e,this.y=t;const[r,i]=this.parentDimensions;this.setDims(r*n,i*a),this.fixAndSetPosition()},undo:()=>{this.width=c,this.height=d,this.x=o,this.y=l;const[e,t]=this.parentDimensions;this.setDims(e*c,t*d),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}function T(e,t){const[n,i]=this.parentDimensions,a=this.x,s=this.y,o=this.width,l=this.height,c=r.MIN_SIZE/n,d=r.MIN_SIZE/i,u=e=>Math.round(1e4*e)/1e4,h=_assertClassBrand(w,this,P).call(this,this.rotation),p=(e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t],f=_assertClassBrand(w,this,P).call(this,360-this.rotation);let m,g,v=!1,y=!1;switch(e){case"topLeft":v=!0,m=(e,t)=>[0,0],g=(e,t)=>[e,t];break;case"topMiddle":m=(e,t)=>[e/2,0],g=(e,t)=>[e/2,t];break;case"topRight":v=!0,m=(e,t)=>[e,0],g=(e,t)=>[0,t];break;case"middleRight":y=!0,m=(e,t)=>[e,t/2],g=(e,t)=>[0,t/2];break;case"bottomRight":v=!0,m=(e,t)=>[e,t],g=(e,t)=>[0,0];break;case"bottomMiddle":m=(e,t)=>[e/2,t],g=(e,t)=>[e/2,0];break;case"bottomLeft":v=!0,m=(e,t)=>[0,t],g=(e,t)=>[e,0];break;case"middleLeft":y=!0,m=(e,t)=>[0,t/2],g=(e,t)=>[e,t/2]}const b=m(o,l),_=g(o,l);let x=p(..._);const C=u(a+x[0]),k=u(s+x[1]);let S=1,A=1,[E,T]=this.screenToPageTranslation(t.movementX,t.movementY);var I,F;if([E,T]=(I=E/n,F=T/i,[f[0]*I+f[2]*F,f[1]*I+f[3]*F]),v){const e=Math.hypot(o,l);S=A=Math.max(Math.min(Math.hypot(_[0]-b[0]-E,_[1]-b[1]-T)/e,1/o,1/l),c/o,d/l)}else y?S=Math.max(c,Math.min(1,Math.abs(_[0]-b[0]-E)))/o:A=Math.max(d,Math.min(1,Math.abs(_[1]-b[1]-T)))/l;const R=u(o*S),N=u(l*A);x=p(...g(R,N));const j=C-x[0],M=k-x[1];this.width=R,this.height=N,this.x=j,this.y=M,this.setDims(n*R,i*N),this.fixAndSetPosition()}async function I(){const e=_classPrivateFieldGet(c,this);if(!e)return;var t;if(!_classPrivateFieldGet(o,this)&&!_classPrivateFieldGet(l,this))return e.classList.remove("done"),void(null===(t=_classPrivateFieldGet(d,this))||void 0===t||t.remove());r._l10nPromise.get("editor_alt_text_edit_button_label").then((t=>{e.setAttribute("aria-label",t)}));let n=_classPrivateFieldGet(d,this);if(!n){_classPrivateFieldSet(d,this,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip");const t=n.id="alt-text-tooltip-".concat(this.id);e.setAttribute("aria-describedby",t);const r=100;e.addEventListener("mouseenter",(()=>{_classPrivateFieldSet(u,this,setTimeout((()=>{_classPrivateFieldSet(u,this,null),_classPrivateFieldGet(d,this).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})}),r))})),e.addEventListener("mouseleave",(()=>{var e;clearTimeout(_classPrivateFieldGet(u,this)),_classPrivateFieldSet(u,this,null),null===(e=_classPrivateFieldGet(d,this))||void 0===e||e.classList.remove("show")}))}e.classList.add("done"),n.innerText=_classPrivateFieldGet(l,this)?await r._l10nPromise.get("editor_alt_text_decorative_tooltip"):_classPrivateFieldGet(o,this),n.parentNode||e.append(n)}function F(e){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);let n,r;this._uiManager.setUpDragSession(),t&&(n={passive:!0,capture:!0},r=e=>{const[t,n]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(t,n)},window.addEventListener("pointermove",r,n));const i=()=>{if(window.removeEventListener("pointerup",i),window.removeEventListener("blur",i),t&&window.removeEventListener("pointermove",r,n),_classPrivateFieldSet(g,this,!1),!this._uiManager.endDragSession()){const{isMac:t}=a.FeatureTest.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",i),window.addEventListener("blur",i)}r=x,_defineProperty(x,"_borderLineWidth",-1),_defineProperty(x,"_colorManager",new i.ColorManager),_defineProperty(x,"_zIndex",1),_defineProperty(x,"SMALL_EDITOR_SIZE",0),t.AnnotationEditor=x;class R extends x{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=function(e,t,n){for(const r of n)t.addEventListener(r,e[r].bind(e))},t.opacityToHex=function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")};var i=n(1),a=n(6),s=new WeakMap;class o{constructor(){_classPrivateFieldInitSpec(this,s,0)}getId(){var e,t;return"".concat(i.AnnotationEditorPrefix).concat((_classPrivateFieldSet(s,this,(e=_classPrivateFieldGet(s,this),t=e++,e)),t))}}var l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakSet;class h{constructor(){_classPrivateMethodInitSpec(this,u),_classPrivateFieldInitSpec(this,l,(0,i.getUuid)()),_classPrivateFieldInitSpec(this,c,0),_classPrivateFieldInitSpec(this,d,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d"),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const n=t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])));return(0,i.shadow)(this,"_isSVGFittingCanvas",n)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return _assertClassBrand(u,this,p).call(this,"".concat(t,"_").concat(n,"_").concat(r,"_").concat(i),e)}async getFromUrl(e){return _assertClassBrand(u,this,p).call(this,e,e)}async getFromId(e){_classPrivateFieldGet(d,this)||_classPrivateFieldSet(d,this,new Map);const t=_classPrivateFieldGet(d,this).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=_classPrivateFieldGet(d,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){_classPrivateFieldGet(d,this)||_classPrivateFieldSet(d,this,new Map);const t=_classPrivateFieldGet(d,this).get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith("image_".concat(_classPrivateFieldGet(l,this),"_"))}}async function p(e,t){var n;_classPrivateFieldGet(d,this)||_classPrivateFieldSet(d,this,new Map);let i=_classPrivateFieldGet(d,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var a,s;let e;if(i||(i={bitmap:null,id:"image_".concat(_classPrivateFieldGet(l,this),"_").concat((_classPrivateFieldSet(c,this,(a=_classPrivateFieldGet(c,this),s=a++,a)),s)),refCounter:0,isSvg:!1}),"string"===typeof t){i.url=t;const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);e=await n.blob()}else e=i.file=t;if("image/svg+xml"===e.type){const t=r._isSVGFittingCanvas,n=new FileReader,a=new Image,s=new Promise(((e,r)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;a.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},a.onerror=n.onerror=r}));n.readAsDataURL(e),await s}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(o){console.error(o),i=null}return _classPrivateFieldGet(d,this).set(e,i),i&&_classPrivateFieldGet(d,this).set(i.id,i),i}r=h;var f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap;class y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;_classPrivateFieldInitSpec(this,f,[]),_classPrivateFieldInitSpec(this,m,!1),_classPrivateFieldInitSpec(this,g,void 0),_classPrivateFieldInitSpec(this,v,-1),_classPrivateFieldSet(g,this,e)}add(e){let{cmd:t,undo:n,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:s=!1}=e;if(r&&t(),_classPrivateFieldGet(m,this))return;const o={cmd:t,undo:n,type:i};if(-1===_classPrivateFieldGet(v,this))return _classPrivateFieldGet(f,this).length>0&&(_classPrivateFieldGet(f,this).length=0),_classPrivateFieldSet(v,this,0),void _classPrivateFieldGet(f,this).push(o);if(a&&_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].type===i)return s&&(o.undo=_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].undo),void(_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)]=o);const l=_classPrivateFieldGet(v,this)+1;l===_classPrivateFieldGet(g,this)?_classPrivateFieldGet(f,this).splice(0,1):(_classPrivateFieldSet(v,this,l),l<_classPrivateFieldGet(f,this).length&&_classPrivateFieldGet(f,this).splice(l)),_classPrivateFieldGet(f,this).push(o)}undo(){-1!==_classPrivateFieldGet(v,this)&&(_classPrivateFieldSet(m,this,!0),_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].undo(),_classPrivateFieldSet(m,this,!1),_classPrivateFieldSet(v,this,_classPrivateFieldGet(v,this)-1))}redo(){_classPrivateFieldGet(v,this)<_classPrivateFieldGet(f,this).length-1&&(_classPrivateFieldSet(v,this,_classPrivateFieldGet(v,this)+1),_classPrivateFieldSet(m,this,!0),_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].cmd(),_classPrivateFieldSet(m,this,!1))}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(v,this)}hasSomethingToRedo(){return _classPrivateFieldGet(v,this)<_classPrivateFieldGet(f,this).length-1}destroy(){_classPrivateFieldSet(f,this,null)}}t.CommandManager=y;var b=new WeakSet;class _{constructor(e){_classPrivateMethodInitSpec(this,b),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=i.FeatureTest.platform;for(const[n,r,i={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(_assertClassBrand(b,this,w).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:s=null}}=n;s&&!s(e,t)||(r.bind(e,...a)(),i||(t.stopPropagation(),t.preventDefault()))}}function w(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}t.KeyboardManager=_;class x{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(e),(0,i.shadow)(this,"_colors",e)}convert(e){const t=(0,a.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every(((e,n)=>e===t[n])))return x._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?i.Util.makeHexColor(...t):e}}_defineProperty(x,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=x;var C=new WeakMap,k=new WeakMap,S=new WeakMap,P=new WeakMap,A=new WeakMap,E=new WeakMap,T=new WeakMap,I=new WeakMap,F=new WeakMap,R=new WeakMap,N=new WeakMap,j=new WeakMap,M=new WeakMap,O=new WeakMap,L=new WeakMap,D=new WeakMap,B=new WeakMap,q=new WeakMap,U=new WeakMap,G=new WeakMap,z=new WeakMap,H=new WeakMap,W=new WeakMap,V=new WeakMap,K=new WeakMap,Y=new WeakMap,X=new WeakMap,J=new WeakMap,Q=new WeakMap,Z=new WeakMap,$=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakSet;class ie{static get _keyboardManager(){const e=ie.prototype,t=e=>{const{activeElement:t}=document;return t&&_classPrivateFieldGet(te,e).contains(t)&&e.hasSomethingToControl()},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,r,s,l){_classPrivateMethodInitSpec(this,re),_classPrivateFieldInitSpec(this,C,null),_classPrivateFieldInitSpec(this,k,new Map),_classPrivateFieldInitSpec(this,S,new Map),_classPrivateFieldInitSpec(this,P,null),_classPrivateFieldInitSpec(this,A,null),_classPrivateFieldInitSpec(this,E,new y),_classPrivateFieldInitSpec(this,T,0),_classPrivateFieldInitSpec(this,I,new Set),_classPrivateFieldInitSpec(this,F,null),_classPrivateFieldInitSpec(this,R,null),_classPrivateFieldInitSpec(this,N,new Set),_classPrivateFieldInitSpec(this,j,null),_classPrivateFieldInitSpec(this,M,new o),_classPrivateFieldInitSpec(this,O,!1),_classPrivateFieldInitSpec(this,L,!1),_classPrivateFieldInitSpec(this,D,null),_classPrivateFieldInitSpec(this,B,i.AnnotationEditorType.NONE),_classPrivateFieldInitSpec(this,q,new Set),_classPrivateFieldInitSpec(this,U,null),_classPrivateFieldInitSpec(this,G,this.blur.bind(this)),_classPrivateFieldInitSpec(this,z,this.focus.bind(this)),_classPrivateFieldInitSpec(this,H,this.copy.bind(this)),_classPrivateFieldInitSpec(this,W,this.cut.bind(this)),_classPrivateFieldInitSpec(this,V,this.paste.bind(this)),_classPrivateFieldInitSpec(this,K,this.keydown.bind(this)),_classPrivateFieldInitSpec(this,Y,this.onEditingAction.bind(this)),_classPrivateFieldInitSpec(this,X,this.onPageChanging.bind(this)),_classPrivateFieldInitSpec(this,J,this.onScaleChanging.bind(this)),_classPrivateFieldInitSpec(this,Q,this.onRotationChanging.bind(this)),_classPrivateFieldInitSpec(this,Z,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),_classPrivateFieldInitSpec(this,$,[0,0]),_classPrivateFieldInitSpec(this,ee,null),_classPrivateFieldInitSpec(this,te,null),_classPrivateFieldInitSpec(this,ne,null),_classPrivateFieldSet(te,this,e),_classPrivateFieldSet(ne,this,t),_classPrivateFieldSet(P,this,n),this._eventBus=r,this._eventBus._on("editingaction",_classPrivateFieldGet(Y,this)),this._eventBus._on("pagechanging",_classPrivateFieldGet(X,this)),this._eventBus._on("scalechanging",_classPrivateFieldGet(J,this)),this._eventBus._on("rotationchanging",_classPrivateFieldGet(Q,this)),_classPrivateFieldSet(A,this,s.annotationStorage),_classPrivateFieldSet(j,this,s.filterFactory),_classPrivateFieldSet(U,this,l),this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){_assertClassBrand(re,this,le).call(this),_assertClassBrand(re,this,se).call(this),this._eventBus._off("editingaction",_classPrivateFieldGet(Y,this)),this._eventBus._off("pagechanging",_classPrivateFieldGet(X,this)),this._eventBus._off("scalechanging",_classPrivateFieldGet(J,this)),this._eventBus._off("rotationchanging",_classPrivateFieldGet(Q,this));for(const e of _classPrivateFieldGet(S,this).values())e.destroy();_classPrivateFieldGet(S,this).clear(),_classPrivateFieldGet(k,this).clear(),_classPrivateFieldGet(N,this).clear(),_classPrivateFieldSet(C,this,null),_classPrivateFieldGet(q,this).clear(),_classPrivateFieldGet(E,this).destroy(),_classPrivateFieldGet(P,this).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",_classPrivateFieldGet(U,this)?_classPrivateFieldGet(j,this).addHCMFilter(_classPrivateFieldGet(U,this).foreground,_classPrivateFieldGet(U,this).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(_classPrivateFieldGet(te,this)).direction)}editAltText(e){var t;null===(t=_classPrivateFieldGet(P,this))||void 0===t||t.editAltText(this,e)}onPageChanging(e){let{pageNumber:t}=e;_classPrivateFieldSet(T,this,t-1)}focusMainContainer(){_classPrivateFieldGet(te,this).focus()}findParent(e,t){for(const n of _classPrivateFieldGet(S,this).values()){const{x:r,y:i,width:a,height:s}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+s)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classPrivateFieldGet(ne,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){_classPrivateFieldGet(N,this).add(e)}removeShouldRescale(e){_classPrivateFieldGet(N,this).delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const n of _classPrivateFieldGet(N,this))n.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}addToAnnotationStorage(e){e.isEmpty()||!_classPrivateFieldGet(A,this)||_classPrivateFieldGet(A,this).has(e.id)||_classPrivateFieldGet(A,this).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const t of _classPrivateFieldGet(q,this))if(t.div.contains(e)){_classPrivateFieldSet(D,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!_classPrivateFieldGet(D,this))return;const[e,t]=_classPrivateFieldGet(D,this);_classPrivateFieldSet(D,this,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),t.focus()}addEditListeners(){_assertClassBrand(re,this,oe).call(this),_assertClassBrand(re,this,ce).call(this)}removeEditListeners(){_assertClassBrand(re,this,le).call(this),_assertClassBrand(re,this,de).call(this)}copy(e){var t;if(e.preventDefault(),null===(t=_classPrivateFieldGet(C,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of _classPrivateFieldGet(q,this)){const e=r.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const e of _classPrivateFieldGet(R,this))if(e.isHandlingMimeForPasting(i.type))return void e.paste(i,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){return void(0,i.warn)('paste: "'.concat(a.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const e=[];for(const a of n){const t=r.deserialize(a);if(!t)return;e.push(t)}const t=()=>{for(const t of e)_assertClassBrand(re,this,me).call(this,t);_assertClassBrand(re,this,ve).call(this,e)},i=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:i,mustExec:!0})}catch(a){(0,i.warn)('paste: "'.concat(a.message,'".'))}}keydown(e){var t;null!==(t=this.getActive())&&void 0!==t&&t.shouldGetKeyboardEvents()||ie._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(_assertClassBrand(re,this,ae).call(this),_assertClassBrand(re,this,oe).call(this),_assertClassBrand(re,this,ce).call(this),_assertClassBrand(re,this,ue).call(this,{isEditing:_classPrivateFieldGet(B,this)!==i.AnnotationEditorType.NONE,isEmpty:_assertClassBrand(re,this,ge).call(this),hasSomethingToUndo:_classPrivateFieldGet(E,this).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(E,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(_assertClassBrand(re,this,se).call(this),_assertClassBrand(re,this,le).call(this),_assertClassBrand(re,this,de).call(this),_assertClassBrand(re,this,ue).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!_classPrivateFieldGet(R,this)){_classPrivateFieldSet(R,this,e);for(const e of _classPrivateFieldGet(R,this))_assertClassBrand(re,this,he).call(this,e.defaultPropertiesToUpdate)}}getId(){return _classPrivateFieldGet(M,this).getId()}get currentLayer(){return _classPrivateFieldGet(S,this).get(_classPrivateFieldGet(T,this))}getLayer(e){return _classPrivateFieldGet(S,this).get(e)}get currentPageIndex(){return _classPrivateFieldGet(T,this)}addLayer(e){_classPrivateFieldGet(S,this).set(e.pageIndex,e),_classPrivateFieldGet(O,this)?e.enable():e.disable()}removeLayer(e){_classPrivateFieldGet(S,this).delete(e.pageIndex)}updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(_classPrivateFieldGet(B,this)!==e){if(_classPrivateFieldSet(B,this,e),e===i.AnnotationEditorType.NONE)return this.setEditingState(!1),void _assertClassBrand(re,this,fe).call(this);this.setEditingState(!0),_assertClassBrand(re,this,pe).call(this),this.unselectAll();for(const t of _classPrivateFieldGet(S,this).values())t.updateMode(e);if(t)for(const e of _classPrivateFieldGet(k,this).values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}}updateToolbar(e){e!==_classPrivateFieldGet(B,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(_classPrivateFieldGet(R,this))if(e!==i.AnnotationEditorParamsType.CREATE){for(const n of _classPrivateFieldGet(q,this))n.updateParams(e,t);for(const n of _classPrivateFieldGet(R,this))n.updateDefaultParams(e,t)}else this.currentLayer.addNewEditor(e)}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_classPrivateFieldGet(L,this)!==e){_classPrivateFieldSet(L,this,e);for(const t of _classPrivateFieldGet(S,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of _classPrivateFieldGet(k,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return _classPrivateFieldGet(k,this).get(e)}addEditor(e){_classPrivateFieldGet(k,this).set(e.id,e)}removeEditor(e){var t;_classPrivateFieldGet(k,this).delete(e.id),this.unselect(e),e.annotationElementId&&_classPrivateFieldGet(I,this).has(e.annotationElementId)||null===(t=_classPrivateFieldGet(A,this))||void 0===t||t.remove(e.id)}addDeletedAnnotationElement(e){_classPrivateFieldGet(I,this).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return _classPrivateFieldGet(I,this).has(e)}removeDeletedAnnotationElement(e){_classPrivateFieldGet(I,this).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){_classPrivateFieldGet(C,this)!==e&&(_classPrivateFieldSet(C,this,e),e&&_assertClassBrand(re,this,he).call(this,e.propertiesToUpdate))}toggleSelected(e){if(_classPrivateFieldGet(q,this).has(e))return _classPrivateFieldGet(q,this).delete(e),e.unselect(),void _assertClassBrand(re,this,ue).call(this,{hasSelectedEditor:this.hasSelection});_classPrivateFieldGet(q,this).add(e),e.select(),_assertClassBrand(re,this,he).call(this,e.propertiesToUpdate),_assertClassBrand(re,this,ue).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of _classPrivateFieldGet(q,this))t!==e&&t.unselect();_classPrivateFieldGet(q,this).clear(),_classPrivateFieldGet(q,this).add(e),e.select(),_assertClassBrand(re,this,he).call(this,e.propertiesToUpdate),_assertClassBrand(re,this,ue).call(this,{hasSelectedEditor:!0})}isSelected(e){return _classPrivateFieldGet(q,this).has(e)}unselect(e){e.unselect(),_classPrivateFieldGet(q,this).delete(e),_assertClassBrand(re,this,ue).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(q,this).size}undo(){_classPrivateFieldGet(E,this).undo(),_assertClassBrand(re,this,ue).call(this,{hasSomethingToUndo:_classPrivateFieldGet(E,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_assertClassBrand(re,this,ge).call(this)})}redo(){_classPrivateFieldGet(E,this).redo(),_assertClassBrand(re,this,ue).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(E,this).hasSomethingToRedo(),isEmpty:_assertClassBrand(re,this,ge).call(this)})}addCommands(e){_classPrivateFieldGet(E,this).add(e),_assertClassBrand(re,this,ue).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_assertClassBrand(re,this,ge).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[..._classPrivateFieldGet(q,this)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)_assertClassBrand(re,this,me).call(this,t)},mustExec:!0})}commitOrRemove(){var e;null===(e=_classPrivateFieldGet(C,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return _classPrivateFieldGet(C,this)||this.hasSelection}selectAll(){for(const e of _classPrivateFieldGet(q,this))e.commit();_assertClassBrand(re,this,ve).call(this,_classPrivateFieldGet(k,this).values())}unselectAll(){if(_classPrivateFieldGet(C,this))_classPrivateFieldGet(C,this).commitOrRemove();else if(this.hasSelection){for(const e of _classPrivateFieldGet(q,this))e.unselect();_classPrivateFieldGet(q,this).clear(),_assertClassBrand(re,this,ue).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;_classPrivateFieldGet($,this)[0]+=e,_classPrivateFieldGet($,this)[1]+=t;const[n,r]=_classPrivateFieldGet($,this),i=[..._classPrivateFieldGet(q,this)];_classPrivateFieldGet(ee,this)&&clearTimeout(_classPrivateFieldGet(ee,this)),_classPrivateFieldSet(ee,this,setTimeout((()=>{_classPrivateFieldSet(ee,this,null),_classPrivateFieldGet($,this)[0]=_classPrivateFieldGet($,this)[1]=0,this.addCommands({cmd:()=>{for(const e of i)_classPrivateFieldGet(k,this).has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(const e of i)_classPrivateFieldGet(k,this).has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})}),1e3));for(const a of i)a.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_classPrivateFieldSet(F,this,new Map);for(const e of _classPrivateFieldGet(q,this))_classPrivateFieldGet(F,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!_classPrivateFieldGet(F,this))return!1;this.disableUserSelect(!1);const e=_classPrivateFieldGet(F,this);_classPrivateFieldSet(F,this,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},s]of e)s.newX=r,s.newY=i,s.newPageIndex=a,t||(t=r!==s.savedX||i!==s.savedY||a!==s.savedPageIndex);if(!t)return!1;const n=(e,t,n,r)=>{if(_classPrivateFieldGet(k,this).has(e.id)){const i=_classPrivateFieldGet(S,this).get(r);i?e._setParentAndPosition(i,t,n):(e.pageIndex=r,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:r,newY:i,newPageIndex:a}]of e)n(t,r,i,a)},undo:()=>{for(const[t,{savedX:r,savedY:i,savedPageIndex:a}]of e)n(t,r,i,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(_classPrivateFieldGet(F,this))for(const n of _classPrivateFieldGet(F,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return _classPrivateFieldGet(C,this)===e}getActive(){return _classPrivateFieldGet(C,this)}getMode(){return _classPrivateFieldGet(B,this)}get imageManager(){return(0,i.shadow)(this,"imageManager",new h)}}function ae(){window.addEventListener("focus",_classPrivateFieldGet(z,this)),window.addEventListener("blur",_classPrivateFieldGet(G,this))}function se(){window.removeEventListener("focus",_classPrivateFieldGet(z,this)),window.removeEventListener("blur",_classPrivateFieldGet(G,this))}function oe(){window.addEventListener("keydown",_classPrivateFieldGet(K,this),{capture:!0})}function le(){window.removeEventListener("keydown",_classPrivateFieldGet(K,this),{capture:!0})}function ce(){document.addEventListener("copy",_classPrivateFieldGet(H,this)),document.addEventListener("cut",_classPrivateFieldGet(W,this)),document.addEventListener("paste",_classPrivateFieldGet(V,this))}function de(){document.removeEventListener("copy",_classPrivateFieldGet(H,this)),document.removeEventListener("cut",_classPrivateFieldGet(W,this)),document.removeEventListener("paste",_classPrivateFieldGet(V,this))}function ue(e){Object.entries(e).some((e=>{let[t,n]=e;return _classPrivateFieldGet(Z,this)[t]!==n}))&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(Z,this),e)})}function he(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}function pe(){if(!_classPrivateFieldGet(O,this)){_classPrivateFieldSet(O,this,!0);for(const e of _classPrivateFieldGet(S,this).values())e.enable()}}function fe(){if(this.unselectAll(),_classPrivateFieldGet(O,this)){_classPrivateFieldSet(O,this,!1);for(const e of _classPrivateFieldGet(S,this).values())e.disable()}}function me(e){const t=_classPrivateFieldGet(S,this).get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}function ge(){if(0===_classPrivateFieldGet(k,this).size)return!0;if(1===_classPrivateFieldGet(k,this).size)for(const e of _classPrivateFieldGet(k,this).values())return e.isEmpty();return!1}function ve(e){_classPrivateFieldGet(q,this).clear();for(const t of e)t.isEmpty()||(_classPrivateFieldGet(q,this).add(t),t.select());_assertClassBrand(re,this,ue).call(this,{hasSelectedEditor:!0})}_defineProperty(ie,"TRANSLATE_SMALL",1),_defineProperty(ie,"TRANSLATE_BIG",10),t.AnnotationEditorUIManager=ie},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getColorValues=function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const r=window.getComputedStyle(t).color;e.set(n,D(r))}t.remove()},t.getCurrentTransform=function(e){const{a:t,b:n,c:r,d:i,e:a,f:s}=e.getTransform();return[t,n,r,i,a,s]},t.getCurrentTransformInverse=function(e){const{a:t,b:n,c:r,d:i,e:a,f:s}=e.getTransform().invertSelf();return[t,n,r,i,a,s]},t.getFilenameFromUrl=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||([e]=e.split(/[#?]/,1)),e.substring(e.lastIndexOf("/")+1)},t.getPdfFilenameFromUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(M(e))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let i=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch(s){}return i||t},t.getRGB=D,t.getXfaPageViewport=function(e,t){let{scale:n=1,rotation:r=0}=t;const{width:i,height:a}=e.attributes.style,s=[0,0,parseInt(i),parseInt(a)];return new N({viewBox:s,scale:n,rotation:r})},t.isDataScheme=M,t.isPdfFile=function(e){return"string"===typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=O,t.loadScript=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(((n,r)=>{const i=document.createElement("script");i.src=e,i.onload=function(e){t&&i.remove(),n(e)},i.onerror=function(){r(new Error("Cannot load script at: ".concat(i.src)))},(document.head||document.documentElement).append(i)}))},t.noContextMenu=function(e){e.preventDefault()},t.setLayerDimensions=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof N){const{pageWidth:r,pageHeight:i}=t.rawDims,{style:s}=e,o=a.FeatureTest.isCSSRoundSupported,l="var(--scale-factor) * ".concat(r,"px"),c="var(--scale-factor) * ".concat(i,"px"),d=o?"round(".concat(l,", 1px)"):"calc(".concat(l,")"),u=o?"round(".concat(c,", 1px)"):"calc(".concat(c,")");n&&t.rotation%180!==0?(s.width=u,s.height=d):(s.width=d,s.height=u)}r&&e.setAttribute("data-main-rotation",t.rotation)};var i=n(7),a=n(1);const s="http://www.w3.org/2000/svg";class o{}r=o,_defineProperty(o,"CSS",96),_defineProperty(o,"PDF",72),_defineProperty(o,"PDF_TO_CSS_UNITS",r.CSS/r.PDF),t.PixelsPerInch=o;var l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakSet;class _ extends i.BaseFilterFactory{constructor(){let{docId:e,ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),_classPrivateMethodInitSpec(this,b),_classPrivateFieldInitSpec(this,l,void 0),_classPrivateFieldInitSpec(this,c,void 0),_classPrivateFieldInitSpec(this,d,void 0),_classPrivateFieldInitSpec(this,u,void 0),_classPrivateFieldInitSpec(this,h,void 0),_classPrivateFieldInitSpec(this,p,void 0),_classPrivateFieldInitSpec(this,f,void 0),_classPrivateFieldInitSpec(this,m,void 0),_classPrivateFieldInitSpec(this,g,void 0),_classPrivateFieldInitSpec(this,v,void 0),_classPrivateFieldInitSpec(this,y,0),_classPrivateFieldSet(d,this,e),_classPrivateFieldSet(u,this,t)}addFilter(e){var t,n;if(!e)return"none";let r,i,a,s,o=_classPrivateGetter(b,this,w).get(e);if(o)return o;if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;s=r=i=a=n.join(",")}else{const[t,n,o]=e,l=new Array(256),c=new Array(256),d=new Array(256);for(let e=0;e<256;e++)l[e]=t[e]/255,c[e]=n[e]/255,d[e]=o[e]/255;r=l.join(","),i=c.join(","),a=d.join(","),s="".concat(r).concat(i).concat(a)}if(o=_classPrivateGetter(b,this,w).get(s),o)return _classPrivateGetter(b,this,w).set(e,o),o;const l="g_".concat(_classPrivateFieldGet(d,this),"_transfer_map_").concat((_classPrivateFieldSet(y,this,(t=_classPrivateFieldGet(y,this),n=t++,t)),n)),c="url(#".concat(l,")");_classPrivateGetter(b,this,w).set(e,c),_classPrivateGetter(b,this,w).set(s,c);const u=_assertClassBrand(b,this,k).call(this,l);return _assertClassBrand(b,this,P).call(this,r,i,a,u),c}addHCMFilter(e,t){var n;const r="".concat(e,"-").concat(t);if(_classPrivateFieldGet(p,this)===r)return _classPrivateFieldGet(f,this);if(_classPrivateFieldSet(p,this,r),_classPrivateFieldSet(f,this,"none"),null===(n=_classPrivateFieldGet(h,this))||void 0===n||n.remove(),!e||!t)return _classPrivateFieldGet(f,this);const i=_assertClassBrand(b,this,A).call(this,e);e=a.Util.makeHexColor(...i);const s=_assertClassBrand(b,this,A).call(this,t);if(t=a.Util.makeHexColor(...s),_classPrivateGetter(b,this,x).style.color="","#000000"===e&&"#ffffff"===t||e===t)return _classPrivateFieldGet(f,this);const o=new Array(256);for(let a=0;a<=255;a++){const e=a/255;o[a]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const l=o.join(","),c="g_".concat(_classPrivateFieldGet(d,this),"_hcm_filter"),u=_classPrivateFieldSet(m,this,_assertClassBrand(b,this,k).call(this,c));_assertClassBrand(b,this,P).call(this,l,l,l,u),_assertClassBrand(b,this,C).call(this,u);const g=(e,t)=>{const n=i[e]/255,r=s[e]/255,a=new Array(t+1);for(let i=0;i<=t;i++)a[i]=n+i/t*(r-n);return a.join(",")};return _assertClassBrand(b,this,P).call(this,g(0,5),g(1,5),g(2,5),u),_classPrivateFieldSet(f,this,"url(#".concat(c,")")),_classPrivateFieldGet(f,this)}addHighlightHCMFilter(e,t,n,r){var i;const a="".concat(e,"-").concat(t,"-").concat(n,"-").concat(r);if(_classPrivateFieldGet(g,this)===a)return _classPrivateFieldGet(v,this);if(_classPrivateFieldSet(g,this,a),_classPrivateFieldSet(v,this,"none"),null===(i=_classPrivateFieldGet(m,this))||void 0===i||i.remove(),!e||!t)return _classPrivateFieldGet(v,this);const[s,o]=[e,t].map(_assertClassBrand(b,this,A).bind(this));let l=Math.round(.2126*s[0]+.7152*s[1]+.0722*s[2]),c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),[u,h]=[n,r].map(_assertClassBrand(b,this,A).bind(this));c<l&&([l,c,u,h]=[c,l,h,u]),_classPrivateGetter(b,this,x).style.color="";const p=(e,t,n)=>{const r=new Array(256),i=(c-l)/n,a=e/255,s=(t-e)/(255*n);let o=0;for(let c=0;c<=n;c++){const e=Math.round(l+c*i),t=a+c*s;for(let n=o;n<=e;n++)r[n]=t;o=e+1}for(let l=o;l<256;l++)r[l]=r[o-1];return r.join(",")},f="g_".concat(_classPrivateFieldGet(d,this),"_hcm_highlight_filter"),y=_classPrivateFieldSet(m,this,_assertClassBrand(b,this,k).call(this,f));return _assertClassBrand(b,this,C).call(this,y),_assertClassBrand(b,this,P).call(this,p(u[0],h[0],5),p(u[1],h[1],5),p(u[2],h[2],5),y),_classPrivateFieldSet(v,this,"url(#".concat(f,")")),_classPrivateFieldGet(v,this)}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(_classPrivateFieldGet(f,this)||_classPrivateFieldGet(v,this))||(_classPrivateFieldGet(c,this)&&(_classPrivateFieldGet(c,this).parentNode.parentNode.remove(),_classPrivateFieldSet(c,this,null)),_classPrivateFieldGet(l,this)&&(_classPrivateFieldGet(l,this).clear(),_classPrivateFieldSet(l,this,null)),_classPrivateFieldSet(y,this,0))}}function w(e){return _classPrivateFieldGet(l,e)||_classPrivateFieldSet(l,e,new Map)}function x(e){if(!_classPrivateFieldGet(c,e)){const t=_classPrivateFieldGet(u,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=_classPrivateFieldGet(u,e).createElementNS(s,"svg");r.setAttribute("width",0),r.setAttribute("height",0),_classPrivateFieldSet(c,e,_classPrivateFieldGet(u,e).createElementNS(s,"defs")),t.append(r),r.append(_classPrivateFieldGet(c,e)),_classPrivateFieldGet(u,e).body.append(t)}return _classPrivateFieldGet(c,e)}function C(e){const t=_classPrivateFieldGet(u,this).createElementNS(s,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function k(e){const t=_classPrivateFieldGet(u,this).createElementNS(s,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),_classPrivateGetter(b,this,x).append(t),t}function S(e,t,n){const r=_classPrivateFieldGet(u,this).createElementNS(s,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}function P(e,t,n,r){const i=_classPrivateFieldGet(u,this).createElementNS(s,"feComponentTransfer");r.append(i),_assertClassBrand(b,this,S).call(this,i,"feFuncR",e),_assertClassBrand(b,this,S).call(this,i,"feFuncG",t),_assertClassBrand(b,this,S).call(this,i,"feFuncB",n)}function A(e){return _classPrivateGetter(b,this,x).style.color=e,D(getComputedStyle(_classPrivateGetter(b,this,x)).getPropertyValue("color"))}t.DOMFilterFactory=_;class E extends i.BaseCanvasFactory{constructor(){let{ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(O(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);return t?new Uint8Array(await n.arrayBuffer()):(0,a.stringToBytes)(await n.text())}return new Promise(((n,r)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),t&&(i.responseType="arraybuffer"),i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(200===i.status||0===i.status){let e;if(t&&i.response?e=new Uint8Array(i.response):!t&&i.responseText&&(e=(0,a.stringToBytes)(i.responseText)),e)return void n(e)}r(new Error(i.statusText))}},i.send(null)}))}t.DOMCanvasFactory=E;class I extends i.BaseCMapReaderFactory{_fetchData(e,t){return T(e,this.isCompressed).then((e=>({cMapData:e,compressionType:t})))}}t.DOMCMapReaderFactory=I;class F extends i.BaseStandardFontDataFactory{_fetchData(e){return T(e,!0)}}t.DOMStandardFontDataFactory=F;class R extends i.BaseSVGFactory{_createSVG(e){return document.createElementNS(s,e)}}t.DOMSVGFactory=R;class N{constructor(e){let{viewBox:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:s=!1}=e;this.viewBox=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,d,u,h,p,f,m,g;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,d=0,u=0,h=1;break;case 90:c=0,d=1,u=1,h=0;break;case 270:c=0,d=-1,u=-1,h=0;break;case 0:c=1,d=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(u=-u,h=-h),0===c?(p=Math.abs(l-t[1])*n+i,f=Math.abs(o-t[0])*n+a,m=(t[3]-t[1])*n,g=(t[2]-t[0])*n):(p=Math.abs(o-t[0])*n+i,f=Math.abs(l-t[1])*n+a,m=(t[2]-t[0])*n,g=(t[3]-t[1])*n),this.transform=[c*n,d*n,u*n,h*n,p-c*n*o-u*n*l,f-d*n*o-h*n*l],this.width=m,this.height=g}get rawDims(){const{viewBox:e}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new N({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return a.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=a.Util.applyTransform([e[0],e[1]],this.transform),n=a.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return a.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=N;class j extends a.BaseException{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function M(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function O(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch(n){return!1}}let L;function D(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):((0,a.warn)('Not a valid color format: "'.concat(e,'"')),[0,0,0])}t.RenderingCancelledException=j,t.StatTimer=class{constructor(){_defineProperty(this,"started",Object.create(null)),_defineProperty(this,"times",[])}time(e){e in this.started&&(0,a.warn)("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,a.warn)("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push("".concat(n.padEnd(t)," ").concat(i-r,"ms\n"));return e.join("")}},t.PDFDateString=class{static toDateObject(e){if(!e||"string"!==typeof e)return null;L||(L=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=L.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(a+=c,s+=d):"+"===l&&(a-=c,s-=d),new Date(Date.UTC(n,r,i,a,s,o))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r=n(1);class i{constructor(){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addHighlightHCMFilter(e,t,n,r){return"none"}destroy(){}}t.BaseFilterFactory=i;class a{constructor(){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=a;class s{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(n,i).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}_fetchData(e,t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=s;class o{constructor(e){let{baseUrl:t=null}=e;this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetchData(n).catch((e=>{throw new Error("Unable to load font data at: ".concat(n))}))}_fetchData(e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=o;class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px"))),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),r}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,r.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=n(1);const i=3285377520,a=4294901760,s=65535;t.MurmurHash3_64=class{constructor(e){this.h1=e?4294967295&e:i,this.h2=e?4294967295&e:i}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else{if(!(0,r.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),n=t.byteLength}const i=n>>2,o=n-4*i,l=new Uint32Array(t.buffer,0,i);let c=0,d=0,u=this.h1,h=this.h2;const p=3432918353,f=461845907,m=11601,g=13715;for(let r=0;r<i;r++)1&r?(c=l[r],c=c*p&a|c*m&s,c=c<<15|c>>>17,c=c*f&a|c*g&s,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(d=l[r],d=d*p&a|d*m&s,d=d<<15|d>>>17,d=d*f&a|d*g&s,h^=d,h=h<<13|h>>>19,h=5*h+3864292196);switch(c=0,o){case 3:c^=t[4*i+2]<<16;case 2:c^=t[4*i+1]<<8;case 1:c^=t[4*i],c=c*p&a|c*m&s,c=c<<15|c>>>17,c=c*f&a|c*g&s,1&i?u^=c:h^=c}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&a|36045*e&s,t=4283543511*t&a|(2950163797*(t<<16|e>>>16)&a)>>>16,e^=t>>>1,e=444984403*e&a|60499*e&s,t=3301882366*t&a|(3120437893*(t<<16|e>>>16)&a)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=n(1),i=new WeakMap;t.FontLoader=class{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;_classPrivateFieldInitSpec(this,i,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),_classPrivateFieldGet(i,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){if(e&&!_classPrivateFieldGet(i,this).has(e.loadedName))if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:a,style:s}=e,o=new FontFace(n,a,s);this.addNativeFontFace(o);try{await o.load(),_classPrivateFieldGet(i,this).add(n)}catch(t){(0,r.warn)("Cannot load system font: ".concat(e.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(o)}}else(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e.systemFontInfo);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw(0,r.warn)("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){var e;const t=!(null===(e=this._document)||void 0===e||!e.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let e=!1;return(r.isNodeJS||"undefined"!==typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for((0,r.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;const d="lt".concat(Date.now()).concat(this.loadTestFontId++);let u=this._loadTestFont;u=i(u,976,d.length,d);const h=1482184792;let p=n(u,16);for(a=0,s=d.length-3;a<s;a+=4)p=p-h+n(d,a)|0;a<d.length&&(p=p-h+n(d+"XXX",a)|0),u=i(u,16,4,(0,r.string32)(p));const f="url(data:font/opentype;base64,".concat(btoa(u),");"),m='@font-face {font-family:"'.concat(d,'";src:').concat(f,"}");this.insertRule(m);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const r of[e.loadedName,d]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=r,g.append(e)}this._document.body.append(g),function e(t,n){if(++c>30)return(0,r.warn)("Load test font never loaded."),void n();l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(d,(()=>{g.remove(),t.complete()}))}},t.FontFaceObject=class{constructor(e,t){let{isEvalSupported:n=!0,disableFontFace:r=!1,ignoreErrors:i=!1,inspectFont:a=null}=t;this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.isEvalSupported=!1!==n,this.disableFontFace=!0===r,this.ignoreErrors=!0===i,this._inspectFont=a}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=(0,r.bytesToString)(this.data),n="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");let i;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(n,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,n),i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(i){if(!this.ignoreErrors)throw i;return(0,r.warn)('getPathGenerator - ignoring character: "'.concat(i,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const e=[];for(const t of n){const n=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",n,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const r of n)"scale"===r.cmd&&(r.args=[t,-t]),e[r.cmd].apply(e,r.args)}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r=n(7);n(1);const i=function(e){return new Promise(((t,n)=>{__webpack_require__(618).readFile(e,((e,r)=>{!e&&r?t(new Uint8Array(r)):n(new Error(e))}))}))};class a extends r.BaseFilterFactory{}t.NodeFilterFactory=a;class s extends r.BaseCanvasFactory{_createCanvas(e,t){return __webpack_require__(640).createCanvas(e,t)}}t.NodeCanvasFactory=s;class o extends r.BaseCMapReaderFactory{_fetchData(e,t){return i(e).then((e=>({cMapData:e,compressionType:t})))}}t.NodeCMapReaderFactory=o;class l extends r.BaseStandardFontDataFactory{_fetchData(e){return i(e)}}t.NodeStandardFontDataFactory=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(1),i=n(6),a=n(12),s=n(13);const o=4096,l=16;class c{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function d(e,t,n,r,a,s,o,l,c,d){const[u,h,p,f,m,g]=(0,i.getCurrentTransform)(e);if(0===h&&0===p){const i=o*u+m,v=Math.round(i),y=l*f+g,b=Math.round(y),_=(o+c)*u+m,w=Math.abs(Math.round(_)-v)||1,x=(l+d)*f+g,C=Math.abs(Math.round(x)-b)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(f),v,b),e.drawImage(t,n,r,a,s,0,0,w,C),e.setTransform(u,h,p,f,m,g),[w,C]}if(0===u&&0===f){const i=l*p+m,v=Math.round(i),y=o*h+g,b=Math.round(y),_=(l+d)*p+m,w=Math.abs(Math.round(_)-v)||1,x=(o+c)*h+g,C=Math.abs(Math.round(x)-b)||1;return e.setTransform(0,Math.sign(h),Math.sign(p),0,v,b),e.drawImage(t,n,r,a,s,0,0,C,w),e.setTransform(u,h,p,f,m,g),[C,w]}return e.drawImage(t,n,r,a,s,o,l,c,d),[Math.hypot(u,h)*c,Math.hypot(p,f)*d]}class u{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=r.Util.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=r.Util.applyTransform(t,e),i=r.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,n[0],i[0]),this.minY=Math.min(this.minY,n[1],i[1]),this.maxX=Math.max(this.maxX,n[0],i[0]),this.maxY=Math.max(this.maxY,n[1],i[1])}updateScalingPathMinMax(e,t){r.Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,a,s,o,l,c,d){const u=r.Util.bezierBoundingBox(t,n,i,a,s,o,l,c);if(d)return d[0]=Math.min(d[0],u[0],u[2]),d[1]=Math.max(d[1],u[0],u[2]),d[2]=Math.min(d[2],u[1],u[3]),void(d[3]=Math.max(d[3],u[1],u[3]));this.updateRectMinMax(e,u)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===a.PathType.STROKE){t||(0,r.unreachable)("Stroke bounding box must include transform.");const e=r.Util.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,a=e[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function h(e,t){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,a=n%l,s=(n-a)/l,o=0===a?s:s+1,c=e.createImageData(i,l);let d,u=0;const h=t.data,p=c.data;let f,m,g,v;if(t.kind===r.ImageKind.GRAYSCALE_1BPP){const t=h.byteLength,n=new Uint32Array(p.buffer,0,p.byteLength>>2),v=n.length,y=i+7>>3,b=4294967295,_=r.FeatureTest.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<s?l:a,d=0,m=0;m<g;m++){const e=t-u;let r=0;const a=e>y?i:8*e-7,s=-8&a;let o=0,l=0;for(;r<s;r+=8)l=h[u++],n[d++]=128&l?b:_,n[d++]=64&l?b:_,n[d++]=32&l?b:_,n[d++]=16&l?b:_,n[d++]=8&l?b:_,n[d++]=4&l?b:_,n[d++]=2&l?b:_,n[d++]=1&l?b:_;for(;r<a;r++)0===o&&(l=h[u++],o=128),n[d++]=l&o?b:_,o>>=1}for(;d<v;)n[d++]=0;e.putImageData(c,0,f*l)}}else if(t.kind===r.ImageKind.RGBA_32BPP){for(m=0,v=i*l*4,f=0;f<s;f++)p.set(h.subarray(u,u+v)),u+=v,e.putImageData(c,0,m),m+=l;f<o&&(v=i*a*4,p.set(h.subarray(u,u+v)),e.putImageData(c,0,m))}else{if(t.kind!==r.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(g=l,v=i*g,f=0;f<o;f++){for(f>=s&&(g=a,v=i*g),d=0,m=v;m--;)p[d++]=h[u++],p[d++]=h[u++],p[d++]=h[u++],p[d++]=255;e.putImageData(c,0,f*l)}}}function p(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,r=t.width,i=n%l,a=(n-i)/l,o=0===i?a:a+1,c=e.createImageData(r,l);let d=0;const u=t.data,h=c.data;for(let p=0;p<o;p++){const t=p<a?l:i;({srcPos:d}=(0,s.convertBlackAndWhiteToRGBA)({src:u,srcPos:d,dest:h,width:r,height:t,nonBlackColor:0})),e.putImageData(c,0,p*l)}}function f(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function m(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!r.isNodeJS){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function g(e,t,n,r){const i=e.length;for(let a=3;a<i;a+=4){const i=e[a];if(0===i)e[a-3]=t,e[a-2]=n,e[a-1]=r;else if(i<255){const s=255-i;e[a-3]=e[a-3]*i+t*s>>8,e[a-2]=e[a-2]*i+n*s>>8,e[a-1]=e[a-1]*i+r*s>>8}}}function v(e,t,n){const r=e.length,i=1/255;for(let a=3;a<r;a+=4){const r=n?n[e[a]]:e[a];t[a]=t[a]*r*i|0}}function y(e,t,n){const r=e.length;for(let i=3;i<r;i+=4){const r=77*e[i-3]+152*e[i-2]+28*e[i-1];t[i]=n?t[i]*n[r>>8]>>8:t[i]*r>>16}}function b(e,t,n,r){const i=r[0],a=r[1],s=r[2]-i,o=r[3]-a;0!==s&&0!==o&&(function(e,t,n,r,i,a,s,o,l,c,d){const u=!!a,h=u?a[0]:0,p=u?a[1]:0,f=u?a[2]:0,m="Luminosity"===i?y:v,b=Math.min(r,Math.ceil(1048576/n));for(let v=0;v<r;v+=b){const i=Math.min(b,r-v),a=e.getImageData(o-c,v+(l-d),n,i),y=t.getImageData(o,v+l,n,i);u&&g(a.data,h,p,f),m(a.data,y.data,s),t.putImageData(y,o,v+l)}}(t.context,n,s,o,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}function _(e,t){const n=r.Util.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:n[0]<=a||n[1]<=a}const w=["butt","round","square"],x=["miter","round","bevel"],C={},k={};var S=new WeakSet;class P{constructor(e,t,n,r,i,a,s,o){let{optionalContentConfig:l,markedContentStack:d=null}=a;_classPrivateMethodInitSpec(this,S),this.ctx=e,this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=l,this.cachedCanvases=new c(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:r=!1,background:a=null}=e;const s=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=l,r){const e=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(e,t,n,i){const a=e.argsArray,s=e.fnArray;let o=t||0;const l=a.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,d=c?Date.now()+15:0;let u=0;const h=this.commonObjs,p=this.objs;let f;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;if(f=s[o],f!==r.OPS.dependency)this[f].apply(this,a[o]);else for(const e of a[o]){const t=e.startsWith("g_")?h:p;if(!t.has(e))return t.get(e,n),o}if(o++,o===l)return o;if(c&&++u>10){if(Date.now()>d)return n(),o;u=0}}}endDrawing(){_assertClassBrand(S,this,A).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),_assertClassBrand(S,this,E).call(this)}_scaleImage(e,t){const n=e.width,r=e.height;let i,a,s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,d="prescale1";for(;s>2&&l>1||o>2&&c>1;){let t=l,n=c;s>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/t),o>2&&c>1&&(n=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/n),i=this.cachedCanvases.getCanvas(d,t,n),a=i.context,a.clearRect(0,0,t,n),a.drawImage(e,0,0,l,c,0,0,t,n),e=i.canvas,l=t,c=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,o=this.current.fillColor,l=this.current.patternFill,c=(0,i.getCurrentTransform)(t);let u,h,f,m;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(t),u||(u=new Map,this._cachedBitmapsMap.set(t,u));const n=u.get(h);if(n&&!l)return{canvas:n,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};f=n}f||(m=this.cachedCanvases.getCanvas("maskCanvas",n,s),p(m.context,e));let g=r.Util.transform(c,[1/n,0,0,-1/s,0,0]);g=r.Util.transform(g,[1,0,0,1,0,-s]);const v=r.Util.applyTransform([0,0],g),y=r.Util.applyTransform([n,s],g),b=r.Util.normalizeRect([v[0],v[1],y[0],y[1]]),w=Math.round(b[2]-b[0])||1,x=Math.round(b[3]-b[1])||1,C=this.cachedCanvases.getCanvas("fillCanvas",w,x),k=C.context,S=Math.min(v[0],y[0]),P=Math.min(v[1],y[1]);k.translate(-S,-P),k.transform(...g),f||(f=this._scaleImage(m.canvas,(0,i.getCurrentTransformInverse)(k)),f=f.img,u&&l&&u.set(h,f)),k.imageSmoothingEnabled=_((0,i.getCurrentTransform)(k),e.interpolate),d(k,f,0,0,f.width,f.height,0,0,n,s),k.globalCompositeOperation="source-in";const A=r.Util.transform((0,i.getCurrentTransformInverse)(k),[1,0,0,1,-S,-P]);return k.fillStyle=l?o.getPattern(t,this,A,a.PathType.FILL):o,k.fillRect(0,0,n,s),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,C.canvas)),{canvas:C.canvas,offsetX:Math.round(S),offsetY:Math.round(P)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=w[e]}setLineJoin(e){this.ctx.lineJoin=x[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,i,a,s){t.transform(e,n,r,i,a,s),this.__originalTransform(e,n,r,i,a,s)},e.setTransform=function(e,n,r,i,a,s){t.setTransform(e,n,r,i,a,s),this.__originalSetTransform(e,n,r,i,a,s)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,i,a,s){t.bezierCurveTo(e,n,r,i,a,s),this.__originalBezierCurveTo(e,n,r,i,a,s)},e.rect=function(e,n,r,i){t.rect(e,n,r,i),this.__originalRect(e,n,r,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask;b(this.suspendedCtx,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,i,a){this.ctx.transform(e,t,n,r,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const a=this.ctx,s=this.current;let o,l,c=s.x,d=s.y;const u=(0,i.getCurrentTransform)(a),h=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],p=h?n.slice(0):null;for(let i=0,f=0,m=e.length;i<m;i++)switch(0|e[i]){case r.OPS.rectangle:c=t[f++],d=t[f++];const e=t[f++],n=t[f++],i=c+e,m=d+n;a.moveTo(c,d),0===e||0===n?a.lineTo(i,m):(a.lineTo(i,d),a.lineTo(i,m),a.lineTo(c,m)),h||s.updateRectMinMax(u,[c,d,i,m]),a.closePath();break;case r.OPS.moveTo:c=t[f++],d=t[f++],a.moveTo(c,d),h||s.updatePathMinMax(u,c,d);break;case r.OPS.lineTo:c=t[f++],d=t[f++],a.lineTo(c,d),h||s.updatePathMinMax(u,c,d);break;case r.OPS.curveTo:o=c,l=d,c=t[f+4],d=t[f+5],a.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],c,d),s.updateCurvePathMinMax(u,o,l,t[f],t[f+1],t[f+2],t[f+3],c,d,p),f+=6;break;case r.OPS.curveTo2:o=c,l=d,a.bezierCurveTo(c,d,t[f],t[f+1],t[f+2],t[f+3]),s.updateCurvePathMinMax(u,o,l,c,d,t[f],t[f+1],t[f+2],t[f+3],p),c=t[f+2],d=t[f+3],f+=4;break;case r.OPS.curveTo3:o=c,l=d,c=t[f+2],d=t[f+3],a.bezierCurveTo(t[f],t[f+1],c,d,c,d),s.updateCurvePathMinMax(u,o,l,t[f],t[f+1],c,d,c,d,p),f+=4;break;case r.OPS.closePath:a.closePath()}h&&s.updateScalingPathMinMax(u,p),s.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&null!==n&&void 0!==n&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),a.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let r=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),a.PathType.FILL),r=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=C}eoClip(){this.pendingClip=k}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),a=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(a.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(s,'", ').concat(i.fallbackName);let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let d=t;t<16?d=16:t>100&&(d=100),this.current.fontSizeScale=t/d,this.ctx.font="".concat(c," ").concat(l," ").concat(d,"px ").concat(o)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,i,a){this.current.textMatrix=[e,t,n,r,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,a){const s=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,u=c&r.TextRenderingMode.FILL_STROKE_MASK,h=!!(c&r.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile;let f;(l.disableFontFace||h||p)&&(f=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p?(s.save(),s.translate(t,n),s.beginPath(),f(s,d),a&&s.setTransform(...a),u!==r.TextRenderingMode.FILL&&u!==r.TextRenderingMode.FILL_STROKE||s.fill(),u!==r.TextRenderingMode.STROKE&&u!==r.TextRenderingMode.FILL_STROKE||s.stroke(),s.restore()):(u!==r.TextRenderingMode.FILL&&u!==r.TextRenderingMode.FILL_STROKE||s.fillText(e,t,n),u!==r.TextRenderingMode.STROKE&&u!==r.TextRenderingMode.FILL_STROKE||s.strokeText(e,t,n)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(s),x:t,y:n,fontSize:d,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(0===s)return;const o=this.ctx,l=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,p=e.length,f=n.vertical,m=f?1:-1,g=n.defaultVMetrics,v=s*t.fontMatrix[0],y=t.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;let b;if(o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),u>0?o.scale(h,-1):o.scale(h,1),t.patternFill){o.save();const e=t.fillColor.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),a.PathType.FILL);b=(0,i.getCurrentTransform)(o),o.restore(),o.fillStyle=e}let _=t.lineWidth;const w=t.textMatrixScale;if(0===w||0===_){const e=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;e!==r.TextRenderingMode.STROKE&&e!==r.TextRenderingMode.FILL_STROKE||(_=this.getSinglePixelWidth())}else _/=w;if(1!==l&&(o.scale(l,l),_/=l),o.lineWidth=_,n.isInvalidPDFjsFont){const n=[];let r=0;for(const t of e)n.push(t.unicode),r+=t.width;return o.fillText(n.join(""),0,0),t.x+=r*v*h,o.restore(),void this.compose()}let x,C=0;for(x=0;x<p;++x){const t=e[x];if("number"===typeof t){C+=m*t*s/1e3;continue}let r=!1;const i=(t.isSpace?d:0)+c,a=t.fontChar,h=t.accent;let p,_,w=t.width;if(f){const e=t.vmetric||g,n=-(t.vmetric?e[1]:.5*w)*v,r=e[2]*v;w=e?-e[0]:w,p=n/l,_=(C+r)/l}else p=C/l,_=0;if(n.remeasure&&w>0){const e=1e3*o.measureText(a).width/s*l;if(w<e&&this.isFontSubpixelAAEnabled){const t=w/e;r=!0,o.save(),o.scale(t,1),p/=t}else w!==e&&(p+=(w-e)/2e3*s/l)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(y&&!h)o.fillText(a,p,_);else if(this.paintChar(a,p,_,b),h){const e=p+s*h.offset.x/l,t=_-s*h.offset.y/l;this.paintChar(h.fontChar,e,t,b)}C+=f?w*v-i*u:w*v+i*u,r&&o.restore()}f?t.y-=C:t.x+=C*h,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,a=n.fontSize,s=n.fontDirection,o=i.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,d=n.textHScale*s,u=n.fontMatrix||r.FONT_IDENTITY_MATRIX,h=e.length;let p,f,m,g;if(n.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==a){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(d,s),p=0;p<h;++p){if(f=e[p],"number"===typeof f){g=o*f*a/1e3,this.ctx.translate(g,0),n.x+=g*d;continue}const s=(f.isSpace?c:0)+l,h=i.charProcOperatorList[f.operatorListId];h?(this.contentVisible&&(this.processingType3=f,this.save(),t.scale(a,a),t.transform(...u),this.executeOperatorList(h),this.restore()),m=r.Util.applyTransform([f.width,0],u)[0]*a+s,t.translate(m,0),n.x+=m*d):(0,r.warn)('Type3 character "'.concat(f.operatorListId,'" is not available.'))}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,a){this.ctx.rect(n,r,i-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],r=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),s={createCanvasGraphics:e=>new P(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new a.TilingPattern(e,n,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const i=r.Util.makeHexColor(e,t,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(e,t,n){const i=r.Util.makeHexColor(e,t,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=(0,a.getShadingPattern)(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),a.PathType.SHADING);const s=(0,i.getCurrentTransformInverse)(t);if(s){const{width:e,height:n}=t.canvas,[i,a,o,l]=r.Util.getAxialAlignedBoundingBox([0,0,e,n],s);this.ctx.fillRect(i,a,o-i,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform(...e),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups."),e.knockout&&(0,r.warn)("Knockout groups not supported.");const n=(0,i.getCurrentTransform)(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=r.Util.getAxialAlignedBoundingBox(e.bbox,(0,i.getCurrentTransform)(t));const s=[0,0,t.canvas.width,t.canvas.height];a=r.Util.intersect(a,s)||[0,0,0,0];const l=Math.floor(a[0]),c=Math.floor(a[1]);let d=Math.max(Math.ceil(a[2])-l,1),u=Math.max(Math.ceil(a[3])-c,1),h=1,p=1;d>o&&(h=d/o,d=o),u>o&&(p=u/o,u=o),this.current.startNewPathAndClipBox([0,0,d,u]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,d,u),v=g.context;v.scale(1/h,1/p),v.translate(-l,-c),v.transform(...n),e.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:l,offsetY:c,scaleX:h,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,c),t.scale(h,p),t.save()),f(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=r.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,a,s){if(_assertClassBrand(S,this,A).call(this),m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(t)&&4===t.length){const a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=a,t[3]=o;const[s,l]=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,d=Math.ceil(a*this.outputScaleX*c),u=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,u);const{canvas:h,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(s,0,0,-l,0,o*l),m(this.ctx)}else m(this.ctx),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.endPath()}this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_assertClassBrand(S,this,E).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=t+1;let a,s,o,l=new Uint8Array(i*(n+1));const c=t+7&-8;let d=new Uint8Array(c*n),u=0;for(const m of e.data){let e=128;for(;e>0;)d[u++]=m&e?0:255,e>>=1}let h=0;for(u=0,0!==d[u]&&(l[0]=1,++h),s=1;s<t;s++)d[u]!==d[u+1]&&(l[s]=d[u]?2:1,++h),u++;for(0!==d[u]&&(l[s]=2,++h),a=1;a<n;a++){u=a*c,o=a*i,d[u-c]!==d[u]&&(l[o]=d[u]?1:8,++h);let e=(d[u]?4:0)+(d[u-c]?8:0);for(s=1;s<t;s++)e=(e>>2)+(d[u+1]?4:0)+(d[u-c+1]?8:0),r[e]&&(l[o+s]=r[e],++h),u++;if(d[u-c]!==d[u]&&(l[o+s]=d[u]?2:4,++h),h>1e3)return null}for(u=c*(n-1),o=a*i,0!==d[u]&&(l[o]=8,++h),s=1;s<t;s++)d[u]!==d[u+1]&&(l[o+s]=d[u]?4:8,++h),u++;if(0!==d[u]&&(l[o+s]=4,++h),h>1e3)return null;const p=new Int32Array([0,i,-1,0,-i,0,0,0,1]),f=new Path2D;for(a=0;h&&a<=n;a++){let e=a*i;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;f.moveTo(e%i,a);const r=e;let s=l[e];do{const t=p[s];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(s=n,l[e]=0):(s=n&51*s>>4,l[e]&=s>>2|s<<2),f.lineTo(e%i,e/i|0),l[e]||--h}while(r!==e);--a}return d=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(f),e.beginPath(),e.restore()}}(e)),r.compiled))return void r.compiled(n);const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=(0,i.getCurrentTransform)(l);l.transform(t,n,a,s,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let i=0,u=o.length;i<u;i+=2){const e=r.Util.transform(c,[t,n,a,s,o[i],o[i+1]]),[u,h]=r.Util.applyTransform([0,0],e);l.drawImage(d.canvas,u,h)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:e,width:o,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save(),p(h,this.getObject(e,s)),h.globalCompositeOperation="source-in",h.fillStyle=r?n.getPattern(h,this,(0,i.getCurrentTransformInverse)(t),a.PathType.FILL):n,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),d(t,u.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a)return void(0,r.warn)("Dependent image isn't ready yet");const s=a.width,o=a.height,l=[];for(let r=0,c=i.length;r<c;r+=2)l.push({transform:[t,0,0,n,i[r],i[r+1]],x:0,y:0,w:s,h:o});this.paintInlineImageXObjectGroup(a,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,a=this.ctx;if(this.save(),!r.isNodeJS){const{filter:e}=a;"none"!==e&&""!==e&&(a.filter="none")}let s;if(a.scale(1/t,-1/n),e.bitmap)s=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)s=e;else{const r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;h(r,e),s=this.applyTransferMapsToCanvas(r)}const o=this._scaleImage(s,(0,i.getCurrentTransformInverse)(a));a.imageSmoothingEnabled=_((0,i.getCurrentTransform)(a),e.interpolate),d(a,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;h(i,e),r=this.applyTransferMapsToCanvas(i)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),d(n,r,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===k?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,i.getCurrentTransform)(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let a,s;if(0===n&&0===r){const n=Math.abs(t),r=Math.abs(i);if(n===r)if(0===e)a=s=1/n;else{const t=n*e;a=s=t<1?1/t:1}else if(0===e)a=1/n,s=1/r;else{const t=n*e,i=r*e;a=t<1?1/t:1,s=i<1?1/i:1}}else{const o=Math.abs(t*i-n*r),l=Math.hypot(t,n),c=Math.hypot(r,i);if(0===e)a=c/o,s=l/o;else{const t=e*o;a=c>t?c/t:1,s=l>t?l/t:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=s}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,i]=this.getScaleForStroking();if(t.lineWidth=n||1,1===r&&1===i)return void t.stroke();const a=t.getLineDash();if(e&&t.save(),t.scale(r,i),a.length>0){const e=Math.max(r,i);t.setLineDash(a.map((t=>t/e))),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function A(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function E(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}t.CanvasGraphics=P;for(const T in r.OPS)void 0!==P.prototype[T]&&(P.prototype[r.OPS[T]]=P.prototype[T])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new l(e);case"Mesh":return new u(e);case"Dummy":return new h}throw new Error("Unknown IR type: ".concat(e[0]))};var r=n(1),i=n(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s(e,t){if(!t)return;const n=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,r),e.clip(i)}t.PathType=a;class o{constructor(){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class l extends o{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,o){let l;if(o===a.STROKE||o===a.FILL){const a=t.current.getClippedPathBoundingBox(o,(0,i.getCurrentTransform)(e))||[0,0,0,0],c=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",c,d,!0),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=r.Util.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),s(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),l=e.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(n);l.setTransform(p)}else s(e,this._bbox),l=this._createGradient(e);return l}}function c(e,t,n,r,i,a,s,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=s,s=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=s,s=o,o=h),l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=s,s=h);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,m=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,y=(l[i+1]+t.offsetY)*t.scaleY;if(f>=y)return;const b=c[a],_=c[a+1],w=c[a+2],x=c[s],C=c[s+1],k=c[s+2],S=c[o],P=c[o+1],A=c[o+2],E=Math.round(f),T=Math.round(y);let I,F,R,N,j,M,O,L;for(let D=E;D<=T;D++){if(D<g){const e=D<f?0:(f-D)/(f-g);I=p-(p-m)*e,F=b-(b-x)*e,R=_-(_-C)*e,N=w-(w-k)*e}else{let e;e=D>y?1:g===y?0:(g-D)/(g-y),I=m-(m-v)*e,F=x-(x-S)*e,R=C-(C-P)*e,N=k-(k-A)*e}let e;e=D<f?0:D>y?1:(f-D)/(f-y),j=p-(p-v)*e,M=b-(b-S)*e,O=_-(_-P)*e,L=w-(w-A)*e;const t=Math.round(Math.min(I,j)),n=Math.round(Math.max(I,j));let r=u*D+4*t;for(let i=t;i<=n;i++)e=(I-i)/(I-j),e<0?e=0:e>1&&(e=1),d[r++]=F-(F-M)*e|0,d[r++]=R-(R-O)*e|0,d[r++]=N-(N-L)*e|0,d[r++]=255}}function d(e,t,n){const r=t.coords,i=t.colors;let a,s;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(r.length/o)-1,d=o-1;for(a=0;a<l;a++){let t=a*o;for(let a=0;a<d;a++,t++)c(e,n,r[t],r[t+1],r[t+o],i[t],i[t+1],i[t+o]),c(e,n,r[t+o+1],r[t+1],r[t+o],i[t+o+1],i[t+1],i[t+o])}break;case"triangles":for(a=0,s=r.length;a<s;a+=3)c(e,n,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class u extends o{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const r=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-r,s=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),c=a/o,u=s/l,h={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-i,scaleX:1/c,scaleY:1/u},p=o+4,f=l+4,m=n.getCanvas("mesh",p,f,!1),g=m.context,v=g.createImageData(o,l);if(t){const e=v.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const y of this._figures)d(v,y,h);return g.putImageData(v,2,2),{canvas:m.canvas,offsetX:r-2*c,offsetY:i-2*u,scaleX:c,scaleY:u}}getPattern(e,t,n,o){let l;if(s(e,this._bbox),o===a.SHADING)l=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(e));else if(l=r.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=r.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*e[0],l[1]*e[1]]}const c=this._createMeshCanvas(l,o===a.SHADING?null:this._background,t.cachedCanvases);return o!==a.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class h extends o{getPattern(){return"hotpink"}}const p=1,f=2;class m{constructor(e,t,n,r,i){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,a=this.xstep,s=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,d=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+l);const u=n[0],h=n[1],p=n[2],f=n[3],m=r.Util.singularValueDecompose2dScale(this.matrix),g=r.Util.singularValueDecompose2dScale(this.baseTransform),v=[m[0]*g[0],m[1]*g[1]],y=this.getSizeAndScale(a,this.ctx.canvas.width,v[0]),b=this.getSizeAndScale(s,this.ctx.canvas.height,v[1]),_=e.cachedCanvases.getCanvas("pattern",y.size,b.size,!0),w=_.context,x=d.createCanvasGraphics(w);x.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,o,c);let C=u,k=h,S=p,P=f;return u<0&&(C=0,S+=Math.abs(u)),h<0&&(k=0,P+=Math.abs(h)),w.translate(-y.scale*C,-b.scale*k),x.transform(y.scale,0,0,b.scale,0,0),w.save(),this.clipBbox(x,C,k,S,P),x.baseTransform=(0,i.getCurrentTransform)(x.ctx),x.executeOperatorList(t),x.endDrawing(),{canvas:_.canvas,scaleX:y.scale,scaleY:b.scale,offsetX:C,offsetY:k}}getSizeAndScale(e,t,n){e=Math.abs(e);const r=Math.max(m.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,a){const s=r-t,o=a-n;e.ctx.rect(t,n,s,o),e.current.updateRectMinMax((0,i.getCurrentTransform)(e.ctx),[t,n,r,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case p:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,a.fillColor=e.fillStyle,a.strokeColor=e.strokeStyle;break;case f:const s=r.Util.makeHexColor(n[0],n[1],n[2]);i.fillStyle=s,i.strokeStyle=s,a.fillColor=s,a.strokeColor=s;break;default:throw new r.FormatError("Unsupported paint type: ".concat(t))}}getPattern(e,t,n,i){let s=n;i!==a.SHADING&&(s=r.Util.transform(s,t.baseTransform),this.matrix&&(s=r.Util.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}}_defineProperty(m,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=m},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=i,t.convertToRGBA=function(e){switch(e.kind){case r.ImageKind.GRAYSCALE_1BPP:return i(e);case r.ImageKind.RGB_24BPP:return function(e){let{src:t,srcPos:n=0,dest:i,destPos:a=0,width:s,height:o}=e,l=0;const c=t.length>>2,d=new Uint32Array(t.buffer,n,c);if(r.FeatureTest.isLittleEndian){for(;l<c-2;l+=3,a+=4){const e=d[l],t=d[l+1],n=d[l+2];i[a]=4278190080|e,i[a+1]=e>>>24|t<<8|4278190080,i[a+2]=t>>>16|n<<16|4278190080,i[a+3]=n>>>8|4278190080}for(let e=4*l,n=t.length;e<n;e+=3)i[a++]=t[e]|t[e+1]<<8|t[e+2]<<16|4278190080}else{for(;l<c-2;l+=3,a+=4){const e=d[l],t=d[l+1],n=d[l+2];i[a]=255|e,i[a+1]=e<<24|t>>>8|255,i[a+2]=t<<16|n>>>16|255,i[a+3]=n<<8|255}for(let e=4*l,n=t.length;e<n;e+=3)i[a++]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|255}return{srcPos:n,destPos:a}}(e)}return null},t.grayToRGBA=function(e,t){if(r.FeatureTest.isLittleEndian)for(let n=0,r=e.length;n<r;n++)t[n]=65793*e[n]|4278190080;else for(let n=0,r=e.length;n<r;n++)t[n]=16843008*e[n]|255};var r=n(1);function i(e){let{src:t,srcPos:n=0,dest:i,width:a,height:s,nonBlackColor:o=4294967295,inverseDecode:l=!1}=e;const c=r.FeatureTest.isLittleEndian?4278190080:255,[d,u]=l?[o,c]:[c,o],h=a>>3,p=7&a,f=t.length;i=new Uint32Array(i.buffer);let m=0;for(let r=0;r<s;r++){for(const r=n+h;n<r;n++){const e=n<f?t[n]:255;i[m++]=128&e?u:d,i[m++]=64&e?u:d,i[m++]=32&e?u:d,i[m++]=16&e?u:d,i[m++]=8&e?u:d,i[m++]=4&e?u:d,i[m++]=2&e?u:d,i[m++]=1&e?u:d}if(0===p)continue;const e=n<f?t[n++]:255;for(let t=0;t<p;t++)i[m++]=e&1<<7-t?u:d}return{srcPos:n,destPos:m}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(1);const i=1,a=2,s=1,o=2,l=3,c=4,d=5,u=6,h=7,p=8;function f(e){switch(e instanceof Error||"object"===typeof e&&null!==e||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new r.AbortException(e.message);case"MissingPDFException":return new r.MissingPDFException(e.message);case"PasswordException":return new r.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new r.UnknownErrorException(e.message,e.details);default:return new r.UnknownErrorException(e.message,e.toString())}}var m=new WeakSet;function g(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],u={enqueue(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:c,streamId:t,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:l,streamId:t}),delete s.streamSinks[t])},error(e){(0,r.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:d,streamId:t,reason:f(e)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,new Promise((function(t){t(o(e.data,u))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:p,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:i,stream:p,streamId:t,reason:f(e)})}))}function v(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,g=this.streamControllers[t],v=this.streamSinks[t];switch(e.stream){case p:e.success?g.startCall.resolve():g.startCall.reject(f(e.reason));break;case h:e.success?g.pullCall.resolve():g.pullCall.reject(f(e.reason));break;case u:if(!v){a.postMessage({sourceName:n,targetName:i,stream:h,streamId:t,success:!0});break}v.desiredSize<=0&&e.desiredSize>0&&v.sinkCapability.resolve(),v.desiredSize=e.desiredSize,new Promise((function(e){var t;e(null===(t=v.onPull)||void 0===t?void 0:t.call(v))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:h,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:i,stream:h,streamId:t,reason:f(e)})}));break;case c:if((0,r.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(e.chunk);break;case l:if((0,r.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),_assertClassBrand(m,this,y).call(this,g,t);break;case d:(0,r.assert)(g,"error should have stream controller"),g.controller.error(f(e.reason)),_assertClassBrand(m,this,y).call(this,g,t);break;case o:e.success?g.cancelCall.resolve():g.cancelCall.reject(f(e.reason)),_assertClassBrand(m,this,y).call(this,g,t);break;case s:if(!v)break;new Promise((function(t){var n;t(null===(n=v.onCancel)||void 0===n?void 0:n.call(v,f(e.reason)))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:o,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:i,stream:o,streamId:t,reason:f(e)})})),v.sinkCapability.reject(f(e.reason)),v.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function y(e,t){var n,r,i;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(r=e.pullCall)||void 0===r?void 0:r.promise,null===(i=e.cancelCall)||void 0===i?void 0:i.promise]),delete this.streamControllers[t]}t.MessageHandler=class{constructor(e,t,n){_classPrivateMethodInitSpec(this,m),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void _assertClassBrand(m,this,v).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===i)n.resolve(t.data);else{if(t.callback!==a)throw new Error("Unexpected callback case");n.reject(f(t.reason))}return}const r=this.actionHandler[t.action];if(!r)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,s=t.sourceName;new Promise((function(e){e(r(t.data))})).then((function(r){n.postMessage({sourceName:e,targetName:s,callback:i,callbackId:t.callbackId,data:r})}),(function(r){n.postMessage({sourceName:e,targetName:s,callback:a,callbackId:t.callbackId,reason:f(r)})}))}else t.streamId?_assertClassBrand(m,this,g).call(this,t):r(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=new r.PromiseCapability;this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:n=>{const s=new r.PromiseCapability;return this.streamControllers[a]={controller:n,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:a,data:t,desiredSize:n.desiredSize},i),s.promise},pull:e=>{const t=new r.PromiseCapability;return this.streamControllers[a].pullCall=t,c.postMessage({sourceName:o,targetName:l,stream:u,streamId:a,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,r.assert)(e instanceof Error,"cancel must have a valid reason");const t=new r.PromiseCapability;return this.streamControllers[a].cancelCall=t,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:s,streamId:a,reason:f(e)}),t.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(1),i=new WeakMap,a=new WeakMap;t.Metadata=class{constructor(e){let{parsedData:t,rawData:n}=e;_classPrivateFieldInitSpec(this,i,void 0),_classPrivateFieldInitSpec(this,a,void 0),_classPrivateFieldSet(i,this,t),_classPrivateFieldSet(a,this,n)}getRaw(){return _classPrivateFieldGet(a,this)}get(e){var t;return null!==(t=_classPrivateFieldGet(i,this).get(e))&&void 0!==t?t:null}getAll(){return(0,r.objectFromMap)(_classPrivateFieldGet(i,this))}has(e){return _classPrivateFieldGet(i,this).has(e)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=n(1),i=n(8);const a=Symbol("INTERNAL");var s=new WeakMap;class o{constructor(e,t){_classPrivateFieldInitSpec(this,s,!0),this.name=e,this.intent=t}get visible(){return _classPrivateFieldGet(s,this)}_setVisible(e,t){e!==a&&(0,r.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(s,this,t)}}var l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakSet;function p(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let a;if(Array.isArray(t))a=_assertClassBrand(h,this,p).call(this,t);else{if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;a=_classPrivateFieldGet(c,this).get(t).visible}switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===n}t.OptionalContentConfig=class{constructor(e){if(_classPrivateMethodInitSpec(this,h),_classPrivateFieldInitSpec(this,l,null),_classPrivateFieldInitSpec(this,c,new Map),_classPrivateFieldInitSpec(this,d,null),_classPrivateFieldInitSpec(this,u,null),this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,_classPrivateFieldSet(u,this,e.order);for(const t of e.groups)_classPrivateFieldGet(c,this).set(t.id,new o(t.name,t.intent));if("OFF"===e.baseState)for(const e of _classPrivateFieldGet(c,this).values())e._setVisible(a,!1);for(const t of e.on)_classPrivateFieldGet(c,this).get(t)._setVisible(a,!0);for(const t of e.off)_classPrivateFieldGet(c,this).get(t)._setVisible(a,!1);_classPrivateFieldSet(d,this,this.getHash())}}isVisible(e){if(0===_classPrivateFieldGet(c,this).size)return!0;if(!e)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return _classPrivateFieldGet(c,this).has(e.id)?_classPrivateFieldGet(c,this).get(e.id).visible:((0,r.warn)("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return _assertClassBrand(h,this,p).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(_classPrivateFieldGet(c,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(!_classPrivateFieldGet(c,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(!_classPrivateFieldGet(c,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(_classPrivateFieldGet(c,this).get(t).visible)return!1}return!0}return(0,r.warn)("Unknown optional content policy ".concat(e.policy,".")),!0}return(0,r.warn)("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_classPrivateFieldGet(c,this).has(e)?(_classPrivateFieldGet(c,this).get(e)._setVisible(a,!!t),_classPrivateFieldSet(l,this,null)):(0,r.warn)("Optional content group not found: ".concat(e))}get hasInitialVisibility(){return null===_classPrivateFieldGet(d,this)||this.getHash()===_classPrivateFieldGet(d,this)}getOrder(){return _classPrivateFieldGet(c,this).size?_classPrivateFieldGet(u,this)?_classPrivateFieldGet(u,this).slice():[..._classPrivateFieldGet(c,this).keys()]:null}getGroups(){return _classPrivateFieldGet(c,this).size>0?(0,r.objectFromMap)(_classPrivateFieldGet(c,this)):null}getGroup(e){return _classPrivateFieldGet(c,this).get(e)||null}getHash(){if(null!==_classPrivateFieldGet(l,this))return _classPrivateFieldGet(l,this);const e=new i.MurmurHash3_64;for(const[t,n]of _classPrivateFieldGet(c,this))e.update("".concat(t,":").concat(n.visible));return _classPrivateFieldSet(l,this,e.hexdigest())}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=n(1),i=n(6);t.PDFDataTransportStream=class{constructor(e,t){let{length:n,initialData:i,progressiveDone:a=!1,contentDispositionFilename:s=null,disableRange:o=!1,disableStream:l=!1}=e;if((0,r.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=s,(null===i||void 0===i?void 0:i.length)>0){const e=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!l,this._isRangeSupported=!o,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const e=this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)}));(0,r.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,r,i;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(r=this._fullRequestReader)||void 0===r||null===(i=r.onProgress)||void 0===i||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new a(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new s(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}};class a{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=(0,i.isPdfFile)(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class s{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=n(1),i=n(20);function a(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function s(e){const t=new Headers;for(const n in e){const r=e[n];void 0!==r&&t.append(n,r)}return t}function o(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:((0,r.warn)("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new c(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}};class l{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new r.PromiseCapability,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=s(this._stream.httpHeaders);const n=t.url;fetch(n,a(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:a,suggestedLength:s}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=s||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:o(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class c{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const o=e.source;this._withCredentials=o.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController,this._headers=s(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(t,"-").concat(n-1));const l=o.url;fetch(l,a(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,l);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:o(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+t+'".'):new r.UnexpectedResponseException("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)},t.extractFilenameFromHeader=function(e){const t=e("Content-Disposition");if(t){let e=(0,i.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if((0,a.isPdfFile)(e))return e}return null},t.validateRangeRequestCapabilities=function(e){let{getResponseHeader:t,isHttp:n,rangeChunkSize:r,disableRange:i}=e;const a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t("Content-Length"),10);return Number.isInteger(s)?(a.suggestedLength=s,s<=2*r||i||!n||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a):a},t.validateResponseStatus=function(e){return 200===e||206===e};var r=n(1),i=n(21),a=n(6)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=o(n);return e=unescape(e),e=l(e),e=c(e),s(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,r,i]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,i]}const a=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=o(n),e&&(n=unescape(n),0===i&&(n=l(n))),a.push(n)}return a.join("")}(e),n)return s(c(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=o(n);return e=c(e),s(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function a(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),a=(0,r.stringToBytes)(n);n=i.decode(a),t=!1}catch(i){}}return n}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=a("utf-8",e),t&&(e=a("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){const t=e.indexOf("'");return-1===t?e:a(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function c(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return a(t,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch(i){}return a(t,r)}))}return""};var r=n(1)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=n(1),i=n(20);class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const i in n)r[i]=n[i];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const e=this.httpHeaders[i];void 0!==e&&t.setRequestHeader(i,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const r=this.pendingRequests[e];r&&(null===(n=r.onProgress)||void 0===n||n.call(r,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;var a;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void(null===(a=n.onError)||void 0===a||a.call(n,i.status));const s=i.status||200;var o;if((200!==s||206!==n.expectedStatus)&&s!==n.expectedStatus)return void(null===(o=n.onError)||void 0===o||o.call(n,i.status));const l=function(e){const t=e.response;return"string"!==typeof t?t:(0,r.stringToBytes)(t).buffer}(i);if(206===s){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:l})}else if(l)n.onDone({begin:0,chunk:l});else{var c;null===(c=n.onError)||void 0===c||c.call(n,i.status)}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new a(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new o(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}};class s{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:r,suggestedLength:a}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class o{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=n(1),i=n(20);const a=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=__webpack_require__(671),n=t.parse(e);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(e)?t.parse("file:///".concat(e)):(n.host||(n.protocol="file:"),n)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new c(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new h(this,e,t):new d(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}};class s{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class o{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class c extends s{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:a,suggestedLength:s}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=s||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n)};if(this._request=null,"http:"===this._url.protocol){const n=__webpack_require__(492);this._request=n.request(l(this._url,e.httpHeaders),t)}else{const n=__webpack_require__(815);this._request=n.request(l(this._url,e.httpHeaders),t)}this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class d extends o{constructor(e,t,n){super(e),this._httpHeaders={};for(const r in e.httpHeaders){const t=e.httpHeaders[r];void 0!==t&&(this._httpHeaders[r]=t)}this._httpHeaders.Range="bytes=".concat(t,"-").concat(n-1);const i=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=e}};if(this._request=null,"http:"===this._url.protocol){const e=__webpack_require__(492);this._request=e.request(l(this._url,this._httpHeaders),i)}else{const e=__webpack_require__(815);this._request=e.request(l(this._url,this._httpHeaders),i)}this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class u extends s{constructor(e){super(e);let t=decodeURIComponent(this._url.path);a.test(this._url.href)&&(t=t.replace(/^\//,""));const n=__webpack_require__(618);n.lstat(t,((e,i)=>{if(e)return"ENOENT"===e.code&&(e=new r.MissingPDFException('Missing PDF "'.concat(t,'".'))),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=i.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()}))}}class h extends o{constructor(e,t,n){super(e);let r=decodeURIComponent(this._url.path);a.test(this._url.href)&&(r=r.replace(/^\//,""));const i=__webpack_require__(618);this._setReadableStream(i.createReadStream(r,{start:t,end:n-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=n(6),i=n(1);const a="normal",s="normal",o="#000000",l=["butt","round","square"],c=["miter","round","bevel"],d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!==typeof Blob&&!n)return URL.createObjectURL(new Blob([e],{type:t}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i="data:".concat(t,";base64,");for(let a=0,s=e.length;a<s;a+=3){const t=255&e[a],n=255&e[a+1],o=255&e[a+2];i+=r[t>>2]+r[(3&t)<<4|n>>4]+r[a+1<s?(15&n)<<2|o>>6:64]+r[a+2<s?63&o:64]}return i},u=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256);for(let i=0;i<256;i++){let e=i;for(let t=0;t<8;t++)e=1&e?3988292384^e>>1&2147483647:e>>1&2147483647;t[i]=e}function n(e,n,r,i){let a=i;const s=n.length;r[a]=s>>24&255,r[a+1]=s>>16&255,r[a+2]=s>>8&255,r[a+3]=255&s,a+=4,r[a]=255&e.charCodeAt(0),r[a+1]=255&e.charCodeAt(1),r[a+2]=255&e.charCodeAt(2),r[a+3]=255&e.charCodeAt(3),a+=4,r.set(n,a),a+=n.length;const o=function(e,n,r){let i=-1;for(let a=n;a<r;a++){const n=255&(i^e[a]);i=i>>>8^t[n]}return~i}(r,i+4,a);r[a]=o>>24&255,r[a+1]=o>>16&255,r[a+2]=o>>8&255,r[a+3]=255&o}function r(e){let t=e.length;const n=65535,r=Math.ceil(t/n),i=new Uint8Array(2+t+5*r+4);let a=0;i[a++]=120,i[a++]=156;let s=0;for(;t>n;)i[a++]=0,i[a++]=255,i[a++]=255,i[a++]=0,i[a++]=0,i.set(e.subarray(s,s+n),a),a+=n,s+=n,t-=n;i[a++]=1,i[a++]=255&t,i[a++]=t>>8&255,i[a++]=255&~t,i[a++]=(65535&~t)>>8&255,i.set(e.subarray(s),a),a+=e.length-s;const o=function(e,t,n){let r=1,i=0;for(let a=t;a<n;++a)r=(r+(255&e[a]))%65521,i=(i+r)%65521;return i<<16|r}(e,0,e.length);return i[a++]=o>>24&255,i[a++]=o>>16&255,i[a++]=o>>8&255,i[a++]=255&o,i}function a(t,a,s,o){const l=t.width,c=t.height;let u,h,p;const f=t.data;switch(a){case i.ImageKind.GRAYSCALE_1BPP:h=0,u=1,p=l+7>>3;break;case i.ImageKind.RGB_24BPP:h=2,u=8,p=3*l;break;case i.ImageKind.RGBA_32BPP:h=6,u=8,p=4*l;break;default:throw new Error("invalid format")}const m=new Uint8Array((1+p)*c);let g=0,v=0;for(let e=0;e<c;++e)m[g++]=0,m.set(f.subarray(v,v+p),g),v+=p,g+=p;if(a===i.ImageKind.GRAYSCALE_1BPP&&o){g=0;for(let e=0;e<c;e++){g++;for(let e=0;e<p;e++)m[g++]^=255}}const y=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,255&l,c>>24&255,c>>16&255,c>>8&255,255&c,u,h,0,0,0]),b=function(e){if(!i.isNodeJS)return r(e);try{const t=parseInt(process.versions.node)>=8?e:Buffer.from(e),n=__webpack_require__(787).deflateSync(t,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(t){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return r(e)}(m),_=e.length+36+y.length+b.length,w=new Uint8Array(_);let x=0;return w.set(e,x),x+=e.length,n("IHDR",y,w,x),x+=12+y.length,n("IDATA",b,w,x),x+=12+b.length,n("IEND",new Uint8Array(0),w,x),d(w,"image/png",s)}return function(e,t,n){return a(e,void 0===e.kind?i.ImageKind.GRAYSCALE_1BPP:e.kind,t,n)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=s,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function p(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)}function f(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale(".concat(p(e[0])," ").concat(p(e[3]),")");if(e[0]===e[3]&&e[1]===-e[2]){const t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(p(t),")")}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate(".concat(p(e[4])," ").concat(p(e[5]),")");return"matrix(".concat(p(e[0])," ").concat(p(e[1])," ").concat(p(e[2])," ").concat(p(e[3])," ").concat(p(e[4])," ")+"".concat(p(e[5]),")")}let m=0,g=0,v=0;t.SVGGraphics=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new h,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const r in i.OPS)this._operatorIdMapping[i.OPS[r]]=r}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,n=e.argsArray;for(let r=0,a=t.length;r<a;r++)if(t[r]===i.OPS.dependency)for(const e of n[r]){const t=e.startsWith("g_")?this.commonObjs:this.objs,n=new Promise((n=>{t.get(e,n)}));this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(e,t,n,r,a,s){const o=[e,t,n,r,a,s];this.transformMatrix=i.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(e,t){this.viewport=t;const n=this._initialize(t);return this.loadDependencies(e).then((()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),n)))}convertOpList(e){const t=this._operatorIdMapping,n=e.argsArray,r=e.fnArray,i=[];for(let a=0,s=r.length;a<s;a++){const e=r[a];i.push({fnId:e,fn:t[e],args:n[a]})}return function(e){let t=[];const n=[];for(const r of e)"save"!==r.fn?"restore"===r.fn?t=n.pop():t.push(r):(t.push({fnId:92,fn:"group",items:[]}),n.push(t),t=t.at(-1).items);return t}(i)}executeOpTree(e){for(const t of e){const e=t.fn,n=t.fnId,r=t.args;switch(0|n){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(r);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(r[0],r[1]);break;case i.OPS.setFont:this.setFont(r);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(r[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(r[0],r[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(r[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(r[0]);break;case i.OPS.setHScale:this.setHScale(r[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.setTextRise:this.setTextRise(r[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(r[0]);break;case i.OPS.setLineWidth:this.setLineWidth(r[0]);break;case i.OPS.setLineJoin:this.setLineJoin(r[0]);break;case i.OPS.setLineCap:this.setLineCap(r[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(r[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(r);break;case i.OPS.setFillColorN:this.setFillColorN(r);break;case i.OPS.shadingFill:this.shadingFill(r[0]);break;case i.OPS.setDash:this.setDash(r[0],r[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(r[0]);break;case i.OPS.setFlatness:this.setFlatness(r[0]);break;case i.OPS.setGState:this.setGState(r[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(r[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(r[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(r[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(r[0],r[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.constructPath:this.constructPath(r[0],r[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,i.warn)("Unimplemented operator ".concat(e))}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,n,r,i,a){const s=this.current;s.textMatrix=s.lineMatrix=[e,t,n,r,i,a],s.textMatrixScale=Math.hypot(e,t),s.x=s.lineX=0,s.y=s.lineY=0,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size","".concat(p(s.fontSize),"px")),s.tspan.setAttributeNS(null,"y",p(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.append(s.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=i.IDENTITY_MATRIX,e.lineMatrix=i.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size","".concat(p(n.fontSize),"px")),n.tspan.setAttributeNS(null,"y",p(-n.y))}showText(e){const t=this.current,n=t.font,r=t.fontSize;if(0===r)return;const l=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,m=n.vertical,g=m?1:-1,v=n.defaultVMetrics,y=r*t.fontMatrix[0];let b=0;for(const i of e){if(null===i){b+=u*d;continue}if("number"===typeof i){b+=g*i*r/1e3;continue}const e=(i.isSpace?d:0)+c,a=i.fontChar;let s,o,h=i.width;if(m){let e;const t=i.vmetric||v;e=i.vmetric?t[1]:.5*h,e=-e*y;const n=t[2]*y;h=t?-t[0]:h,s=e/l,o=(b+n)/l}else s=b/l,o=0;(i.isInFont||n.missingFile)&&(t.xcoords.push(t.x+s),m&&t.ycoords.push(-t.y+o),t.tspan.textContent+=a),b+=m?h*y-e*u:h*y+e*u}t.tspan.setAttributeNS(null,"x",t.xcoords.map(p).join(" ")),m?t.tspan.setAttributeNS(null,"y",t.ycoords.map(p).join(" ")):t.tspan.setAttributeNS(null,"y",p(-t.y)),m?t.y-=b:t.x+=b*h,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size","".concat(p(t.fontSize),"px")),t.fontStyle!==a&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==s&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const _=t.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(_===i.TextRenderingMode.FILL||_===i.TextRenderingMode.FILL_STROKE?(t.fillColor!==o&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),_===i.TextRenderingMode.STROKE||_===i.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let w=t.textMatrix;0!==t.textRise&&(w=w.slice(),w[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform","".concat(f(w)," scale(").concat(p(h),", -1)")),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.append(t.tspan),t.txtgrp.append(t.txtElement),this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const t=d(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(e.loadedName,'";')+" src: url(".concat(t,"); }\n")}setFont(e){const t=this.current,n=this.commonObjs.get(e[0]);let r=e[1];t.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),t.fontMatrix=n.fontMatrix||i.FONT_IDENTITY_MATRIX;let a="normal";n.black?a="900":n.bold&&(a="bold");const s=n.italic?"italic":"normal";r<0?(r=-r,t.fontDirection=-1):t.fontDirection=1,t.fontSize=r,t.fontFamily=n.loadedName,t.fontWeight=a,t.fontStyle=s,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",p(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){var e;const t=this.current;t.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(e=t.txtElement)&&void 0!==e&&e.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=l[e]}setLineJoin(e){this.current.lineJoin=c[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,n){this.current.strokeColor=i.Util.makeHexColor(e,t,n)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,n){this.current.fillColor=i.Util.makeHexColor(e,t,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const{width:t,height:n}=this.viewport,r=i.Util.inverseTransform(this.transformMatrix),[a,s,o,l]=i.Util.getAxialAlignedBoundingBox([0,0,t,n],r),c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",a),c.setAttributeNS(null,"y",s),c.setAttributeNS(null,"width",o-a),c.setAttributeNS(null,"height",l-s),c.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&c.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(c)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],n=e[2],r=e[3]||i.IDENTITY_MATRIX,[a,s,o,l]=e[4],c=e[5],d=e[6],u=e[7],h="shading".concat(v++),[p,f,m,g]=i.Util.normalizeRect([...i.Util.applyTransform([a,s],r),...i.Util.applyTransform([o,l],r)]),[y,b]=i.Util.singularValueDecompose2dScale(r),_=c*y,w=d*b,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",h),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",_),x.setAttributeNS(null,"height",w),x.setAttributeNS(null,"x","".concat(p)),x.setAttributeNS(null,"y","".concat(f));const C=this.svg,k=this.transformMatrix,S=this.current.fillColor,P=this.current.strokeColor,A=this.svgFactory.create(m-p,g-f);if(this.svg=A,this.transformMatrix=r,2===u){const e=i.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(n)),this.svg=C,this.transformMatrix=k,this.current.fillColor=S,this.current.strokeColor=P,x.append(A.childNodes[0]),this.defs.append(x),"url(#".concat(h,")")}_makeShadingPattern(e){switch("string"===typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t="shading".concat(v++),n=e[3];let r;switch(e[1]){case"axial":const n=e[4],i=e[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",n[0]),r.setAttributeNS(null,"y1",n[1]),r.setAttributeNS(null,"x2",i[0]),r.setAttributeNS(null,"y2",i[1]);break;case"radial":const a=e[4],s=e[5],o=e[6],l=e[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",s[0]),r.setAttributeNS(null,"cy",s[1]),r.setAttributeNS(null,"r",l),r.setAttributeNS(null,"fx",a[0]),r.setAttributeNS(null,"fy",a[1]),r.setAttributeNS(null,"fr",o);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]))}for(const e of n){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),r.append(t)}return this.defs.append(r),"url(#".concat(t,")");case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]))}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const n=this.current;let r=n.x,a=n.y,s=[],o=0;for(const l of e)switch(0|l){case i.OPS.rectangle:r=t[o++],a=t[o++];const e=r+t[o++],n=a+t[o++];s.push("M",p(r),p(a),"L",p(e),p(a),"L",p(e),p(n),"L",p(r),p(n),"Z");break;case i.OPS.moveTo:r=t[o++],a=t[o++],s.push("M",p(r),p(a));break;case i.OPS.lineTo:r=t[o++],a=t[o++],s.push("L",p(r),p(a));break;case i.OPS.curveTo:r=t[o+4],a=t[o+5],s.push("C",p(t[o]),p(t[o+1]),p(t[o+2]),p(t[o+3]),p(r),p(a)),o+=6;break;case i.OPS.curveTo2:s.push("C",p(r),p(a),p(t[o]),p(t[o+1]),p(t[o+2]),p(t[o+3])),r=t[o+2],a=t[o+3],o+=4;break;case i.OPS.curveTo3:r=t[o+2],a=t[o+3],s.push("C",p(t[o]),p(t[o+1]),p(r),p(a),p(r),p(a)),o+=4;break;case i.OPS.closePath:s.push("Z")}s=s.join(" "),n.path&&e.length>0&&e[0]!==i.OPS.rectangle&&e[0]!==i.OPS.moveTo?s=n.path.getAttributeNS(null,"d")+s:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",s),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(r,a)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath".concat(m++),n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"transform",f(this.transformMatrix));const r=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(r),this.defs.append(n),e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;n.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl="url(#".concat(t,")"),this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,i.warn)("Unimplemented graphic state operator ".concat(t))}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=this.current;let r=n.dashArray;1!==t&&r.length>0&&(r=r.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",p(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",p(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",r.map(p).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",p(t*n.dashPhase)+"px")}eoFill(){var e;null===(e=this.current.element)||void 0===e||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;null===(e=this.current.element)||void 0===e||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,i.warn)("Dependent image with object ID ".concat(e," is not ready yet"))}paintInlineImageXObject(e,t){const n=e.width,r=e.height,i=u(e,this.forceDataSchema,!!t),a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",p(n)),a.setAttributeNS(null,"height",p(r)),this.current.element=a,this.clip("nonzero");const s=this.svgFactory.createElement("svg:image");s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y",p(-r)),s.setAttributeNS(null,"width",p(n)+"px"),s.setAttributeNS(null,"height",p(r)+"px"),s.setAttributeNS(null,"transform","scale(".concat(p(1/n)," ").concat(p(-1/r),")")),t?t.append(s):this._ensureTransformGroup().append(s)}paintImageMaskXObject(e){const t=this.getObject(e.data,e);if(t.bitmap)return void(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const n=this.current,r=t.width,a=t.height,s=n.fillColor;n.maskId="mask".concat(g++);const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",n.maskId);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",p(r)),l.setAttributeNS(null,"height",p(a)),l.setAttributeNS(null,"fill",s),l.setAttributeNS(null,"mask","url(#".concat(n.maskId,")")),this.defs.append(o),this._ensureTransformGroup().append(l),this.paintInlineImageXObject(t,o)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],n=t[3]-t[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",t[0]),r.setAttributeNS(null,"y",t[1]),r.setAttributeNS(null,"width",p(e)),r.setAttributeNS(null,"height",p(n)),this.current.element=r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),n=this.svgFactory.createElement("svg:defs");t.append(n),this.defs=n;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",f(e.transform)),t.append(r),this.svg=r,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};return function e(r){var i;if(!r)return;let a=null;const s=r.name;if("#text"===s)a=r.value;else{if(!n.shouldBuildText(s))return;null!==r&&void 0!==r&&null!==(i=r.attributes)&&void 0!==i&&i.textContent?a=r.attributes.textContent:r.value&&(a=r.value)}if(null!==a&&t.push({str:a}),r.children)for(const t of r.children)e(t)}(e),r}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=function(e){e.textContentSource||!e.textContent&&!e.textContentStream||((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),e.textContentSource=e.textContent||e.textContentStream);const{container:t,viewport:n}=e,r=getComputedStyle(t),a=r.getPropertyValue("visibility"),s=parseFloat(r.getPropertyValue("--scale-factor"));"visible"===a&&(!s||Math.abs(s-n.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const o=new d(e);return o._render(),o},t.updateTextLayer=function(e){let{container:t,viewport:n,textDivs:r,textDivProperties:a,isOffscreenCanvasSupported:s,mustRotate:l=!0,mustRescale:d=!0}=e;if(l&&(0,i.setLayerDimensions)(t,{rotation:n.rotation}),d){const e=o(0,s),t={prevFontSize:null,prevFontFamily:null,div:null,scale:n.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:e};for(const n of r)t.properties=a.get(n),t.div=n,c(t)}};var r=n(1),i=n(6);const a=30,s=new Map;function o(e,t){let n;if(t&&r.FeatureTest.isOffscreenCanvasSupported)n=new OffscreenCanvas(e,e).getContext("2d",{alpha:!1});else{const t=document.createElement("canvas");t.width=t.height=e,n=t.getContext("2d",{alpha:!1})}return n}function l(e,t,n){const i=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};e._textDivs.push(i);const c=r.Util.transform(e._transform,t.transform);let d=Math.atan2(c[1],c[0]);const u=n[t.fontName];u.vertical&&(d+=Math.PI/2);const h=Math.hypot(c[2],c[3]),p=h*function(e,t){const n=s.get(e);if(n)return n;const r=o(a,t);r.font="".concat(a,"px ").concat(e);const i=r.measureText("");let l=i.fontBoundingBoxAscent,c=Math.abs(i.fontBoundingBoxDescent);if(l){const t=l/(l+c);return s.set(e,t),r.canvas.width=r.canvas.height=0,t}r.strokeStyle="red",r.clearRect(0,0,a,a),r.strokeText("g",0,0);let d=r.getImageData(0,0,a,a).data;c=0;for(let s=d.length-1-3;s>=0;s-=4)if(d[s]>0){c=Math.ceil(s/4/a);break}r.clearRect(0,0,a,a),r.strokeText("A",0,a),d=r.getImageData(0,0,a,a).data,l=0;for(let s=0,o=d.length;s<o;s+=4)if(d[s]>0){l=a-Math.floor(s/4/a);break}if(r.canvas.width=r.canvas.height=0,l){const t=l/(l+c);return s.set(e,t),t}return s.set(e,.8),.8}(u.fontFamily,e._isOffscreenCanvasSupported);let f,m;0===d?(f=c[4],m=c[5]-p):(f=c[4]+p*Math.sin(d),m=c[5]-p*Math.cos(d));const g="calc(var(--scale-factor)*",v=i.style;e._container===e._rootContainer?(v.left="".concat((100*f/e._pageWidth).toFixed(2),"%"),v.top="".concat((100*m/e._pageHeight).toFixed(2),"%")):(v.left="".concat(g).concat(f.toFixed(2),"px)"),v.top="".concat(g).concat(m.toFixed(2),"px)")),v.fontSize="".concat(g).concat(h.toFixed(2),"px)"),v.fontFamily=u.fontFamily,l.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,e._fontInspectorEnabled&&(i.dataset.fontName=t.fontName),0!==d&&(l.angle=d*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(y=!0)}y&&(l.canvasWidth=u.vertical?t.height:t.width),e._textDivProperties.set(i,l),e._isReadableStream&&e._layoutText(i)}function c(e){const{div:t,scale:n,properties:r,ctx:i,prevFontSize:a,prevFontFamily:s}=e,{style:o}=t;let l="";if(0!==r.canvasWidth&&r.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:u}=r;a===u&&s===c||(i.font="".concat(u*n,"px ").concat(c),e.prevFontSize=u,e.prevFontFamily=c);const{width:h}=i.measureText(t.textContent);h>0&&(l="scaleX(".concat(d*n/h,")"))}0!==r.angle&&(l="rotate(".concat(r.angle,"deg) ").concat(l)),l.length>0&&(o.transform=l)}class d{constructor(e){var t;let{textContentSource:n,container:a,viewport:s,textDivs:l,textDivProperties:c,textContentItemsStr:d,isOffscreenCanvasSupported:u}=e;this._textContentSource=n,this._isReadableStream=n instanceof ReadableStream,this._container=this._rootContainer=a,this._textDivs=l||[],this._textContentItemsStr=d||[],this._isOffscreenCanvasSupported=u,this._fontInspectorEnabled=!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled),this._reader=null,this._textDivProperties=c||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:s.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:o(0,u)};const{pageWidth:h,pageHeight:p,pageX:f,pageY:m}=s.rawDims;this._transform=[1,0,0,-1,-f,m+p],this._pageWidth=h,this._pageHeight=p,(0,i.setLayerDimensions)(a,s),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(e,t){for(const n of e)if(void 0!==n.str)this._textContentItemsStr.push(n.str),l(this,n,t);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==n.id&&this._container.setAttribute("id","".concat(n.id)),e.append(this._container)}else"endMarkedContent"===n.type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._layoutTextParams.properties=this._textDivProperties.get(e);if(this._layoutTextParams.div=e,c(this._layoutTextParams),t.hasText&&this._container.append(e),t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(){const e=new r.PromiseCapability;let t=Object.create(null);if(this._isReadableStream){const n=()=>{this._reader.read().then((r=>{let{value:i,done:a}=r;a?e.resolve():(Object.assign(t,i.styles),this._processItems(i.items,t),n())}),e.reject)};this._reader=this._textContentSource.getReader(),n()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:t,styles:n}=this._textContentSource;this._processItems(t,n),e.resolve()}}e.promise.then((()=>{t=null,function(e){if(e._canceled)return;const t=e._textDivs,n=e._capability;if(t.length>1e5)n.resolve();else{if(!e._isReadableStream)for(const n of t)e._layoutText(n);n.resolve()}}(this)}),this._capability.reject)}}t.TextLayerRenderTask=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var r=n(1),i=n(4),a=n(28),s=n(33),o=n(6),l=n(34),c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakSet;class _{constructor(e){let{uiManager:t,pageIndex:n,div:r,accessibilityManager:i,annotationLayer:o,viewport:w,l10n:x}=e;_classPrivateMethodInitSpec(this,b),_classPrivateFieldInitSpec(this,c,void 0),_classPrivateFieldInitSpec(this,d,!1),_classPrivateFieldInitSpec(this,u,null),_classPrivateFieldInitSpec(this,h,this.pointerup.bind(this)),_classPrivateFieldInitSpec(this,p,this.pointerdown.bind(this)),_classPrivateFieldInitSpec(this,f,new Map),_classPrivateFieldInitSpec(this,m,!1),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldInitSpec(this,y,void 0);const C=[a.FreeTextEditor,s.InkEditor,l.StampEditor];if(!_._initialized){_._initialized=!0;for(const e of C)e.initialize(x)}t.registerEditorTypes(C),_classPrivateFieldSet(y,this,t),this.pageIndex=n,this.div=r,_classPrivateFieldSet(c,this,i),_classPrivateFieldSet(u,this,o),this.viewport=w,_classPrivateFieldGet(y,this).addLayer(this)}get isEmpty(){return 0===_classPrivateFieldGet(f,this).size}updateToolbar(e){_classPrivateFieldGet(y,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_classPrivateFieldGet(y,this).getMode();_assertClassBrand(b,this,k).call(this),e===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),e!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",e===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",e===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(e){if(e||_classPrivateFieldGet(y,this).getMode()===r.AnnotationEditorType.INK){if(!e)for(const e of _classPrivateFieldGet(f,this).values())if(e.isEmpty())return void e.setInBackground();_assertClassBrand(b,this,x).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){_classPrivateFieldGet(y,this).setEditingState(e)}addCommands(e){_classPrivateFieldGet(y,this).addCommands(e)}enable(){this.div.style.pointerEvents="auto";const e=new Set;for(const n of _classPrivateFieldGet(f,this).values())n.enableEditing(),n.annotationElementId&&e.add(n.annotationElementId);if(!_classPrivateFieldGet(u,this))return;const t=_classPrivateFieldGet(u,this).getEditableAnnotations();for(const n of t){if(n.hide(),_classPrivateFieldGet(y,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){_classPrivateFieldSet(v,this,!0),this.div.style.pointerEvents="none";const e=new Set;for(const n of _classPrivateFieldGet(f,this).values()){var t;n.disableEditing(),n.annotationElementId&&null===n.serialize()?(null===(t=this.getEditableAnnotation(n.annotationElementId))||void 0===t||t.show(),n.remove()):e.add(n.annotationElementId)}if(_classPrivateFieldGet(u,this)){const t=_classPrivateFieldGet(u,this).getEditableAnnotations();for(const n of t){const{id:t}=n.data;e.has(t)||_classPrivateFieldGet(y,this).isDeletedAnnotationElement(t)||n.show()}}_assertClassBrand(b,this,k).call(this),this.isEmpty&&(this.div.hidden=!0),_classPrivateFieldSet(v,this,!1)}getEditableAnnotation(e){var t;return(null===(t=_classPrivateFieldGet(u,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){_classPrivateFieldGet(y,this).getActive()!==e&&_classPrivateFieldGet(y,this).setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(p,this)),this.div.addEventListener("pointerup",_classPrivateFieldGet(h,this))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(p,this)),this.div.removeEventListener("pointerup",_classPrivateFieldGet(h,this))}attach(e){_classPrivateFieldGet(f,this).set(e.id,e);const{annotationElementId:t}=e;t&&_classPrivateFieldGet(y,this).isDeletedAnnotationElement(t)&&_classPrivateFieldGet(y,this).removeDeletedAnnotationElement(e)}detach(e){var t;_classPrivateFieldGet(f,this).delete(e.id),null===(t=_classPrivateFieldGet(c,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!_classPrivateFieldGet(v,this)&&e.annotationElementId&&_classPrivateFieldGet(y,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),_classPrivateFieldGet(y,this).removeEditor(e),e.div.contains(document.activeElement)&&setTimeout((()=>{_classPrivateFieldGet(y,this).focusMainContainer()}),0),e.div.remove(),e.isAttachedToDOM=!1,_classPrivateFieldGet(g,this)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.annotationElementId&&(_classPrivateFieldGet(y,this).addDeletedAnnotationElement(e.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(this.changeParent(e),_classPrivateFieldGet(y,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),_classPrivateFieldGet(y,this).addToAnnotationStorage(e)}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&(e._focusEventsAllowed=!1,setTimeout((()=>{e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),n.focus())}),0)),e._structTreeParentId=null===(t=_classPrivateFieldGet(c,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(y,this).getId()}pasteEditor(e,t){_classPrivateFieldGet(y,this).updateToolbar(e),_classPrivateFieldGet(y,this).updateMode(e);const{offsetX:n,offsetY:r}=_assertClassBrand(b,this,C).call(this),i=this.getNextId(),a=_assertClassBrand(b,this,w).call(this,_objectSpread({parent:this,id:i,x:n,y:r,uiManager:_classPrivateFieldGet(y,this),isCentered:!0},t));a&&this.add(a)}deserialize(e){var t;switch(null!==(t=e.annotationType)&&void 0!==t?t:e.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(e,this,_classPrivateFieldGet(y,this));case r.AnnotationEditorType.INK:return s.InkEditor.deserialize(e,this,_classPrivateFieldGet(y,this));case r.AnnotationEditorType.STAMP:return l.StampEditor.deserialize(e,this,_classPrivateFieldGet(y,this))}return null}addNewEditor(){_assertClassBrand(b,this,x).call(this,_assertClassBrand(b,this,C).call(this),!0)}setSelected(e){_classPrivateFieldGet(y,this).setSelected(e)}toggleSelected(e){_classPrivateFieldGet(y,this).toggleSelected(e)}isSelected(e){return _classPrivateFieldGet(y,this).isSelected(e)}unselect(e){_classPrivateFieldGet(y,this).unselect(e)}pointerup(e){const{isMac:t}=r.FeatureTest.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&_classPrivateFieldGet(m,this)&&(_classPrivateFieldSet(m,this,!1),_classPrivateFieldGet(d,this)?_classPrivateFieldGet(y,this).getMode()!==r.AnnotationEditorType.STAMP?_assertClassBrand(b,this,x).call(this,e,!1):_classPrivateFieldGet(y,this).unselectAll():_classPrivateFieldSet(d,this,!0))}pointerdown(e){if(_classPrivateFieldGet(m,this))return void _classPrivateFieldSet(m,this,!1);const{isMac:t}=r.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;_classPrivateFieldSet(m,this,!0);const n=_classPrivateFieldGet(y,this).getActive();_classPrivateFieldSet(d,this,!n||n.isEmpty())}findNewParent(e,t,n){const r=_classPrivateFieldGet(y,this).findParent(t,n);return null!==r&&r!==this&&(r.changeParent(e),!0)}destroy(){var e;(null===(e=_classPrivateFieldGet(y,this).getActive())||void 0===e?void 0:e.parent)===this&&(_classPrivateFieldGet(y,this).commitOrRemove(),_classPrivateFieldGet(y,this).setActiveEditor(null));for(const n of _classPrivateFieldGet(f,this).values()){var t;null===(t=_classPrivateFieldGet(c,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,_classPrivateFieldGet(f,this).clear(),_classPrivateFieldGet(y,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,(0,o.setLayerDimensions)(this.div,t);for(const n of _classPrivateFieldGet(y,this).getEditors(this.pageIndex))this.add(n);this.updateMode()}update(e){let{viewport:t}=e;_classPrivateFieldGet(y,this).commitOrRemove(),this.viewport=t,(0,o.setLayerDimensions)(this.div,{rotation:t.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}}function w(e){switch(_classPrivateFieldGet(y,this).getMode()){case r.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(e);case r.AnnotationEditorType.INK:return new s.InkEditor(e);case r.AnnotationEditorType.STAMP:return new l.StampEditor(e)}return null}function x(e,t){const n=this.getNextId(),r=_assertClassBrand(b,this,w).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:_classPrivateFieldGet(y,this),isCentered:t});return r&&this.add(r),r}function C(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),s=(i+Math.min(window.innerWidth,e+n))/2-e,o=(a+Math.min(window.innerHeight,t+r))/2-t,[l,c]=this.viewport.rotation%180===0?[s,o]:[o,s];return{offsetX:l,offsetY:c}}function k(){_classPrivateFieldSet(g,this,!0);for(const e of _classPrivateFieldGet(f,this).values())e.isEmpty()&&e.remove();_classPrivateFieldSet(g,this,!1)}_defineProperty(_,"_initialized",!1),t.AnnotationEditorLayer=_},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=n(1),a=n(5),s=n(4),o=n(29),l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakSet;class y extends s.AnnotationEditor{static get _keyboardManager(){const e=y.prototype,t=e=>e.isEmpty(),n=a.AnnotationEditorUIManager.TRANSLATE_SMALL,r=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}constructor(e){super(_objectSpread(_objectSpread({},e),{},{name:"freeTextEditor"})),_classPrivateMethodInitSpec(this,v),_classPrivateFieldInitSpec(this,l,this.editorDivBlur.bind(this)),_classPrivateFieldInitSpec(this,c,this.editorDivFocus.bind(this)),_classPrivateFieldInitSpec(this,d,this.editorDivInput.bind(this)),_classPrivateFieldInitSpec(this,u,this.editorDivKeydown.bind(this)),_classPrivateFieldInitSpec(this,h,void 0),_classPrivateFieldInitSpec(this,p,""),_classPrivateFieldInitSpec(this,f,"".concat(this.id,"-editor")),_classPrivateFieldInitSpec(this,m,void 0),_classPrivateFieldInitSpec(this,g,null),_classPrivateFieldSet(h,this,e.color||y._defaultColor||s.AnnotationEditor._defaultLineColor),_classPrivateFieldSet(m,this,e.fontSize||y._defaultFontSize)}static initialize(e){s.AnnotationEditor.initialize(e,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case i.AnnotationEditorParamsType.FREETEXT_SIZE:y._defaultFontSize=t;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:y._defaultColor=t}}updateParams(e,t){switch(e){case i.AnnotationEditorParamsType.FREETEXT_SIZE:_assertClassBrand(v,this,b).call(this,t);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:_assertClassBrand(v,this,_).call(this,t)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,y._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,y._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(m,this)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(h,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-y._internalPadding*e,-(y._internalPadding+_classPrivateFieldGet(m,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(u,this)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet(c,this)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet(l,this)),this.editorDiv.addEventListener("input",_classPrivateFieldGet(d,this)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",_classPrivateFieldGet(f,this)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(u,this)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(c,this)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(l,this)),this.editorDiv.removeEventListener("input",_classPrivateFieldGet(d,this)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width?_assertClassBrand(v,this,S).call(this):(this.enableEditMode(),this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=_classPrivateFieldGet(p,this),t=_classPrivateFieldSet(p,this,_assertClassBrand(v,this,w).call(this).trimEnd());if(e===t)return;const n=e=>{_classPrivateFieldSet(p,this,e),e?(_assertClassBrand(v,this,C).call(this),this._uiManager.rebuild(this),_assertClassBrand(v,this,x).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),_assertClassBrand(v,this,x).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){y._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",_classPrivateFieldGet(f,this)),this.enableEditing(),s.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("aria-label",e)})),s.AnnotationEditor._l10nPromise.get("free_text2_default_content").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("default-content",e)})),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(_classPrivateFieldGet(m,this),"px * var(--scale-factor))"),n.color=_classPrivateFieldGet(h,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:i}=_classPrivateFieldGet(g,this);let[a,s]=this.getInitialTranslation();[a,s]=this.pageTranslationToScreen(a,s);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(i[0]-c)/o,h=t+this.height-(i[1]-d)/l;break;case 90:u=e+(i[0]-c)/o,h=t-(i[1]-d)/l,[a,s]=[s,-a];break;case 180:u=e-this.width+(i[0]-c)/o,h=t-(i[1]-d)/l,[a,s]=[-a,-s];break;case 270:u=e+(i[0]-c-this.height*l)/o,h=t+(i[1]-d-this.width*o)/l,[a,s]=[-s,a]}this.setAt(u*n,h*r,a,s)}else this.setAt(e*n,t*r,this.width*n,this.height*r);_assertClassBrand(v,this,C).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){let r=null;if(e instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:a,rotation:s,id:o},textContent:l,textPosition:c,parent:{page:{pageNumber:d}}}=e;if(!l||0===l.length)return null;r=e={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:d-1,rect:a,rotation:s,id:o,deleted:!1}}const a=super.deserialize(e,t,n);return _classPrivateFieldSet(m,a,e.fontSize),_classPrivateFieldSet(h,a,i.Util.makeHexColor(...e.color)),_classPrivateFieldSet(p,a,e.value),a.annotationElementId=e.id||null,_classPrivateFieldSet(g,a,r),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=y._internalPadding*this.parentScale,n=this.getRect(t,t),r=s.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(h,this)),a={annotationType:i.AnnotationEditorType.FREETEXT,color:r,fontSize:_classPrivateFieldGet(m,this),value:_classPrivateFieldGet(p,this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!_assertClassBrand(v,this,k).call(this,a)?null:(a.id=this.annotationElementId,a)}}function b(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-_classPrivateFieldGet(m,this))*this.parentScale),_classPrivateFieldSet(m,this,e),_assertClassBrand(v,this,x).call(this)},n=_classPrivateFieldGet(m,this);this.addCommands({cmd:()=>{t(e)},undo:()=>{t(n)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function _(e){const t=_classPrivateFieldGet(h,this);this.addCommands({cmd:()=>{_classPrivateFieldSet(h,this,this.editorDiv.style.color=e)},undo:()=>{_classPrivateFieldSet(h,this,this.editorDiv.style.color=t)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function w(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const t=[];for(const n of e)t.push(n.innerText.replace(/\r\n?|\n/,""));return t.join("\n")}function x(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display;t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function C(){if(this.editorDiv.replaceChildren(),_classPrivateFieldGet(p,this))for(const e of _classPrivateFieldGet(p,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function k(e){const{value:t,fontSize:n,color:r,rect:i,pageIndex:a}=_classPrivateFieldGet(g,this);return e.value!==t||e.fontSize!==n||e.rect.some(((e,t)=>Math.abs(e-i[t])>=1))||e.color.some(((e,t)=>e!==r[t]))||e.pageIndex!==a}function S(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.annotationElementId)return;if(_assertClassBrand(v,this,x).call(this),!e&&(0===this.width||0===this.height))return void setTimeout((()=>_assertClassBrand(v,this,S).call(this,!0)),0);const t=r._internalPadding*this.parentScale;_classPrivateFieldGet(g,this).rect=this.getRect(t,t)}r=y,_defineProperty(y,"_freeTextDefaultContent",""),_defineProperty(y,"_internalPadding",0),_defineProperty(y,"_defaultColor",null),_defineProperty(y,"_defaultFontSize",10),_defineProperty(y,"_type","freetext"),t.FreeTextEditor=y},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var r=n(1),i=n(6),a=n(3),s=n(30),o=n(31),l=n(32);const c=1e3,d=new WeakSet;function u(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class h{static create(e){switch(e.data.annotationType){case r.AnnotationType.LINK:return new g(e);case r.AnnotationType.TEXT:return new b(e);case r.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new w(e);case"Btn":return e.data.radioButton?new k(e):e.data.checkBox?new C(e):new S(e);case"Ch":return new P(e);case"Sig":return new x(e)}return new _(e);case r.AnnotationType.POPUP:return new A(e);case r.AnnotationType.FREETEXT:return new Q(e);case r.AnnotationType.LINE:return new $(e);case r.AnnotationType.SQUARE:return new te(e);case r.AnnotationType.CIRCLE:return new re(e);case r.AnnotationType.POLYLINE:return new ae(e);case r.AnnotationType.CARET:return new oe(e);case r.AnnotationType.INK:return new ce(e);case r.AnnotationType.POLYGON:return new se(e);case r.AnnotationType.HIGHLIGHT:return new de(e);case r.AnnotationType.UNDERLINE:return new ue(e);case r.AnnotationType.SQUIGGLY:return new he(e);case r.AnnotationType.STRIKEOUT:return new pe(e);case r.AnnotationType.STAMP:return new fe(e);case r.AnnotationType.FILEATTACHMENT:return new ve(e);default:return new f(e)}}}var p=new WeakMap;class f{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classPrivateFieldInitSpec(this,p,!1),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:r}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==r&&void 0!==r&&r.str)}get hasPopupData(){return f._hasPopupData(this.data)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof _||(a.tabIndex=c),a.style.zIndex=this.parent.zIndex++,this.data.popupRef&&a.setAttribute("aria-haspopup","dialog"),t.noRotate&&a.classList.add("norotate");const{pageWidth:s,pageHeight:o,pageX:l,pageY:d}=i.rawDims;if(!t.rect||this instanceof A){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,a),a}const{width:h,height:f}=u(t.rect),m=r.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(!e&&t.borderStyle.width>0){a.style.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))");a.style.borderRadius=t}else if(this instanceof k){const e="calc(".concat(h,"px * var(--scale-factor)) / calc(").concat(f,"px * var(--scale-factor))");a.style.borderRadius=e}switch(t.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid"}const i=t.borderColor||null;i?(_classPrivateFieldSet(p,this,!0),a.style.borderColor=r.Util.makeHexColor(0|i[0],0|i[1],0|i[2])):a.style.borderWidth=0}a.style.left="".concat(100*(m[0]-l)/s,"%"),a.style.top="".concat(100*(m[1]-d)/o,"%");const{rotation:g}=t;return t.hasOwnCanvas||0===g?(a.style.width="".concat(100*h/s,"%"),a.style.height="".concat(100*f/o,"%")):this.setRotation(g,a),a}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:i,height:a}=u(this.data.rect);let s,o;e%180===0?(s=100*i/n,o=100*a/r):(s=100*a/n,o=100*i/r),t.style.width="".concat(s,"%"),t.style.height="".concat(o,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const r=n.detail[e],i=r[0],a=r.slice(1);n.target.style[t]=s.ColorConverters["".concat(i,"_HTML")](a),this.annotationStorage.setValue(this.data.id,{[t]:s.ColorConverters["".concat(i,"_rgb")](a)})};return(0,r.shadow)(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];null===i||void 0===i||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const a=n[r];a&&(a({detail:{[r]:i},target:e}),delete t[r])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect;if(1===e.length){const[,{x:a,y:s},{x:o,y:l}]=e[0];if(r===a&&i===s&&t===o&&n===l)return}const{style:a}=this.container;let s;if(_classPrivateFieldGet(p,this)){const{borderColor:e,borderWidth:t}=a;a.borderWidth=0,s=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=r-t,l=i-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),f="clippath_".concat(this.data.id);h.setAttribute("id",f),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(const[,{x:p,y:g},{x:v,y:y}]of e){var m;const e=c.createElement("rect"),n=(v-t)/o,r=(i-g)/l,a=(p-v)/o,d=(g-y)/l;e.setAttribute("x",n),e.setAttribute("y",r),e.setAttribute("width",a),e.setAttribute("height",d),h.append(e),null===(m=s)||void 0===m||m.push('<rect vector-effect="non-scaling-stroke" x="'.concat(n,'" y="').concat(r,'" width="').concat(a,'" height="').concat(d,'"/>'))}_classPrivateFieldGet(p,this)&&(s.push("</g></svg>')"),a.backgroundImage=s.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(f,")")}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=new A({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:a,exportValues:s}of i){if(-1===e)continue;if(a===t)continue;const i="string"===typeof s?s:null,o=document.querySelector('[data-element-id="'.concat(a,'"]'));!o||d.has(o)?n.push({id:a,exportValue:i,domElement:o}):(0,r.warn)("_getElementsByName - element not allowed: ".concat(a))}return n}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,i=r.getAttribute("data-element-id");i!==t&&d.has(r)&&n.push({id:i,exportValue:e,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}}var m=new WeakSet;class g extends f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),_classPrivateMethodInitSpec(this,m),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(this._bindAttachment(n,e.attachment),r=!0):e.setOCGState?(_assertClassBrand(m,this,y).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&_assertClassBrand(m,this,v).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),_assertClassBrand(m,this,v).call(this)}_bindAttachment(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.container,t.content,t.filename),!1},_assertClassBrand(m,this,v).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const i=n.get(r);i&&(e[i]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),_assertClassBrand(m,this,v).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),_assertClassBrand(m,this,v).call(this),!this._fieldObjects)return(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:a}=t,s=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===a&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const o=this.annotationStorage,l=[];for(const t of s){const{id:e}=t;switch(l.push(e),t.type){case"text":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;o.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(d.has(n)?n.dispatchEvent(new Event("resetform")):(0,r.warn)("_bindResetFormAction - element not allowed: ".concat(e)))}var c;return this.enableScripting&&(null===(c=this.linkService.eventBus)||void 0===c||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})),!1}}}function v(){this.container.setAttribute("data-internal-link","")}function y(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),_assertClassBrand(m,this,v).call(this)}class b extends f{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class _ extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){const{isWin:t,isMac:n}=r.FeatureTest.platform;return t&&e.ctrlKey||n&&e.metaKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{var a;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}i&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e)}}))}))}_setEventListeners(e,t,n,r){for(const[o,l]of n){var i,a,s;("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])&&("Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,r),"Focus"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Blur?"Blur"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":r.Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,a=e.style;let s;const o=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(r.LINE_FACTOR*i))||1);s=Math.min(i,o(t/r.LINE_FACTOR))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,o(e/r.LINE_FACTOR))}a.fontSize="calc(".concat(s,"px * var(--scale-factor))"),a.color=r.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class w extends _{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var r;const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let h=o.formattedValue||(null===(r=this.data.textContent)||void 0===r?void 0:r.join("\n"))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const p={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};var i,a;this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==(i=h)&&void 0!==i?i:l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",null!==(a=h)&&void 0!==a?a:l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),d.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=c,this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",(r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value"),p.formattedValue=null})),n.addEventListener("resetform",(e=>{var t;const r=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=p.userValue=r,p.formattedValue=null}));let f=e=>{const{formattedValue:t}=p;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var s;n.addEventListener("focus",(e=>{if(p.focused)return;const{target:t}=e;p.userValue&&(t.value=p.userValue),p.lastCommittedValue=t.value,p.commitKey=1,p.focused=!0})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const r={value(n){var r;p.userValue=null!==(r=n.detail.value)&&void 0!==r?r:"",e.setValue(t,{value:p.userValue.toString()}),n.target.value=p.userValue},formattedValue(n){const{formattedValue:r}=n.detail;p.formattedValue=r,null!==r&&void 0!==r&&n.target!==document.activeElement&&(n.target.value=r),e.setValue(t,{formattedValue:r})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var r;const{charLimit:i}=n.detail,{target:a}=n;if(0===i)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",i);let s=p.userValue;!s||s.length<=i||(s=s.slice(0,i),a.value=p.userValue=s,e.setValue(t,{value:s}),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}};this._dispatchEventFromSandbox(r,n)})),n.addEventListener("keydown",(e=>{var n;p.commitKey=1;let r=-1;if("Escape"===e.key?r=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(p.commitKey=3):r=2,-1===r)return;const{value:i}=e.target;p.lastCommittedValue!==i&&(p.lastCommittedValue=i,p.userValue=i,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:r,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const r=f;f=null,n.addEventListener("blur",(e=>{if(!p.focused||!e.relatedTarget)return;p.focused=!1;const{value:n}=e.target;var i;p.userValue=n,p.lastCommittedValue!==n&&(null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:n,willCommit:!0,commitKey:p.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),r(e)})),null!==(s=this.data.actions)&&void 0!==s&&s.Keystroke&&n.addEventListener("beforeinput",(e=>{var n;p.lastCommittedValue=null;const{data:r,target:i}=e,{value:a,selectionStart:s,selectionEnd:o}=i;let l=s,c=o;switch(e.inputType){case"deleteWordBackward":{const e=a.substring(0,s).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=a.substring(s).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":s===o&&(l-=1);break;case"deleteContentForward":s===o&&(c+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:r||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(f&&n.addEventListener("blur",f),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class x extends _{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class C extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return d.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=c,i.addEventListener("change",(r=>{const{name:i,checked:a}=r.target;for(const s of this._getElementsByName(i,n)){const n=a&&s.exportValue===t.exportValue;s.domElement&&(s.domElement.checked=n),e.setValue(s.id,{value:n})}e.setValue(n,{value:a})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)})),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class k extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;"string"===typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r}));const i=document.createElement("input");if(d.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=c,i.addEventListener("change",(t=>{const{name:r,checked:i}=t.target;for(const a of this._getElementsByName(r,n))e.setValue(a.id,{value:!1});e.setValue(n,{value:i})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;i.addEventListener("updatefromsandbox",(t=>{const i={value:t=>{const i=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=i&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class S extends g{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class P extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");d.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=c;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of r.options)n.selected=n.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),i=!1),r.append(e)}let a=null;if(i){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),a=()=>{e.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const s=e=>{const t=e?"value":"textContent",{options:n,multiple:i}=r;return i?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=s(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",(n=>{const i={value(n){var i;null===(i=a)||void 0===i||i();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of r.options)e.selected=c.has(e.value);e.setValue(t,{value:s(!0)}),o=s(!1)},multipleSelection(e){r.multiple=!0},remove(n){const i=r.options,a=n.detail.remove;i[a].selected=!1,r.remove(a),i.length>0&&-1===Array.prototype.findIndex.call(i,(e=>e.selected))&&(i[0].selected=!0),e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),o=s(!1)},insert(n){const{index:i,displayValue:a,exportValue:c}=n.detail.insert,d=r.children[i],u=document.createElement("option");u.textContent=a,u.value=c,d?d.before(u):r.append(u),e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},items(n){const{items:i}=n.detail;for(;0!==r.length;)r.remove(0);for(const e of i){const{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},indices(n){const r=new Set(n.detail.indices);for(const e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:s(!0)}),o=s(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(i,n)})),r.addEventListener("input",(n=>{var r;const i=s(!0);e.setValue(t,{value:i}),n.preventDefault(),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):r.addEventListener("input",(function(n){e.setValue(t,{value:s(!0)})})),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class A extends f{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:f._hasPopupData(t)}),this.elements=n}render(){this.container.classList.add("popupAnnotation");const e=new V({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(r.AnnotationPrefix).concat(e))).join(",")),this.container}}var E=new WeakMap,T=new WeakMap,I=new WeakMap,F=new WeakMap,R=new WeakMap,N=new WeakMap,j=new WeakMap,M=new WeakMap,O=new WeakMap,L=new WeakMap,D=new WeakMap,B=new WeakMap,q=new WeakMap,U=new WeakMap,G=new WeakMap,z=new WeakMap,H=new WeakMap,W=new WeakSet;class V{constructor(e){let{container:t,color:n,elements:r,titleObj:a,modificationDate:s,contentsObj:o,richText:l,parent:c,rect:d,parentRect:u,open:h}=e;_classPrivateMethodInitSpec(this,W),_classPrivateFieldInitSpec(this,E,null),_classPrivateFieldInitSpec(this,T,_assertClassBrand(W,this,K).bind(this)),_classPrivateFieldInitSpec(this,I,_assertClassBrand(W,this,J).bind(this)),_classPrivateFieldInitSpec(this,F,_assertClassBrand(W,this,X).bind(this)),_classPrivateFieldInitSpec(this,R,_assertClassBrand(W,this,Y).bind(this)),_classPrivateFieldInitSpec(this,N,null),_classPrivateFieldInitSpec(this,j,null),_classPrivateFieldInitSpec(this,M,null),_classPrivateFieldInitSpec(this,O,null),_classPrivateFieldInitSpec(this,L,null),_classPrivateFieldInitSpec(this,D,null),_classPrivateFieldInitSpec(this,B,!1),_classPrivateFieldInitSpec(this,q,null),_classPrivateFieldInitSpec(this,U,null),_classPrivateFieldInitSpec(this,G,null),_classPrivateFieldInitSpec(this,z,null),_classPrivateFieldInitSpec(this,H,!1),_classPrivateFieldSet(j,this,t),_classPrivateFieldSet(z,this,a),_classPrivateFieldSet(M,this,o),_classPrivateFieldSet(G,this,l),_classPrivateFieldSet(L,this,c),_classPrivateFieldSet(N,this,n),_classPrivateFieldSet(U,this,d),_classPrivateFieldSet(D,this,u),_classPrivateFieldSet(O,this,r);const p=i.PDFDateString.toDateObject(s);p&&_classPrivateFieldSet(E,this,c.l10n.get("annotation_date_string",{date:p.toLocaleDateString(),time:p.toLocaleTimeString()})),this.trigger=r.flatMap((e=>e.getElementsToTriggerPopup()));for(const i of this.trigger)i.addEventListener("click",_classPrivateFieldGet(R,this)),i.addEventListener("mouseenter",_classPrivateFieldGet(F,this)),i.addEventListener("mouseleave",_classPrivateFieldGet(I,this)),i.classList.add("popupTriggerArea");for(const i of r){var f;null===(f=i.container)||void 0===f||f.addEventListener("keydown",_classPrivateFieldGet(T,this))}_classPrivateFieldGet(j,this).hidden=!0,h&&_assertClassBrand(W,this,Y).call(this)}render(){if(_classPrivateFieldGet(q,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=_classPrivateFieldGet(L,this),s=_classPrivateFieldSet(q,this,document.createElement("div"));if(s.className="popup",_classPrivateFieldGet(N,this)){const e=s.style.outlineColor=r.Util.makeHexColor(..._classPrivateFieldGet(N,this));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))s.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)");else{const e=.7;s.style.backgroundColor=r.Util.makeHexColor(..._classPrivateFieldGet(N,this).map((t=>Math.floor(e*(255-t)+t))))}}const o=document.createElement("span");o.className="header";const c=document.createElement("h1");if(o.append(c),({dir:c.dir,str:c.textContent}=_classPrivateFieldGet(z,this)),s.append(o),_classPrivateFieldGet(E,this)){const e=document.createElement("span");e.classList.add("popupDate"),_classPrivateFieldGet(E,this).then((t=>{e.textContent=t})),o.append(e)}const d=_classPrivateFieldGet(M,this),u=_classPrivateFieldGet(G,this);if(null===u||void 0===u||!u.str||null!==d&&void 0!==d&&d.str&&d.str!==u.str){const e=this._formatContents(d);s.append(e)}else l.XfaLayer.render({xfaHtml:u.html,intent:"richText",div:s}),s.lastChild.classList.add("richText","popupContent");let h=!!_classPrivateFieldGet(D,this),p=_classPrivateFieldGet(h?D:U,this);for(const l of _classPrivateFieldGet(O,this))if(!p||null!==r.Util.intersect(l.data.rect,p)){p=l.data.rect,h=!0;break}const f=r.Util.normalizeRect([p[0],e[3]-p[1]+e[1],p[2],e[3]-p[3]+e[1]]),m=h?p[2]-p[0]+5:0,g=f[0]+m,v=f[1],{style:y}=_classPrivateFieldGet(j,this);y.left="".concat(100*(g-i)/t,"%"),y.top="".concat(100*(v-a)/n,"%"),_classPrivateFieldGet(j,this).append(s)}_formatContents(e){let{str:t,dir:n}=e;const r=document.createElement("p");r.classList.add("popupContent"),r.dir=n;const i=t.split(/(?:\r\n?|\n)/);for(let a=0,s=i.length;a<s;++a){const e=i[a];r.append(document.createTextNode(e)),a<s-1&&r.append(document.createElement("br"))}return r}forceHide(){_classPrivateFieldSet(H,this,this.isVisible),_classPrivateFieldGet(H,this)&&(_classPrivateFieldGet(j,this).hidden=!0)}maybeShow(){_classPrivateFieldGet(H,this)&&(_classPrivateFieldSet(H,this,!1),_classPrivateFieldGet(j,this).hidden=!1)}get isVisible(){return!1===_classPrivateFieldGet(j,this).hidden}}function K(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&_classPrivateFieldGet(B,this))&&_assertClassBrand(W,this,Y).call(this)}function Y(){_classPrivateFieldSet(B,this,!_classPrivateFieldGet(B,this)),_classPrivateFieldGet(B,this)?(_assertClassBrand(W,this,X).call(this),_classPrivateFieldGet(j,this).addEventListener("click",_classPrivateFieldGet(R,this)),_classPrivateFieldGet(j,this).addEventListener("keydown",_classPrivateFieldGet(T,this))):(_assertClassBrand(W,this,J).call(this),_classPrivateFieldGet(j,this).removeEventListener("click",_classPrivateFieldGet(R,this)),_classPrivateFieldGet(j,this).removeEventListener("keydown",_classPrivateFieldGet(T,this)))}function X(){_classPrivateFieldGet(q,this)||this.render(),this.isVisible?_classPrivateFieldGet(B,this)&&_classPrivateFieldGet(j,this).classList.add("focused"):(_classPrivateFieldGet(j,this).hidden=!1,_classPrivateFieldGet(j,this).style.zIndex=parseInt(_classPrivateFieldGet(j,this).style.zIndex)+1e3)}function J(){_classPrivateFieldGet(j,this).classList.remove("focused"),!_classPrivateFieldGet(B,this)&&this.isVisible&&(_classPrivateFieldGet(j,this).hidden=!0,_classPrivateFieldGet(j,this).style.zIndex=parseInt(_classPrivateFieldGet(j,this).style.zIndex)-1e3)}class Q extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=Q;var Z=new WeakMap;class $ extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,Z,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=u(e.rect),r=this.svgFactory.create(t,n,!0),i=_classPrivateFieldSet(Z,this,this.svgFactory.createElement("svg:line"));return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(Z,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ee=new WeakMap;class te extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,ee,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=u(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=_classPrivateFieldSet(ee,this,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",t-i),a.setAttribute("height",n-i),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(ee,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ne=new WeakMap;class re extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,ne,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=u(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=_classPrivateFieldSet(ne,this,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-i/2),a.setAttribute("ry",n/2-i/2),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(ne,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ie=new WeakMap;class ae extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,ie,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=u(e.rect),r=this.svgFactory.create(t,n,!0);let i=[];for(const s of e.vertices){const t=s.x-e.rect[0],n=e.rect[3]-s.y;i.push(t+","+n)}i=i.join(" ");const a=_classPrivateFieldSet(ie,this,this.svgFactory.createElement(this.svgElementName));return a.setAttribute("points",i),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(ie,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class se extends ae{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class oe extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var le=new WeakMap;class ce extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,le,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=u(e.rect),r=this.svgFactory.create(t,n,!0);for(const i of e.inkLists){let t=[];for(const r of i){const n=r.x-e.rect[0],i=e.rect[3]-r.y;t.push("".concat(n,",").concat(i))}t=t.join(" ");const n=this.svgFactory.createElement(this.svgElementName);_classPrivateFieldGet(le,this).push(n),n.setAttribute("points",t),n.setAttribute("stroke-width",e.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),r.append(n)}return this.container.append(r),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(le,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=ce;class de extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ue extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class he extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pe extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class fe extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=fe;var me=new WeakMap,ge=new WeakSet;class ve extends f{constructor(e){var t;super(e,{isRenderable:!0}),_classPrivateMethodInitSpec(this,ge),_classPrivateFieldInitSpec(this,me,null);const{filename:n,content:r}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(n,!0),this.content=r,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",{source:this,filename:n,content:r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",_assertClassBrand(ge,this,ye).bind(this)),_classPrivateFieldSet(me,this,n);const{isMac:i}=r.FeatureTest.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&_assertClassBrand(ge,this,ye).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return _classPrivateFieldGet(me,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function ye(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.container,this.content,this.filename)}var be=new WeakMap,_e=new WeakMap,we=new WeakMap,xe=new WeakSet;function Ce(e,t){var n;const i=e.firstChild||e;i.id="".concat(r.AnnotationPrefix).concat(t),this.div.append(e),null===(n=_classPrivateFieldGet(be,this))||void 0===n||n.moveElementInDOM(this.div,e,i,!1)}function ke(){if(!_classPrivateFieldGet(_e,this))return;const e=this.div;for(const[t,n]of _classPrivateFieldGet(_e,this)){const r=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!r)continue;const{firstChild:i}=r;i?"CANVAS"===i.nodeName?i.replaceWith(n):i.before(n):r.append(n)}_classPrivateFieldGet(_e,this).clear()}t.AnnotationLayer=class{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:r,l10n:i,page:a,viewport:s}=e;_classPrivateMethodInitSpec(this,xe),_classPrivateFieldInitSpec(this,be,null),_classPrivateFieldInitSpec(this,_e,null),_classPrivateFieldInitSpec(this,we,new Map),this.div=t,_classPrivateFieldSet(be,this,n),_classPrivateFieldSet(_e,this,r),this.l10n=i,this.page=a,this.viewport=s,this.zIndex=0,this.l10n||(this.l10n=o.NullL10n)}async render(e){const{annotations:t}=e,n=this.div;(0,i.setLayerDimensions)(n,this.viewport);const s=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:e.annotationStorage||new a.AnnotationStorage,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const i of t){if(i.noHTML)continue;const e=i.annotationType===r.AnnotationType.POPUP;if(e){const e=s.get(i.id);if(!e)continue;o.elements=e}else{const{width:e,height:t}=u(i.rect);if(e<=0||t<=0)continue}o.data=i;const t=h.create(o);if(!t.isRenderable)continue;if(!e&&i.popupRef){const e=s.get(i.popupRef);e?e.push(t):s.set(i.popupRef,[t])}t.annotationEditorType>0&&_classPrivateFieldGet(we,this).set(t.data.id,t);const n=t.render();i.hidden&&(n.style.visibility="hidden"),_assertClassBrand(xe,this,Ce).call(this,n,i.id)}_assertClassBrand(xe,this,ke).call(this),await this.l10n.translate(n)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,(0,i.setLayerDimensions)(n,{rotation:t.rotation}),_assertClassBrand(xe,this,ke).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(_classPrivateFieldGet(we,this).values())}getEditableAnnotation(e){return _classPrivateFieldGet(we,this).get(e)}}},(e,t)=>{function n(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function r(e){return Math.max(0,Math.min(255,255*e))}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0,t.ColorConverters=class{static CMYK_G(e){let[t,n,r,i]=e;return["G",1-Math.min(1,.3*t+.59*r+.11*n+i)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=r(t),[t,t,t]}static G_HTML(e){let[t]=e;const r=n(t);return"#".concat(r).concat(r).concat(r)}static RGB_G(e){let[t,n,r]=e;return["G",.3*t+.59*n+.11*r]}static RGB_rgb(e){return e.map(r)}static RGB_HTML(e){return"#".concat(e.map(n).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,r,i]=e;return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb(e){let[t,n,i,a]=e;return[r(1-Math.min(1,t+a)),r(1-Math.min(1,i+a)),r(1-Math.min(1,n+a))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,r]=e;const i=1-t,a=1-n,s=1-r;return["CMYK",i,a,s,Math.min(i,a,s)]}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=r;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function r(e,t){switch(e){case"find_match_count":e="find_match_count[".concat(1===t.total?"one":"other","]");break;case"find_match_count_limit":e="find_match_count_limit[".concat(1===t.limit?"one":"other","]")}return n[e]||""}n.print_progress_percent="{{progress}}%";const i={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){return t?e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,((e,n)=>n in t?t[n]:"{{"+n+"}}")):e}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:r(e,t),t)},async translate(e){}};t.NullL10n=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=n(25);t.XfaLayer=class{static setupStorage(e,t,n,r,i){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",(e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==a.value){e.setAttribute("value",a.value);for(const e of n.children)e.attributes.value===a.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:i})}))}}static setAttributes(e){let{html:t,element:n,storage:r=null,intent:i,linkService:a}=e;const{attributes:s}=n,o=t instanceof HTMLAnchorElement;"radio"===s.type&&(s.name="".concat(s.name,"-").concat(i));for(const[l,c]of Object.entries(s))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&a.addLinkAttributes(t,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(t,s.dataId,n,r)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:n});const o=[[i,-1,s]],l=e.div;if(l.append(s),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");l.style.transform=t}"richText"!==a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;o.length>0;){var d;const[e,i,s]=o.at(-1);if(i+1===e.children.length){o.pop();continue}const l=e.children[++o.at(-1)[1]];if(null===l)continue;const{name:u}=l;if("#text"===u){const e=document.createTextNode(l.value);c.push(e),s.append(e);continue}const h=null!==l&&void 0!==l&&null!==(d=l.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(l.attributes.xmlns,u):document.createElement(u);if(s.append(h),l.attributes&&this.setAttributes({html:h,element:l,storage:t,intent:a,linkService:n}),l.children&&l.children.length>0)o.push([l,-1,h]);else if(l.value){const e=document.createTextNode(l.value);r.XfaText.shouldBuildText(u)&&c.push(e),h.append(e)}}for(const r of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var i=n(1),a=n(4),s=n(29),o=n(6),l=n(5),c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,_=new WeakMap,w=new WeakMap,x=new WeakMap,C=new WeakSet;class k extends a.AnnotationEditor{constructor(e){super(_objectSpread(_objectSpread({},e),{},{name:"inkEditor"})),_classPrivateMethodInitSpec(this,C),_classPrivateFieldInitSpec(this,c,0),_classPrivateFieldInitSpec(this,d,0),_classPrivateFieldInitSpec(this,u,this.canvasPointermove.bind(this)),_classPrivateFieldInitSpec(this,h,this.canvasPointerleave.bind(this)),_classPrivateFieldInitSpec(this,p,this.canvasPointerup.bind(this)),_classPrivateFieldInitSpec(this,f,this.canvasPointerdown.bind(this)),_classPrivateFieldInitSpec(this,m,new Path2D),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldInitSpec(this,y,!1),_classPrivateFieldInitSpec(this,b,null),_classPrivateFieldInitSpec(this,_,0),_classPrivateFieldInitSpec(this,w,0),_classPrivateFieldInitSpec(this,x,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e){a.AnnotationEditor.initialize(e,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(e,t){switch(e){case i.AnnotationEditorParamsType.INK_THICKNESS:k._defaultThickness=t;break;case i.AnnotationEditorParamsType.INK_COLOR:k._defaultColor=t;break;case i.AnnotationEditorParamsType.INK_OPACITY:k._defaultOpacity=t/100}}updateParams(e,t){switch(e){case i.AnnotationEditorParamsType.INK_THICKNESS:_assertClassBrand(C,this,S).call(this,t);break;case i.AnnotationEditorParamsType.INK_COLOR:_assertClassBrand(C,this,P).call(this,t);break;case i.AnnotationEditorParamsType.INK_OPACITY:_assertClassBrand(C,this,A).call(this,t)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,k._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,k._defaultColor||a.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*k._defaultOpacity)]]}get propertiesToUpdate(){var e;return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||k._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||k._defaultColor||a.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:k._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(_assertClassBrand(C,this,B).call(this),_assertClassBrand(C,this,q).call(this)),this.isAttachedToDOM||(this.parent.add(this),_assertClassBrand(C,this,U).call(this)),_assertClassBrand(C,this,J).call(this)))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet(b,this).disconnect(),_classPrivateFieldSet(b,this,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,r=this.height*t;this.setDimensions(n,r)}enableEditMode(){_classPrivateFieldGet(g,this)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(f,this)))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(f,this)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){_classPrivateFieldGet(g,this)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet(g,this,!0),this.div.classList.add("disabled"),_assertClassBrand(C,this,J).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!_classPrivateFieldGet(g,this)&&(this.setInForeground(),e.preventDefault(),"mouse"!==e.type&&this.div.focus(),_assertClassBrand(C,this,I).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),_assertClassBrand(C,this,F).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),_assertClassBrand(C,this,D).call(this,e)}canvasPointerleave(e){_assertClassBrand(C,this,D).call(this,e)}get isResizable(){return!this.isEmpty()&&_classPrivateFieldGet(g,this)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then((e=>{var t;return null===(t=this.div)||void 0===t?void 0:t.setAttribute("aria-label",e)}));const[n,r,i,s]=_assertClassBrand(C,this,E).call(this);if(this.setAt(n,r,0,0),this.setDims(i,s),_assertClassBrand(C,this,B).call(this),this.width){const[n,r]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*r),this.setAt(e*n,t*r,this.width*n,this.height*r),_classPrivateFieldSet(y,this,!0),_assertClassBrand(C,this,U).call(this),this.setDims(this.width*n,this.height*r),_assertClassBrand(C,this,L).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _assertClassBrand(C,this,q).call(this),this.div}setDimensions(e,t){const n=Math.round(e),r=Math.round(t);if(_classPrivateFieldGet(_,this)===n&&_classPrivateFieldGet(w,this)===r)return;_classPrivateFieldSet(_,this,n),_classPrivateFieldSet(w,this,r),this.canvas.style.visibility="hidden";const[i,a]=this.parentDimensions;this.width=e/i,this.height=t/a,this.fixAndSetPosition(),_classPrivateFieldGet(g,this)&&_assertClassBrand(C,this,G).call(this,e,t),_assertClassBrand(C,this,U).call(this),_assertClassBrand(C,this,L).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,t,n){if(e instanceof s.InkAnnotationElement)return null;const r=super.deserialize(e,t,n);r.thickness=e.thickness,r.color=i.Util.makeHexColor(...e.color),r.opacity=e.opacity;const[o,l]=r.pageDimensions,u=r.width*o,h=r.height*l,p=r.parentScale,f=e.thickness/2;_classPrivateFieldSet(g,r,!0),_classPrivateFieldSet(_,r,Math.round(u)),_classPrivateFieldSet(w,r,Math.round(h));const{paths:m,rect:v,rotation:y}=e;for(let{bezier:i}of m){i=V.call(k,i,v,y);const e=[];r.paths.push(e);let t=p*(i[0]-f),n=p*(i[1]-f);for(let r=2,s=i.length;r<s;r+=6){const a=p*(i[r]-f),s=p*(i[r+1]-f),o=p*(i[r+2]-f),l=p*(i[r+3]-f),c=p*(i[r+4]-f),d=p*(i[r+5]-f);e.push([[t,n],[a,s],[o,l],[c,d]]),t=c,n=d}const a=_assertClassBrand(k,this,H).call(this,e);r.bezierPath2D.push(a)}const b=_assertClassBrand(C,r,Y).call(r);return _classPrivateFieldSet(d,r,Math.max(a.AnnotationEditor.MIN_SIZE,b[2]-b[0])),_classPrivateFieldSet(c,r,Math.max(a.AnnotationEditor.MIN_SIZE,b[3]-b[1])),_assertClassBrand(C,r,G).call(r,u,h),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:_assertClassBrand(C,this,K).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}function S(e){const t=this.thickness;this.addCommands({cmd:()=>{this.thickness=e,_assertClassBrand(C,this,J).call(this)},undo:()=>{this.thickness=t,_assertClassBrand(C,this,J).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function P(e){const t=this.color;this.addCommands({cmd:()=>{this.color=e,_assertClassBrand(C,this,L).call(this)},undo:()=>{this.color=t,_assertClassBrand(C,this,L).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function A(e){e/=100;const t=this.opacity;this.addCommands({cmd:()=>{this.opacity=e,_assertClassBrand(C,this,L).call(this)},undo:()=>{this.opacity=t,_assertClassBrand(C,this,L).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function E(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}function T(){const{ctx:e,color:t,opacity:n,thickness:r,parentScale:i,scaleFactor:a}=this;e.lineWidth=r*i/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(t).concat((0,l.opacityToHex)(n))}function I(e,t){var n;this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(h,this)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet(u,this)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet(p,this)),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(f,this)),this.isEditing=!0,_classPrivateFieldGet(y,this)||(_classPrivateFieldSet(y,this,!0),_assertClassBrand(C,this,U).call(this),this.thickness||(this.thickness=r._defaultThickness),this.color||(this.color=r._defaultColor||a.AnnotationEditor._defaultLineColor),null!==(n=this.opacity)&&void 0!==n||(this.opacity=r._defaultOpacity)),this.currentPath.push([e,t]),_classPrivateFieldSet(v,this,!1),_assertClassBrand(C,this,T).call(this),_classPrivateFieldSet(x,this,(()=>{_assertClassBrand(C,this,j).call(this),_classPrivateFieldGet(x,this)&&window.requestAnimationFrame(_classPrivateFieldGet(x,this))})),window.requestAnimationFrame(_classPrivateFieldGet(x,this))}function F(e,t){const[n,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===r)return;const i=this.currentPath;let a=_classPrivateFieldGet(m,this);if(i.push([e,t]),_classPrivateFieldSet(v,this,!0),i.length<=2)return a.moveTo(...i[0]),void a.lineTo(e,t);3===i.length&&(_classPrivateFieldSet(m,this,a=new Path2D),a.moveTo(...i[0])),_assertClassBrand(C,this,M).call(this,a,...i.at(-3),...i.at(-2),e,t)}function R(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);_classPrivateFieldGet(m,this).lineTo(...e)}function N(e,t){let n;if(_classPrivateFieldSet(x,this,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),_assertClassBrand(C,this,F).call(this,e,t),_assertClassBrand(C,this,R).call(this),1!==this.currentPath.length)n=_assertClassBrand(C,this,O).call(this);else{const r=[e,t];n=[[r,r.slice(),r.slice(),r]]}const r=_classPrivateFieldGet(m,this),i=this.currentPath;this.currentPath=[],_classPrivateFieldSet(m,this,new Path2D),this.addCommands({cmd:()=>{this.allRawPaths.push(i),this.paths.push(n),this.bezierPath2D.push(r),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(_assertClassBrand(C,this,B).call(this),_assertClassBrand(C,this,q).call(this)),_assertClassBrand(C,this,J).call(this))},mustExec:!0})}function j(){if(!_classPrivateFieldGet(v,this))return;_classPrivateFieldSet(v,this,!1);Math.ceil(this.thickness*this.parentScale);const e=this.currentPath.slice(-3),t=e.map((e=>e[0])),n=e.map((e=>e[1])),{ctx:r}=(Math.min(...t),Math.max(...t),Math.min(...n),Math.max(...n),this);r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const i of this.bezierPath2D)r.stroke(i);r.stroke(_classPrivateFieldGet(m,this)),r.restore()}function M(e,t,n,r,i,a,s){const o=(t+r)/2,l=(n+i)/2,c=(r+a)/2,d=(i+s)/2;e.bezierCurveTo(o+2*(r-o)/3,l+2*(i-l)/3,c+2*(r-c)/3,d+2*(i-d)/3,c,d)}function O(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[r,i]=e[0];for(n=1;n<e.length-2;n++){const[a,s]=e[n],[o,l]=e[n+1],c=(a+o)/2,d=(s+l)/2,u=[r+2*(a-r)/3,i+2*(s-i)/3],h=[c+2*(a-c)/3,d+2*(s-d)/3];t.push([[r,i],u,h,[c,d]]),[r,i]=[c,d]}const[a,s]=e[n],[o,l]=e[n+1],c=[r+2*(a-r)/3,i+2*(s-i)/3],d=[o+2*(a-o)/3,l+2*(s-l)/3];return t.push([[r,i],c,d,[o,l]]),t}function L(){if(this.isEmpty())return void _assertClassBrand(C,this,z).call(this);_assertClassBrand(C,this,T).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),_assertClassBrand(C,this,z).call(this);for(const n of this.bezierPath2D)t.stroke(n)}function D(e){this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(h,this)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(u,this)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(p,this)),this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(f,this)),setTimeout((()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)}),10),_assertClassBrand(C,this,N).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function B(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((e=>{var t;return null===(t=this.canvas)||void 0===t?void 0:t.setAttribute("aria-label",e)})),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function q(){_classPrivateFieldSet(b,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}))),_classPrivateFieldGet(b,this).observe(this.div)}function U(){if(!_classPrivateFieldGet(y,this))return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),_assertClassBrand(C,this,z).call(this)}function G(e,t){const n=_assertClassBrand(C,this,X).call(this),r=(e-n)/_classPrivateFieldGet(d,this),i=(t-n)/_classPrivateFieldGet(c,this);this.scaleFactor=Math.min(r,i)}function z(){const e=_assertClassBrand(C,this,X).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function H(e){const t=new Path2D;for(let n=0,r=e.length;n<r;n++){const[r,i,a,s]=e[n];0===n&&t.moveTo(...r),t.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}return t}function W(e,t,n){const[r,i,a,s]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=r,e[t+1]=s-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+r,e[t+1]=n+i}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=a-e[t],e[t+1]+=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=a-e[t+1],e[t+1]=s-n}break;default:throw new Error("Invalid rotation")}return e}function V(e,t,n){const[r,i,a,s]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=r,e[t+1]=s-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-i,e[t+1]=n-r}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=a-e[t],e[t+1]-=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=s-e[t+1],e[t+1]=a-n}break;default:throw new Error("Invalid rotation")}return e}function K(e,t,n,i){const a=[],s=this.thickness/2,o=e*t+s,l=e*n+s;for(const c of this.paths){const t=[],n=[];for(let r=0,i=c.length;r<i;r++){const[a,s,d,u]=c[r],h=e*a[0]+o,p=e*a[1]+l,f=e*s[0]+o,m=e*s[1]+l,g=e*d[0]+o,v=e*d[1]+l,y=e*u[0]+o,b=e*u[1]+l;0===r&&(t.push(h,p),n.push(h,p)),t.push(f,m,g,v,y,b),n.push(f,m),r===i-1&&n.push(y,b)}a.push({bezier:W.call(r,t,i,this.rotation),points:W.call(r,n,i,this.rotation)})}return a}function Y(){let e=1/0,t=-1/0,n=1/0,r=-1/0;for(const a of this.paths)for(const[s,o,l,c]of a){const a=i.Util.bezierBoundingBox(...s,...o,...l,...c);e=Math.min(e,a[0]),n=Math.min(n,a[1]),t=Math.max(t,a[2]),r=Math.max(r,a[3])}return[e,n,t,r]}function X(){return _classPrivateFieldGet(g,this)?Math.ceil(this.thickness*this.parentScale):0}function J(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!_classPrivateFieldGet(g,this))return void _assertClassBrand(C,this,L).call(this);const t=_assertClassBrand(C,this,Y).call(this),n=_assertClassBrand(C,this,X).call(this);_classPrivateFieldSet(d,this,Math.max(a.AnnotationEditor.MIN_SIZE,t[2]-t[0])),_classPrivateFieldSet(c,this,Math.max(a.AnnotationEditor.MIN_SIZE,t[3]-t[1]));const r=Math.ceil(n+_classPrivateFieldGet(d,this)*this.scaleFactor),i=Math.ceil(n+_classPrivateFieldGet(c,this)*this.scaleFactor),[s,o]=this.parentDimensions;this.width=r/s,this.height=i/o,this.setAspectRatio(r,i);const l=this.translationX,u=this.translationY;this.translationX=-t[0],this.translationY=-t[1],_assertClassBrand(C,this,U).call(this),_assertClassBrand(C,this,L).call(this),_classPrivateFieldSet(_,this,r),_classPrivateFieldSet(w,this,i),this.setDims(r,i);const h=e?n/this.scaleFactor/2:0;this.translate(l-this.translationX-h,u-this.translationY-h)}r=k,_defineProperty(k,"_defaultColor",null),_defineProperty(k,"_defaultOpacity",1),_defineProperty(k,"_defaultThickness",1),_defineProperty(k,"_type","ink"),t.InkEditor=k},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var i=n(1),a=n(4),s=n(6),o=n(29),l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakSet;class b extends a.AnnotationEditor{constructor(e){super(_objectSpread(_objectSpread({},e),{},{name:"stampEditor"})),_classPrivateMethodInitSpec(this,y),_classPrivateFieldInitSpec(this,l,null),_classPrivateFieldInitSpec(this,c,null),_classPrivateFieldInitSpec(this,d,null),_classPrivateFieldInitSpec(this,u,null),_classPrivateFieldInitSpec(this,h,null),_classPrivateFieldInitSpec(this,p,null),_classPrivateFieldInitSpec(this,f,null),_classPrivateFieldInitSpec(this,m,null),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldSet(u,this,e.bitmapUrl),_classPrivateFieldSet(h,this,e.bitmapFile)}static initialize(e){a.AnnotationEditor.initialize(e)}static get supportedTypes(){return(0,i.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((e=>"image/".concat(e))))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;_classPrivateFieldGet(c,this)&&(_classPrivateFieldSet(l,this,null),this._uiManager.imageManager.deleteId(_classPrivateFieldGet(c,this)),null===(e=_classPrivateFieldGet(p,this))||void 0===e||e.remove(),_classPrivateFieldSet(p,this,null),null===(t=_classPrivateFieldGet(f,this))||void 0===t||t.disconnect(),_classPrivateFieldSet(f,this,null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(_classPrivateFieldGet(c,this)&&_assertClassBrand(y,this,x).call(this),this.isAttachedToDOM||this.parent.add(this))):_classPrivateFieldGet(c,this)&&_assertClassBrand(y,this,x).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(_classPrivateFieldGet(d,this)||_classPrivateFieldGet(l,this)||_classPrivateFieldGet(u,this)||_classPrivateFieldGet(h,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,_classPrivateFieldGet(l,this)?_assertClassBrand(y,this,C).call(this):_assertClassBrand(y,this,x).call(this),this.width){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r)}return this.div}static deserialize(e,t,n){if(e instanceof o.StampAnnotationElement)return null;const r=super.deserialize(e,t,n),{rect:i,bitmapUrl:a,bitmapId:s,isSvg:l,accessibilityData:d}=e;s&&n.imageManager.isValidId(s)?_classPrivateFieldSet(c,r,s):_classPrivateFieldSet(u,r,a),_classPrivateFieldSet(g,r,l);const[h,p]=r.pageDimensions;return r.width=(i[2]-i[0])/h,r.height=(i[3]-i[1])/p,d&&(r.altTextData=d),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const n={annotationType:i.AnnotationEditorType.STAMP,bitmapId:_classPrivateFieldGet(c,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:_classPrivateFieldGet(g,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=_assertClassBrand(y,this,A).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:r,altText:a}=this.altTextData;if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),null===t)return n;t.stamps||(t.stamps=new Map);const s=_classPrivateFieldGet(g,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(_classPrivateFieldGet(c,this))){if(_classPrivateFieldGet(g,this)){const e=t.stamps.get(_classPrivateFieldGet(c,this));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=_assertClassBrand(y,this,A).call(this,!1))}}else t.stamps.set(_classPrivateFieldGet(c,this),{area:s,serialized:n}),n.bitmap=_assertClassBrand(y,this,A).call(this,!1);return n}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(_classPrivateFieldSet(l,this,e.bitmap),t||(_classPrivateFieldSet(c,this,e.id),_classPrivateFieldSet(g,this,e.isSvg)),_assertClassBrand(y,this,C).call(this)):this.remove()}function w(){_classPrivateFieldSet(d,this,null),this._uiManager.enableWaiting(!1),_classPrivateFieldGet(p,this)&&this.div.focus()}function x(){if(_classPrivateFieldGet(c,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(_classPrivateFieldGet(c,this)).then((e=>_assertClassBrand(y,this,_).call(this,e,!0))).finally((()=>_assertClassBrand(y,this,w).call(this)));if(_classPrivateFieldGet(u,this)){const e=_classPrivateFieldGet(u,this);return _classPrivateFieldSet(u,this,null),this._uiManager.enableWaiting(!0),void _classPrivateFieldSet(d,this,this._uiManager.imageManager.getFromUrl(e).then((e=>_assertClassBrand(y,this,_).call(this,e))).finally((()=>_assertClassBrand(y,this,w).call(this))))}if(_classPrivateFieldGet(h,this)){const e=_classPrivateFieldGet(h,this);return _classPrivateFieldSet(h,this,null),this._uiManager.enableWaiting(!0),void _classPrivateFieldSet(d,this,this._uiManager.imageManager.getFromFile(e).then((e=>_assertClassBrand(y,this,_).call(this,e))).finally((()=>_assertClassBrand(y,this,w).call(this))))}const e=document.createElement("input");e.type="file",e.accept=r.supportedTypesStr,_classPrivateFieldSet(d,this,new Promise((t=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);_assertClassBrand(y,this,_).call(this,t)}else this.remove();t()})),e.addEventListener("cancel",(()=>{this.remove(),t()}))})).finally((()=>_assertClassBrand(y,this,w).call(this)))),e.click()}function C(){const{div:e}=this;let{width:t,height:n}=_classPrivateFieldGet(l,this);const[r,i]=this.pageDimensions,a=.75;if(this.width)t=this.width*r,n=this.height*i;else if(t>a*r||n>a*i){const e=Math.min(a*r/t,a*i/n);t*=e,n*=e}const[s,o]=this.parentDimensions;this.setDims(t*s/r,n*o/i),this._uiManager.enableWaiting(!1);const c=_classPrivateFieldSet(p,this,document.createElement("canvas"));e.append(c),e.hidden=!1,_assertClassBrand(y,this,P).call(this,t,n),_assertClassBrand(y,this,E).call(this),_classPrivateFieldGet(v,this)||(this.parent.addUndoableEditor(this),_classPrivateFieldSet(v,this,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}function k(e,t){var n;const[r,i]=this.parentDimensions;this.width=e/r,this.height=t/i,this.setDims(e,t),null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==_classPrivateFieldGet(m,this)&&clearTimeout(_classPrivateFieldGet(m,this)),_classPrivateFieldSet(m,this,setTimeout((()=>{_classPrivateFieldSet(m,this,null),_assertClassBrand(y,this,P).call(this,e,t)}),200))}function S(e,t){const{width:n,height:r}=_classPrivateFieldGet(l,this);let i=n,a=r,s=_classPrivateFieldGet(l,this);for(;i>2*e||a>2*t;){const n=i,r=a;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const o=new OffscreenCanvas(i,a);o.getContext("2d").drawImage(s,0,0,n,r,0,0,i,a),s=o.transferToImageBitmap()}return s}function P(e,t){e=Math.ceil(e),t=Math.ceil(t);const n=_classPrivateFieldGet(p,this);if(!n||n.width===e&&n.height===t)return;n.width=e,n.height=t;const r=_classPrivateFieldGet(g,this)?_classPrivateFieldGet(l,this):_assertClassBrand(y,this,S).call(this,e,t),i=n.getContext("2d");i.filter=this._uiManager.hcmFilter,i.drawImage(r,0,0,r.width,r.height,0,0,e,t)}function A(e){if(e){if(_classPrivateFieldGet(g,this)){const e=this._uiManager.imageManager.getSvgUrl(_classPrivateFieldGet(c,this));if(e)return e}const e=document.createElement("canvas");return({width:e.width,height:e.height}=_classPrivateFieldGet(l,this)),e.getContext("2d").drawImage(_classPrivateFieldGet(l,this),0,0),e.toDataURL()}if(_classPrivateFieldGet(g,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*s.PixelsPerInch.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*s.PixelsPerInch.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(n,r);return i.getContext("2d").drawImage(_classPrivateFieldGet(l,this),0,0,_classPrivateFieldGet(l,this).width,_classPrivateFieldGet(l,this).height,0,0,n,r),i.transferToImageBitmap()}return structuredClone(_classPrivateFieldGet(l,this))}function E(){_classPrivateFieldSet(f,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&_assertClassBrand(y,this,k).call(this,t.width,t.height)}))),_classPrivateFieldGet(f,this).observe(this.div)}r=b,_defineProperty(b,"_type","stamp"),t.StampEditor=b}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __nested_webpack_exports__={};return(()=>{var e=__nested_webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),s=__w_pdfjs_require__(5),o=__w_pdfjs_require__(29),l=__w_pdfjs_require__(14),c=__w_pdfjs_require__(32)})(),__nested_webpack_exports__})(),module.exports=root.pdfjsLib=factory()},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var O,L=Object.assign;function D(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function q(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function U(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case x:return"Portal";case S:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ce=null,ke=null;function Se(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Pe(e){Ce?ke?ke.push(e):ke=[e]:Ce=e}function Ae(){if(Ce){var e=Ce,t=ke;if(ke=Ce=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Te(){}var Ie=!1;function Fe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ee(e,t,n)}finally{Ie=!1,(null!==Ce||null!==ke)&&(Te(),Ae())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(d)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(de){Ne=!1}function Me(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Oe=!1,Le=null,De=!1,Be=null,qe={onError:function(e){Oe=!0,Le=e}};function Ue(e,t,n,r,i,a,s,o,l){Oe=!1,Le=null,Me.apply(qe,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=ut(o):0!==(a&=s)&&(r=ut(a))}else 0!==(s=n&~i)?r=ut(s):0!==a&&(r=ut(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,Ct,kt,St,Pt=!1,At=[],Et=null,Tt=null,It=null,Ft=new Map,Rt=new Map,Nt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Bt(e,t,n){Dt(e)&&n.delete(t)}function qt(){Pt=!1,null!==Et&&Dt(Et)&&(Et=null),null!==Tt&&Dt(Tt)&&(Tt=null),null!==It&&Dt(It)&&(It=null),Ft.forEach(Bt),Rt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Pt||(Pt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function Gt(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ut(Et,e),null!==Tt&&Ut(Tt,e),null!==It&&Ut(It,e),Ft.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var zt=_.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,a=zt.transition;zt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,zt.transition=a}}function Vt(e,t,n,r){var i=bt,a=zt.transition;zt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,zt.transition=a}}function Kt(e,t,n,r){if(Ht){var i=Xt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Ot(Et,e,t,n,r,i),!0;case"dragenter":return Tt=Ot(Tt,e,t,n,r,i),!0;case"mouseover":return It=Ot(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ft.set(a,Ot(Ft.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Ot(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Hr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Xt(e,t,n,r){if(Yt=null,null!==(e=yi(e=we(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=L({},cn,{view:0,detail:0}),hn=an(un),pn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=an(pn),mn=an(L({},pn,{dataTransfer:0})),gn=an(L({},un,{relatedTarget:0})),vn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),_n=an(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Sn(){return kn}var Pn=L({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Pn),En=an(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Fn),Nn=[9,13,27,32],jn=d&&"CompositionEvent"in window,Mn=null;d&&"documentMode"in document&&(Mn=document.documentMode);var On=d&&"TextEvent"in window&&!Mn,Ln=d&&(!jn||Mn&&8<Mn&&11>=Mn),Dn=String.fromCharCode(32),Bn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Wn(e,t,n,r){Pe(r),0<(t=Vr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Kn=null;function Yn(e){Dr(e,0)}function Xn(e){if(K(_i(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(d){var Zn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Kn=Vn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Wn(t,Kn,e,we(e)),Fe(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ar(e,t){if("click"===e)return Xn(t)}function sr(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=dr(n,a);var s=dr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Cr={},kr={};function Sr(e){if(Cr[e])return Cr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Cr[e]=n[t];return e}d&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Pr=Sr("animationend"),Ar=Sr("animationiteration"),Er=Sr("animationstart"),Tr=Sr("transitionend"),Ir=new Map,Fr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Nr=0;Nr<Fr.length;Nr++){var jr=Fr[Nr];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(Pr,"onAnimationEnd"),Rr(Ar,"onAnimationIteration"),Rr(Er,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,c){if(Ue.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var d=Le;Oe=!1,Le=null,De||(De=!0,Be=d)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,o,c),a=l}}}if(De)throw e=Be,De=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Ur]){e[Ur]=!0,s.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,qr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Vt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=yi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Fe((function(){var r=a,i=we(n),s=[];e:{var o=Ir.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Pr:case Ar:case Er:l=vn;break;case Tr:l=In;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&d.push(Wr(f,m,p)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(u=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:_i(l),p=null==c?o:_i(c),(o=new d(m,f+"leave",l,n,i)).target=u,o.relatedTarget=p,m=null,yi(i)===r&&((d=new d(h,f+"enter",c,n,i)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)d=Kr(d),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kr(d),h=Kr(h)}d=null}else d=null;null!==l&&Yr(s,o,l,d,!1),null!==c&&null!==u&&Yr(s,u,c,d,!0)}if("select"===(l=(o=r?_i(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Hn(o))if(Qn)g=sr;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?_i(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(s,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,Gn=!0)),0<(v=Vr(r,b)).length&&(b=new _n(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!jn&&qn(e,t)?(e=en(),$t=Zt=Qt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Dr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Re(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Re(n,a))&&s.unshift(Wr(n,l,o)):i||null!=(l=Re(n,a))&&s.push(Wr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,fi="__reactContainer$"+ui,mi="__reactEvents$"+ui,gi="__reactListeners$"+ui,vi="__reactHandles$"+ui;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var xi=[],Ci=-1;function ki(e){return{current:e}}function Si(e){0>Ci||(e.current=xi[Ci],xi[Ci]=null,Ci--)}function Pi(e,t){Ci++,xi[Ci]=e.current,e.current=t}var Ai={},Ei=ki(Ai),Ti=ki(!1),Ii=Ai;function Fi(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Si(Ti),Si(Ei)}function ji(e,t,n){if(Ei.current!==Ai)throw Error(a(168));Pi(Ei,t),Pi(Ti,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return L({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ii=Ei.current,Pi(Ei,e),Pi(Ti,Ti.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Mi(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Si(Ti),Si(Ei),Pi(Ei,e)):Si(Ti),Pi(Ti,n)}var Di=null,Bi=!1,qi=!1;function Ui(e){null===Di?Di=[e]:Di.push(e)}function Gi(){if(!qi&&null!==Di){qi=!0;var e=0,t=bt;try{var n=Di;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Di=null,Bi=!1}catch(i){throw null!==Di&&(Di=Di.slice(e+1)),Ke($e,Gi),i}finally{bt=t,qi=!1}}return null}var zi=[],Hi=0,Wi=null,Vi=0,Ki=[],Yi=0,Xi=null,Ji=1,Qi="";function Zi(e,t){zi[Hi++]=Vi,zi[Hi++]=Wi,Wi=e,Vi=t}function $i(e,t,n){Ki[Yi++]=Ji,Ki[Yi++]=Qi,Ki[Yi++]=Xi,Xi=e;var r=Ji;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ji=1<<32-st(t)+i|n<<i|r,Qi=a+e}else Ji=1<<a|n<<i|r,Qi=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=zi[--Hi],zi[Hi]=null,Vi=zi[--Hi],zi[Hi]=null;for(;e===Xi;)Xi=Ki[--Yi],Ki[Yi]=null,Qi=Ki[--Yi],Ki[Yi]=null,Ji=Ki[--Yi],Ki[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Ji,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ua(e){if(e!==na)return!1;if(!ia)return da(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ci(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=_.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===C?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&ya(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case x:return(t=Dc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?d(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:u(e,t,n,r,null);va(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return u(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function m(i,a,o,l){for(var c=null,d=null,u=a,m=a=0,g=null;null!==u&&m<o.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(i,u,o[m],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(i,u),a=s(v,a,m),null===d?c=v:d.sibling=v,d=v,u=g}if(m===o.length)return n(i,u),ia&&Zi(i,m),c;if(null===u){for(;m<o.length;m++)null!==(u=h(i,o[m],l))&&(a=s(u,a,m),null===d?c=u:d.sibling=u,d=u);return ia&&Zi(i,m),c}for(u=r(i,u);m<o.length;m++)null!==(g=f(u,i,m,o[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),a=s(g,a,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),c}function g(i,o,l,c){var d=M(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),o=s(b,o,g),null===u?d=b:u.sibling=b,u=b,m=v}if(y.done)return n(i,m),ia&&Zi(i,g),d;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=s(y,o,g),null===u?d=y:u.sibling=y,u=y);return ia&&Zi(i,g),d}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=s(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Zi(i,g),d}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,d=a;null!==d;){if(d.key===c){if((c=s.type)===C){if(7===d.tag){n(r,d.sibling),(a=i(d,s.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ya(c)===d.type){n(r,d.sibling),(a=i(d,s.props)).ref=ga(r,d,s),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}s.type===C?((a=Mc(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=jc(s.type,s.key,s.props,null,r.mode,l)).ref=ga(r,a,s),l.return=r,r=l)}return o(r);case x:e:{for(d=s.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Dc(s,r.mode,l)).return=r,r=a}return o(r);case R:return e(r,a,(d=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if(M(s))return g(r,a,s,l);va(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Lc(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var _a=ba(!0),wa=ba(!1),xa=ki(null),Ca=null,ka=null,Sa=null;function Pa(){Sa=ka=Ca=null}function Aa(e){var t=xa.current;Si(xa),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){Ca=e,Sa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===Ca)throw Error(a(308));ka=e,Ca.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Fa=null;function Ra(e){null===Fa?Fa=[e]:Fa.push(e)}function Na(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ra(t)):(n.next=i.next,i.next=n),t.interleaved=n,ja(e,r)}function ja(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ja(e,n)}return null===(i=r.interleaved)?(t.next=t,Ra(r)):(t.next=i.next,i.next=t),r.interleaved=t,ja(e,n)}function qa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ga(e,t,n,r){var i=e.updateQueue;Ma=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=i.baseState;for(s=0,d=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=L({},u,h);break e;case 2:Ma=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=s,e.lanes=s,e.memoizedState=u}}function za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},Wa=ki(Ha),Va=ki(Ha),Ka=ki(Ha);function Ya(e){if(e===Ha)throw Error(a(174));return e}function Xa(e,t){switch(Pi(Ka,t),Pi(Va,e),Pi(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Wa),Pi(Wa,t)}function Ja(){Si(Wa),Si(Va),Si(Ka)}function Qa(e){Ya(Ka.current);var t=Ya(Wa.current),n=le(t,e.type);t!==n&&(Pi(Va,e),Pi(Wa,n))}function Za(e){Va.current===e&&(Si(Wa),Si(Va))}var $a=ki(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=_.ReactCurrentDispatcher,is=_.ReactCurrentBatchConfig,as=0,ss=null,os=null,ls=null,cs=!1,ds=!1,us=0,hs=0;function ps(){throw Error(a(321))}function fs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,i,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Zs:$s,e=n(r,i),ds){s=0;do{if(ds=!1,us=0,25<=s)throw Error(a(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,i)}while(ds)}if(rs.current=Qs,t=null!==os&&null!==os.next,as=0,ls=os=ss=null,cs=!1,t)throw Error(a(300));return e}function gs(){var e=0!==us;return us=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function ys(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function bs(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=ys(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,d=s;do{var u=d.lane;if((as&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ss.lanes|=u,Ol|=u}d=d.next}while(null!==d&&d!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ss.lanes|=s,Ol|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=ys(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(bo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function xs(){}function Cs(e,t){var n=ss,r=ys(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,bo=!0),r=r.queue,Ms(Ps.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Is(9,Ss.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(a(349));0!==(30&as)||ks(n,t,i)}return i}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ss(e,t,n,r){t.value=n,t.getSnapshot=r,As(t)&&Es(e)}function Ps(e,t,n){return n((function(){As(t)&&Es(e)}))}function As(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Es(e){var t=ja(e,1);null!==t&&nc(t,e,1,-1)}function Ts(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,ss,e),[t.memoizedState,e]}function Is(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fs(){return ys().memoizedState}function Rs(e,t,n,r){var i=vs();ss.flags|=e,i.memoizedState=Is(1|t,n,void 0,void 0===r?null:r)}function Ns(e,t,n,r){var i=ys();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&fs(r,s.deps))return void(i.memoizedState=Is(t,n,a,r))}ss.flags|=e,i.memoizedState=Is(1|t,n,a,r)}function js(e,t){return Rs(8390656,8,e,t)}function Ms(e,t){return Ns(2048,8,e,t)}function Os(e,t){return Ns(4,2,e,t)}function Ls(e,t){return Ns(4,4,e,t)}function Ds(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ns(4,4,Ds.bind(null,t,e),n)}function qs(){}function Us(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gs(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zs(e,t,n){return 0===(21&as)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ss.lanes|=n,Ol|=n,e.baseState=!0),t)}function Hs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{bt=n,is.transition=r}}function Ws(){return ys().memoizedState}function Vs(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Xs(t,n);else if(null!==(n=Na(e,t,n,r))){nc(n,e,r,ec()),Js(n,t,r)}}function Ks(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Xs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(i.next=i,Ra(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Na(e,t,i,r))&&(nc(n,e,r,i=ec()),Js(n,t,r))}}function Ys(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Xs(e,t){ds=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qs={readContext:Ia,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Zs={readContext:Ia,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:js,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Rs(4194308,4,Ds.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Rs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rs(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vs.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:Ts,useDebugValue:qs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Ts(!1),t=e[0];return e=Hs.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,i=vs();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Tl)throw Error(a(349));0!==(30&as)||ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,js(Ps.bind(null,r,s,e),[e]),r.flags|=2048,Is(9,Ss.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Tl.identifierPrefix;if(ia){var n=Qi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=us++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$s={readContext:Ia,useCallback:Us,useContext:Ia,useEffect:Ms,useImperativeHandle:Bs,useInsertionEffect:Os,useLayoutEffect:Ls,useMemo:Gs,useReducer:_s,useRef:Fs,useState:function(){return _s(bs)},useDebugValue:qs,useDeferredValue:function(e){return zs(ys(),os.memoizedState,e)},useTransition:function(){return[_s(bs)[0],ys().memoizedState]},useMutableSource:xs,useSyncExternalStore:Cs,useId:Ws,unstable_isNewReconciler:!1},eo={readContext:Ia,useCallback:Us,useContext:Ia,useEffect:Ms,useImperativeHandle:Bs,useInsertionEffect:Os,useLayoutEffect:Ls,useMemo:Gs,useReducer:ws,useRef:Fs,useState:function(){return ws(bs)},useDebugValue:qs,useDeferredValue:function(e){var t=ys();return null===os?t.memoizedState=e:zs(t,os.memoizedState,e)},useTransition:function(){return[ws(bs)[0],ys().memoizedState]},useMutableSource:xs,useSyncExternalStore:Cs,useId:Ws,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(nc(t,e,i,r),qa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(nc(t,e,i,r),qa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ba(e,i,r))&&(nc(t,e,r,n),qa(t,e,r))}};function io(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function ao(e,t,n){var r=!1,i=Ai,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Ri(t)?Ii:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Fi(e,i):Ai),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Ri(t)?Ii:Ei.current,i.context=Fi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Ga(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),uo(0,t)},n}function fo(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Ba(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=_.ReactCurrentOwner,bo=!1;function _o(e,t,n,r){t.child=null===e?wa(t,null,n,r):_a(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=ms(e,t,n,r,a,i),n=gs(),null===e||bo?(ia&&n&&ea(t),t.flags|=1,_o(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function xo(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Co(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Nc(a,r)).ref=t.ref,e.return=t,t.child=e}function Co(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return Po(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(Nl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pi(Nl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Pi(Nl,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Pi(Nl,Rl),Rl|=r;return _o(e,t,i,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Po(e,t,n,r,i){var a=Ri(n)?Ii:Ei.current;return a=Fi(t,a),Ta(t,i),n=ms(e,t,n,r,a,i),r=gs(),null===e||bo?(ia&&r&&ea(t),t.flags|=1,_o(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Ao(e,t,n,r,i){if(Ri(n)){var a=!0;Oi(t)}else a=!1;if(Ta(t,i),null===t.stateNode)zo(e,t),ao(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Fi(t,c=Ri(n)?Ii:Ei.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&so(t,s,r,c),Ma=!1;var h=t.memoizedState;s.state=h,Ga(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Ti.current||Ma?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Ma||io(t,n,o,r,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,La(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ia(l):l=Fi(t,l=Ri(n)?Ii:Ei.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||h!==l)&&so(t,s,r,l),Ma=!1,h=t.memoizedState,s.state=h,Ga(t,r,s,i);var f=t.memoizedState;o!==u||h!==f||Ti.current||Ma?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=Ma||io(t,n,c,r,h,f,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Eo(e,t,n,r,a,i)}function Eo(e,t,n,r,i,a){So(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Ho(e,t,a);r=t.stateNode,yo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_a(t,e.child,null,a),t.child=_a(t,null,o,a)):_o(e,t,o,a),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),Xa(e,t.containerInfo)}function Io(e,t,n,r,i){return pa(),fa(i),t.flags|=256,_o(e,t,n,r),t.child}var Fo,Ro,No,jo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,s=$a.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Pi($a,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,i,0,null),e=Mc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Mo,e):Do(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(s=Mc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_a(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Mo,s);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bo(e,t,o,r=co(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Tl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,ja(e,i),nc(r,e,i,-1))}return mc(),Bo(e,t,o,r=co(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Yi++]=Ji,Ki[Yi++]=Qi,Ki[Yi++]=Xi,Ji=e.id,Qi=e.overflow,Xi=t),t=Do(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Nc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Nc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Nc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Do(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,n,r){return null!==r&&fa(r),_a(t,e.child,null,n),(e=Do(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Uo(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Go(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_o(e,t,r.children,n),0!==(2&(r=$a.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n,t);else if(19===e.tag)qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pi($a,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,a);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return Ri(t.type)&&Ni(),Vo(t),null;case 3:return r=t.stateNode,Ja(),Si(Ti),Si(Ei),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ro(e,t),Vo(t),null;case 5:Za(t);var i=Ya(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)No(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Vo(t),null}if(e=Ya(Wa.current),ua(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Br(Mr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":J(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":ie(r,s),Br("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":V(r),$(r,s,!0);break;case"textarea":V(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Fo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Br(Mr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":J(e,r),i=X(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?ge(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Br("scroll",e):null!=d&&b(e,s,d,l))}switch(n){case"input":V(e),$(e,r,!1);break;case"textarea":V(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)jo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Ka.current),Ya(Wa.current),ua(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Vo(t),null;case 13:if(Si($a),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,s=!1;else if(s=ua(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),s=!1}else null!==aa&&(sc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$a.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return Ja(),Ro(e,t),null===e&&Gr(t.stateNode.containerInfo),Vo(t),null;case 10:return Aa(t.type._context),Vo(t),null;case 19:if(Si($a),null===(s=t.memoizedState))return Vo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wo(s,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Wo(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pi($a,1&$a.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Gl&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ia)return Vo(t),null}else 2*Qe()-s.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=$a.current,Pi($a,r?1&n|2:1&n),t):(Vo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),Si(Ti),Si(Ei),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Si($a),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si($a),null;case 4:return Ja(),null;case 10:return Aa(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Fo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},No=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Wa.current);var a,s=null;switch(n){case"input":i=X(e,i),r=X(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in ye(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Br("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Jo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Jo||$o(n,t);case 6:var r=dl,i=ul;dl=null,hl(e,t,n),ul=i,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Jo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(s,o,i),dl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){kc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),be(l,o);var d=be(l,s);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):b(i,u,h,d)}switch(l){case"input":Z(i,s);break;case"textarea":ae(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Qe())),4&r&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(d=Jo)||u,ml(t,e),Jo=d):ml(t,e),vl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zo=e,u=e.child;null!==u;){for(h=Zo=u;null!==Zo;){switch(f=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$o(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:$o(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Zo=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(a(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Xo;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Xo;var c=Jo;if(Xo=s,(Jo=l)&&!c)for(Zo=i;null!==Zo;)l=(s=Zo).child,22===s.tag&&null!==s.memoizedState?xl(i):null!==l?(l.return=s,Zo=l):xl(i);for(;null!==a;)Zo=a,bl(a,t,n),a=a.sibling;Zo=i,Xo=o,Jo=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zo=a):_l(e)}}function _l(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&za(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}za(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(a(163))}Jo||512&t.flags&&il(t)}catch(p){kc(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function xl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var a=t.return;try{il(t)}catch(l){kc(t,a,l)}break;case 5:var s=t.return;try{il(t)}catch(l){kc(t,s,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Cl,kl=Math.ceil,Sl=_.ReactCurrentDispatcher,Pl=_.ReactCurrentOwner,Al=_.ReactCurrentBatchConfig,El=0,Tl=null,Il=null,Fl=0,Rl=0,Nl=ki(0),jl=0,Ml=null,Ol=0,Ll=0,Dl=0,Bl=null,ql=null,Ul=0,Gl=1/0,zl=null,Hl=!1,Wl=null,Vl=null,Kl=!1,Yl=null,Xl=0,Jl=0,Ql=null,Zl=-1,$l=0;function ec(){return 0!==(6&El)?Qe():-1!==Zl?Zl:Zl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Fl?Fl&-Fl:null!==ma.transition?(0===$l&&($l=mt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Ql=null,Error(a(185));vt(e,n,r),0!==(2&El)&&e===Tl||(e===Tl&&(0===(2&El)&&(Ll|=n),4===jl&&oc(e,Fl)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Gl=Qe()+500,Bi&&Gi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Tl?Fl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),si((function(){0===(6&El)&&Gi()})),n=null;else{switch(_t(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,$l=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=El;El|=2;var s=fc();for(Tl===e&&Fl===t||(zl=null,Gl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Pa(),Sl.current=s,El=i,null!==Il?t=0:(Tl=null,Fl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ml,hc(e,0),oc(e,r),rc(e,Qe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=ft(e))&&(r=s,t=ac(e,s))),1===t))throw n=Ml,hc(e,0),oc(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,ql,zl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ul+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,ql,zl),t);break}wc(e,ql,zl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,ql,zl),r);break}wc(e,ql,zl);break;default:throw Error(a(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=ql,ql=n,null!==t&&sc(t)),e}function sc(e){null===ql?ql=e:ql.push.apply(ql,e)}function oc(e,t){for(t&=~Dl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ml,hc(e,0),oc(e,t),rc(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,ql,zl),rc(e,Qe()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Gl=Qe()+500,Bi&&Gi())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&El)&&xc();var t=El;El|=1;var n=Al.transition,r=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=r,Al.transition=n,0===(6&(El=t))&&Gi()}}function uc(){Rl=Nl.current,Si(Nl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Ja(),Si(Ti),Si(Ei),ns();break;case 5:Za(r);break;case 4:Ja();break;case 13:case 19:Si($a);break;case 10:Aa(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Tl=e,Il=e=Nc(e.current,null),Fl=Rl=t,jl=0,Ml=null,Dl=Ll=Ol=0,ql=Bl=null,null!==Fa){for(t=0;t<Fa.length;t++)if(null!==(r=(n=Fa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Fa=null}return e}function pc(e,t){for(;;){var n=Il;try{if(Pa(),rs.current=Qs,cs){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(as=0,ls=os=ss=null,ds=!1,us=0,Pl.current=null,null===n||null===n.return){jl=1,Ml=t,Il=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Fl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(s,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(s,d,t),mc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fa(lo(c,l));break e}}s=c=lo(c,l),4!==jl&&(jl=2),null===Bl?Bl=[s]:Bl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,po(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,fo(s,l,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(_){t=_,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Qs,null===e?Qs:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Tl||0===(268435455&Ol)&&0===(268435455&Ll)||oc(Tl,Fl)}function gc(e,t){var n=El;El|=2;var r=fc();for(Tl===e&&Fl===t||(zl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Pa(),El=n,Sl.current=r,null!==Il)throw Error(a(261));return Tl=null,Fl=0,jl}function vc(){for(;null!==Il;)bc(Il)}function yc(){for(;null!==Il&&!Xe();)bc(Il)}function bc(e){var t=Cl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?_c(e):Il=t,Pl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return jl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===jl&&(jl=5)}function wc(e,t,n){var r=bt,i=Al.transition;try{Al.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Yl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Tl&&(Il=Tl=null,Fl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tc(tt,(function(){return xc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Al.transition,Al.transition=null;var o=bt;bt=1;var l=El;El|=4,Pl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===i&&(l=o),p===s&&++u===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),El=l,bt=o,Al.transition=s}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Xl=i),s=e.pendingLanes,0===s&&(Vl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Xl)&&0!==e.tag&&xc(),s=e.pendingLanes,0!==(1&s)?e===Ql?Jl++:(Jl=0,Ql=e):Jl=0,Gi()}(e,t,n,r)}finally{Al.transition=i,bt=r}return null}function xc(){if(null!==Yl){var e=_t(Xl),t=Al.transition,n=bt;try{if(Al.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&El))throw Error(a(331));var i=El;for(El|=4,Zo=e.current;null!==Zo;){var s=Zo,o=s.child;if(0!==(16&Zo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zo=d;null!==Zo;){var u=Zo;switch(u.tag){case 0:case 11:case 15:nl(8,u,s)}var h=u.child;if(null!==h)h.return=u,Zo=h;else for(;null!==Zo;){var p=(u=Zo).sibling,f=u.return;if(al(u),u===d){Zo=null;break}if(null!==p){p.return=f,Zo=p;break}Zo=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(s=Zo).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Zo=y;break e}Zo=s.return}}var b=e.current;for(Zo=b;null!==Zo;){var _=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==_)_.return=o,Zo=_;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){kc(l,l.return,x)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(El=i,Gi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Al.transition=t}}return!1}function Cc(e,t,n){e=Ba(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=Ba(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Fl&n)===n&&(4===jl||3===jl&&(130023424&Fl)===Fl&&500>Qe()-Ul?hc(e,0):Dl|=n),rc(e,t)}function Pc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=ja(e,t))&&(vt(e,t,n),rc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Pc(e,n)}function Tc(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fc(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Fc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case C:return Mc(n.children,i,s,t);case k:o=8,i|=8;break;case S:return(e=Fc(12,n,t,2|i)).elementType=S,e.lanes=s,e;case T:return(e=Fc(13,n,t,i)).elementType=T,e.lanes=s,e;case I:return(e=Fc(19,n,t,i)).elementType=I,e.lanes=s,e;case N:return Oc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case P:o=10;break e;case A:o=9;break e;case E:o=11;break e;case F:o=14;break e;case R:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Fc(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Mc(e,t,n,r){return(e=Fc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Fc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Fc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Fc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,s,o,l){return e=new Bc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Fc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Uc(e){if(!e)return Ai;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function Gc(e,t,n,r,i,a,s,o,l){return(e=qc(n,r,!0,e,0,a,0,o,l)).context=Uc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ba(n,a,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,a=ec(),s=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ba(i,t,s))&&(nc(e,i,s,a),qa(e,i,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),pa();break;case 5:Qa(t);break;case 1:Ri(t.type)&&Oi(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pi(xa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Pi($a,1&$a.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Pi($a,1&$a.current),null!==(e=Ho(e,t,n))?e.sibling:null);Pi($a,1&$a.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Go(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pi($a,$a.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ia&&0!==(1048576&t.flags)&&$i(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var i=Fi(t,Ei.current);Ta(t,n),i=ms(null,t,r,e,i,n);var s=gs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(s=!0,Oi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Eo(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),_o(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===F)return 14}return 2}(r),e=to(r,e),i){case 0:t=Po(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=xo(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Po(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(To(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,La(e,t),Ga(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Io(e,t,r,n,i=lo(Error(a(423)),t));break e}if(r!==i){t=Io(e,t,r,n,i=lo(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Ho(e,t,n);break e}_o(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),So(e,t),_o(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Lo(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_a(t,null,r,n):_o(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return _o(e,t,t.pendingProps,n),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Pi(xa,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ti.current){t=Ho(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Da(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ea(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ea(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}_o(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Ia(i)),t.flags|=1,_o(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),xo(e,t,r,i=to(r.type,i),n);case 15:return Co(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),zo(e,t),t.tag=1,Ri(r)?(e=!0,Oi(t)):e=!1,Ta(t,n),ao(t,r,i),oo(t,r,i,n),Eo(null,t,r,!0,e,n);case 19:return Go(e,t,n);case 22:return ko(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Hc(s);o.call(e)}}zc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(s);a.call(e)}}var s=Gc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[fi]=s.current,Gr(8===e.nodeType?e.parentNode:e),dc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fi]=l.current,Gr(8===e.nodeType?e.parentNode:e),dc((function(){zc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(s)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){zc(null,e,null,null)})),t[fi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&El)&&(Gl=Qe()+500,Gi()))}break;case 13:dc((function(){var t=ja(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Vc(e,1)}},xt=function(e){if(13===e.tag){var t=ja(e,134217728);if(null!==t)nc(t,e,134217728,ec());Vc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tc(e),n=ja(e,t);if(null!==n)nc(n,e,t,ec());Vc(e,t)}},kt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Te=dc;var ed={usingClientEntryPoint:!1,Events:[bi,_i,wi,Pe,Ae,cc]},td={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{it=rd.inject(nd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(a(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,s,o),e[fi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(a(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,C={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:C.current}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+E(l,0):a,w(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),T(s,t,i,"",(function(e){return e}))):null!=s&&(P(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+E(o=e[c],c);l+=T(o,t,i,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,i,d=a+E(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function F(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},N={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:C};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<i&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,N(x);else{var t=r(d);null!==t&&j(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(P),P=-1),f=!0;var a=p;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&j(w,u.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,k=!1,S=null,P=-1,A=5,E=-1;function T(){return!(t.unstable_now()-E<A)}function I(){if(null!==S){var e=t.unstable_now();E=e;var n=!0;try{n=S(!0,e)}finally{n?C():(k=!1,S=null)}}else k=!1}if("function"===typeof b)C=function(){b(I)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,R=F.port2;F.port1.onmessage=I,C=function(){R.postMessage(null)}}else C=function(){v(I,0)};function N(e){S=e,k||(k=!0,C())}function j(e,n){P=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(g?(y(P),P=-1):g=!0,j(w,a-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,N(x))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},640:()=>{},618:()=>{},492:()=>{},815:()=>{},671:()=>{},787:()=>{},756:e=>{e.exports=function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")},e.exports.__esModule=!0,e.exports.default=e.exports},101:e=>{e.exports=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")},e.exports.__esModule=!0,e.exports.default=e.exports},668:(e,t,n)=>{var r=n(756);e.exports=function(e,t){return e.get(r(e,t))},e.exports.__esModule=!0,e.exports.default=e.exports},459:(e,t,n)=>{var r=n(101);e.exports=function(e,t,n){r(e,t),t.set(e,n)},e.exports.__esModule=!0,e.exports.default=e.exports},88:(e,t,n)=>{var r=n(756);e.exports=function(e,t,n){return e.set(r(e,t),n),n},e.exports.__esModule=!0,e.exports.default=e.exports},183:(e,t,n)=>{var r=n(756);e.exports=function(e,t,n){return n(r(e,t))},e.exports.__esModule=!0,e.exports.default=e.exports},312:(e,t,n)=>{var r=n(101);e.exports=function(e,t){r(e,t),t.add(e)},e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,n)=>{var r=n(736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},897:(e,t,n)=>{var r=n(693);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,i=n(45);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,__webpack_require__.d(i,a),i}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{hasBrowserEnv:()=>aa,hasStandardBrowserEnv:()=>oa,hasStandardBrowserWebWorkerEnv:()=>la,navigator:()=>sa,origin:()=>ca});var t,n=__webpack_require__(43),r=__webpack_require__.t(n,2),i=__webpack_require__(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const s="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,p=l.history,f=t.Pop,m=null,g=v();function v(){return(p.state||{idx:null}).idx}function y(){f=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:f,location:_.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(a({},p.state,{idx:g}),""));let _={get action(){return f},get location(){return e(l,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(s,y),m=e,()=>{l.removeEventListener(s,y),m=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;let i=d(_.location,e,n);r&&r(i,e),g=v()+1;let a=c(i,g),s=_.createHref(i);try{p.pushState(a,"",s)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(s)}h&&m&&m({action:f,location:_.location,delta:1})},replace:function(e,n){f=t.Replace;let i=d(_.location,e,n);r&&r(i,e),g=v();let a=c(i,g),s=_.createHref(i);p.replaceState(a,"",s),h&&m&&m({action:f,location:_.location,delta:0})},go:e=>p.go(e)};return _}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=I(("string"===typeof t?h(t):t).pathname||"/",n);if(null==i)return null;let a=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=T(i);s=A(a[o],e,r)}return s}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(o(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let l=M([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:P(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=y(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),i&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,_=3,w=2,x=1,C=10,k=-2,S=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(S)&&(r+=k),t&&(r+=w),n.filter((e=>!S(e))).reduce(((e,t)=>e+(b.test(t)?_:""===t?x:C)),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:M([a,d.pathname]),pathnameBase:O(M([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=M([a,d.pathnameBase]))}return s}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:s,pattern:e}}function T(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function F(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function N(e,t){let n=R(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function j(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=h(e):(i=a({},e),o(!i.pathname||!i.pathname.includes("?"),F("?","pathname","search",i)),o(!i.pathname||!i.pathname.includes("#"),F("#","pathname","hash",i)),o(!i.search||!i.search.includes("#"),F("#","search","hash",i)));let s,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)s=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?h(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:L(r),hash:D(i)}}(i,s),u=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!p||(d.pathname+="/"),d}const M=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",D=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],U=(new Set(q),["get",...q]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const z=n.createContext(null);const H=n.createContext(null);const W=n.createContext(null);const V=n.createContext(null);const K=n.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=n.createContext(null);function X(){return null!=n.useContext(V)}function J(){return X()||o(!1),n.useContext(V).location}function Q(e){n.useContext(W).static||n.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=n.useContext(K);return e?function(){let{router:e}=ce(oe.UseNavigateStable),t=ue(le.UseNavigateStable),r=n.useRef(!1);return Q((()=>{r.current=!0})),n.useCallback((function(n,i){void 0===i&&(i={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,G({fromRouteId:t},i)))}),[e,t])}():function(){X()||o(!1);let e=n.useContext(z),{basename:t,future:r,navigator:i}=n.useContext(W),{matches:a}=n.useContext(K),{pathname:s}=J(),l=JSON.stringify(N(a,r.v7_relativeSplatPath)),c=n.useRef(!1);return Q((()=>{c.current=!0})),n.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let a=j(n,JSON.parse(l),s,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:M([t,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}),[t,i,l,s,e])}()}function $(){let{matches:e}=n.useContext(K),t=e[e.length-1];return t?t.params:{}}function ee(e,t){let{relative:r}=void 0===t?{}:t,{future:i}=n.useContext(W),{matches:a}=n.useContext(K),{pathname:s}=J(),o=JSON.stringify(N(a,i.v7_relativeSplatPath));return n.useMemo((()=>j(e,JSON.parse(o),s,"path"===r)),[e,o,s,r])}function te(e,r,i,a){X()||o(!1);let{navigator:s}=n.useContext(W),{matches:l}=n.useContext(K),c=l[l.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let p,f=J();if(r){var g;let e="string"===typeof r?h(r):r;"/"===u||(null==(g=e.pathname)?void 0:g.startsWith(u))||o(!1),p=e}else p=f;let v=p.pathname||"/",y=v;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=m(e,{pathname:y});let _=se(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:M([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,i,a);return r&&_?n.createElement(V.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:t.Pop}},_):_}function ne(){let e=function(){var e;let t=n.useContext(Y),r=de(le.UseRouteError),i=ue(le.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:a},r):null,null)}const re=n.createElement(ne,null);class ie extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(K.Provider,{value:this.props.routeContext},n.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:r,children:i}=e,a=n.useContext(z);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(K.Provider,{value:t},i)}function se(e,t,r,i){var a;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(a=r)?void 0:a.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let n=0;n<l.length;n++){let e=l[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight(((e,i,a)=>{let s,o=!1,h=null,p=null;var f;r&&(s=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||re,d&&(u<0&&0===a?(f="route-fallback",!1||he[f]||(he[f]=!0),o=!0,p=null):u===a&&(o=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(l.slice(0,a+1)),g=()=>{let t;return t=s?h:o?p:i.route.Component?n.createElement(i.route.Component,null):i.route.element?i.route.element:e,n.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?n.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=n.useContext(z);return t||o(!1),t}function de(e){let t=n.useContext(H);return t||o(!1),t}function ue(e){let t=function(){let e=n.useContext(K);return e||o(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||o(!1),r.route.id}const he={};const pe={};const fe=(e,t,n)=>{var r;pe[r="\u26a0\ufe0f React Router Future Flag Warning: "+t+". You can use the `"+e+"` future flag to opt-in early. For more information, see "+n+"."]||(pe[r]=!0,console.warn(r))};function me(e,t){null!=e&&e.v7_startTransition||fe("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),null!=e&&e.v7_relativeSplatPath||t&&t.v7_relativeSplatPath||fe("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(t.v7_fetcherPersist||fe("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),t.v7_normalizeFormMethod||fe("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),t.v7_partialHydration||fe("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),t.v7_skipActionErrorRevalidation||fe("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}r.startTransition;function ge(e){let{to:t,replace:r,state:i,relative:a}=e;X()||o(!1);let{future:s,static:l}=n.useContext(W),{matches:c}=n.useContext(K),{pathname:d}=J(),u=Z(),h=j(t,N(c,s.v7_relativeSplatPath),d,"path"===a),p=JSON.stringify(h);return n.useEffect((()=>u(JSON.parse(p),{replace:r,state:i,relative:a})),[u,p,a,r,i]),null}function ve(e){o(!1)}function ye(e){let{basename:r="/",children:i=null,location:a,navigationType:s=t.Pop,navigator:l,static:c=!1,future:d}=e;X()&&o(!1);let u=r.replace(/^\/*/,"/"),p=n.useMemo((()=>({basename:u,navigator:l,static:c,future:G({v7_relativeSplatPath:!1},d)})),[u,d,l,c]);"string"===typeof a&&(a=h(a));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:y="default"}=a,b=n.useMemo((()=>{let e=I(f,u);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:s}}),[u,f,m,g,v,y,s]);return null==b?null:n.createElement(W.Provider,{value:p},n.createElement(V.Provider,{children:i,value:b}))}function be(e){let{children:t,location:n}=e;return te(_e(t),n)}new Promise((()=>{}));n.Component;function _e(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,i)=>{if(!n.isValidElement(e))return;let a=[...t,i];if(e.type===n.Fragment)return void r.push.apply(r,_e(e.props.children,a));e.type!==ve&&o(!1),e.props.index&&e.props.children&&o(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=_e(e.props.children,a)),r.push(s)})),r}var we=__webpack_require__(950),xe=__webpack_require__.t(we,2);function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Pe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Zg){}const Ae=n.createContext({isTransitioning:!1});new Map;const Ee=r.startTransition;xe.flushSync,r.useId;function Te(e){let{basename:t,children:r,future:i,window:a}=e,s=n.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),p((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:u(t)}),null,o)));let l=s.current,[c,h]=n.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=n.useCallback((e=>{f&&Ee?Ee((()=>h(e))):h(e)}),[h,f]);return n.useLayoutEffect((()=>l.listen(m)),[l,m]),n.useEffect((()=>me(i)),[i]),n.createElement(ye,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Fe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=n.forwardRef((function(e,t){let r,{onClick:i,relative:a,reloadDocument:s,replace:l,state:c,target:d,to:h,preventScrollReset:p,viewTransition:f}=e,m=ke(e,Se),{basename:g}=n.useContext(W),v=!1;if("string"===typeof h&&Fe.test(h)&&(r=h,Ie))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=I(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Zg){}let y=function(e,t){let{relative:r}=void 0===t?{}:t;X()||o(!1);let{basename:i,navigator:a}=n.useContext(W),{hash:s,pathname:l,search:c}=ee(e,{relative:r}),d=l;return"/"!==i&&(d="/"===l?i:M([i,l])),a.createHref({pathname:d,search:c,hash:s})}(h,{relative:a}),b=function(e,t){let{target:r,replace:i,state:a,preventScrollReset:s,relative:o,viewTransition:l}=void 0===t?{}:t,c=Z(),d=J(),h=ee(e,{relative:o});return n.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:u(d)===u(h);c(e,{replace:n,state:a,preventScrollReset:s,relative:o,viewTransition:l})}}),[d,c,h,i,a,r,e,s,o,l])}(h,{replace:l,state:c,target:d,preventScrollReset:p,relative:a,viewTransition:f});return n.createElement("a",Ce({},m,{href:r||y,onClick:v||s?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:d}))}));const Ne=n.forwardRef((function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:u}=e,h=ke(e,Pe),p=ee(c,{relative:h.relative}),f=J(),m=n.useContext(H),{navigator:g,basename:v}=n.useContext(W),y=null!=m&&function(e,t){void 0===t&&(t={});let r=n.useContext(Ae);null==r&&o(!1);let{basename:i}=Oe(je.useViewTransitionState),a=ee(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=I(r.currentLocation.pathname,i)||r.currentLocation.pathname,l=I(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=E(a.pathname,l)||null!=E(a.pathname,s)}(p)&&!0===d,b=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,_=f.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(_=_.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&v&&(w=I(w,v)||w);const x="/"!==b&&b.endsWith("/")?b.length-1:b.length;let C,k=_===b||!s&&_.startsWith(b)&&"/"===_.charAt(x),S=null!=w&&(w===b||!s&&w.startsWith(b)&&"/"===w.charAt(b.length)),P={isActive:k,isPending:S,isTransitioning:y},A=k?r:void 0;C="function"===typeof a?a(P):[a,k?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof l?l(P):l;return n.createElement(Re,Ce({},h,{"aria-current":A,className:C,ref:t,style:T,to:c,viewTransition:d}),"function"===typeof u?u(P):u)}));var je,Me;function Oe(e){let t=n.useContext(z);return t||o(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(je||(je={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Me||(Me={}));const Le={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},De=400,Be=499,qe=500,Ue=599,Ge=[Le.OPENID_SCOPE,Le.PROFILE_SCOPE,Le.OFFLINE_ACCESS_SCOPE],ze=[...Ge,Le.EMAIL_SCOPE],He="Content-Type",We="Content-Length",Ve="Retry-After",Ke="X-AnchorMailbox",Ye="x-ms-request-id",Xe="x-ms-httpver",Je="active-account-filters",Qe="common",Ze="organizations",$e="consumers",et="access_token",tt="xms_cc",nt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},rt={PLAIN:"plain",S256:"S256"},it="code",at="id_token token refresh_token",st="query",ot="fragment",lt="query",ct="authorization_code",dt="refresh_token",ut="MSSTS",ht="ADFS",pt="Generic",ft="-",mt=".",gt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},vt="appmetadata",yt="1",bt="authority-metadata",_t=86400,wt="config",xt="cache",Ct="network",kt="hardcoded_values",St={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Pt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},At=60,Et=3600,Tt="throttling",It="retry-after, h429",Ft="invalid_grant",Rt="client_mismatch",Nt=200,jt=400,Mt="1",Ot="3",Lt="4",Dt="2",Bt="4",qt="5",Ut="0",Gt="1",zt="2",Ht="3",Wt="4",Vt="pop",Kt="unexpected_error",Yt="post_request_failed",Xt={[Kt]:"Unexpected error in authentication.",[Yt]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Jt extends Error{constructor(e,t,n){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,Jt.prototype),this.errorCode=e||Le.EMPTY_STRING,this.errorMessage=t||Le.EMPTY_STRING,this.subError=n||Le.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Qt(e,t){return new Jt(e,t?"".concat(Xt[e]," ").concat(t):Xt[e])}const Zt="storage_not_supported",$t="stubbed_public_client_application_called",en="in_mem_redirect_unavailable",tn={[Zt]:"Given storage configuration option was not supported.",[$t]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[en]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class nn extends Jt{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,nn.prototype)}}function rn(e){return new nn(e,tn[e])}const an={initialize:()=>Promise.reject(rn($t)),acquireTokenPopup:()=>Promise.reject(rn($t)),acquireTokenRedirect:()=>Promise.reject(rn($t)),acquireTokenSilent:()=>Promise.reject(rn($t)),acquireTokenByCode:()=>Promise.reject(rn($t)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(rn($t)),loginPopup:()=>Promise.reject(rn($t)),loginRedirect:()=>Promise.reject(rn($t)),logout:()=>Promise.reject(rn($t)),logoutRedirect:()=>Promise.reject(rn($t)),logoutPopup:()=>Promise.reject(rn($t)),ssoSilent:()=>Promise.reject(rn($t)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw rn($t)},getLogger:()=>{throw rn($t)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw rn($t)},hydrateCache:()=>Promise.reject(rn($t)),clearCache:()=>Promise.reject(rn($t))},sn="invalid_grant",on=483,ln=600,cn="msal",dn=30,un="msal.js.browser",hn="53ee284d-920a-4b59-9d30-a60315b26836",pn="ppnbnpeolgkicgegkbkbjmhlideopiji",fn="MATS",mn="Handshake",gn="HandshakeResponse",vn="GetToken",yn="Response",bn="localStorage",_n="sessionStorage",wn="memoryStorage",xn="GET",Cn="POST",kn="signin",Sn="signout",Pn="request.origin",An="urlHash",En="request.params",Tn="code.verifier",In="interaction.status",Fn="request.native",Rn="msal.account.keys",Nn="msal.token.keys",jn="wrapper.sku",Mn="wrapper.version",On=861,Ln=862,Dn=863,Bn=865,qn=866,Un=61,Gn=961,zn=962;var Hn;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(Hn||(Hn={}));const Wn="startup",Vn="login",Kn="logout",Yn="acquireToken",Xn="ssoSilent",Jn="handleRedirect",Qn="none",Zn={scopes:Ge},$n="@azure/msal-react",er="msal.db",tr="".concat(er,".keys"),nr=0,rr=1,ir=2,ar=3,sr=4,or=5,lr=[nr,or,sr];var cr;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(cr||(cr={}));class dr{constructor(e,t,n){this.level=cr.Info;const r=e||dr.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"===typeof r.logLevel?r.logLevel:cr.Info,this.correlationId=r.correlationId||Le.EMPTY_STRING,this.packageName=t||Le.EMPTY_STRING,this.packageVersion=n||Le.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:cr.Info}}clone(e,t,n){return new dr({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=(new Date).toUTCString(),r="[".concat(n,"] : [").concat(t.correlationId||this.correlationId||"","]"),i="".concat(r," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(cr[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:cr.Error,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:cr.Error,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:cr.Warning,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:cr.Warning,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:cr.Info,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:cr.Info,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:cr.Verbose,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:cr.Verbose,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:cr.Trace,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:cr.Trace,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const ur={instance:an,inProgress:Qn,accounts:[],logger:new dr({})},hr=n.createContext(ur);hr.Consumer;function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function fr(e){var t=function(e,t){if("object"!=pr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pr(t)?t:t+""}function mr(e,t,n){return(t=fr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const yr="msal:initializeStart",br="msal:initializeEnd",_r="msal:accountAdded",wr="msal:accountRemoved",xr="msal:activeAccountChanged",Cr="msal:loginStart",kr="msal:loginSuccess",Sr="msal:loginFailure",Pr="msal:acquireTokenStart",Ar="msal:acquireTokenSuccess",Er="msal:acquireTokenFailure",Tr="msal:acquireTokenFromNetworkStart",Ir="msal:ssoSilentStart",Fr="msal:ssoSilentSuccess",Rr="msal:ssoSilentFailure",Nr="msal:acquireTokenByCodeStart",jr="msal:acquireTokenByCodeSuccess",Mr="msal:acquireTokenByCodeFailure",Or="msal:handleRedirectStart",Lr="msal:handleRedirectEnd",Dr="msal:popupOpened",Br="msal:logoutStart",qr="msal:logoutSuccess",Ur="msal:logoutFailure",Gr="msal:logoutEnd",zr="msal:restoreFromBFCache";class Hr{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Cr:return Vn;case Ir:return Xn;case Pr:if(e.interactionType===Hn.Redirect||e.interactionType===Hn.Popup)return Yn;break;case Or:return Jn;case Br:return Kn;case Fr:case Rr:if(t&&t!==Xn)break;return Qn;case Gr:if(t&&t!==Kn)break;return Qn;case Lr:if(t&&t!==Jn)break;return Qn;case kr:case Sr:case Ar:case Er:case zr:if(e.interactionType===Hn.Redirect||e.interactionType===Hn.Popup){if(t&&t!==Vn&&t!==Yn)break;return Qn}}return null}}function Wr(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every((e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)}))}const Vr="3.0.12",Kr="UNBLOCK_INPROGRESS",Yr="EVENT",Xr=(e,t)=>{const{type:n,payload:r}=t;let i=e.inProgress;switch(n){case Kr:e.inProgress===Wn&&(i=Qn,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Yr:const t=r.message,a=Hr.getInteractionStatusFromEvent(t,e.inProgress);a&&(r.logger.info("MsalProvider - ".concat(t.eventType," results in setting inProgress from ").concat(e.inProgress," to ").concat(a)),i=a);break;default:throw new Error("Unknown action type: ".concat(n))}if(i===Wn)return e;const a=r.instance.getAllAccounts();return i===e.inProgress||Wr(a,e.accounts)?i!==e.inProgress?vr(vr({},e),{},{inProgress:i}):Wr(a,e.accounts)?e:vr(vr({},e),{},{accounts:a}):vr(vr({},e),{},{inProgress:i,accounts:a})};function Jr(e){let{instance:t,children:r}=e;(0,n.useEffect)((()=>{t.initializeWrapperLibrary($n,Vr)}),[t]);const i=(0,n.useMemo)((()=>t.getLogger().clone("@azure/msal-react",Vr)),[t]),[a,s]=(0,n.useReducer)(Xr,void 0,(()=>({inProgress:Wn,accounts:[]})));(0,n.useEffect)((()=>{const e=t.addEventCallback((e=>{s({payload:{instance:t,logger:i,message:e},type:Yr})}));return i.verbose("MsalProvider - Registered event callback with id: ".concat(e)),t.initialize().then((()=>{t.handleRedirectPromise().catch((()=>{})).finally((()=>{s({payload:{instance:t,logger:i},type:Kr})}))})).catch((()=>{})),()=>{e&&(i.verbose("MsalProvider - Removing event callback ".concat(e)),t.removeEventCallback(e))}}),[t,i]);const o={instance:t,inProgress:a.inProgress,accounts:a.accounts,logger:i};return n.createElement(hr.Provider,{value:o},r)}const Qr=()=>(0,n.useContext)(hr);const Zr={auth:{clientId:"357a04d9-4f27-4699-8cb3-718977898ac7",authority:"https://login.microsoftonline.com/009944cd-196f-414f-a62a-d9ec41f72b20",redirectUri:"https://hilms.onrender.com/microsoft-login",postLogoutRedirectUri:"/",navigateToLoginRequestUrl:!1},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,n)=>{if(!n)switch(e){case cr.Error:console.error(t);break;case cr.Info:console.info(t);break;case cr.Verbose:console.debug(t);break;case cr.Warning:console.warn(t);break;default:console.log(t)}}},allowNativeBroker:!1}},$r={scopes:["User.Read"]};function ei(e,t){return function(){return e.apply(t,arguments)}}const{toString:ti}=Object.prototype,{getPrototypeOf:ni}=Object,ri=(ii=Object.create(null),e=>{const t=ti.call(e);return ii[t]||(ii[t]=t.slice(8,-1).toLowerCase())});var ii;const ai=e=>(e=e.toLowerCase(),t=>ri(t)===e),si=e=>t=>typeof t===e,{isArray:oi}=Array,li=si("undefined");const ci=ai("ArrayBuffer");const di=si("string"),ui=si("function"),hi=si("number"),pi=e=>null!==e&&"object"===typeof e,fi=e=>{if("object"!==ri(e))return!1;const t=ni(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mi=ai("Date"),gi=ai("File"),vi=ai("Blob"),yi=ai("FileList"),bi=ai("URLSearchParams"),[_i,wi,xi,Ci]=["ReadableStream","Request","Response","Headers"].map(ai);function ki(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),oi(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let s;for(n=0;n<a;n++)s=r[n],t.call(null,e[s],s,e)}}function Si(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Pi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ai=e=>!li(e)&&e!==Pi;const Ei=(Ti="undefined"!==typeof Uint8Array&&ni(Uint8Array),e=>Ti&&e instanceof Ti);var Ti;const Ii=ai("HTMLFormElement"),Fi=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Ri=ai("RegExp"),Ni=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ki(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},ji="abcdefghijklmnopqrstuvwxyz",Mi="0123456789",Oi={DIGIT:Mi,ALPHA:ji,ALPHA_DIGIT:ji+ji.toUpperCase()+Mi};const Li=ai("AsyncFunction"),Di=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],Pi.addEventListener("message",(e=>{let{source:t,data:i}=e;t===Pi&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),Pi.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,ui(Pi.postMessage)),Bi="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Pi):"undefined"!==typeof process&&process.nextTick||Di,qi={isArray:oi,isArrayBuffer:ci,isBuffer:function(e){return null!==e&&!li(e)&&null!==e.constructor&&!li(e.constructor)&&ui(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ui(e.append)&&("formdata"===(t=ri(e))||"object"===t&&ui(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ci(e.buffer),t},isString:di,isNumber:hi,isBoolean:e=>!0===e||!1===e,isObject:pi,isPlainObject:fi,isReadableStream:_i,isRequest:wi,isResponse:xi,isHeaders:Ci,isUndefined:li,isDate:mi,isFile:gi,isBlob:vi,isRegExp:Ri,isFunction:ui,isStream:e=>pi(e)&&ui(e.pipe),isURLSearchParams:bi,isTypedArray:Ei,isFileList:yi,forEach:ki,merge:function e(){const{caseless:t}=Ai(this)&&this||{},n={},r=(r,i)=>{const a=t&&Si(n,i)||i;fi(n[a])&&fi(r)?n[a]=e(n[a],r):fi(r)?n[a]=e({},r):oi(r)?n[a]=r.slice():n[a]=r};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&ki(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ki(t,((t,r)=>{n&&ui(t)?e[r]=ei(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,s;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==n&&ni(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ri,kindOfTest:ai,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(oi(e))return e;let t=e.length;if(!hi(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Ii,hasOwnProperty:Fi,hasOwnProp:Fi,reduceDescriptors:Ni,freezeMethods:e=>{Ni(e,((t,n)=>{if(ui(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ui(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return oi(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Si,global:Pi,isContextDefined:Ai,ALPHABET:Oi,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oi.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&ui(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(pi(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=oi(e)?[]:{};return ki(e,((e,t)=>{const a=n(e,r+1);!li(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Li,isThenable:e=>e&&(pi(e)||ui(e))&&ui(e.then)&&ui(e.catch),setImmediate:Di,asap:Bi};function Ui(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}qi.inherits(Ui,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qi.toJSONObject(this.config),code:this.code,status:this.status}}});const Gi=Ui.prototype,zi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{zi[e]={value:e}})),Object.defineProperties(Ui,zi),Object.defineProperty(Gi,"isAxiosError",{value:!0}),Ui.from=(e,t,n,r,i,a)=>{const s=Object.create(Gi);return qi.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ui.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const Hi=Ui;function Wi(e){return qi.isPlainObject(e)||qi.isArray(e)}function Vi(e){return qi.endsWith(e,"[]")?e.slice(0,-2):e}function Ki(e,t,n){return e?e.concat(t).map((function(e,t){return e=Vi(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Yi=qi.toFlatObject(qi,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Xi=function(e,t,n){if(!qi.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=qi.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!qi.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,s=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&qi.isSpecCompliantForm(t);if(!qi.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(qi.isDate(e))return e.toISOString();if(!o&&qi.isBlob(e))throw new Hi("Blob is not supported. Use a Buffer instead.");return qi.isArrayBuffer(e)||qi.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"===typeof e)if(qi.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(qi.isArray(e)&&function(e){return qi.isArray(e)&&!e.some(Wi)}(e)||(qi.isFileList(e)||qi.endsWith(n,"[]"))&&(o=qi.toArray(e)))return n=Vi(n),o.forEach((function(e,r){!qi.isUndefined(e)&&null!==e&&t.append(!0===s?Ki([n],r,a):null===s?n:n+"[]",l(e))})),!1;return!!Wi(e)||(t.append(Ki(i,n,a),l(e)),!1)}const d=[],u=Object.assign(Yi,{defaultVisitor:c,convertValue:l,isVisitable:Wi});if(!qi.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!qi.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),qi.forEach(n,(function(n,a){!0===(!(qi.isUndefined(n)||null===n)&&i.call(t,n,qi.isString(a)?a.trim():a,r,u))&&e(n,r?r.concat(a):[a])})),d.pop()}}(e),t};function Ji(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Qi(e,t){this._pairs=[],e&&Xi(e,this,t)}const Zi=Qi.prototype;Zi.append=function(e,t){this._pairs.push([e,t])},Zi.toString=function(e){const t=e?function(t){return e.call(this,t,Ji)}:Ji;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const $i=Qi;function ea(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ta(e,t,n){if(!t)return e;const r=n&&n.encode||ea;qi.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(a=i?i(t,n):qi.isURLSearchParams(t)?t.toString():new $i(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const na=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){qi.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ra={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ia={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:$i,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},aa="undefined"!==typeof window&&"undefined"!==typeof document,sa="object"===typeof navigator&&navigator||void 0,oa=aa&&(!sa||["ReactNative","NativeScript","NS"].indexOf(sa.product)<0),la="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ca=aa&&window.location.href||"http://localhost",da=vr(vr({},e),ia);const ua=function(e){function t(e,n,r,i){let a=e[i++];if("__proto__"===a)return!0;const s=Number.isFinite(+a),o=i>=e.length;if(a=!a&&qi.isArray(r)?r.length:a,o)return qi.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!s;r[a]&&qi.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],i)&&qi.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}(r[a])),!s}if(qi.isFormData(e)&&qi.isFunction(e.entries)){const n={};return qi.forEachEntry(e,((e,r)=>{t(function(e){return qi.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const ha={transitional:ra,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=qi.isObject(e);i&&qi.isHTMLForm(e)&&(e=new FormData(e));if(qi.isFormData(e))return r?JSON.stringify(ua(e)):e;if(qi.isArrayBuffer(e)||qi.isBuffer(e)||qi.isStream(e)||qi.isFile(e)||qi.isBlob(e)||qi.isReadableStream(e))return e;if(qi.isArrayBufferView(e))return e.buffer;if(qi.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Xi(e,new da.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return da.isNode&&qi.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=qi.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Xi(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(qi.isString(e))try{return(t||JSON.parse)(e),qi.trim(e)}catch(Zg){if("SyntaxError"!==Zg.name)throw Zg}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ha.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(qi.isResponse(e)||qi.isReadableStream(e))return e;if(e&&qi.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Zg){if(n){if("SyntaxError"===Zg.name)throw Hi.from(Zg,Hi.ERR_BAD_RESPONSE,this,null,this.response);throw Zg}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:da.classes.FormData,Blob:da.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qi.forEach(["delete","get","head","post","put","patch"],(e=>{ha.headers[e]={}}));const pa=ha,fa=qi.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ma=Symbol("internals");function ga(e){return e&&String(e).trim().toLowerCase()}function va(e){return!1===e||null==e?e:qi.isArray(e)?e.map(va):String(e)}function ya(e,t,n,r,i){return qi.isFunction(r)?r.call(this,t,n):(i&&(t=n),qi.isString(t)?qi.isString(r)?-1!==t.indexOf(r):qi.isRegExp(r)?r.test(t):void 0:void 0)}class ba{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=ga(t);if(!i)throw new Error("header name must be a non-empty string");const a=qi.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=va(e))}const a=(e,t)=>qi.forEach(e,((e,n)=>i(e,n,t)));if(qi.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(qi.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&fa[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(qi.isHeaders(e))for(const[s,o]of e.entries())i(o,s,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=ga(e)){const n=qi.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(qi.isFunction(t))return t.call(this,e,n);if(qi.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ga(e)){const n=qi.findKey(this,e);return!(!n||void 0===this[n]||t&&!ya(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=ga(e)){const i=qi.findKey(n,e);!i||t&&!ya(0,n[i],i,t)||(delete n[i],r=!0)}}return qi.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!ya(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return qi.forEach(this,((r,i)=>{const a=qi.findKey(n,i);if(a)return t[a]=va(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=va(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return qi.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&qi.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ma]=this[ma]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=ga(e);t[r]||(!function(e,t){const n=qi.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return qi.isArray(e)?e.forEach(r):r(e),this}}ba.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),qi.reduceDescriptors(ba.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),qi.freezeMethods(ba);const _a=ba;function wa(e,t){const n=this||pa,r=t||n,i=_a.from(r.headers);let a=r.data;return qi.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function xa(e){return!(!e||!e.__CANCEL__)}function Ca(e,t,n){Hi.call(this,null==e?"canceled":e,Hi.ERR_CANCELED,t,n),this.name="CanceledError"}qi.inherits(Ca,Hi,{__CANCEL__:!0});const ka=Ca;function Sa(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Hi("Request failed with status code "+n.status,[Hi.ERR_BAD_REQUEST,Hi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Pa=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];i||(i=l),n[a]=o,r[a]=l;let d=s,u=0;for(;d!==a;)u+=n[d++],d%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Aa=function(e,t){let n,r,i=0,a=1e3/t;const s=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=a?s(l,e):(n=l,r||(r=setTimeout((()=>{r=null,s(n)}),a-t)))},()=>n&&s(n)]},Ea=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=Pa(50,250);return Aa((n=>{const a=n.loaded,s=n.lengthComputable?n.total:void 0,o=a-r,l=i(o);r=a;e({loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},Ta=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Ia=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qi.asap((()=>e(...n)))},Fa=da.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,da.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(da.origin),da.navigator&&/(msie|trident)/i.test(da.navigator.userAgent)):()=>!0,Ra=da.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const s=[e+"="+encodeURIComponent(t)];qi.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),qi.isString(r)&&s.push("path="+r),qi.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Na(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ja=e=>e instanceof _a?vr({},e):e;function Ma(e,t){t=t||{};const n={};function r(e,t,n,r){return qi.isPlainObject(e)&&qi.isPlainObject(t)?qi.merge.call({caseless:r},e,t):qi.isPlainObject(t)?qi.merge({},t):qi.isArray(t)?t.slice():t}function i(e,t,n,i){return qi.isUndefined(t)?qi.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function a(e,t){if(!qi.isUndefined(t))return r(void 0,t)}function s(e,t){return qi.isUndefined(t)?qi.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,n)=>i(ja(e),ja(t),0,!0)};return qi.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||i,s=a(e[r],t[r],r);qi.isUndefined(s)&&a!==o||(n[r]=s)})),n}const Oa=e=>{const t=Ma({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=_a.from(o),t.url=ta(Na(t.baseURL,t.url),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),qi.isFormData(r))if(da.hasStandardBrowserEnv||da.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(da.hasStandardBrowserEnv&&(i&&qi.isFunction(i)&&(i=i(t)),i||!1!==i&&Fa(t.url))){const e=a&&s&&Ra.read(s);e&&o.set(a,e)}return t},La="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Oa(e);let i=r.data;const a=_a.from(r.headers).normalize();let s,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=r;function f(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=_a.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Sa((function(e){t(e),f()}),(function(e){n(e),f()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Hi("Request aborted",Hi.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Hi("Network Error",Hi.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||ra;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Hi(t,i.clarifyTimeoutError?Hi.ETIMEDOUT:Hi.ECONNABORTED,e,m)),m=null},void 0===i&&a.setContentType(null),"setRequestHeader"in m&&qi.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),qi.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),u&&"json"!==u&&(m.responseType=r.responseType),p&&([l,d]=Ea(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=Ea(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new ka(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===da.protocols.indexOf(v)?n(new Hi("Unsupported protocol "+v+":",Hi.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Da=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Hi?t:new ka(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,i(new Hi("timeout ".concat(t," of ms exceeded"),Hi.ETIMEDOUT))}),t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=r;return o.unsubscribe=()=>qi.asap(s),o}};function Ba(e,t){this.v=e,this.k=t}function qa(e){return function(){return new Ua(e.apply(this,arguments))}}function Ua(e){var t,n;function r(t,n){try{var a=e[t](n),s=a.value,o=s instanceof Ba;Promise.resolve(o?s.v:s).then((function(n){if(o){var l="return"===t?"return":"next";if(!s.k||n.done)return r(l,n);n=e[l](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,s){var o={key:e,arg:i,resolve:a,reject:s,next:null};n?n=n.next=o:(t=n=o,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function Ga(e){return new Ba(e,0)}function za(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new Ba(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Ha(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Wa(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Wa(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Wa=function(e){this.s=e,this.n=e.next},Wa.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Wa(e)}Ua.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ua.prototype.next=function(e){return this._invoke("next",e)},Ua.prototype.throw=function(e){return this._invoke("throw",e)},Ua.prototype.return=function(e){return this._invoke("return",e)};const Va=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Ka=function(){var e=qa((function*(e,t){var n,r=!1,i=!1;try{for(var a,s=Ha(Ya(e));r=!(a=yield Ga(s.next())).done;r=!1){const e=a.value;yield*za(Ha(Va(e,t)))}}catch(o){i=!0,n=o}finally{try{r&&null!=s.return&&(yield Ga(s.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Ya=function(){var e=qa((function*(e){if(e[Symbol.asyncIterator])return void(yield*za(Ha(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Ga(t.read());if(e)break;yield n}}finally{yield Ga(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Xa=(e,t,n,r)=>{const i=Ka(e,t);let a,s=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=s+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},Ja="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Qa=Ja&&"function"===typeof ReadableStream,Za=Ja&&("function"===typeof TextEncoder?($a=new TextEncoder,e=>$a.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var $a;const es=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Zg){return!1}},ts=Qa&&es((()=>{let e=!1;const t=new Request(da.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ns=Qa&&es((()=>qi.isReadableStream(new Response("").body))),rs={stream:ns&&(e=>e.body)};var is;Ja&&(is=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!rs[e]&&(rs[e]=qi.isFunction(is[e])?t=>t[e]():(t,n)=>{throw new Hi("Response type '".concat(e,"' is not supported"),Hi.ERR_NOT_SUPPORT,n)})})));const as=async(e,t)=>{const n=qi.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(qi.isBlob(e))return e.size;if(qi.isSpecCompliantForm(e)){const t=new Request(da.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return qi.isArrayBufferView(e)||qi.isArrayBuffer(e)?e.byteLength:(qi.isURLSearchParams(e)&&(e+=""),qi.isString(e)?(await Za(e)).byteLength:void 0)})(t):n},ss=Ja&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=Oa(e);c=c?(c+"").toLowerCase():"text";let p,f=Da([i,a&&a.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&ts&&"get"!==n&&"head"!==n&&0!==(g=await as(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(qi.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Ta(g,Ea(Ia(l)));r=Xa(n.body,65536,e,t)}}qi.isString(u)||(u=u?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,vr(vr({},h),{},{signal:f,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:i?u:void 0}));let a=await fetch(p);const s=ns&&("stream"===c||"response"===c);if(ns&&(o||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=qi.toFiniteNumber(a.headers.get("content-length")),[n,r]=o&&Ta(t,Ea(Ia(o),!0))||[];a=new Response(Xa(a.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let v=await rs[qi.findKey(rs,c)||"text"](a,e);return!s&&m&&m(),await new Promise(((t,n)=>{Sa(t,n,{data:v,headers:_a.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/fetch/i.test(v.message))throw Object.assign(new Hi("Network Error",Hi.ERR_NETWORK,e,p),{cause:v.cause||v});throw Hi.from(v,v&&v.code,e,p)}}),os={http:null,xhr:La,fetch:ss};qi.forEach(os,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Zg){}Object.defineProperty(e,"adapterName",{value:t})}}));const ls=e=>"- ".concat(e),cs=e=>qi.isFunction(e)||null===e||!1===e,ds=e=>{e=qi.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!cs(n)&&(r=os[(t=String(n)).toLowerCase()],void 0===r))throw new Hi("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+a]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(ls).join("\n"):" "+ls(e[0]):"as no adapter specified";throw new Hi("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function us(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ka(null,e)}function hs(e){us(e),e.headers=_a.from(e.headers),e.data=wa.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ds(e.adapter||pa.adapter)(e).then((function(t){return us(e),t.data=wa.call(e,e.transformResponse,t),t.headers=_a.from(t.headers),t}),(function(t){return xa(t)||(us(e),t&&t.response&&(t.response.data=wa.call(e,e.transformResponse,t.response),t.response.headers=_a.from(t.response.headers))),Promise.reject(t)}))}const ps="1.7.9",fs={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{fs[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ms={};fs.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new Hi(r(i," has been removed"+(t?" in "+t:"")),Hi.ERR_DEPRECATED);return t&&!ms[i]&&(ms[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},fs.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const gs={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Hi("options must be an object",Hi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=t[a];if(s){const t=e[a],n=void 0===t||s(t,a,e);if(!0!==n)throw new Hi("option "+a+" must be "+n,Hi.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Hi("Unknown option "+a,Hi.ERR_BAD_OPTION)}},validators:fs},vs=gs.validators;class ys{constructor(e){this.defaults=e,this.interceptors={request:new na,response:new na}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Zg){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ma(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&gs.assertOptions(n,{silentJSONParsing:vs.transitional(vs.boolean),forcedJSONParsing:vs.transitional(vs.boolean),clarifyTimeoutError:vs.transitional(vs.boolean)},!1),null!=r&&(qi.isFunction(r)?t.paramsSerializer={serialize:r}:gs.assertOptions(r,{encode:vs.function,serialize:vs.function},!0)),gs.assertOptions(t,{baseUrl:vs.spelling("baseURL"),withXsrfToken:vs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&qi.merge(i.common,i[t.method]);i&&qi.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=_a.concat(a,i);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!o){const e=[hs.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let h=t;for(u=0;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=hs.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ta(Na((e=Ma(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}qi.forEach(["delete","get","head","options"],(function(e){ys.prototype[e]=function(t,n){return this.request(Ma(n||{},{method:e,url:t,data:(n||{}).data}))}})),qi.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ma(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ys.prototype[e]=t(),ys.prototype[e+"Form"]=t(!0)}));const bs=ys;class _s{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new ka(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _s((function(t){e=t})),cancel:e}}}const ws=_s;const xs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xs).forEach((e=>{let[t,n]=e;xs[n]=t}));const Cs=xs;const ks=function e(t){const n=new bs(t),r=ei(bs.prototype.request,n);return qi.extend(r,bs.prototype,n,{allOwnKeys:!0}),qi.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ma(t,n))},r}(pa);ks.Axios=bs,ks.CanceledError=ka,ks.CancelToken=ws,ks.isCancel=xa,ks.VERSION=ps,ks.toFormData=Xi,ks.AxiosError=Hi,ks.Cancel=ks.CanceledError,ks.all=function(e){return Promise.all(e)},ks.spread=function(e){return function(t){return e.apply(null,t)}},ks.isAxiosError=function(e){return qi.isObject(e)&&!0===e.isAxiosError},ks.mergeConfig=Ma,ks.AxiosHeaders=_a,ks.formToJSON=e=>ua(qi.isHTMLForm(e)?new FormData(e):e),ks.getAdapter=ds,ks.HttpStatusCode=Cs,ks.default=ks;const Ss=ks;var Ps=__webpack_require__(579);const As=()=>{const{instance:e,accounts:t}=Qr(),r=Z(),[i,a]=(0,n.useState)(!1),[s,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{e.handleRedirectPromise().then((async n=>{const i=(null===n||void 0===n?void 0:n.account)||e.getActiveAccount()||t[0];if(i){e.setActiveAccount(i),o(!0),a(!0);try{const e=await Ss.post("https://hilms.onrender.com/api/auth/check-user-role",{email:i.username}),t=e.data.role,n=e.data.token;localStorage.setItem("role",t),localStorage.setItem("isMicrosoftLogin","true"),window.dispatchEvent(new Event("storage")),"admin"===t?(localStorage.setItem("adminToken",n),r("/admin-dashboard")):"trainer"===t?(localStorage.setItem("trainerToken",n),r("/trainer-dashboard")):"learner"===t?(localStorage.setItem("learnerToken",n),r("/learner-dashboard")):r("/")}catch(s){console.error("Role check failed:",s),r("/")}finally{a(!1)}}}))}),[e,r,t]);return(0,Ps.jsx)("div",{children:s?(0,Ps.jsx)("button",{onClick:()=>{e.logoutRedirect()},className:"btn-microsoft",children:"Logout"}):(0,Ps.jsx)("button",{onClick:()=>{e.loginRedirect($r)},className:"btn-microsoft",disabled:i,children:i?"Logging in...":"Login with Microsoft"})})};const Es=function(){const{instance:e}=Qr(),[t,r]=(0,n.useState)(localStorage.getItem("role")||null),[i,a]=(0,n.useState)("true"===localStorage.getItem("isMicrosoftLogin")),[s,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=()=>{r(localStorage.getItem("role")),a("true"===localStorage.getItem("isMicrosoftLogin"))};e();const t=()=>e(),n=setInterval(e,300);return window.addEventListener("storage",t),()=>{clearInterval(n),window.removeEventListener("storage",t)}}),[]);const l=()=>o(!1),c=e=>{let{isActive:t}=e;return t?"active-link":""};return(0,Ps.jsx)("header",{className:"navbar",children:(0,Ps.jsxs)("div",{className:"navbar-container",children:[(0,Ps.jsx)("div",{className:"logo",children:(0,Ps.jsx)(Ne,{to:"/",end:!0,onClick:l,className:"logo-link",children:(0,Ps.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUwAAACECAMAAADMfOIAAAAAw1BMVEX///9LUVUJCPwKCftLUFWJiYn29vbl5eWoqqnQ0dCdn578/Pz29frPz9Czs7VnbHB+ffne3+F1eHtYV/wQD/k0M/rU1dhcYGZhZWgqKfeZnKDr6+uUlpgaGfvIyMh0eHu5ubkhIPpSV1yBg4iQlJejpaiamprJycyrrbCEh4tucXXQ0PtEQ/rw8PzJyftOTfpxcPuUk/eKifl5ePrh4PudnPpdXfnW1vq+vvpqafmmpfrn5vxBQPrf3vyzsvqGhvqjovryYx9uAAAQ+klEQVR4nO1dC2PaOBLGQTGhKlDYxFBMiWsgAdL03W573fbu//+qkzQjW4+RcYLTS67+spvFeCxLn0czoxk52+m0aNGiRYsWLVq0aNGiRYsWLVq0aPH7wCu/5dw4pEXr3QXQgZ/D9z/Qmnud34jsOHe/eHBUkwkfuPH7Do1YEul4kAksk158ZwIp+Wpy+MGn9uEFCbrVj6Tsh1JgPJlcip813ZuePDeZ7DiIXqoDdSadqDPyvPpWfV6tdvPhUvBEIh7M99M8EmARy2erYVo+rJ1qBn4clF8kBifpYDjfrVbi5OUl9iRzmBQim/VKyFzqnorfS1vo4oTC+XOq//w1KfyylEgiJhDt6fGPmcJMjXqgRNkIaBYHEf7IBuCX5CnKR4vE15h0O1I0Apny6ijfJSgWj1QLcANAeQxti4uucVB8vNnn8EyMq6Izc+C97WSquqjuVTY5fFgyVa9GITLVwDWZCgWZkR6x5lWPStLUczqSzRSRTBMJ1+QL0E4+gus0Q8WT0u2rs0jmeIdMakFoONqWd0sXOTzbsj24L0Fmt3vSVb81uhVkKkn5Cy6TH10yowoyJQwyS80s9CxiBUWFBkSzxNTNeB0hhxp6jKMEyMRmQAUjVqpwyaUik/PhFCeB8VDULQsy+WCmO6WFopBmdimEyCSFDTL7MLbQNI9MMpmlmdVgs3HZTDphQbnpQJNpPB5PKkIyebzQD8UT1WTyZR5sIjo8zbtHTvM7aKZHJis6ag5S/Los/FB6aQzJMA3wxTQBm+kPvGwadEuSOTdaYiWhzCBzkBczhpltqIOHt5lHkGnY92KK4xkcHOe7kpx8Ntmt1ztwDohRyuORvjzSZjcqGi5ucC3muOaYFR+0EJLJezPjETBmCz2wA4KeB8lUp41pzgwHJI7yoYHtZjPfjXKGtmoGqsmHhWuezZOYK0efDta59tJswXk2tDAFKub2tykfaycu+jRZbzZb8/QYfNkODa9wb7OVkNlYbYztAR5BpvZYNpny1uHQKIoCNlMdTc2YUi1u4sFEz6wMwtMpsqtcNwbR4j/jlTYP+cDt9ghUPnG+jydaafdZGojX0WAyGXjFBxc8TWumunWQzMiIM0HDymnOHDKLIaO9mqgF3w4nWJ45I4vnegKunEFDpMQil8xM+/tFYF0gGr1Eazpd1llhPQSZ4aD9gM2kyOyM0ZvmqegBzswod9YeUjkXWjUTn8zI18x4hEq3cReJJZbo//LrWqvVZkOjAw4IJmxBJjPJZCEy+Q7Nv5i+gjAY3oYYXLzHWbtwyYwoMjPgie2CetnhK3SK1O0INBxnskoynRWQSaaavTSZGTp54TrTKT4tkoBBDq5iZp9VZDKXTH4JbnzqrK6sDufg6+jb+fitmglaZTqg0mYGyRQKDf500+lc40wekpqCisSY7YIghmcOmZIonORBbHC9MwyLWPjdZLKKFRCjyUxzmGvrTmcNuj1N6Rsskeu53W00jjaZGzCkeYVi8j3wTXeLwIMsJ+8XtId6HU9Bidc8nuGnwOBTiJvYxE7hUmTyPYiuKhSzl0OMHridj8Y1U07XCptphEYWmco2hcmUpxdiasKnjG6f8xXcwW6HtJkpBuzbCjIzXDC5kUMQjWsmu4tmsjqamaKCbIQrUs2Hp+YGs6DWyoTUzCUuBdzg07xuDSJ5wKj4eIi1OatFprcCCpGZ6KwCX4BpmAVt2DWm3qyIXsWZjmbyLQaQFURJS6DyerUrIv+7RIfjgIJxZmer40w+gU+T4Oh0wmRjdZvSzB2syauIinNYba0fhMzOJ1LaIbPKZqqAMRAahTRT+FQlmacco8ywQzAcv9EAEbQLrSvXqAGMMXeyDYs4uBOZnc7nL2+6rrDjgCo101oBySNjbR4gM8O00YSnOSTgw6Ehn4Hsyp7mvgPiU8iCnlaQucQUYK1lucLFSX0HBLj5eig0ClkZO2h3QqOQZiaYQBN2cKzzR+HO7cE8ThwyvWme4oJ/7jZgYIiJkAof5eAu3lzj7ZtgaASGcLoggYvsuokOucOgt52W+UxsnVWoClpVa/1HkdlDMlfDEMaw/pFh/V018wSKaqpKJv5xyXz+4++bn7dlYfrDOT3NMWgnUSTDw0F7Prew2O3zooiRdfh1dJBM/bx8Mu3l5NiqRTDdPyM/v+3Mwf/Uj4xq2Mzbb5/evJJMn198/9cPHMfNBUlmQpHoHoY1E5fCuh7DyifA5M6FJX7uh4dzSqg45YDGxb2KbjkHW7l29do6QGb1NOc3361I/fzNl1ug+B05za0KbFl+0sVUM9Nuk1mUWCNdR4XQEzldyYp4hsncCiO2gDjTJ9NxQAPnaTFdndA1e0lmFMxY34vMv11nI/D6gzr5/DvpgFhBo2YFqSwnVMABFXs6Skrxsihfq5JBhnOxETJdxYzMTsp1pjQZKmPYDJnPP56TZ//5W/XxPUUmiYJQk0w/axQVuqEJhX8v0UhmKFNJph/96zK6eVm/vF/RNRtbGdfLL5sh8+cb8pzAq1+qk989MhPL9FgPv/y2qm5uCQKp+VCPBsmMBmEHhMtpikxfM/VjLsyQtthA5hru38g0/0anNeD8Bzme539RZMrge05iDfOeLKgV5qrwrIXFnOmV9jUOtSKLswPT53pzzzokqH8jd5dcgQy0/A7ZzApv/uucPIPo/ltefHtBe/N9VdBeoZn5GrBaTUbTvGAzn8fcaD1yC5MGbyvmd4DSTNypE215EB3c7tFAaFTNpWDzo7z67TlNJn0vItHBqKBdDiVOB7DTT9mtdYwMqJlHFy0UcOvMwRUQBu2sagWkEyzjChkbATIPcSnY/CIvf3F/Mn3N1OYJN2jz+HqPvoipNJBeAz4Ljkb7mp1PJiOXk4sKapZoVd1NDWHQNrP7KmwvC7v5TVx++9J3QNVkspA3p0K6dIcGNJdM6KzRaXA0MUosCM20vDkKVlYtMDlbu5wWJLMOXn8W1/+ivHmtLYWEzZy6Q+PxCh2u1DWozopQKchAisvPrUOmn4JDgqvymTLDr/J59dfm9yez+04O8J2X6KjYhl0ZZ4ooxO92bwpMqFLF+pB/HQDz7NrTTDcFt4LAoTLTjrY24E4JXHSLHVj4Sf3bxS/Ls/oARLpq97A0m2+JUm9NB8RsB8R8zRQj2uByKOtAUkx+DrqEIdzBLhJR07yzwSisKlkJWZPKarCNixMv2Wt6GZnfCJ9+9UO08M7d0VGlmRaZh6e53CCJfnctPicY0Qdz3zvzDkUTFJlLXJRXeaAhu6PRpL15wdb7b7e3Nx9DQt33ooVv9TXTspkUmcT8Vds0IggddQU95Da0W7E9FFkDgpp49cobtowxVlXbsFBF5qsPmO/gv+hS2sn5T3Hya9naQTKr1+aEZupwj+VxEZMH87U6fZFZ36LNtDWTX+KKILwCkGVNsBpJTTYrHNDF51Lsxz+0zHdx7qYUOyrOJG1mEaFEcivvFsN2ugoE++WYW1cPbY/Bvlaopt5rVBVAmQiT+fKHKXcbWMT/tFrDXXD33p9JdVrHjjJ21tWGKbnTd4Dm1Rk7aTOLbZ9VqjnW+4aX9d6SDJJ5/tYWvKHTce8toQSeZAWZzNoFZ+8cphM0Kk+B7pxP8HWmtT86Hu8x/bOkyHR3DvNLJGoaXi5CACXfQ6pXBwqS+cKVfEFz/tmU6QNddTchsMh43c/bI1SOSE1u5cIznTj29wjFa3yVYhSTmunuz1yCdxGxRzj0uUbCWYWMgZADenXrSt6+IgU/mTKwk6VqT7u1CYHZmxCooB1f1mEM7CS+lSJ80NahTL22ppaemdsAudm1E+PmBvF0r0N2U8wETPnPpLr7s8E+DJH5yb0Okho+XpuFzDtnjWrYTL6BQcN6WyeIGZPvnWp5nRORnE1cZmibWdTn1AJ1m6SxDWg6KV9Pu9wOerTQITK7Nx0PP+nw/pdJ5gEHpBLAxgqIkSk4B0Nw4ZAJivU2c/l+ajZWo0vHw0mu88q+CaQ2bqnvdzrJrrYzzkYWwC/xeVkZkq8CjRyhWmS+pHTkDSlquqC7bHZ1NDO86F5a21J7M6Oukc/2+/1oqt/Ik2GRn4anbaZAOtNX6dfSdBEvKlZZ8USn/3F/Byt/mPe6H+1+vlOjol3QhU2mvF/le0DhREeAzAEMAtYhvDOY6qKbrgcXY5QFI2JFGiKTD3Cnsb66qKdGxVu9PC3sR1Fa0belXpGm8IUa1S9S9NxwVQncqOp1P3uaGzuHg9M8gY7r5A1fTvXUY8Z/VNNTKmgMOCCJ6ykWJktCkdNy/Z9OjDpbVJxXv+uR+Y0a1Vta1ghIsU4VXE6qs4G/hBAKjWRe0T6Z7Iu6LPCs9WXfJz0YvpdKVYjHe2Y0ZRDKymRKPM9dMvWBR2YX39s3XuDvnvzsEPjR1Tm5Libh1Of/lBKYz6y1pbD2NE/hZdQy9cjTefkeLyus2XRDvwEZnOaKqeEo8mvTFpkdnuymWN3DZ6e3SNTSzK4XZUo8p7NxRniPpd5QdRK6UpR6Dc2EZ02Tqd4gsecUH8+nOGisEuWjTWiVAt6c1kwVVS32UAo1bEbErDQf72U7IZQXeon6e8wr0lTY3j0xnFXcHwj0A1su4oEC5GD0gX/Gw1g1OrB3/afX88lMjE9gOlttBm7MZ4gmqvF+MKPBRXAFMgbcR8O5EOo7Qk6e/mgyT07+8gXpPh9e3wYuJC5Xr0dLEpJEBJucH/n3mii/5R4TN/GCdl2DUH/JBHdoBskEUZADnHTf3X8M/2e403tAdAH4ze/u86NFA2T+87v7/GjRAJnGEmh89kcha55Mo6CW9v8ouDmVZsn8w9GS2SAaiDNbMjVaMhtES2aDeKRkcr/IAl+UH31hYnmuz/h3SOtvVa+NR0pmulycnp4ulkaFdbyR30gK+PLq9GppCl+dKiy2brAyzuT3G2Kv27LiPbf74tF6874gwa7nxJLfTH3sndp17LEUjiXdXqr9TJyiNmE+q78huDaUZhZpC31QkejQ/2CCpPtQNlPy4yjP8lQTw69szlJxQv5Brmea7RJDcYrICaWn4b8Ad2880mkulY8mE/6w8jOSTPUEnJkeIHPpCTaARzvNKTKVAVTp5ACZXBjPjX1RgEyhw83P8ydFZiKZUTM8QGYn8ywkTaa8YHFcPpnA0yJTcqDcUojMgee2aDJVsND4PH9aZCqzKT1HiExpNO3pS5O5GZz6vupoPDEypVGUbIXIlB/sF9hIMtNnsqHG5/mT8uYJqJ4IMqvIvLJOkWQul8q61n4npSaeGpkqCN/wI8k866mnkjXb5adHpvJB/ePIjJ/JP1GMgUGDeGI2swPRz6KKzDPrFEXmIMMT9V8lr4WnR6Zaoi8qvHlmnaLIPMv6/X7mRVFH4+mRqVIgITIHeolUgCAzXqjaouf4j4ZhM41d1mGb2bUF5dHvJpNvwmRKdbMTGASZapZ3OtvG5/mTc0BwKkCm9CqZfRFB5hmERH6S71g8RTKF/gXITE69zJpPZowXx43P80dL5ljP3BKZ1qN44ZDZAyVLr04XbiDuk7nUsdOm6Xn+WMnk0vqdWSykiys99IFDplqyL7PF6ZlLTnzluqTeAlc+MpXs3OJIPFJvnmawmcdI7PSHZ2dDpIVbHKDw2XDprQ/lRWdn26yc+7H4ZitVvAdXNWk1HymZh/AApcUG8ETJfJzAgpr6je9PhP+HdKbNLILNlswCzTqguPdHwfV2zZI5fvZHwS3JNUtmsVHlD4FD0Ke/KHylyfxKCr+nZFu0aNGiRYsWLVq0aNGiRYsWLVq0aNGiRYsWLVq0aNGiwH8BvDyMPSZ3MdoAAAAASUVORK5CYII=",alt:"Learnfinity Logo",className:"logo-img"})})}),(0,Ps.jsx)("button",{className:"hamburger",onClick:()=>o((e=>!e)),children:"\u2630"}),(0,Ps.jsx)("nav",{className:s?"nav-open":"",children:(0,Ps.jsxs)("ul",{className:"nav-links",children:["admin"===t&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/admin-dashboard",end:!0,onClick:l,className:c,children:"Home"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/admin/courses",onClick:l,className:c,children:"Courses"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/admin/about",onClick:l,className:c,children:"About"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/admin/faq",onClick:l,className:c,children:"FAQ"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/admin/send-mail",onClick:l,className:c,children:"Send Mail"})})]}),"trainer"===t&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/trainer-dashboard",end:!0,onClick:l,className:c,children:"Home"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/trainer-dashboard/courses",onClick:l,className:c,children:"Courses"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/trainer-dashboard/about",onClick:l,className:c,children:"About"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/trainer-dashboard/faq",onClick:l,className:c,children:"FAQ"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/trainer-dashboard/profile",onClick:l,className:c,children:"Profile"})})]}),"learner"===t&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/learner-dashboard",end:!0,onClick:l,className:c,children:"Home"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/learner-dashboard/courses",onClick:l,className:c,children:"Courses"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/learner-dashboard/about",onClick:l,className:c,children:"About"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/learner-dashboard/faq",onClick:l,className:c,children:"FAQ"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/learner-dashboard/profile",onClick:l,className:c,children:"Profile"})})]}),!t&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/",end:!0,onClick:l,className:c,children:"Home"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/courses",onClick:l,className:c,children:"Courses"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/about",onClick:l,className:c,children:"About"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/faq",onClick:l,className:c,children:"FAQ"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/signup",onClick:l,className:e=>{let{isActive:t}=e;return t?"active-link signup-link":"signup-link"},children:"Sign Up"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(Ne,{to:"/signin",onClick:l,className:c,children:"Sign In"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)(As,{})})]}),t&&(0,Ps.jsx)("li",{children:(0,Ps.jsx)("button",{onClick:()=>{localStorage.removeItem("role"),localStorage.removeItem("adminToken"),localStorage.removeItem("trainerToken"),localStorage.removeItem("learnerToken"),localStorage.removeItem("isMicrosoftLogin"),o(!1),r(null),i?e.logoutRedirect({postLogoutRedirectUri:"/"}):window.location.href="/signin"},children:"Logout"})})]})})]})})};const Ts=function(){return(0,Ps.jsx)("footer",{className:"footer",children:(0,Ps.jsxs)("div",{className:"footer-container",children:[(0,Ps.jsx)("p",{children:"\xa9 2025 HILMS. All Rights Reserved."}),(0,Ps.jsxs)("p",{children:["Contact us: ",(0,Ps.jsx)("a",{href:"mailto:support@learnfinity.com",children:"support@learnfinity.com"})," | ",(0,Ps.jsx)("a",{href:"tel:+919999999999",children:"+91 9999999999"})]}),(0,Ps.jsxs)("ul",{className:"footer-links",children:[(0,Ps.jsx)("li",{children:(0,Ps.jsx)("a",{href:"/terms",children:"Terms of Service"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)("a",{href:"/privacy",children:"Privacy Policy"})}),(0,Ps.jsx)("li",{children:(0,Ps.jsx)("a",{href:"/faq",children:"FAQ"})})]})]})})},Is=()=>(0,Ps.jsxs)("div",{className:"courses-card skeleton-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-img"}),(0,Ps.jsxs)("div",{className:"courses-card-content",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"})]}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-btn"})]}),Fs=()=>(0,Ps.jsxs)("div",{className:"career-path-card skeleton-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-career-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-career-levels"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-career-btn"})]});function Rs(e){let{paths:t=[],onReadMore:n}=e;return(0,Ps.jsx)("section",{className:"career-path-cards-container",children:t.length>0?t.map((e=>(0,Ps.jsxs)("div",{className:"career-path-card",children:[(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{className:"career-path-levels",children:[(0,Ps.jsx)("strong",{children:"Levels:"})," ",e.levelSummary||"No levels"]}),(0,Ps.jsx)("button",{className:"btn-read-more",onClick:()=>n(e.id),children:"Read More"})]},e.id))):(0,Ps.jsx)("p",{children:"No career paths available"})})}const Ns=function(){const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(!0),[a,s]=(0,n.useState)([]),[o,l]=(0,n.useState)(!0),c=Z();return(0,n.useEffect)((()=>{(async()=>{try{const e=await fetch("https://hilms.onrender.com/api/courses/popular");if(!e.ok)throw new Error("Failed to fetch popular courses");const n=await e.json();t(n.data)}catch(e){console.error(e.message)}finally{i(!1)}})(),(async()=>{try{const e=await fetch("https://hilms.onrender.com/api/career-paths");if(!e.ok)throw new Error("Failed to fetch career paths");const t=await e.json();s(Array.isArray(t)?t:t.data||[])}catch(e){console.error(e.message),s([])}finally{l(!1)}})()}),[]),(0,Ps.jsxs)("div",{className:"home-container",children:[(0,Ps.jsx)("section",{className:"hero-section",children:(0,Ps.jsxs)("div",{className:"hero-content",children:[(0,Ps.jsx)("h1",{children:"Unlock Your Potential"}),(0,Ps.jsx)(Re,{to:"/signup",className:"btn-primary",children:"Join Now"})]})}),(0,Ps.jsxs)("section",{className:"courses-section",children:[(0,Ps.jsx)("h2",{children:"Popular Courses"}),r?(0,Ps.jsx)("div",{className:"courses-container-cards",children:Array.from({length:4}).map(((e,t)=>(0,Ps.jsx)(Is,{},t)))}):(0,Ps.jsx)("div",{className:"courses-container-cards",children:e.length>0?e.slice(0,4).map((e=>(0,Ps.jsx)(Re,{to:"/course-details/".concat(e.id),className:"courses-card-link",children:(0,Ps.jsxs)("div",{className:"courses-card",children:[(0,Ps.jsx)("img",{src:e.imageurl,alt:e.title,className:"courses-image"}),(0,Ps.jsxs)("div",{className:"courses-card-content",children:[(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",e.trainer_full_name||e.instructor_name||"Unknown"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Learners:"})," ",e.learnerCount||0]})]}),(0,Ps.jsx)("div",{className:"btn-primary",children:"Read More"})]})},e.id))):(0,Ps.jsx)("p",{children:"No popular courses available"})})]}),(0,Ps.jsxs)("section",{className:"career-path-section",children:[(0,Ps.jsx)("h2",{children:"Career Path Suggestions"}),(0,Ps.jsx)("p",{children:"Select your desired career to see recommended courses tailored for your goal, from beginner to advanced levels."}),o?(0,Ps.jsx)("div",{className:"career-path-cards-container",children:Array.from({length:3}).map(((e,t)=>(0,Ps.jsx)(Fs,{},t)))}):(0,Ps.jsx)(Rs,{paths:a,onReadMore:e=>{c("/career-path/".concat(e)),window.scrollTo(0,0)}})]}),(0,Ps.jsx)("section",{className:"teach-section",children:(0,Ps.jsxs)("div",{className:"teach-content",children:[(0,Ps.jsxs)("div",{className:"teach-text",children:[(0,Ps.jsx)("h2",{children:"Share your expertise on this platform"}),(0,Ps.jsx)("p",{children:"Share your knowledge and expertise with Learners around the world. Join our community of educators and help learners achieve their goals. Whether you're a seasoned professional or just starting, we welcome passionate individuals like you."}),(0,Ps.jsx)(Re,{to:"/trainer-signup",className:"btn-secondary",children:"Become a Trainer"})]}),(0,Ps.jsx)("div",{className:"teach-image",children:(0,Ps.jsx)("img",{src:"https://hilms.onrender.com/uploads/istockphoto-1392125218-612x612.jpg",alt:"Teaching Platform"})})]})})]})},js=()=>(0,Ps.jsxs)("div",{className:"courses-page-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-img"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-btn"})]}),Ms=()=>{const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(async()=>{try{const e=await fetch("https://hilms.onrender.com/api/courses");if(!e.ok)throw new Error("Failed to fetch courses");const n=await e.json();t(n.data||[])}catch(e){console.error(e.message)}finally{s(!1)}})()}),[]);const o=a?e&&e.length>0?e.length:6:0;return(0,Ps.jsxs)("div",{className:"courses-page",children:[(0,Ps.jsx)("h2",{children:"Courses Page"}),(0,Ps.jsxs)("div",{className:"courses-page-sort-by",children:[(0,Ps.jsx)("span",{children:"Sort by:"}),(0,Ps.jsxs)("select",{value:r,onChange:e=>{i(e.target.value)},children:[(0,Ps.jsx)("option",{value:"",children:"Select an option"}),(0,Ps.jsx)("option",{value:"title-asc",children:"Title: A to Z"}),(0,Ps.jsx)("option",{value:"title-desc",children:"Title: Z to A"})]}),(0,Ps.jsx)("button",{onClick:()=>{const n=[...e].sort(((e,t)=>"title-asc"===r?e.title.localeCompare(t.title):"title-desc"===r?t.title.localeCompare(e.title):0));t(n)},children:"Sort"})]}),(0,Ps.jsx)("section",{className:"courses-page-section",children:(0,Ps.jsx)("div",{className:"courses-page-container-cards",children:a?Array.from({length:o}).map(((e,t)=>(0,Ps.jsx)(js,{},t))):e.length>0?e.map((e=>(0,Ps.jsx)(Re,{to:"/course-details/".concat(e.id),className:"general-courses-card-link",children:(0,Ps.jsxs)("div",{className:"courses-page-card",children:[(0,Ps.jsx)("img",{src:e.imageurl,alt:e.title,className:"courses-page-image"}),(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",e.trainer_name||e.instructor_name||"Unknown"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Learners:"})," ",e.enrolled_count||0]}),(0,Ps.jsx)("span",{className:"btn-primary",children:"Read More"})]})},e.id))):(0,Ps.jsx)("p",{children:"No courses available"})})})]})},Os=()=>{const[e,t]=(0,n.useState)(!0);return(0,Ps.jsxs)("div",{className:"about-container",children:[(0,Ps.jsx)("header",{className:"about-header",children:(0,Ps.jsx)("h1",{children:"About Us Page"})}),(0,Ps.jsxs)("section",{className:"about-content",children:[(0,Ps.jsxs)("div",{className:"about-left",children:[e&&(0,Ps.jsx)("div",{className:"skeleton skeleton-course-aboimg"}),(0,Ps.jsx)("img",{src:"https://hilms.onrender.com/uploads/e90af6d9-1036-48b5-ac3d-6a2391bd6009.png",alt:"Education Illustration",className:"about-image",onLoad:()=>t(!1),style:{display:e?"none":"block"}})]}),(0,Ps.jsxs)("div",{className:"about-right",children:[(0,Ps.jsx)("h2",{children:"Welcome to Learnfinity \u2013 Your Partner in Professional Growth"}),(0,Ps.jsx)("p",{children:"At Learnfinity, we believe that learning never stops. Our platform is designed for working professionals, organizations, and teams who aim to stay ahead in today\u2019s fast-paced business world."}),(0,Ps.jsx)("p",{children:"From leadership development to technical upskilling, our curated courses are crafted by industry experts to meet real-world challenges."}),(0,Ps.jsx)("p",{children:"Whether you\u2019re looking to improve your professional skills, train your workforce, or explore new career opportunities, Learnfinity provides the tools, resources, and support you need to succeed."}),(0,Ps.jsx)("p",{children:(0,Ps.jsx)("strong",{children:"Empower your career, empower your future."})}),(0,Ps.jsxs)("div",{className:"about-features",children:[(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcca"}),"Business & Leadership Training"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcbb"}),"Technology & Software Skills"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcdc"}),"Accredited Certifications"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83e\udd1d"}),"Corporate Collaboration Tools"]})]})]})]})]})},Ls=()=>{const[e,t]=(0,n.useState)(null);return(0,Ps.jsx)("div",{className:"faq-container",children:(0,Ps.jsxs)("div",{className:"faq-main",children:[(0,Ps.jsx)("h1",{children:"Frequently Asked Questions"}),[{question:"Can I customize eLearning courses?",answer:"Yes, eLearning courses can be customized according to your needs, including content, duration, and delivery methods."},{question:"Can I download the course certificate after completing the course?",answer:"Yes, once you have completed all the course requirements, you can download your course certificate directly from your dashboard."},{question:"What should I do if I forget my password?",answer:"If you forget your password, go to the sign-in page and click on the 'Forgot Password' link. Follow the instructions to reset your password via your registered email."},{question:"Can I access the courses on mobile devices?",answer:"Yes, all courses are fully responsive and can be accessed on any device, including smartphones, tablets, and laptops, for convenient learning anytime, anywhere."},{question:"How can I enroll in a course?",answer:"To enroll in a course, simply browse through the available courses, select the one you wish to enroll in, and click the 'Enroll' button. You will need to log in or sign up to complete the enrollment process."}].map(((n,r)=>(0,Ps.jsxs)("div",{className:"faq-item ".concat(e===r?"active":""),onClick:()=>(n=>{t(e===n?null:n)})(r),children:[(0,Ps.jsxs)("div",{className:"faq-question",children:[e===r?"-":"+"," ",n.question]}),e===r&&(0,Ps.jsx)("div",{className:"faq-answer",children:n.answer})]},r)))]})})};const Ds=function(){return(0,Ps.jsxs)("div",{className:"terms-container",children:[(0,Ps.jsx)("h1",{children:"Terms of Service"}),(0,Ps.jsx)("p",{children:"Welcome to Learnfinity! By using our platform, you agree to the following terms and conditions. Please read them carefully."}),(0,Ps.jsx)("h2",{children:"1. User Responsibilities"}),(0,Ps.jsx)("p",{children:"As a user of Learnfinity, you are responsible for ensuring the accuracy of your personal details and maintaining the confidentiality of your account credentials."}),(0,Ps.jsx)("h2",{children:"2. Content Ownership"}),(0,Ps.jsx)("p",{children:"All content available on Learnfinity is owned by our platform or licensed to us. Unauthorized reproduction or distribution of this content is strictly prohibited."}),(0,Ps.jsx)("h2",{children:"3. Privacy Policy"}),(0,Ps.jsxs)("p",{children:["Your privacy is important to us. For detailed information on how we collect, use, and protect your data, please refer to our ",(0,Ps.jsx)("a",{href:"/privacy",children:"Privacy Policy"}),"."]}),(0,Ps.jsx)("h2",{children:"4. Limitation of Liability"}),(0,Ps.jsx)("p",{children:"Learnfinity is not responsible for any damages or losses resulting from your use of our platform."}),(0,Ps.jsx)("h2",{children:"5. Amendments"}),(0,Ps.jsx)("p",{children:"We reserve the right to update these terms at any time. Continued use of our platform constitutes acceptance of the updated terms."})]})};const Bs=function(){return(0,Ps.jsxs)("div",{className:"privacy-container",children:[(0,Ps.jsx)("h1",{children:"Privacy Policy"}),(0,Ps.jsx)("p",{children:"At Learnfinity, we are committed to protecting your privacy. This Privacy Policy explains how we collect, use, and protect your personal information when you use our platform."}),(0,Ps.jsx)("h2",{children:"1. Information We Collect"}),(0,Ps.jsx)("p",{children:"We collect personal information such as your name, email address, and phone number when you register on Learnfinity or use our services."}),(0,Ps.jsx)("h2",{children:"2. How We Use Your Information"}),(0,Ps.jsx)("p",{children:"The information we collect is used to improve your experience on our platform, provide customer support, and communicate with you about updates, promotions, or new features."}),(0,Ps.jsx)("h2",{children:"3. Information Sharing"}),(0,Ps.jsx)("p",{children:"We do not sell or rent your personal information to third parties. We may share your information with trusted partners to perform services on our behalf, such as sending emails or analyzing platform usage."}),(0,Ps.jsx)("h2",{children:"4. Data Security"}),(0,Ps.jsx)("p",{children:"We implement robust security measures to protect your data from unauthorized access, alteration, or destruction."}),(0,Ps.jsx)("h2",{children:"5. Cookies"}),(0,Ps.jsx)("p",{children:"Learnfinity uses cookies to enhance your user experience. These cookies help us remember your preferences and provide personalized content."}),(0,Ps.jsx)("h2",{children:"6. Your Rights"}),(0,Ps.jsxs)("p",{children:["You have the right to access, correct, or delete your personal information at any time. To exercise these rights, please contact us at ",(0,Ps.jsx)("a",{href:"mailto:support@learnfinity.com",children:"support@learnfinity.com"}),"."]}),(0,Ps.jsx)("h2",{children:"7. Changes to This Policy"}),(0,Ps.jsx)("p",{children:"We may update this Privacy Policy from time to time. Any changes will be posted on this page, and we will notify you of any significant updates."}),(0,Ps.jsxs)("div",{className:"highlight",children:[(0,Ps.jsx)("strong",{children:"Important:"})," By using Learnfinity, you consent to the collection and use of your personal information as outlined in this policy."]}),(0,Ps.jsx)("h2",{children:"Contact Us"}),(0,Ps.jsxs)("p",{children:["If you have any questions or concerns regarding our Privacy Policy, please feel free to contact us at",(0,Ps.jsx)("a",{href:"mailto:support@learnfinity.com",children:"support@learnfinity.com"}),"."]})]})},qs=()=>{const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)("");return(0,Ps.jsx)("div",{className:"signin-page",children:(0,Ps.jsxs)("div",{className:"signin-container",children:[(0,Ps.jsx)("h2",{children:"Login Form"}),o&&(0,Ps.jsx)("div",{className:"error-message",children:o}),(0,Ps.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e&&r&&a)try{let t="";"admin"===a?t="https://hilms.onrender.com/api/auth/admin-login":"trainer"===a?t="https://hilms.onrender.com/api/auth/trainer-login":"learner"===a&&(t="https://hilms.onrender.com/api/auth/learner-login");const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r,role:a})}),i=await n.json();if(403===n.status)return void l(i.error);if(!n.ok)return void l(i.error||"Invalid credentials");if(!n.ok)throw new Error("Login failed. Please check your credentials.");i.success?(l(""),localStorage.setItem("token",i.token),localStorage.setItem("role",a),localStorage.setItem("".concat(a,"Token"),i.token),"admin"===a?window.location.href="/admin-dashboard":"trainer"===a?window.location.href="/trainer-dashboard":"learner"===a&&(window.location.href="/learner-dashboard")):l(i.error||"Invalid credentials")}catch(n){console.error(n),l("Error logging in. Please try again.")}else l("Please fill all fields")},className:"signin-form",children:[(0,Ps.jsx)("label",{htmlFor:"email",children:"Email Address:"}),(0,Ps.jsx)("input",{type:"email",id:"email",name:"email",value:e,onChange:e=>t(e.target.value),required:!0}),(0,Ps.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Ps.jsx)("input",{type:"password",id:"password",name:"password",value:r,onChange:e=>i(e.target.value),required:!0}),(0,Ps.jsx)("label",{htmlFor:"role",children:"Role:"}),(0,Ps.jsxs)("select",{id:"role",name:"role",value:a,onChange:e=>s(e.target.value),required:!0,children:[(0,Ps.jsx)("option",{value:"",children:"Select Role"}),(0,Ps.jsx)("option",{value:"admin",children:"Admin"}),(0,Ps.jsx)("option",{value:"trainer",children:"Trainer"}),(0,Ps.jsx)("option",{value:"learner",children:"Learner"})]}),(0,Ps.jsx)("button",{type:"submit",className:"signin-btn",children:"Login"})]}),(0,Ps.jsxs)("div",{className:"additional-links",children:[(0,Ps.jsxs)("p",{children:["Don't have an account? ",(0,Ps.jsx)("a",{href:"/signup",children:"Sign Up"})]}),(0,Ps.jsx)("p",{children:(0,Ps.jsx)("a",{href:"/forgot-password",children:"Forgot Password?"})})]})]})})},Us=()=>{const[e,t]=(0,n.useState)({firstName:"",lastName:"",dob:"",email:"",phone:"",password:"",address:"",confirmPassword:""}),[r,i]=(0,n.useState)({}),a=e=>{const{name:n,value:r}=e.target;t((e=>vr(vr({},e),{},{[n]:r})))};return(0,n.useEffect)((()=>{window.scrollTo(0,0)}),[]),(0,Ps.jsx)("div",{className:"signup-page",children:(0,Ps.jsxs)("div",{className:"signup-container",children:[(0,Ps.jsx)("h2",{children:"Learner SignUp"}),(0,Ps.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),(()=>{let t={},n=!0;return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/.test(e.password)?e.password!==e.confirmPassword&&(t.password="Passwords do not match",n=!1):(t.password="Password must be at least 8 characters and include 1 uppercase, 1 lowercase, 1 number, and 1 special character",n=!1),/^[0-9]{10}$/.test(e.phone)||(t.phone="Please enter a valid 10-digit phone number",n=!1),i(t),n})())try{const n=await fetch("https://hilms.onrender.com/api/Learner/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();n.ok?(alert("Learner registered successfully!"),t({firstName:"",lastName:"",dob:"",email:"",phone:"",password:"",address:"",confirmPassword:""})):alert(r.error||"Error registering Learner")}catch(r){console.error("Error:",r),alert("Error submitting the form")}},children:[(0,Ps.jsxs)("div",{className:"input-group",children:[(0,Ps.jsx)("label",{htmlFor:"firstName",children:"First Name:"}),(0,Ps.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:a,required:!0})]}),(0,Ps.jsxs)("div",{className:"input-group",children:[(0,Ps.jsx)("label",{htmlFor:"lastName",children:"Last Name:"}),(0,Ps.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:a,required:!0})]}),(0,Ps.jsxs)("div",{className:"input-group",children:[(0,Ps.jsx)("label",{htmlFor:"dob",children:"Date of Birth:"}),(0,Ps.jsx)("input",{type:"date",id:"dob",name:"dob",value:e.dob,onChange:a,required:!0})]}),(0,Ps.jsxs)("div",{className:"input-group",children:[(0,Ps.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Ps.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:a,required:!0})]}),(0,Ps.jsxs)("div",{className:"input-group",children:[(0,Ps.jsx)("label",{htmlFor:"phone",children:"Phone Number:"}),(0,Ps.jsx)("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:a,required:!0}),r.phone&&(0,Ps.jsx)("span",{className:"error",children:r.phone})]}),(0,Ps.jsxs)("div",{className:"input-group",children:[(0,Ps.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Ps.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:a,required:!0})]}),(0,Ps.jsxs)("div",{className:"input-group",children:[(0,Ps.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password:"}),(0,Ps.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:a,required:!0}),r.password&&(0,Ps.jsx)("span",{className:"error",children:r.password})]}),(0,Ps.jsx)("div",{className:"input-group",children:(0,Ps.jsx)("input",{type:"submit",value:"Submit"})})]}),(0,Ps.jsxs)("p",{className:"signin-link",children:["Already have an account? ",(0,Ps.jsx)("a",{href:"/signin",children:"Sign In"})]})]})})},Gs=()=>(0,Ps.jsxs)("div",{className:"course-details-page",children:[(0,Ps.jsxs)("div",{className:"course-header",children:[(0,Ps.jsxs)("div",{className:"course-info-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-rating"}),(0,Ps.jsxs)("ul",{className:"course-meta",children:[(0,Ps.jsx)("li",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("li",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("li",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("li",{className:"skeleton skeleton-meta"})]})]}),(0,Ps.jsxs)("div",{className:"course-sidebar-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-image"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-feature"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-feature"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-feature"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-feature"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]})]}),(0,Ps.jsxs)("div",{className:"course-content",children:[(0,Ps.jsxs)("div",{className:"tab-list",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-tab"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-tab"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-tab"})]}),(0,Ps.jsxs)("div",{className:"tab-content",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-section-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-block"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-block"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-block"})]})]})]}),zs=()=>{var e,t,r,i;const{courseId:a}=$(),s=Z(),[o,l]=(0,n.useState)("curriculum"),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!0),[p,f]=(0,n.useState)(null),m=localStorage.getItem("token"),g=Boolean(m),v=localStorage.getItem("role"),y=localStorage.getItem("userId"),b=(0,n.useRef)(!1);(0,n.useEffect)((()=>{a&&(async()=>{try{var e;h(!0);const t=await Ss.get("https://hilms.onrender.com/api/courses/course-details/".concat(a));d((null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||{})}catch(t){console.error("Error fetching course details:",t.message),f("Failed to load course details. Please try again later.")}finally{h(!1)}})(),b.current||(window.scrollTo(0,0),b.current=!0)}),[a]);return u?(0,Ps.jsx)(Gs,{}):p?(0,Ps.jsx)("div",{className:"error",children:p}):c&&(0,Ps.jsxs)("div",{className:"course-details-page",children:[(0,Ps.jsxs)("div",{className:"course-header",children:[(0,Ps.jsxs)("div",{className:"course-info-card",children:[(0,Ps.jsxs)("h1",{children:["Course Title: ",(0,Ps.jsx)("span",{className:"course-details-title",children:c.title||"Untitled Course"})]}),(0,Ps.jsxs)("div",{className:"ratings",children:["\u2605 ",c.averageRating||0,"/5 (",c.reviewCount||0," Reviews)"]}),(0,Ps.jsxs)("ul",{className:"course-meta",children:[(0,Ps.jsxs)("li",{children:["Enrolled Learners: ",Array.isArray(c.learners)?c.learners.length:0]}),(0,Ps.jsxs)("li",{children:["Course Trainer: ",(null===(e=c.trainer)||void 0===e?void 0:e.fullName)||"Unknown"]}),(0,Ps.jsxs)("li",{children:["Last Updated: ",c.updated_at?new Date(c.updated_at).toLocaleDateString():"N/A"]}),(0,Ps.jsxs)("li",{children:["Language: ",c.language||"English"]})]})]}),(0,Ps.jsxs)("div",{className:"course-sidebar-card",children:[(0,Ps.jsx)("img",{src:c.imageurl||"https://via.placeholder.com/400",alt:c.title,className:"course-image"}),(0,Ps.jsxs)("div",{className:"course-features",children:[(0,Ps.jsx)("h3",{children:"Course Features:"}),(0,Ps.jsxs)("ul",{children:[(0,Ps.jsxs)("li",{children:["\ud83c\udfa5 ",Array.isArray(c.chapters)?c.chapters.length:0," Chapters"]}),(0,Ps.jsxs)("li",{children:["\ud83d\udcd6 ",c.lessonCount||0," Lessons"]}),(0,Ps.jsxs)("li",{children:["\ud83d\udcda ",Array.isArray(c.quizzes)?c.quizzes.length:0," Quizzes"]}),(0,Ps.jsx)("li",{children:"\ud83c\udfc6 Certificate of Completion"})]})]}),"learner"===v&&(0,Ps.jsx)("button",{className:"enroll-btn",onClick:async()=>{if(!g)return alert("Please sign in to enroll in this course."),void s("/SignIn");try{await Ss.post("https://hilms.onrender.com/api/courses/course-details/".concat(a,"/enroll"),{},{headers:{Authorization:"Bearer ".concat(m)}}),d((e=>vr(vr({},e),{},{learners:[...e.learners||[],y]}))),alert("You have successfully enrolled in this course!")}catch(i){var e,t,n,r;console.error("Enrollment error:",(null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||i.message),alert((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to enroll. Please try again.")}},children:"Enroll Now"})]})]}),(0,Ps.jsxs)("div",{className:"course-content",children:[(0,Ps.jsx)("div",{className:"tab-list",children:["curriculum","instructor","reviews"].map((e=>(0,Ps.jsx)("button",{className:"tab ".concat(o===e?"active":""),onClick:()=>(e=>{l(e)})(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),(0,Ps.jsxs)("div",{className:"tab-content",children:["curriculum"===o&&(0,Ps.jsxs)("div",{className:"curriculum",children:[(0,Ps.jsx)("h2",{children:"Course Content"}),Array.isArray(c.chapters)&&c.chapters.length>0?(0,Ps.jsx)("ul",{className:"chapter-list",children:c.chapters.map((e=>(0,Ps.jsxs)("li",{children:[(0,Ps.jsxs)("strong",{children:["Chapter: ",e.name||"Untitled Chapter"]}),(0,Ps.jsx)("ul",{className:"lesson-list",children:Array.isArray(e.lessons)&&e.lessons.length>0?e.lessons.map((e=>(0,Ps.jsxs)("li",{children:[(0,Ps.jsxs)("strong",{children:["Lesson ",e.number,": ",e.title||"Untitled Lesson"]}),(0,Ps.jsx)("p",{children:e.description||"No description available"})]},e.id))):(0,Ps.jsx)("li",{children:"No lessons available"})})]},e.id)))}):(0,Ps.jsx)("p",{children:"No chapters added yet!"})]}),"instructor"===o&&(0,Ps.jsxs)("div",{className:"instructor",children:[(0,Ps.jsx)("h2",{children:"Instructor Information"}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Full Name: "}),(null===(t=c.trainer)||void 0===t?void 0:t.fullName)||"N/A"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Email: "})," ",(null===(r=c.trainer)||void 0===r?void 0:r.email)||"N/A"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Institution: "})," ",(null===(i=c.trainer)||void 0===i?void 0:i.institute)||"N/A"]})]}),"reviews"===o&&(0,Ps.jsxs)("div",{className:"reviews",children:[(0,Ps.jsx)("h2",{children:"Learner Reviews"}),Array.isArray(c.reviews)&&c.reviews.length>0?(0,Ps.jsx)("ul",{className:"review-list",children:c.reviews.map((e=>(0,Ps.jsxs)("li",{children:[(0,Ps.jsxs)("strong",{children:[e.learner_name||"Anonymous",":"]}),(0,Ps.jsxs)("p",{children:["Rating: \u2605 ",e.rating,"/5"]}),(0,Ps.jsx)("p",{children:e.comment||"No comment provided."})]},e.id)))}):(0,Ps.jsx)("p",{children:"No reviews yet. Be the first to review this course!"})]})]})]})]})},Hs=()=>{const[e,t]=(0,n.useState)({fullName:"",phoneNumber:"",email:"",institute:"",gender:"",password:"",confirmPassword:""}),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(!1),o=e=>{const{name:n,value:r}=e.target;t((e=>vr(vr({},e),{},{[n]:r})))};(0,n.useEffect)((()=>{window.scrollTo(0,0)}),[]);return(0,Ps.jsx)("div",{className:"Trainer-signin-page",children:(0,Ps.jsx)("div",{className:"Trainer-signup-container",children:(0,Ps.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),i(""),s(!0);if(!/^[0-9]{10}$/.test(e.phoneNumber))return i("Please enter a valid 10-digit phone number."),void s(!1);if(!e.phoneNumber)return i("Phone number is required."),void s(!1);if(!["Male","Female","Other"].includes(e.gender))return i("Please select a valid gender."),void s(!1);if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/.test(e.password))return i("Password must be at least 8 characters and include 1 uppercase, 1 lowercase, 1 number, and 1 special character."),void s(!1);if(e.password!==e.confirmPassword)return i("Passwords do not match."),void s(!1);try{const n=await fetch("https://hilms.onrender.com/api/Trainer/Trainer-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=n.headers.get("content-type");if(!r||!r.includes("application/json"))throw new Error("Server did not return JSON. Check backend logs.");const a=await n.json();n.ok?(alert("Trainer registered successfully!"),t({fullName:"",phoneNumber:"",email:"",institute:"",gender:"",password:"",confirmPassword:""})):i(a.error||"Error occurred during signup.")}catch(r){console.error("Error:",r),i("Something went wrong. Please try again.")}finally{s(!1)}},className:"Trainer-signup-form",children:[(0,Ps.jsx)("h2",{children:"Trainer SignUp"}),r&&(0,Ps.jsx)("div",{className:"Trainer-signup-error",children:r}),(0,Ps.jsx)("label",{htmlFor:"fullName",children:"Full Name:"}),(0,Ps.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:e.fullName,onChange:o,required:!0}),(0,Ps.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number:"}),(0,Ps.jsx)("input",{type:"text",id:"phoneNumber",name:"phoneNumber",value:e.phoneNumber,onChange:o,required:!0}),(0,Ps.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Ps.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0}),(0,Ps.jsx)("label",{htmlFor:"institute",children:"Institution:"}),(0,Ps.jsx)("input",{type:"text",id:"institute",name:"institute",value:e.institute,onChange:o,required:!0}),(0,Ps.jsx)("label",{htmlFor:"gender",children:"Gender:"}),(0,Ps.jsxs)("select",{id:"gender",name:"gender",value:e.gender,onChange:o,required:!0,children:[(0,Ps.jsx)("option",{value:"",children:"Select Gender"}),(0,Ps.jsx)("option",{value:"Male",children:"Male"}),(0,Ps.jsx)("option",{value:"Female",children:"Female"}),(0,Ps.jsx)("option",{value:"Other",children:"Other"})]}),(0,Ps.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Ps.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:o,required:!0}),(0,Ps.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password:"}),(0,Ps.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:o,required:!0}),(0,Ps.jsx)("button",{type:"submit",className:"Trainer-signup-submit-btn",disabled:a,children:a?"Submitting...":"Submit"})]})})})};class Ws{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Network Error";this.status=e,this.text=t}}const Vs={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!==typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},Ks=e=>e?"string"===typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},Ys=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await fetch(Vs.origin+e,{method:"POST",headers:n,body:t}),i=await r.text(),a=new Ws(r.status,i);if(r.ok)return a;throw a},Xs=(e,t,n)=>{if(!e||"string"!==typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!==typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!==typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Js=e=>e.webdriver||!e.languages||0===e.languages.length,Qs=()=>new Ws(451,"Unavailable For Headless Browser"),Zs=(e,t)=>{if((e=>{var t;return!(null!==(t=e.list)&&void 0!==t&&t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!==typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=((e,t)=>e instanceof FormData?e.get(t):e[t])(t,e.watchVariable);return"string"===typeof n&&e.list.includes(n)},$s=()=>new Ws(403,"Forbidden"),eo=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!==typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!==typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const r=t.id||e,i=await(async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r})(r,t.throttle,n);return i>0||(await n.set(r,Date.now().toString()),!1)},to=()=>new Ws(429,"Too Many Requests"),no=async(e,t,n,r)=>{const i=Ks(r),a=i.publicKey||Vs.publicKey,s=i.blockHeadless||Vs.blockHeadless,o=i.storageProvider||Vs.storageProvider,l=vr(vr({},Vs.blockList),i.blockList),c=vr(vr({},Vs.limitRate),i.limitRate);if(s&&Js(navigator))return Promise.reject(Qs());if(Xs(a,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&Zs(l,n))return Promise.reject($s());if(await eo(location.pathname,c,o))return Promise.reject(to());const d={lib_version:"4.4.1",user_id:a,service_id:e,template_id:t,template_params:n};return Ys("/api/v1.0/email/send",JSON.stringify(d),{"Content-type":"application/json"})},ro=()=>{const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(!1);return(0,Ps.jsx)("div",{className:"forgot-password-container",children:(0,Ps.jsxs)("div",{className:"forgot-password-box",children:[(0,Ps.jsx)("h2",{children:"Forgot Password"}),(0,Ps.jsxs)("form",{onSubmit:n=>{n.preventDefault(),l(!0);const r="http://localhost:3000/reset-password?token=".concat(btoa(e));no("service_jtatsrq","template_3hj5rro",{to_email:e,reset_link:r},"8TOkSAnsc4yfF81je").then((()=>{i("Password reset link has been sent to your email.")})).catch((e=>{s("Failed to send reset link. Please try again."),console.error("EmailJS Error:",e)})).finally((()=>{l(!1),t("")}))},children:[(0,Ps.jsxs)("div",{className:"input-container",children:[(0,Ps.jsx)("label",{htmlFor:"email",children:"Enter your email"}),(0,Ps.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your email address",required:!0})]}),(0,Ps.jsx)("button",{type:"submit",className:"submit-btn",disabled:o,children:o?"Sending...":"Send Reset Link"}),r&&(0,Ps.jsx)("p",{className:"message",children:r}),a&&(0,Ps.jsx)("p",{className:"error",children:a})]}),(0,Ps.jsx)("div",{className:"back-to-login",children:(0,Ps.jsx)(Re,{to:"/SignIn",children:"Back to Login"})})]})})},io=()=>{const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=new URLSearchParams(window.location.search).get("token");e?h(e):l("Invalid or expired reset token")}),[]);return o&&!u?(0,Ps.jsx)("p",{className:"error-message",children:o}):(0,Ps.jsx)("div",{className:"reset-password-container",children:(0,Ps.jsxs)("div",{className:"reset-password-box",children:[(0,Ps.jsx)("h2",{children:"Reset Password"}),(0,Ps.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),e!==r)return l("Passwords do not match"),void s("");d(!0);try{const n=await fetch("https://hilms.onrender.com/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:u})}),r=await n.json();n.ok?(s("Password reset successful. You can now log in."),t(""),i("")):l(r.error||"Error resetting password.")}catch(a){l("Server error. Try again.")}finally{d(!1)}},children:[(0,Ps.jsxs)("div",{className:"input-container",children:[(0,Ps.jsx)("label",{htmlFor:"password",children:"New Password"}),(0,Ps.jsx)("input",{type:"password",id:"password",value:e,onChange:e=>t(e.target.value),placeholder:"Enter new password",required:!0})]}),(0,Ps.jsxs)("div",{className:"input-container",children:[(0,Ps.jsx)("label",{htmlFor:"confirm-password",children:"Confirm New Password"}),(0,Ps.jsx)("input",{type:"password",id:"confirm-password",value:r,onChange:e=>i(e.target.value),placeholder:"Confirm new password",required:!0})]}),(0,Ps.jsx)("button",{type:"submit",className:"submit-btn",disabled:c,children:c?"Resetting...":"Reset Password"}),a&&(0,Ps.jsx)("p",{className:"success-message",children:a}),o&&(0,Ps.jsx)("p",{className:"error-message",children:o})]})]})})},ao=e=>{let{rows:t=5,cols:n=8}=e;return(0,Ps.jsxs)("div",{className:"admin-table-skeleton",children:[(0,Ps.jsx)("div",{className:"skeleton-header",children:Array.from({length:n}).map(((e,t)=>(0,Ps.jsx)("div",{className:"skeleton-cell skeleton-header-cell"},t)))}),Array.from({length:t}).map(((e,t)=>(0,Ps.jsx)("div",{className:"skeleton-row",children:Array.from({length:n}).map(((e,t)=>(0,Ps.jsx)("div",{className:"skeleton-cell"},t)))},t)))]})},so=()=>(0,Ps.jsxs)("div",{className:"course-card skeleton-card",children:[(0,Ps.jsx)("div",{className:"skeleton-image"}),(0,Ps.jsx)("div",{className:"skeleton-text short"}),(0,Ps.jsx)("div",{className:"skeleton-text long"}),(0,Ps.jsx)("div",{className:"skeleton-btn"})]}),oo=()=>(0,Ps.jsxs)("div",{className:"trainer-skeleton-card",children:[(0,Ps.jsx)("div",{className:"trainer-skeleton-avatar"}),(0,Ps.jsx)("div",{className:"trainer-skeleton-text short"}),(0,Ps.jsx)("div",{className:"trainer-skeleton-text long"}),(0,Ps.jsx)("div",{className:"trainer-skeleton-btn"}),(0,Ps.jsx)("div",{className:"trainer-skeleton-btn"})]}),lo=()=>(0,Ps.jsxs)("div",{className:"admin-learner-card learner-skeleton-card",children:[(0,Ps.jsx)("div",{className:"learner-skeleton-avatar"}),(0,Ps.jsx)("div",{className:"learner-skeleton-text short"}),(0,Ps.jsx)("div",{className:"learner-skeleton-text long"}),(0,Ps.jsx)("div",{className:"learner-skeleton-btn"})]}),co=()=>(0,Ps.jsxs)("div",{className:"leaderboard-skeleton",children:[(0,Ps.jsx)("div",{className:"leaderboard-top3",children:Array.from({length:3}).map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-item top-scorer",children:[(0,Ps.jsx)("div",{className:"skeleton-avatar leaderboard-skeleton-avatar"}),(0,Ps.jsx)("div",{className:"skeleton-text leaderboard-skeleton-name"}),(0,Ps.jsx)("div",{className:"skeleton-text leaderboard-skeleton-marks"})]},t)))}),(0,Ps.jsx)("div",{className:"leaderboard-grid",children:Array.from({length:5}).map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-grid-item",children:[(0,Ps.jsx)("div",{className:"skeleton-avatar leaderboard-skeleton-avatar"}),(0,Ps.jsx)("div",{className:"skeleton-text leaderboard-skeleton-name"}),(0,Ps.jsx)("div",{className:"skeleton-text leaderboard-skeleton-marks"})]},t)))})]}),uo=["linear-gradient(135deg, #ff7e5f, #feb47b)","linear-gradient(135deg, #6a11cb, #2575fc)","linear-gradient(135deg, #00c6ff, #0072ff)","linear-gradient(135deg, #f7971e, #ffd200)","linear-gradient(135deg, #11998e, #38ef7d)","linear-gradient(135deg, #ff416c, #ff4b2b)","linear-gradient(135deg, #833ab4, #fd1d1d)","linear-gradient(135deg, #00b09b, #96c93d)"];function ho(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t)%uo.length;return uo[n]}const po=()=>{var e;const[t,r]=(0,n.useState)("manage-users"),[i,a]=(0,n.useState)([]),[s,o]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),f=Z(),[m,g]=(0,n.useState)([]),[v,y]=(0,n.useState)(null),[b,_]=(0,n.useState)([]),[w,x]=(0,n.useState)(null),[C,k]=(0,n.useState)(null),[S,P]=(0,n.useState)(!0),[A,E]=(0,n.useState)(!0),[T,I]=(0,n.useState)(!0),[F,R]=(0,n.useState)(!0),[N,j]=(0,n.useState)(!0),M=async()=>{P(!0);try{const e=await Ss.get("https://hilms.onrender.com/api/admin/users");a(e.data.users)}catch(e){console.error("Error fetching users:",e)}finally{P(!1)}},O=async()=>{I(!0);try{const e=await Ss.get("https://hilms.onrender.com/api/admin/pending-trainers");o(e.data.trainers)}catch(e){console.error("Error fetching trainers:",e)}finally{I(!1)}},L=async()=>{E(!0);try{const e=await Ss.get("https://hilms.onrender.com/api/admin/courses");c(e.data.courses)}catch(e){console.error("Error fetching courses:",e)}finally{E(!1)}};(0,n.useEffect)((()=>{M(),O(),L(),D(),B()}),[]);const D=async()=>{R(!0);try{const e=await Ss.get("https://hilms.onrender.com/api/admin/learners-progress");g(e.data)}catch(e){console.error("Error fetching Learner progress:",e)}finally{R(!1)}},B=async()=>{j(!0);try{const e=await Ss.get("https://hilms.onrender.com/api/learner/leaderboard");_(e.data)}catch(e){x("Failed to fetch leaderboard")}finally{j(!1)}},q=e=>r(e),U=(e,t)=>{window.confirm(e)&&t()};return(0,Ps.jsxs)("div",{className:"admin-dashboard",children:[(0,Ps.jsxs)("header",{className:"admin-header",children:[(0,Ps.jsx)("h1",{children:"Admin's Home Page"}),(0,Ps.jsx)("p",{children:"Welcome to Learnfinity Admin"}),(0,Ps.jsx)("p",{children:"This is a place for Admin to control and manage the website"})]}),(0,Ps.jsxs)("div",{className:"admin-actions",children:[(0,Ps.jsx)("button",{className:"action-btn",onClick:()=>q("manage-users"),children:"Manage Users"}),(0,Ps.jsx)("button",{className:"action-btn",onClick:()=>q("manage-courses"),children:"Manage Courses"}),(0,Ps.jsx)("button",{className:"action-btn",onClick:()=>q("approve-trainers"),children:"Approve Trainers"}),(0,Ps.jsx)("button",{className:"action-btn",onClick:()=>q("manage-learners"),children:"Learners Progress"}),(0,Ps.jsx)("button",{className:"action-btn",onClick:()=>q("leaderboard"),children:"View Leaderboard"})]}),(0,Ps.jsxs)("div",{className:"admin-section",children:["manage-users"===t&&(0,Ps.jsxs)("div",{className:"manage-users",children:[(0,Ps.jsx)("h2",{children:"Manage Users"}),(0,Ps.jsx)("div",{className:"admin-search-container",children:(0,Ps.jsx)("input",{type:"text",placeholder:"Search users by name or email...\ud83d\udd0d",className:"admin-search-input",value:d,onChange:e=>u(e.target.value)})}),(0,Ps.jsx)("div",{className:"user-table-container",children:S?(0,Ps.jsx)(ao,{rows:10,cols:8}):0===i.length?(0,Ps.jsx)("p",{children:"No users found."}):(0,Ps.jsxs)("table",{className:"user-table",children:[(0,Ps.jsx)("thead",{children:(0,Ps.jsxs)("tr",{children:[(0,Ps.jsx)("th",{children:"No"}),(0,Ps.jsx)("th",{children:"Profile"}),(0,Ps.jsx)("th",{children:"Name"}),(0,Ps.jsx)("th",{children:"Role"}),(0,Ps.jsx)("th",{children:"Email"}),(0,Ps.jsx)("th",{children:"Phone"}),(0,Ps.jsx)("th",{children:"DOB / Institution"}),(0,Ps.jsx)("th",{children:"Actions"})]})}),(0,Ps.jsx)("tbody",{children:i.filter((e=>1!==e.role)).filter((e=>{const t=0===e.role&&e.learner?"".concat(e.learner.first_name||""," ").concat(e.learner.last_name||""):"",n=2===e.role&&e.trainer&&e.trainer.full_name||"",r=t||n,i=e.email||"";return r.toLowerCase().includes(d.toLowerCase())||i.toLowerCase().includes(d.toLowerCase())})).map(((e,t)=>{const n=0===e.role&&e.learner?"".concat(e.learner.firstName||""," ").concat(e.learner.lastName||"").trim():2===e.role&&e.trainer&&e.trainer.fullName||"Unknown",r=0===e.role&&e.learner?e.learner.phone||"N/A":2===e.role&&e.trainer&&e.trainer.phone||"N/A",i=0===e.role&&e.learner?e.learner.dob?new Date(e.learner.dob).toLocaleDateString():"N/A":2===e.role&&e.trainer&&e.trainer.institute||"N/A";return(0,Ps.jsxs)("tr",{children:[(0,Ps.jsx)("td",{children:t+1}),(0,Ps.jsx)("td",{children:e.image_url?(0,Ps.jsx)("img",{src:e.image_url,alt:"".concat(n,"'s profile"),className:"table-profile-image"}):(0,Ps.jsx)("div",{className:"initial-avatar",style:{background:ho(n)},children:n.split(" ").map((e=>e[0])).join("").toUpperCase()})}),(0,Ps.jsx)("td",{children:n}),(0,Ps.jsx)("td",{children:0===e.role?"Learner":"Trainer"}),(0,Ps.jsx)("td",{children:e.email}),(0,Ps.jsx)("td",{children:r}),(0,Ps.jsx)("td",{children:i}),(0,Ps.jsxs)("td",{children:[(0,Ps.jsx)("button",{className:1===e.flag?"unblock-btn":"block-btn",onClick:()=>1===e.flag?(async e=>{U("Are you sure you want to unblock this user?",(async()=>{try{const t=await Ss.put("https://hilms.onrender.com/api/admin/unblock-user/".concat(e));console.log("Unblock Response:",t.data),alert("User has been unblocked!"),M()}catch(t){console.error("Error unblocking user:",t.response?t.response.data:t)}}))})(e.id):(async e=>{U("Are you sure you want to block this user?",(async()=>{try{const t=await Ss.put("https://hilms.onrender.com/api/admin/block-user/".concat(e));console.log("Block Response:",t.data),alert("User has been blocked!"),M()}catch(t){console.error("Error blocking user:",t.response?t.response.data:t)}}))})(e.id),children:1===e.flag?"Unblock":"Block"}),(0,Ps.jsx)("button",{className:"admin-delete-btn",onClick:()=>(async e=>{U("Are you sure you want to delete this user?",(async()=>{try{await Ss.delete("https://hilms.onrender.com/api/admin/delete-user/".concat(e)),alert("User has been deleted!"),M()}catch(t){console.error("Error deleting user:",t)}}))})(e.id),children:"Delete"})]})]},e.id)}))})]})})]}),"manage-courses"===t&&(0,Ps.jsxs)("div",{className:"manage-courses",children:[(0,Ps.jsx)("h2",{children:"Manage Courses"}),(0,Ps.jsx)("div",{className:"admin-search-container",children:(0,Ps.jsx)("input",{type:"text",placeholder:"Search courses by title or description... \ud83d\udd0d",className:"admin-search-input",value:h,onChange:e=>p(e.target.value)})}),(0,Ps.jsx)("button",{className:"add-course-btn",onClick:()=>f("/admin/add-course"),children:"Add Course"}),(0,Ps.jsx)("button",{className:"add-careerpath-btn",onClick:()=>f("/admin/add-careerpath"),children:"Add Career Path"}),(0,Ps.jsx)("div",{className:"course-cards",children:A?Array.from({length:4}).map(((e,t)=>(0,Ps.jsx)(so,{},t))):0===l.length?(0,Ps.jsx)("p",{children:"No courses found."}):l.filter((e=>e.title.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()))).map((e=>(0,Ps.jsxs)("div",{className:"course-card",children:[(0,Ps.jsx)("img",{src:"https://hilms.onrender.com".concat(e.imageurl),alt:e.title,className:"course-image"}),(0,Ps.jsxs)("p",{className:"course-title-label",children:["Title:",(0,Ps.jsx)("span",{className:"course-title",children:e.title})]}),(0,Ps.jsxs)("p",{className:"course-description-label",children:["Description:",(0,Ps.jsx)("span",{className:"course-description",children:e.description})]}),(0,Ps.jsx)("button",{className:"admin-delete-btn",onClick:()=>(async e=>{U("Are you sure you want to delete this course?",(async()=>{try{await Ss.delete("https://hilms.onrender.com/api/admin/delete-course/".concat(e)),L()}catch(t){console.error("Error deleting course:",t)}}))})(e.id),children:"Delete Course"})]},e.id)))})]}),"approve-trainers"===t&&(0,Ps.jsxs)("div",{className:"approve-trainers",children:[(0,Ps.jsx)("h2",{children:"Approve Trainers"}),(0,Ps.jsx)("div",{className:"trainer-cards",children:T?Array.from({length:4}).map(((e,t)=>(0,Ps.jsx)(oo,{},t))):0===s.length?(0,Ps.jsx)("p",{children:"No pending trainers for approval."}):s.map((e=>(0,Ps.jsxs)("div",{className:"trainer-card",children:[e.profileImage?(0,Ps.jsx)("img",{src:e.profileImage,alt:"".concat(e.full_name,"'s profile"),className:"profile-image"}):(0,Ps.jsx)("div",{className:"initial-image",style:{background:ho(e.full_name)},children:e.full_name.split(" ").map((e=>e[0])).join("").toUpperCase()}),(0,Ps.jsx)("p",{children:(0,Ps.jsx)("strong",{children:e.full_name})}),(0,Ps.jsxs)("p",{children:["Email: ",e.email]}),(0,Ps.jsxs)("p",{children:["Phone: ",e.phone_number||"N/A"]}),(0,Ps.jsx)("button",{className:"approve-btn",onClick:()=>(async e=>{U("Are you sure you want to approve this trainer?",(async()=>{try{await Ss.put("https://hilms.onrender.com/api/admin/approve-trainer/".concat(e)),O()}catch(t){console.error("Error approving trainer:",t)}}))})(e.id),children:"Approve"}),(0,Ps.jsx)("button",{className:"decline-btn",onClick:()=>(async e=>{U("Are you sure you want to decline this trainer?",(async()=>{try{await Ss.put("https://hilms.onrender.com/api/admin/decline-trainer/".concat(e)),O()}catch(t){console.error("Error declining trainer:",t)}}))})(e.id),children:"Decline"})]},e.id)))})]}),"manage-learners"===t&&(0,Ps.jsxs)("div",{className:"manage-learners learner-progress-section",children:[(0,Ps.jsx)("h2",{children:"Learners Progress"}),F?(0,Ps.jsx)("div",{className:"admin-learner-cards",children:Array.from({length:4}).map(((e,t)=>(0,Ps.jsx)(lo,{},t)))}):0===m.length?(0,Ps.jsx)("p",{children:"No Learner data found."}):(0,Ps.jsx)("div",{className:"admin-learner-cards",children:m.map((e=>(0,Ps.jsxs)("div",{className:"admin-learner-card",children:[(0,Ps.jsx)("p",{children:(0,Ps.jsxs)("strong",{children:[e.first_name," ",e.last_name]})}),(0,Ps.jsx)("p",{children:e.email}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Courses:"})," ",e.enrolledCourses.length,(0,Ps.jsx)("button",{className:"toggle-details-button",onClick:()=>y(v===e.id?null:e.id),children:v===e.id?"Hide Details":"Show Details"})]}),v===e.id&&(0,Ps.jsx)("div",{className:"admin-course-list",children:e.enrolledCourses.map(((e,t)=>(0,Ps.jsxs)("div",{className:"admin-course-progress",children:[(0,Ps.jsx)("p",{children:(0,Ps.jsx)("strong",{children:e.courseTitle})}),(0,Ps.jsxs)("p",{children:["Chapters: ",e.totalChapters]}),(0,Ps.jsxs)("p",{children:["Total Lessons: ",e.totalLessons]}),(0,Ps.jsxs)("p",{children:["Completed Lessons: ",e.completedLessons]}),(0,Ps.jsxs)("p",{children:["Total Quizzes: ",e.totalQuizzes]}),(0,Ps.jsxs)("p",{children:["Completed Quizzes: ",e.completedQuizzes]}),(0,Ps.jsx)("div",{className:"progress-bar",children:(0,Ps.jsx)("div",{className:"progress-fill",style:{width:"".concat(e.progressPercent,"%")}})}),(0,Ps.jsxs)("p",{className:"progress-text",children:[e.progressPercent,"% completed"]})]},t)))})]},e.id)))})]}),"leaderboard"===t&&(0,Ps.jsxs)("section",{className:"admin-leaderboard-section",children:[(0,Ps.jsx)("h2",{children:"\ud83c\udfc6 Learner Leaderboard"}),w&&(0,Ps.jsx)("p",{className:"error-message",children:w}),N?(0,Ps.jsx)(co,{}):0===b.length?(0,Ps.jsx)("p",{children:"No leaderboard data available"}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("p",{className:"leaderboard-note",children:"Top 3 Learners are highlighted with badges!"}),(0,Ps.jsx)("div",{className:"leaderboard-top3",children:b.slice(0,3).map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-item top-scorer",onClick:()=>k(e),style:{cursor:"pointer"},children:[(0,Ps.jsx)("div",{className:"leaderboard-rank",children:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":t+1}),(0,Ps.jsxs)("div",{className:"leaderboard-profile",children:[(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(e.name),alt:e.name,className:"profile-avatar"}),(0,Ps.jsxs)("div",{className:"leaderboard-details",children:[(0,Ps.jsx)("h3",{children:e.name}),(0,Ps.jsxs)("p",{children:[e.totalMarks," Marks"]})]})]})]},t)))}),(0,Ps.jsx)("div",{className:"leaderboard-grid",children:b.slice(3).map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-grid-item",onClick:()=>k(e),style:{cursor:"pointer"},children:[(0,Ps.jsx)("div",{className:"grid-rank",children:t+4}),(0,Ps.jsxs)("div",{className:"grid-profile",children:[(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(e.name),alt:e.name,className:"profile-avatar"}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("h4",{children:e.name}),(0,Ps.jsxs)("p",{children:[e.totalMarks," Marks"]})]})]})]},t+3)))})]}),C&&(0,Ps.jsx)("div",{className:"learner-popup-overlay",onClick:()=>k(null),children:(0,Ps.jsxs)("div",{className:"learner-popup-card",onClick:e=>e.stopPropagation(),children:[(0,Ps.jsx)("h2",{children:C.name}),(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(C.name),alt:C.name,className:"profile-avatar"}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Email:"})," ",C.email?C.email:"Email not provided"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Phone:"})," ",C.phone?C.phone:"Phone number not provided"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Total Marks:"})," ",C.totalMarks]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Rank:"})," ",b.findIndex((e=>e.name===C.name))+1]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Courses:"})," ",(null===(e=C.enrolledCourses)||void 0===e?void 0:e.length)||0]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Date of Joined:"})," ",new Date(C.DateofJoined).toLocaleDateString()]}),(0,Ps.jsx)("button",{className:"leaderboard-close-btn",onClick:()=>k(null),children:"Close"})]})})]})]})]})},fo=()=>{const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)([]),[p,f]=(0,n.useState)(!1),[m,g]=(0,n.useState)(""),v=Z();(0,n.useEffect)((()=>{(async()=>{try{const e=await Ss.get("https://hilms.onrender.com/api/admin/trainers");h(e.data.trainers)}catch(e){console.error("Error fetching trainers:",e)}})()}),[]);return(0,Ps.jsxs)("div",{className:"add-course-container",children:[(0,Ps.jsx)("h2",{children:"Add New Course"}),(0,Ps.jsxs)("form",{className:"add-course-form",onSubmit:async t=>{if(t.preventDefault(),!e||!r||!a||!o||!c)return void g("Please fill in all fields.");const n=new FormData;n.append("title",e),n.append("name",r),n.append("description",a),n.append("trainerId",o),n.append("image",c);try{(await Ss.post("https://hilms.onrender.com/api/admin/add-course",n,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(f(!0),g(""),setTimeout((()=>{v("/admin-dashboard")}),2500))}catch(i){console.error("Error adding course:",i),g("Failed to add course. Try again.")}},children:[(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"courseTitle",children:"Course Title:"}),(0,Ps.jsx)("input",{type:"text",id:"courseTitle",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"courseName",children:"Course Name:"}),(0,Ps.jsx)("input",{type:"text",id:"courseName",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"description",children:"Description:"}),(0,Ps.jsx)("textarea",{id:"description",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"trainer",children:"Select Trainer:"}),(0,Ps.jsxs)("select",{id:"trainer",value:o,onChange:e=>l(e.target.value),required:!0,children:[(0,Ps.jsx)("option",{value:"",children:"Select a Trainer"}),u.map((e=>(0,Ps.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"image",children:"Course Image:"}),(0,Ps.jsx)("input",{type:"file",id:"image",onChange:e=>{const t=e.target.files[0];t&&t.size>5242880?alert("File size should be less than 5MB"):d(t)},required:!0})]}),(0,Ps.jsxs)("div",{className:"form-actions",children:[(0,Ps.jsx)("button",{type:"submit",className:"a-btn-submit",children:"Add Course"}),(0,Ps.jsx)("button",{type:"button",className:"a-btn-back",onClick:()=>v("/admin-dashboard"),children:"Back"})]})]}),m&&(0,Ps.jsx)("p",{className:"error-message",children:m}),p&&(0,Ps.jsx)("p",{className:"success-message",children:"Course added successfully! Redirecting..."})]})},mo=()=>(0,Ps.jsxs)("li",{className:"careerpath-skeleton",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title-list"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn-list"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn-list"})]}),go=()=>(0,Ps.jsxs)("div",{className:"careerpath-form-skeleton",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-textarea"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-subtitle"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-input"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-subtitle"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-select"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-input"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-input"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-submit"})]}),vo=e=>{let{type:t,message:r,onClose:i}=e;return(0,n.useEffect)((()=>{const e=setTimeout((()=>{i()}),3e3);return()=>clearTimeout(e)}),[i]),(0,Ps.jsx)("div",{className:"toast toast-".concat(t),children:r})},yo=()=>{const[e,t]=(0,n.useState)({title:"",description:"",roles:[""],courses:[{courseId:"",level:"",duration:"",skillsLearnt:[""]}]}),[r,i]=(0,n.useState)([]),[a,s]=(0,n.useState)(null),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null);(0,n.useEffect)((()=>{d(!0),Ss.get("https://hilms.onrender.com/api/courses").then((e=>{const t=e.data;Array.isArray(t)?i(t):Array.isArray(t.data)?i(t.data):i([])})).catch((e=>{console.error("Error fetching courses:",e),i([])})).finally((()=>d(!1)))}),[]);const p=()=>{Ss.get("https://hilms.onrender.com/api/career-paths").then((e=>{Array.isArray(e.data.data)?s(e.data.data):s([])})).catch((e=>{console.error("Error fetching career paths:",e),s([])}))};(0,n.useEffect)((()=>{p()}),[]);const f=(e,t)=>{h({type:e,text:t})},m=n=>{t(vr(vr({},e),{},{[n.target.name]:n.target.value}))},g=(n,r,i)=>{const a=[...e.courses];a[n][r]=i,t(vr(vr({},e),{},{courses:a}))},v=()=>{t({title:"",description:"",roles:[""],courses:[{courseId:"",level:"",duration:"",skillsLearnt:[""]}]})};return(0,Ps.jsxs)("div",{className:"add-careerpath-page",children:[u&&(0,Ps.jsx)(vo,{type:u.type,message:u.text,onClose:()=>h(null)}),c?(0,Ps.jsx)(go,{}):(0,Ps.jsxs)("div",{className:"careerpath-form-container",children:[(0,Ps.jsx)("h2",{children:o?"Edit Career Path":"Add Career Path"}),(0,Ps.jsxs)("form",{onSubmit:t=>{t.preventDefault(),d(!0),o?Ss.put("https://hilms.onrender.com/api/career-paths/".concat(o),e).then((()=>{l(null),v(),p(),f("success","Career path updated successfully!")})).catch((()=>f("error","Failed to update career path."))).finally((()=>d(!1))):Ss.post("https://hilms.onrender.com/api/career-paths",e).then((()=>{v(),p(),f("success","Career path added successfully!")})).catch((()=>f("error","Failed to add career path."))).finally((()=>d(!1)))},className:"careerpath-form",children:[(0,Ps.jsx)("input",{type:"text",name:"title",placeholder:"Career Path Title",value:e.title,onChange:m,required:!0}),(0,Ps.jsx)("textarea",{name:"description",placeholder:"Description",value:e.description,onChange:m,required:!0}),(0,Ps.jsx)("h4",{children:"Roles"}),e.roles.map(((n,r)=>(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("input",{type:"text",value:n,onChange:n=>((n,r)=>{const i=[...e.roles];i[n]=r,t(vr(vr({},e),{},{roles:i}))})(r,n.target.value)}),(0,Ps.jsx)("button",{type:"button",onClick:()=>(n=>{const r=e.roles.filter(((e,t)=>t!==n));t(vr(vr({},e),{},{roles:r}))})(r),children:"Remove"})]},r))),(0,Ps.jsx)("button",{type:"button",onClick:()=>{t(vr(vr({},e),{},{roles:[...e.roles,""]}))},children:"Add Role"}),(0,Ps.jsx)("h4",{children:"Courses"}),e.courses.map(((n,i)=>(0,Ps.jsxs)("div",{className:"selected-course",children:[(0,Ps.jsxs)("select",{value:n.courseId,onChange:e=>g(i,"courseId",e.target.value),required:!0,children:[(0,Ps.jsx)("option",{value:"",children:"Select Course"}),r.map((e=>(0,Ps.jsx)("option",{value:e.id,children:e.title||e.name},e.id)))]}),(0,Ps.jsx)("input",{type:"text",placeholder:"Level",value:n.level,onChange:e=>g(i,"level",e.target.value)}),(0,Ps.jsx)("input",{type:"text",placeholder:"Duration",value:n.duration,onChange:e=>g(i,"duration",e.target.value)}),(0,Ps.jsx)("h5",{children:"Skills Learnt"}),n.skillsLearnt.map(((n,r)=>(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("input",{type:"text",value:n,onChange:n=>((n,r,i)=>{const a=[...e.courses];a[n].skillsLearnt[r]=i,t(vr(vr({},e),{},{courses:a}))})(i,r,n.target.value)}),(0,Ps.jsx)("button",{type:"button",onClick:()=>((n,r)=>{const i=[...e.courses];i[n].skillsLearnt=i[n].skillsLearnt.filter(((e,t)=>t!==r)),t(vr(vr({},e),{},{courses:i}))})(i,r),children:"Remove"})]},r))),(0,Ps.jsx)("button",{type:"button",onClick:()=>(n=>{const r=[...e.courses];r[n].skillsLearnt.push(""),t(vr(vr({},e),{},{courses:r}))})(i),children:"Add Skill"}),(0,Ps.jsx)("button",{type:"button",onClick:()=>(n=>{const r=e.courses.filter(((e,t)=>t!==n));t(vr(vr({},e),{},{courses:r}))})(i),children:"Remove Course"})]},i))),(0,Ps.jsx)("button",{type:"button",onClick:()=>{t(vr(vr({},e),{},{courses:[...e.courses,{courseId:"",level:"",duration:"",skillsLearnt:[""]}]}))},children:"Add Course"}),(0,Ps.jsx)("br",{}),(0,Ps.jsx)("button",{type:"submit",children:o?"Update":"Submit"})]})]}),(0,Ps.jsxs)("div",{className:"careerpath-list-container",children:[(0,Ps.jsx)("h3",{children:"Existing Career Paths"}),null===a?(0,Ps.jsx)("ul",{children:[...Array(3)].map(((e,t)=>(0,Ps.jsx)(mo,{},t)))}):0===a.length?(0,Ps.jsx)("p",{children:"No career paths found."}):(0,Ps.jsx)("ul",{children:a.map((e=>(0,Ps.jsxs)("li",{children:[(0,Ps.jsx)("strong",{children:e.title}),(0,Ps.jsx)("button",{onClick:()=>(e=>{t({title:e.title||"",description:e.description||"",roles:Array.isArray(e.roles)&&e.roles.length?e.roles:[""],courses:Array.isArray(e.courses)&&e.courses.length?e.courses.map((e=>{var t;return{courseId:(null===(t=e.courseId)||void 0===t?void 0:t.id)||e.courseId||"",level:e.level||"",duration:e.duration||"",skillsLearnt:Array.isArray(e.skillsLearnt)&&e.skillsLearnt.length?e.skillsLearnt:[""]}})):[{courseId:"",level:"",duration:"",skillsLearnt:[""]}]}),l(e.id)})(e),children:"Edit"}),(0,Ps.jsx)("button",{onClick:()=>{return t=e.id,void Ss.delete("https://hilms.onrender.com/api/career-paths/".concat(t)).then((()=>{p(),f("success","Career path deleted successfully!")})).catch((()=>f("error","Failed to delete career path.")));var t},children:"Delete"})]},e.id)))})]})]})},bo=()=>{const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(""),[p,f]=(0,n.useState)([]),[m,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{fetch("https://hilms.onrender.com/api/courses").then((e=>e.json())).then((e=>{console.log("Fetched courses:",e),e.success&&Array.isArray(e.data)?d(e.data):(console.error("Unexpected response format:",e),d([]))})).catch((e=>{console.error("Error fetching courses:",e),d([])}))}),[]);const v=e=>{h(e),(e=>{fetch("https://hilms.onrender.com/api/learner/learners/".concat(e)).then((e=>e.json())).then((e=>{console.log("Fetched learner emails:",e),Array.isArray(e)?f(e):e.success&&Array.isArray(e.data)?f(e.data):(console.error("Unexpected response format:",e),f([]))})).catch((e=>{console.error("Error fetching learner emails:",e),f([])}))})(e)};return(0,Ps.jsxs)("div",{className:"admin-send-mail-container",children:[(0,Ps.jsx)("h1",{children:"Email Sending Form"}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"course",children:"Select Course:"}),(0,Ps.jsxs)("select",{id:"course",value:u,onChange:e=>v(e.target.value),children:[(0,Ps.jsx)("option",{value:"",children:"-- Select a Course --"}),c.length>0?c.map((e=>(0,Ps.jsx)("option",{value:e.id,children:e.title},e.id))):(0,Ps.jsx)("option",{value:"",disabled:!0,children:"No courses available"})]})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"subject",children:"Subject:"}),(0,Ps.jsx)("input",{type:"text",id:"subject",value:e,onChange:e=>t(e.target.value),placeholder:"Enter email subject"})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"message",children:"Description:"}),(0,Ps.jsx)("textarea",{id:"message",value:r,onChange:e=>i(e.target.value),placeholder:"Enter your description"})]}),(0,Ps.jsx)("button",{className:"send-mail-btn",onClick:()=>{if(!e||!r||!u)return l("All fields are required."),void s("");if(0===p.length)return void l("No Learners found for the selected course.");g(!0),console.log("Selected Course:",u),console.log("Learner Emails:",p);no("service_jtatsrq","template_44rrn4p",{subject:e,message:r,to_email:p},"8TOkSAnsc4yfF81je").then((e=>{console.log("Email sent successfully:",e),s("Emails sent successfully!"),l(""),t(""),i(""),h(""),f([])})).catch((e=>{console.error("Email sending failed:",e),l("Failed to send emails.")})).finally((()=>{g(!1)}))},disabled:m,children:m?"Sending...":"Send Mail"}),a&&(0,Ps.jsx)("p",{className:"success-message",children:a}),o&&(0,Ps.jsx)("p",{className:"error-message",children:o})]})},_o=()=>{const[e,t]=(0,n.useState)(null);return(0,Ps.jsx)("div",{className:"faq-container",children:(0,Ps.jsxs)("div",{className:"faq-main",children:[(0,Ps.jsx)("h1",{children:"Frequently Asked Questions"}),[{question:"Can I customize eLearning courses?",answer:"Yes, eLearning courses can be customized according to your needs, including content, duration, and delivery methods."},{question:"Can I download the course certificate after completing the course?",answer:"Yes, once you have completed all the course requirements, you can download your course certificate directly from your dashboard."},{question:"What should I do if I forget my password?",answer:"If you forget your password, go to the sign-in page and click on the 'Forgot Password' link. Follow the instructions to reset your password via your registered email."},{question:"Can I access the courses on mobile devices?",answer:"Yes, all courses are fully responsive and can be accessed on any device, including smartphones, tablets, and laptops, for convenient learning anytime, anywhere."},{question:"How can I enroll in a course?",answer:"To enroll in a course, simply browse through the available courses, select the one you wish to enroll in, and click the 'Enroll' button. You will need to log in or sign up to complete the enrollment process."}].map(((n,r)=>(0,Ps.jsxs)("div",{className:"faq-item ".concat(e===r?"active":""),onClick:()=>(n=>{t(e===n?null:n)})(r),children:[(0,Ps.jsxs)("div",{className:"faq-question",children:[e===r?"-":"+"," ",n.question]}),e===r&&(0,Ps.jsx)("div",{className:"faq-answer",children:n.answer})]},r)))]})})},wo=()=>(0,Ps.jsxs)("div",{className:"courses-page-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-img"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-btn"})]}),xo=()=>{const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(async()=>{s(!0);try{const e=await fetch("https://hilms.onrender.com/api/courses");if(!e.ok)throw new Error("Failed to fetch courses");const n=await e.json();t(n.data||[])}catch(e){console.error(e.message)}finally{s(!1)}})()}),[]);const o=a?e&&e.length>0?e.length:6:0;return(0,Ps.jsxs)("div",{className:"courses-page",children:[(0,Ps.jsx)("h2",{children:"Courses Page"}),(0,Ps.jsxs)("div",{className:"courses-page-sort-by",children:[(0,Ps.jsx)("span",{children:"Sort by:"}),(0,Ps.jsxs)("select",{value:r,onChange:e=>{i(e.target.value)},children:[(0,Ps.jsx)("option",{value:"",children:"Select an option"}),(0,Ps.jsx)("option",{value:"title-asc",children:"Title: A to Z"}),(0,Ps.jsx)("option",{value:"title-desc",children:"Title: Z to A"})]}),(0,Ps.jsx)("button",{onClick:()=>{const n=[...e].sort(((e,t)=>"title-asc"===r?e.title.localeCompare(t.title):"title-desc"===r?t.title.localeCompare(e.title):0));t(n)},children:"Sort"})]}),(0,Ps.jsx)("section",{className:"courses-page-section",children:(0,Ps.jsx)("div",{className:"courses-page-container-cards",children:a?Array.from({length:o}).map(((e,t)=>(0,Ps.jsx)(wo,{},t))):e.length>0?e.map((e=>(0,Ps.jsx)(Re,{to:"/course-details/".concat(e.id),className:"admin-courses-card-link",children:(0,Ps.jsxs)("div",{className:"courses-page-card",children:[(0,Ps.jsx)("img",{src:e.imageurl,alt:e.title,className:"courses-page-image"}),(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",e.trainer_name||e.instructor_name||"Unknown"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Learners:"})," ",e.enrolled_count||0]}),(0,Ps.jsx)("span",{className:"btn-primary",children:"Read More"})]})},e.id))):(0,Ps.jsx)("p",{children:"No courses available"})})})]})},Co=()=>{const[e,t]=(0,n.useState)(!0);return(0,Ps.jsxs)("div",{className:"about-container",children:[(0,Ps.jsx)("header",{className:"about-header",children:(0,Ps.jsx)("h1",{children:"About Us Page"})}),(0,Ps.jsxs)("section",{className:"about-content",children:[(0,Ps.jsxs)("div",{className:"about-left",children:[e&&(0,Ps.jsx)("div",{className:"skeleton skeleton-course-aboimg"}),(0,Ps.jsx)("img",{src:"https://hilms.onrender.com/uploads/e90af6d9-1036-48b5-ac3d-6a2391bd6009.png",alt:"Education Illustration",className:"about-image",onLoad:()=>t(!1),style:{display:e?"none":"block"}})]}),(0,Ps.jsxs)("div",{className:"about-right",children:[(0,Ps.jsx)("h2",{children:"Welcome to Learnfinity \u2013 Your Partner in Professional Growth"}),(0,Ps.jsx)("p",{children:"At Learnfinity, we believe that learning never stops. Our platform is designed for working professionals, organizations, and teams who aim to stay ahead in today\u2019s fast-paced business world."}),(0,Ps.jsx)("p",{children:"From leadership development to technical upskilling, our curated courses are crafted by industry experts to meet real-world challenges."}),(0,Ps.jsx)("p",{children:"Whether you\u2019re looking to improve your professional skills, train your workforce, or explore new career opportunities, Learnfinity provides the tools, resources, and support you need to succeed."}),(0,Ps.jsx)("p",{children:(0,Ps.jsx)("strong",{children:"Empower your career, empower your future."})}),(0,Ps.jsxs)("div",{className:"about-features",children:[(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcca"}),"Business & Leadership Training"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcbb"}),"Technology & Software Skills"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcdc"}),"Accredited Certifications"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83e\udd1d"}),"Corporate Collaboration Tools"]})]})]})]})]})},ko=()=>(0,Ps.jsxs)("div",{className:"Lcareer-path-card skeleton-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-Lcareer-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-Lcareer-levels"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-Lcareer-btn"})]});function So(e){let{paths:t=[],onReadMore:n}=e;return(0,Ps.jsx)("section",{className:"Lcareer-path-cards-container",children:t.length>0?t.map((e=>(0,Ps.jsxs)("div",{className:"Lcareer-path-card",children:[(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{className:"Lcareer-path-levels",children:[(0,Ps.jsx)("strong",{children:"Levels:"})," ",e.levelSummary||"No levels"]}),(0,Ps.jsx)("button",{className:"Lbtn-read-more",onClick:()=>n(e.id),children:"Read More"})]},e.id))):(0,Ps.jsx)("p",{children:"No career paths available"})})}const Po=e=>{let{count:t=3}=e;return(0,Ps.jsx)("div",{className:"courses-container-cards",children:Array.from({length:t}).map(((e,t)=>(0,Ps.jsx)("div",{className:"courses-card-link",children:(0,Ps.jsxs)("div",{className:"courses-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-img"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-btn"})]})},t)))})},Ao=e=>{let{count:t=6}=e;return(0,Ps.jsxs)("div",{className:"leaderboard-skeleton-wrapper",children:[(0,Ps.jsx)("div",{className:"leaderboard-top3",children:[...Array(3)].map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-item top-scorer",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-avatar-circle"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-short"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-thin"})]},t)))}),(0,Ps.jsx)("div",{className:"leaderboard-grid",children:[...Array(t-3)].map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-grid-item",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-avatar-square"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-short"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-thin"})]},t)))})]})};const Eo=function(){var e;const[t,r]=(0,n.useState)([]),[i,a]=(0,n.useState)(!0),[s,o]=(0,n.useState)([]),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[h,p]=(0,n.useState)([]),[f,m]=(0,n.useState)(!0),g=Z();return(0,n.useEffect)((()=>{(async()=>{try{const e=await Ss.get("https://hilms.onrender.com/api/career-paths");p(Array.isArray(e.data)?e.data:e.data.data||[])}catch(e){console.error("Error fetching career paths:",e),p([])}finally{m(!1)}})()}),[]),(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await Ss.get("https://hilms.onrender.com/api/learner/enrolled-courses",{headers:{Authorization:"Bearer ".concat(e)}});r(t.data.data)}catch(e){console.error("Error fetching enrolled courses:",e)}finally{a(!1)}})()}),[]),(0,n.useEffect)((()=>{(async()=>{try{const e=await Ss.get("https://hilms.onrender.com/api/learner/leaderboard");o(e.data)}catch(e){c("Failed to fetch leaderboard")}})()}),[]),(0,Ps.jsxs)("div",{className:"container",children:[(0,Ps.jsx)("section",{className:"learnerHeader",children:(0,Ps.jsxs)("div",{className:"learnerHeaderContent",children:[(0,Ps.jsx)("h1",{children:"Learner's Home Page"}),(0,Ps.jsx)("h1",{className:"learnerHeaderHeading",children:"Welcome to Learnfinity - Empowering Your Learning Journey"}),(0,Ps.jsx)(Re,{to:"/learner-dashboard/courses",children:(0,Ps.jsx)("button",{className:"learnerHeaderButton",children:"Explore Courses"})})]})}),(0,Ps.jsxs)("section",{className:"enrolled-courses-section",children:[(0,Ps.jsx)("h2",{children:"Your Enrolled Courses"}),i?(0,Ps.jsx)(Po,{count:4}):t.length>0?(0,Ps.jsx)("div",{className:"courses-container-cards",children:t.map((e=>(0,Ps.jsx)(Re,{to:"/course-interaction/".concat(e.id),className:"courses-card-link",children:(0,Ps.jsxs)("div",{className:"courses-card",children:[(0,Ps.jsx)("img",{src:e.imageurl,alt:e.title,className:"courses-image"}),(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",e.trainerFullName]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled learners:"})," ",e.enrolledCount||0]}),(0,Ps.jsx)("div",{className:"btn-primary",children:"Go to Course"})]})},e.id)))}):(0,Ps.jsx)("p",{className:"no-courses-text",children:"You have not enrolled in any courses yet."})]}),(0,Ps.jsxs)("section",{className:"leaderboard-section",children:[(0,Ps.jsx)("h2",{children:"\ud83c\udfc6 Learner Leaderboard"}),l&&(0,Ps.jsx)("p",{className:"error-message",children:l}),i?(0,Ps.jsx)(Ao,{count:11}):0===s.length?(0,Ps.jsx)("p",{children:"No leaderboard data available"}):(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsx)("p",{className:"leaderboard-note",children:"Top 3 learners are highlighted with badges!"})}),(0,Ps.jsx)("div",{className:"leaderboard-top3",children:s.slice(0,3).map(((e,t)=>{return(0,Ps.jsxs)("div",{className:"leaderboard-item top-scorer",onClick:()=>u(e),children:[(0,Ps.jsx)("div",{className:"leaderboard-rank",children:(n=t,(0===n?"\ud83e\udd47":1===n?"\ud83e\udd48":2===n?"\ud83e\udd49":"")||"".concat(t+1))}),(0,Ps.jsxs)("div",{className:"leaderboard-profile",children:[(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(e.name),alt:e.name,className:"profile-avatar"}),(0,Ps.jsxs)("div",{className:"leaderboard-details",children:[(0,Ps.jsx)("h3",{children:e.name}),(0,Ps.jsxs)("p",{children:[e.totalMarks," Marks"]})]})]})]},t);var n}))}),(0,Ps.jsx)("div",{className:"leaderboard-grid",children:s.slice(3).map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-grid-item",onClick:()=>u(e),children:[(0,Ps.jsx)("div",{className:"grid-rank",children:t+4}),(0,Ps.jsxs)("div",{className:"grid-profile",children:[(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(e.name),alt:e.name,className:"profile-avatar"}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("h4",{children:e.name}),(0,Ps.jsxs)("p",{children:[e.totalMarks," Marks"]})]})]})]},t+3)))})]}),d&&(0,Ps.jsx)("div",{className:"learner-popup-overlay",onClick:()=>u(null),children:(0,Ps.jsxs)("div",{className:"learner-popup-card",onClick:e=>e.stopPropagation(),children:[(0,Ps.jsx)("h2",{children:d.name}),(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(d.name),alt:d.name,className:"profile-avatar"}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Email:"})," ",d.email||"Email not provided"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Phone:"})," ",d.phone||"Phone number not provided"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Total Marks:"})," ",d.totalMarks]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Rank:"})," ",s.findIndex((e=>e.name===d.name))+1]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Courses:"})," ",(null===(e=d.enrolledCourses)||void 0===e?void 0:e.length)||0]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Date of Joined:"})," ",new Date(d.DateofJoined).toLocaleDateString()]}),(0,Ps.jsx)("button",{className:"leaderboard-close-btn",onClick:()=>u(null),children:"Close"})]})}),(0,Ps.jsxs)("section",{className:"Lcareer-path-section",children:[(0,Ps.jsx)("h2",{children:"Career Path Suggestions"}),(0,Ps.jsx)("p",{children:"Select your desired career to see recommended courses tailored for your goal, from beginner to advanced levels."}),f?(0,Ps.jsx)("div",{className:"Lcareer-path-cards-container",children:Array.from({length:3}).map(((e,t)=>(0,Ps.jsx)(ko,{},t)))}):(0,Ps.jsx)(So,{paths:h,onReadMore:e=>{g("/career-path/".concat(e)),window.scrollTo(0,0)}})]})]})},To=()=>(0,Ps.jsxs)("div",{className:"learner-profile-container",children:[(0,Ps.jsxs)("div",{className:"learner-profile-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]}),(0,Ps.jsxs)("div",{className:"learner-course-progress",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-section-title"}),(0,Ps.jsx)("div",{className:"course-progress-grid",children:Array.from({length:3}).map(((e,t)=>(0,Ps.jsxs)("div",{className:"course-progress-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-progress-bar"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-percent"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-details"})]},t)))})]})]}),Io=()=>{var e;const[t,r]=(0,n.useState)(null),[i,a]=(0,n.useState)(null),[s,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(!0),[f,m]=(0,n.useState)(null),g=Z();(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return m("Unauthorized: No token found"),void p(!1);const[t,n]=await Promise.all([Ss.get("https://hilms.onrender.com/api/learner/profile",{headers:{Authorization:"Bearer ".concat(e)}}),Ss.get("https://hilms.onrender.com/api/learner/progress",{headers:{Authorization:"Bearer ".concat(e)}})]);r(t.data),c(n.data.enrolledCourses)}catch(e){console.error(e),m("Failed to fetch profile or course progress")}finally{p(!1)}})()}),[]);const v=()=>{s||a(vr({},t)),o(!s)},y=e=>{const{name:t,value:n}=e.target;a((e=>vr(vr({},e),{},{[t]:n})))};return h?(0,Ps.jsx)(To,{}):f?(0,Ps.jsx)("p",{className:"error-message",children:f}):(0,Ps.jsxs)("div",{className:"learner-profile-container",children:[(0,Ps.jsx)("h1",{children:"Learner Profile"}),(0,Ps.jsx)("div",{className:"learner-profile-card",children:s?(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"First Name: "}),(0,Ps.jsx)("input",{type:"text",name:"first_name",value:i.first_name,onChange:y})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Last Name: "}),(0,Ps.jsx)("input",{type:"text",name:"last_name",value:i.last_name,onChange:y})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Email: "}),(0,Ps.jsx)("input",{type:"email",name:"email",value:i.email,disabled:!0})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Phone Number: "}),(0,Ps.jsx)("input",{type:"text",name:"phone",value:i.phone,onChange:y})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Date of Birth: "}),(0,Ps.jsx)("input",{type:"date",name:"dob",value:null===(e=i.dob)||void 0===e?void 0:e.split("T")[0],onChange:y})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Address: "}),(0,Ps.jsx)("input",{type:"text",name:"address",value:i.address,onChange:y})]}),(0,Ps.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token");if(!e)return void m("Unauthorized: No token found");await Ss.put("https://hilms.onrender.com/api/learner/profile/update",i,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),alert("Profile updated successfully!"),r(i),o(!1)}catch(e){console.error(e),m("Failed to update profile")}},children:"Save"}),(0,Ps.jsx)("button",{onClick:v,children:"Cancel"})]}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"First Name:"})," ",null===t||void 0===t?void 0:t.first_name]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Last Name:"})," ",null===t||void 0===t?void 0:t.last_name]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Email:"})," ",null===t||void 0===t?void 0:t.email]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Phone Number:"})," ",null===t||void 0===t?void 0:t.phone]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Date of Birth:"})," ",new Date(null===t||void 0===t?void 0:t.dob).toLocaleDateString()]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Address:"})," ",null===t||void 0===t?void 0:t.address]}),(0,Ps.jsx)("button",{onClick:v,children:"Edit Profile"}),(0,Ps.jsx)("button",{onClick:()=>{g("/learner-dashboard/profile/editaccount")},children:"Edit Account"})]})}),l.length>0&&(0,Ps.jsxs)("div",{className:"learner-course-progress",children:[(0,Ps.jsx)("h2",{children:"\ud83d\udcda My Course Progress"}),(0,Ps.jsx)("div",{className:"course-progress-grid",children:l.map(((e,t)=>{const n=d===t;return(0,Ps.jsxs)("div",{className:"course-progress-card",children:[(0,Ps.jsxs)("div",{className:"card-header",children:[(0,Ps.jsx)("h4",{children:e.courseTitle}),(0,Ps.jsx)("button",{className:"toggle-details",onClick:()=>u(n?null:t),children:n?"Hide Details":"Show Details"})]}),(0,Ps.jsx)("div",{className:"progress-bar",children:(0,Ps.jsx)("div",{className:"progress-fill",style:{width:"".concat(e.progressPercent,"%")}})}),(0,Ps.jsxs)("p",{className:"progress-percent",children:[e.progressPercent,"%"]}),n&&(0,Ps.jsxs)("div",{className:"card-details",children:[(0,Ps.jsxs)("p",{children:["Chapters: ",e.totalChapters]}),(0,Ps.jsxs)("p",{children:["Total Lessons: ",e.totalLessons]}),(0,Ps.jsxs)("p",{children:["Completed Lessons: ",e.completedLessons]}),(0,Ps.jsxs)("p",{children:["Total Quizzes: ",e.totalQuizzes]}),(0,Ps.jsxs)("p",{children:["Completed Quizzes: ",e.completedQuizzes]})]})]},t)}))})]})]})},Fo=()=>(0,Ps.jsxs)("div",{className:"edit-account-container",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsxs)("form",{className:"edit-account-form",children:[(0,Ps.jsx)("div",{className:"form-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"form-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"form-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"form-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]}),Ro=()=>{const e=Z(),[t,r]=(0,n.useState)({email:"",currentPassword:"",newPassword:"",confirmNewPassword:""}),[i,a]=(0,n.useState)(!0),[s,o]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return o("Unauthorized: No token found"),void a(!1);const t=await Ss.get("https://hilms.onrender.com/api/learner/profile",{headers:{Authorization:"Bearer ".concat(e)}});r((e=>vr(vr({},e),{},{email:t.data.email})))}catch(e){o("Failed to fetch profile")}finally{a(!1)}})()}),[]);const l=e=>{const{name:n,value:i}=e.target;r(vr(vr({},t),{},{[n]:i}))};return i?(0,Ps.jsx)(Fo,{}):s?(0,Ps.jsx)("p",{className:"error-message",children:s}):(0,Ps.jsxs)("div",{className:"edit-account-container",children:[(0,Ps.jsx)("h1",{children:"Edit Account"}),(0,Ps.jsxs)("form",{className:"edit-account-form",onSubmit:async n=>{if(n.preventDefault(),t.newPassword===t.confirmNewPassword)try{const n=localStorage.getItem("token");if(!n)return void o("Unauthorized: No token found");await Ss.put("https://hilms.onrender.com/api/learner/update-password",{currentPassword:t.currentPassword,newPassword:t.newPassword},{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),alert("Password updated successfully!"),e("/learner-dashboard/profile")}catch(r){o("Failed to update password")}else alert("New passwords do not match!")},children:[(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{children:"Email:"}),(0,Ps.jsx)("input",{type:"email",name:"email",value:t.email,disabled:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{children:"Current Password:"}),(0,Ps.jsx)("input",{type:"password",name:"currentPassword",value:t.currentPassword,onChange:l,required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{children:"New Password:"}),(0,Ps.jsx)("input",{type:"password",name:"newPassword",value:t.newPassword,onChange:l,required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{children:"Confirm New Password:"}),(0,Ps.jsx)("input",{type:"password",name:"confirmNewPassword",value:t.confirmNewPassword,onChange:l,required:!0})]}),(0,Ps.jsx)("button",{type:"submit",className:"update-button",children:"Update"})]}),(0,Ps.jsx)("button",{className:"back-button",onClick:()=>{e("/learner-dashboard/profile")},children:"Back to Profile"})]})},No=()=>{const[e,t]=(0,n.useState)(null);return(0,Ps.jsx)("div",{className:"faq-container",children:(0,Ps.jsxs)("div",{className:"faq-main",children:[(0,Ps.jsx)("h1",{children:"Frequently Asked Questions"}),[{question:"Can I customize eLearning courses?",answer:"Yes, eLearning courses can be customized according to your needs, including content, duration, and delivery methods."},{question:"Can I download the course certificate after completing the course?",answer:"Yes, once you have completed all the course requirements, you can download your course certificate directly from your dashboard."},{question:"What should I do if I forget my password?",answer:"If you forget your password, go to the sign-in page and click on the 'Forgot Password' link. Follow the instructions to reset your password via your registered email."},{question:"Can I access the courses on mobile devices?",answer:"Yes, all courses are fully responsive and can be accessed on any device, including smartphones, tablets, and laptops, for convenient learning anytime, anywhere."},{question:"How can I enroll in a course?",answer:"To enroll in a course, simply browse through the available courses, select the one you wish to enroll in, and click the 'Enroll' button. You will need to log in or sign up to complete the enrollment process."}].map(((n,r)=>(0,Ps.jsxs)("div",{className:"faq-item ".concat(e===r?"active":""),onClick:()=>(n=>{t(e===n?null:n)})(r),children:[(0,Ps.jsxs)("div",{className:"faq-question",children:[e===r?"-":"+"," ",n.question]}),e===r&&(0,Ps.jsx)("div",{className:"faq-answer",children:n.answer})]},r)))]})})},jo=e=>{let{count:t=6}=e;return(0,Ps.jsx)("div",{className:"learner-courses-container-cards",children:Array.from({length:t}).map(((e,t)=>(0,Ps.jsx)("div",{className:"learner-courses-card-link",children:(0,Ps.jsxs)("div",{className:"learner-courses-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-img"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-btn"})]})},t)))})},Mo=()=>{const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(new Set),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(!0),c=localStorage.getItem("token");(0,n.useEffect)((()=>{(async()=>{try{const e=await fetch("https://hilms.onrender.com/api/courses");if(!e.ok)throw new Error("Failed to fetch courses");const n=await e.json();t(n.data||[])}catch(e){console.error(e.message)}finally{l(!1)}})()}),[]),(0,n.useEffect)((()=>{c&&(async()=>{try{const e=await fetch("https://hilms.onrender.com/api/learner/enrolled-courses",{method:"GET",headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch enrolled courses");const t=await e.json(),n=new Set(t.data.map((e=>e.id)));i(n)}catch(e){console.error(e.message)}})()}),[c]);return(0,Ps.jsxs)("div",{className:"courses-page",children:[(0,Ps.jsx)("h2",{children:"Courses Page"}),(0,Ps.jsxs)("div",{className:"courses-page-sort-by",children:[(0,Ps.jsx)("span",{children:"Sort by:"}),(0,Ps.jsxs)("select",{value:a,onChange:e=>s(e.target.value),children:[(0,Ps.jsx)("option",{value:"",children:"Select an option"}),(0,Ps.jsx)("option",{value:"title-asc",children:"Title: A to Z"}),(0,Ps.jsx)("option",{value:"title-desc",children:"Title: Z to A"})]}),(0,Ps.jsx)("button",{onClick:()=>{const n=[...e].sort(((e,t)=>"title-asc"===a?e.title.localeCompare(t.title):"title-desc"===a?t.title.localeCompare(e.title):0));t(n)},children:"Sort"})]}),(0,Ps.jsx)("section",{className:"learner-courses-section",children:o?(0,Ps.jsx)(jo,{count:e.length>0?e.length:6}):(0,Ps.jsx)("div",{className:"learner-courses-container-cards",children:e.length>0?e.map((e=>(0,Ps.jsx)(Re,{to:"/course-details/".concat(e.id),className:"learner-courses-card-link",children:(0,Ps.jsxs)("div",{className:"learner-courses-card",children:[(0,Ps.jsx)("img",{src:e.imageurl,alt:e.title,className:"learner-courses-image"}),(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",e.trainer_name||e.instructor_name||"Unknown"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Learners:"})," ",e.enrolled_count||0]}),(null===r||void 0===r?void 0:r.has(e.id))&&(0,Ps.jsx)("p",{className:"learner-enrolled-label",children:"\u2714 Enrolled"}),(0,Ps.jsx)("span",{className:null!==r&&void 0!==r&&r.has(e.id)?"learner-btn-continue":"learner-btn-read-more",children:null!==r&&void 0!==r&&r.has(e.id)?"Continue Course":"Read More"})]})},e.id))):(0,Ps.jsx)("p",{children:"No courses available"})})})]})},Oo=()=>{const[e,t]=(0,n.useState)(!0);return(0,Ps.jsxs)("div",{className:"about-container",children:[(0,Ps.jsx)("header",{className:"about-header",children:(0,Ps.jsx)("h1",{children:"About Us Page"})}),(0,Ps.jsxs)("section",{className:"about-content",children:[(0,Ps.jsxs)("div",{className:"about-left",children:[e&&(0,Ps.jsx)("div",{className:"skeleton skeleton-course-aboimg"}),(0,Ps.jsx)("img",{src:"https://hilms.onrender.com/uploads/e90af6d9-1036-48b5-ac3d-6a2391bd6009.png",alt:"Education Illustration",className:"about-image",onLoad:()=>t(!1),style:{display:e?"none":"block"}})]}),(0,Ps.jsxs)("div",{className:"about-right",children:[(0,Ps.jsx)("h2",{children:"Welcome to Learnfinity \u2013 Your Partner in Professional Growth"}),(0,Ps.jsx)("p",{children:"At Learnfinity, we believe that learning never stops. Our platform is designed for working professionals, organizations, and teams who aim to stay ahead in today\u2019s fast-paced business world."}),(0,Ps.jsx)("p",{children:"From leadership development to technical upskilling, our curated courses are crafted by industry experts to meet real-world challenges."}),(0,Ps.jsx)("p",{children:"Whether you\u2019re looking to improve your professional skills, train your workforce, or explore new career opportunities, Learnfinity provides the tools, resources, and support you need to succeed."}),(0,Ps.jsx)("p",{children:(0,Ps.jsx)("strong",{children:"Empower your career, empower your future."})}),(0,Ps.jsxs)("div",{className:"about-features",children:[(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcca"}),"Business & Leadership Training"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcbb"}),"Technology & Software Skills"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcdc"}),"Accredited Certifications"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83e\udd1d"}),"Corporate Collaboration Tools"]})]})]})]})]})},Lo=e=>{let{count:t=3}=e;return(0,Ps.jsx)("div",{className:"courses-container-cards",children:Array.from({length:t}).map(((e,t)=>(0,Ps.jsx)("div",{className:"courses-card-link",children:(0,Ps.jsxs)("div",{className:"courses-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-img"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-btn"})]})},t)))})},Do=e=>{let{count:t=6}=e;return(0,Ps.jsxs)("div",{className:"leaderboard-skeleton-wrapper",children:[(0,Ps.jsx)("div",{className:"leaderboard-top3",children:[...Array(3)].map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-item top-scorer",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-avatar-circle"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-short"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-thin"})]},t)))}),(0,Ps.jsx)("div",{className:"leaderboard-grid",children:[...Array(t-3)].map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-grid-item",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-avatar-square"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-short"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-line-thin"})]},t)))})]})};const Bo=function(){var e;const[t,r]=(0,n.useState)([]),[i,a]=(0,n.useState)(!0),[s,o]=(0,n.useState)([]),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await Ss.get("https://hilms.onrender.com/api/trainer/trainer-courses",{headers:{Authorization:"Bearer ".concat(e)}});r(t.data.data)}catch(e){console.error("Error fetching courses:",e)}finally{a(!1)}})()}),[]),(0,n.useEffect)((()=>{(async()=>{try{const e=await Ss.get("https://hilms.onrender.com/api/learner/leaderboard");o(e.data)}catch(e){c("Failed to fetch leaderboard")}})()}),[]),(0,Ps.jsxs)("div",{className:"trainer-container",children:[(0,Ps.jsx)("section",{className:"trainer-header",children:(0,Ps.jsxs)("div",{className:"trainer-header-content",children:[(0,Ps.jsx)("h1",{children:"Trainer's Home Page"}),(0,Ps.jsx)("h1",{className:"trainer-header-heading",children:"Unlock Your Teaching Potential with Learnfinity"}),(0,Ps.jsx)(Re,{to:"/add-course",children:(0,Ps.jsx)("button",{className:"trainer-header-button",children:"Add Course"})})]})}),(0,Ps.jsxs)("section",{className:"trainer-teaching-courses-section",children:[(0,Ps.jsx)("h2",{children:"Your Teaching Courses"}),i?(0,Ps.jsx)(Lo,{count:3}):t.length>0?(0,Ps.jsx)("div",{className:"trainer-courses-container-cards",children:t.map((e=>(0,Ps.jsx)(Re,{to:"/trainer-dashboard/course-content/".concat(e.id),className:"trainer-courses-card-link",children:(0,Ps.jsxs)("div",{className:"trainer-courses-card",children:[(0,Ps.jsx)("img",{src:e.imageurl||"https://via.placeholder.com/150",alt:e.title,className:"trainer-courses-image"}),(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",e.trainer_name||"Not Available"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Learners:"})," ",e.enrolled_count||0]}),(0,Ps.jsx)("div",{className:"btn-primary",children:"Open Course"})]})},e.id)))}):(0,Ps.jsx)("p",{className:"trainer-no-courses-text",children:"No assigned courses found."})]}),(0,Ps.jsxs)("section",{className:"leaderboard-section",children:[(0,Ps.jsx)("h2",{children:"\ud83c\udfc6 Learner Leaderboard"}),l&&(0,Ps.jsx)("p",{className:"error-message",children:l}),i?(0,Ps.jsx)(Do,{count:11}):0===s.length?(0,Ps.jsx)("p",{children:"No leaderboard data available"}):(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsx)("p",{className:"leaderboard-note",children:"Top 3 learners are highlighted with badges!"})}),(0,Ps.jsx)("div",{className:"leaderboard-top3",children:s.slice(0,3).map(((e,t)=>{return(0,Ps.jsxs)("div",{className:"leaderboard-item top-scorer",onClick:()=>u(e),children:[(0,Ps.jsx)("div",{className:"leaderboard-rank",children:(n=t,(0===n?"\ud83e\udd47":1===n?"\ud83e\udd48":2===n?"\ud83e\udd49":"")||"".concat(t+1))}),(0,Ps.jsxs)("div",{className:"leaderboard-profile",children:[(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(e.name),alt:e.name,className:"profile-avatar"}),(0,Ps.jsxs)("div",{className:"leaderboard-details",children:[(0,Ps.jsx)("h3",{children:e.name}),(0,Ps.jsxs)("p",{children:[e.totalMarks," Marks"]})]})]})]},t);var n}))}),(0,Ps.jsx)("div",{className:"leaderboard-grid",children:s.slice(3).map(((e,t)=>(0,Ps.jsxs)("div",{className:"leaderboard-grid-item",onClick:()=>u(e),children:[(0,Ps.jsx)("div",{className:"grid-rank",children:t+4}),(0,Ps.jsxs)("div",{className:"grid-profile",children:[(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(e.name),alt:e.name,className:"profile-avatar"}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("h4",{children:e.name}),(0,Ps.jsxs)("p",{children:[e.totalMarks," Marks"]})]})]})]},t+3)))})]}),d&&(0,Ps.jsx)("div",{className:"Learner-popup-overlay",onClick:()=>u(null),children:(0,Ps.jsxs)("div",{className:"Learner-popup-card",onClick:e=>e.stopPropagation(),children:[(0,Ps.jsx)("h2",{children:d.name}),(0,Ps.jsx)("img",{src:"https://api.dicebear.com/8.x/initials/svg?seed=".concat(d.name),alt:d.name,className:"profile-avatar"}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Email:"})," ",d.email||"Email not provided"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Phone:"})," ",d.phone||"Phone number not provided"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Total Marks:"})," ",d.totalMarks]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Rank:"})," ",s.findIndex((e=>e.name===d.name))+1]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Courses:"})," ",(null===(e=d.enrolledCourses)||void 0===e?void 0:e.length)||0]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Date of Joined:"})," ",new Date(d.DateofJoined).toLocaleDateString()]}),(0,Ps.jsx)("button",{className:"leaderboard-close-btn",onClick:()=>u(null),children:"Close"})]})})]})},qo=()=>{const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(""),m=Z(),g=localStorage.getItem("token");return(0,Ps.jsxs)("div",{className:"add-course-container",children:[(0,Ps.jsx)("h2",{children:"Add New Course"}),(0,Ps.jsxs)("form",{className:"add-course-form",onSubmit:async t=>{if(t.preventDefault(),!e||!r||!a||!o)return void f("All fields are required!");const n=new FormData;n.append("title",e),n.append("name",r),n.append("description",a),n.append("image",o);try{d(!0),f(""),await Ss.post("https://hilms.onrender.com/api/trainer/add-course",n,{headers:{Authorization:"Bearer ".concat(g),"Content-Type":"multipart/form-data"}}),h("Course added successfully!"),setTimeout((()=>m("/trainer-dashboard")),2e3)}catch(l){var i,s;f((null===(i=l.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||"Error adding course")}finally{d(!1)}},children:[(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"title",children:"Course Title:"}),(0,Ps.jsx)("input",{type:"text",id:"title",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"name",children:"Course Name:"}),(0,Ps.jsx)("input",{type:"text",id:"name",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"description",children:"Description:"}),(0,Ps.jsx)("textarea",{id:"description",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"image",children:"Course Image:"}),(0,Ps.jsx)("input",{type:"file",id:"image",onChange:e=>{l(e.target.files[0])},required:!0})]}),(0,Ps.jsx)("button",{type:"submit",className:"t-btn-submit",disabled:c,children:c?"Adding...":"Add Course"})]}),(0,Ps.jsx)("button",{className:"t-btn-back",onClick:()=>m("/trainer-dashboard"),children:"Go Back"}),p&&(0,Ps.jsx)("p",{className:"error-message",children:p}),u&&(0,Ps.jsx)("p",{className:"success-message",children:u})]})},Uo=()=>(0,Ps.jsx)("div",{className:"trainer-profile-container",children:(0,Ps.jsxs)("div",{className:"trainer-profile-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-field"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]})}),Go=()=>{const[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(null),[a,s]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),u=Z();(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return d("Unauthorized: No token found"),void l(!1);const n=await Ss.get("https://hilms.onrender.com/api/trainer/profile",{headers:{Authorization:"Bearer ".concat(e)}});t(n.data)}catch(e){d("Failed to fetch profile")}finally{l(!1)}})()}),[]);const h=()=>{a||i(vr({},e)),s(!a)},p=e=>{const{name:t,value:n}=e.target;i((e=>vr(vr({},e),{},{[t]:n})))};return o?(0,Ps.jsx)(Uo,{}):c?(0,Ps.jsx)("p",{className:"error-message",children:c}):(0,Ps.jsxs)("div",{className:"trainer-profile-container",children:[(0,Ps.jsx)("h1",{children:"Trainer Profile"}),(0,Ps.jsx)("div",{className:"trainer-profile-card",children:a?(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Full Name: "}),(0,Ps.jsx)("input",{type:"text",name:"full_name",value:r.full_name,onChange:p})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Institute: "}),(0,Ps.jsx)("input",{type:"text",name:"institute",value:r.institute,onChange:p})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Phone Number: "}),(0,Ps.jsx)("input",{type:"text",name:"phone_number",value:r.phone_number,onChange:p})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("label",{children:"Email: "}),(0,Ps.jsx)("input",{type:"email",name:"email",value:r.email,disabled:!0})]}),(0,Ps.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token");if(!e)return void d("Unauthorized: No token found");const n={fullName:r.full_name,institute:r.institute,phoneNumber:r.phone_number};await Ss.put("https://hilms.onrender.com/api/trainer/profile/update",n,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),alert("Profile updated successfully!"),t(r),s(!1)}catch(e){d("Failed to update profile")}},children:"Save"}),(0,Ps.jsx)("button",{onClick:h,children:"Cancel"})]}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Full Name:"})," ",null===e||void 0===e?void 0:e.full_name]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Institute:"})," ",null===e||void 0===e?void 0:e.institute]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Phone Number:"})," ",null===e||void 0===e?void 0:e.phone_number]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Email:"})," ",null===e||void 0===e?void 0:e.email]}),(0,Ps.jsx)("button",{onClick:h,children:"Edit Profile"}),(0,Ps.jsx)("button",{onClick:()=>{u("/trainer-dashboard/profile/editaccount")},children:"Edit Account"})]})})]})},zo=()=>{const[e,t]=(0,n.useState)(!0);return(0,Ps.jsxs)("div",{className:"about-container",children:[(0,Ps.jsx)("header",{className:"about-header",children:(0,Ps.jsx)("h1",{children:"About Us Page"})}),(0,Ps.jsxs)("section",{className:"about-content",children:[(0,Ps.jsxs)("div",{className:"about-left",children:[e&&(0,Ps.jsx)("div",{className:"skeleton skeleton-course-aboimg"}),(0,Ps.jsx)("img",{src:"https://hilms.onrender.com/uploads/e90af6d9-1036-48b5-ac3d-6a2391bd6009.png",alt:"Education Illustration",className:"about-image",onLoad:()=>t(!1),style:{display:e?"none":"block"}})]}),(0,Ps.jsxs)("div",{className:"about-right",children:[(0,Ps.jsx)("h2",{children:"Welcome to Learnfinity \u2013 Your Partner in Professional Growth"}),(0,Ps.jsx)("p",{children:"At Learnfinity, we believe that learning never stops. Our platform is designed for working professionals, organizations, and teams who aim to stay ahead in today\u2019s fast-paced business world."}),(0,Ps.jsx)("p",{children:"From leadership development to technical upskilling, our curated courses are crafted by industry experts to meet real-world challenges."}),(0,Ps.jsx)("p",{children:"Whether you\u2019re looking to improve your professional skills, train your workforce, or explore new career opportunities, Learnfinity provides the tools, resources, and support you need to succeed."}),(0,Ps.jsx)("p",{children:(0,Ps.jsx)("strong",{children:"Empower your career, empower your future."})}),(0,Ps.jsxs)("div",{className:"about-features",children:[(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcca"}),"Business & Leadership Training"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcbb"}),"Technology & Software Skills"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83d\udcdc"}),"Accredited Certifications"]}),(0,Ps.jsxs)("div",{className:"feature-card",children:[(0,Ps.jsx)("span",{className:"emoji",children:"\ud83e\udd1d"}),"Corporate Collaboration Tools"]})]})]})]})]})},Ho=()=>{const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(async()=>{try{const e=await fetch("https://hilms.onrender.com/api/courses");if(!e.ok)throw new Error("Failed to fetch courses");const n=await e.json();t(n.data||[])}catch(e){console.error(e.message)}finally{s(!1)}})()}),[]);const o=a&&e&&e.length>0?e.length:a?6:0;return(0,Ps.jsxs)("div",{className:"courses-page",children:[(0,Ps.jsx)("h2",{children:"Courses Page"}),(0,Ps.jsxs)("div",{className:"courses-page-sort-by",children:[(0,Ps.jsx)("span",{children:"Sort by:"}),(0,Ps.jsxs)("select",{value:r,onChange:e=>{i(e.target.value)},children:[(0,Ps.jsx)("option",{value:"",children:"Select an option"}),(0,Ps.jsx)("option",{value:"title-asc",children:"Title: A to Z"}),(0,Ps.jsx)("option",{value:"title-desc",children:"Title: Z to A"})]}),(0,Ps.jsx)("button",{onClick:()=>{const n=[...e].sort(((e,t)=>"title-asc"===r?e.title.localeCompare(t.title):"title-desc"===r?t.title.localeCompare(e.title):0));t(n)},children:"Sort"})]}),(0,Ps.jsx)("section",{className:"courses-page-section",children:(0,Ps.jsx)("div",{className:"courses-page-container-cards",children:a?Array.from({length:o},((e,t)=>(0,Ps.jsxs)("div",{className:"courses-page-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-course-img"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-course-btn"})]},t))):e.length>0?e.map((e=>(0,Ps.jsx)(Re,{to:"/course-details/".concat(e.id),className:"trainer-courses-card-link",children:(0,Ps.jsxs)("div",{className:"courses-page-card",children:[(0,Ps.jsx)("img",{src:e.imageurl,alt:e.title,className:"courses-page-image"}),(0,Ps.jsx)("h3",{children:e.title}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",e.trainer_name||e.instructor_name||"Unknown"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Learners:"})," ",e.enrolled_count||0]}),(0,Ps.jsx)("span",{className:"btn-primary",children:"Read More"})]})},e.id))):(0,Ps.jsx)("p",{children:"No courses available"})})})]})},Wo=()=>{const[e,t]=(0,n.useState)(null);return(0,Ps.jsx)("div",{className:"faq-container",children:(0,Ps.jsxs)("div",{className:"faq-main",children:[(0,Ps.jsx)("h1",{children:"Frequently Asked Questions"}),[{question:"Can I customize eLearning courses?",answer:"Yes, eLearning courses can be customized according to your needs, including content, duration, and delivery methods."},{question:"Can I download the course certificate after completing the course?",answer:"Yes, once you have completed all the course requirements, you can download your course certificate directly from your dashboard."},{question:"What should I do if I forget my password?",answer:"If you forget your password, go to the sign-in page and click on the 'Forgot Password' link. Follow the instructions to reset your password via your registered email."},{question:"Can I access the courses on mobile devices?",answer:"Yes, all courses are fully responsive and can be accessed on any device, including smartphones, tablets, and laptops, for convenient learning anytime, anywhere."},{question:"How can I enroll in a course?",answer:"To enroll in a course, simply browse through the available courses, select the one you wish to enroll in, and click the 'Enroll' button. You will need to log in or sign up to complete the enrollment process."}].map(((n,r)=>(0,Ps.jsxs)("div",{className:"faq-item ".concat(e===r?"active":""),onClick:()=>(n=>{t(e===n?null:n)})(r),children:[(0,Ps.jsxs)("div",{className:"faq-question",children:[e===r?"-":"+"," ",n.question]}),e===r&&(0,Ps.jsx)("div",{className:"faq-answer",children:n.answer})]},r)))]})})},Vo=()=>(0,Ps.jsxs)("div",{className:"Tedit-account-container1",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsxs)("form",{className:"Tedit-account-form",children:[(0,Ps.jsx)("div",{className:"Tform-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"Tform-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"Tform-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"Tform-group",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-field"})}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]}),Ko=()=>{const e=Z(),[t,r]=(0,n.useState)({email:"",currentPassword:"",newPassword:"",confirmNewPassword:""}),[i,a]=(0,n.useState)(!0),[s,o]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return o("Unauthorized: No token found"),void a(!1);const t=await Ss.get("https://hilms.onrender.com/api/trainer/profile",{headers:{Authorization:"Bearer ".concat(e)}});r((e=>vr(vr({},e),{},{email:t.data.email})))}catch(e){o("Failed to fetch profile")}finally{a(!1)}})()}),[]);const l=e=>{const{name:n,value:i}=e.target;r(vr(vr({},t),{},{[n]:i}))};return i?(0,Ps.jsx)(Vo,{}):s?(0,Ps.jsx)("p",{className:"error-message",children:s}):(0,Ps.jsxs)("div",{className:"Tedit-account-container",children:[(0,Ps.jsx)("h1",{children:"Edit Trainer Profile"}),(0,Ps.jsxs)("form",{className:"Tedit-account-form",onSubmit:async n=>{if(n.preventDefault(),t.newPassword===t.confirmNewPassword)try{const n=localStorage.getItem("token");if(!n)return void o("Unauthorized: No token found");await Ss.put("https://hilms.onrender.com/api/trainer/update-password",{currentPassword:t.currentPassword,newPassword:t.newPassword},{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),alert("Password updated successfully!"),e("/trainer-dashboard/profile")}catch(r){o("Failed to update password")}else alert("New passwords do not match!")},children:[(0,Ps.jsxs)("div",{className:"Tform-group",children:[(0,Ps.jsx)("label",{children:"Email:"}),(0,Ps.jsx)("input",{type:"email",name:"email",value:t.email,onChange:l,disabled:!0})]}),(0,Ps.jsxs)("div",{className:"Tform-group",children:[(0,Ps.jsx)("label",{children:"Current Password:"}),(0,Ps.jsx)("input",{type:"password",name:"currentPassword",value:t.currentPassword,onChange:l,required:!0})]}),(0,Ps.jsxs)("div",{className:"Tform-group",children:[(0,Ps.jsx)("label",{children:"New Password:"}),(0,Ps.jsx)("input",{type:"password",name:"newPassword",value:t.newPassword,onChange:l,required:!0})]}),(0,Ps.jsxs)("div",{className:"Tform-group",children:[(0,Ps.jsx)("label",{children:"Confirm New Password:"}),(0,Ps.jsx)("input",{type:"password",name:"confirmNewPassword",value:t.confirmNewPassword,onChange:l,required:!0})]}),(0,Ps.jsx)("button",{type:"submit",className:"Tupdate-button",children:"Update"})]}),(0,Ps.jsx)("button",{className:"Tback-button",onClick:()=>{e("/trainer-dashboard/profile")},children:"Back to Profile"})]})},Yo=()=>(0,Ps.jsxs)("div",{className:"course-content-container",children:[(0,Ps.jsxs)("div",{className:"sidebar",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-btn-tab"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn-tab"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn-tab"})]}),(0,Ps.jsxs)("div",{className:"content-container",children:[(0,Ps.jsx)("div",{className:"tab-content-container",children:(0,Ps.jsxs)("div",{className:"course-content-box",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title-large"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-paragraph"}),(0,Ps.jsxs)("div",{className:"course-stats",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-small-box1"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-small-box2"})]})]})}),(0,Ps.jsx)("div",{className:"course-actions",children:(0,Ps.jsxs)("div",{className:"course-content-box",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title-medium"}),(0,Ps.jsxs)("div",{className:"action-buttons",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-action-btn"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-action-btn"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-action-btn"})]})]})})]})]});const Xo=function(){var e;const{courseId:t}=$(),r=Z(),[i,a]=(0,n.useState)(null),[s,o]=(0,n.useState)(!0),[l,c]=(0,n.useState)("overview");return(0,n.useEffect)((()=>{(async()=>{try{const e=await Ss.get("https://hilms.onrender.com/api/courses/".concat(t));a(e.data.data)}catch(e){console.error("Error fetching course details:",e)}finally{o(!1)}})()}),[t]),s?(0,Ps.jsx)(Yo,{}):i?(0,Ps.jsxs)("div",{className:"course-content-container",children:[(0,Ps.jsxs)("div",{className:"left-sidebar",children:[(0,Ps.jsx)("button",{className:"overview"===l?"active":"",onClick:()=>c("overview"),children:"Overview"}),(0,Ps.jsx)("button",{className:"instructor"===l?"active":"",onClick:()=>c("instructor"),children:"Instructor"}),(0,Ps.jsx)("button",{className:"reviews"===l?"active":"",onClick:()=>c("reviews"),children:"Reviews"})]}),(0,Ps.jsxs)("div",{className:"content-container",children:[(0,Ps.jsxs)("div",{className:"tab-content-container",children:["overview"===l&&(0,Ps.jsxs)("div",{className:"tab-content",children:[(0,Ps.jsx)("h2",{children:i.title}),(0,Ps.jsx)("p",{children:i.description}),(0,Ps.jsxs)("div",{className:"course-stats",children:[(0,Ps.jsxs)("div",{className:"Trainer-ratings",children:["\u2b50 ",i.averageRating||0,"/5 (",i.reviewCount||0," Reviews)"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:i.enrolled_count||0})," Enrolled Learners"]})]})]}),"instructor"===l&&(0,Ps.jsxs)("div",{className:"tab-content instructor",children:[(0,Ps.jsx)("h2",{children:(null===(e=i.trainer)||void 0===e?void 0:e.fullName)||"Unknown Instructor"}),(0,Ps.jsx)("p",{children:i.trainer?"".concat(i.trainer.fullName," is a dedicated educator committed to academic excellence.  \n                      They bring years of expertise and a passion for teaching.  \n                      Known for their engaging and insightful approach to education.  \n                      They inspire Learners through innovative and practical learning.  \n                      A respected mentor, shaping future professionals with dedication."):"No instructor bio available."})]}),"reviews"===l&&(0,Ps.jsxs)("div",{className:"tab-content reviews",children:[(0,Ps.jsx)("h3",{children:"Learner Reviews"}),Array.isArray(i.reviews)&&i.reviews.length>0?i.reviews.map(((e,t)=>(0,Ps.jsxs)("div",{className:"review-item",children:[(0,Ps.jsx)("p",{className:"review-name",children:(0,Ps.jsx)("strong",{children:e.learnerName})}),(0,Ps.jsxs)("p",{className:"review-rating",children:["Rating: ",e.rating," \u2b50"]}),(0,Ps.jsx)("p",{className:"review-comment",children:e.comment})]},t))):(0,Ps.jsx)("p",{children:"No reviews yet."})]})]}),(0,Ps.jsx)("div",{className:"course-actions",children:(0,Ps.jsxs)("div",{className:"course-content-box",children:[(0,Ps.jsx)("h3",{children:"Course Content"}),(0,Ps.jsxs)("div",{className:"action-buttons",children:[(0,Ps.jsx)("button",{onClick:()=>r("/course/edit/".concat(t)),className:"action-btn edit",children:"Edit"}),(0,Ps.jsx)("button",{onClick:()=>r("/course/upload/".concat(t)),className:"action-btn upload",children:"Upload"}),(0,Ps.jsx)("button",{onClick:()=>r("/course/addquiz/".concat(t)),className:"action-btn quiz",children:"Add Quiz"})]})]})})]})]}):(0,Ps.jsx)("p",{children:"Course not found."})},Jo=()=>{const{courseId:e}=$(),t=Z(),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[p,f]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{const t=(await Ss.get("https://hilms.onrender.com/api/courses/".concat(e))).data.data;i(t.title),s(t.name),l(t.description)}catch(t){f("Error fetching course details."),console.error(t)}})()}),[e]);return(0,Ps.jsxs)("div",{className:"edit-course-container",children:[(0,Ps.jsx)("h2",{children:"Edit Course"}),(0,Ps.jsxs)("form",{className:"edit-course-form",onSubmit:async n=>{if(n.preventDefault(),!r||!a||!o)return f("Please fill in all the fields before submitting the form."),void h(!1);try{const n=new FormData;n.append("title",r),n.append("name",a),n.append("description",o),c&&n.append("image",c),await Ss.put("https://hilms.onrender.com/api/courses/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}}),h(!0),f(""),setTimeout((()=>{t("/Trainer-dashboard/course-content/".concat(e))}),2e3)}catch(i){f("Error updating course."),console.error(i)}},children:[(0,Ps.jsxs)("div",{className:"edit-form-group",children:[(0,Ps.jsx)("label",{htmlFor:"courseTitle",children:"Course Title:"}),(0,Ps.jsx)("input",{type:"text",id:"courseTitle",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"edit-form-group",children:[(0,Ps.jsx)("label",{htmlFor:"courseName",children:"Course Name:"}),(0,Ps.jsx)("input",{type:"text",id:"courseName",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"edit-form-group",children:[(0,Ps.jsx)("label",{htmlFor:"description",children:"Description:"}),(0,Ps.jsx)("textarea",{id:"description",value:o,onChange:e=>l(e.target.value),required:!0})]}),(0,Ps.jsxs)("div",{className:"edit-form-group",children:[(0,Ps.jsx)("label",{htmlFor:"image",children:"Course Image:"}),(0,Ps.jsx)("input",{type:"file",id:"image",onChange:e=>{d(e.target.files[0])}})]}),(0,Ps.jsx)("button",{type:"submit",className:"edit-btn-submit",children:"Save Changes"})]}),p&&(0,Ps.jsx)("p",{className:"edit-error-message",children:p}),(0,Ps.jsx)("button",{onClick:()=>{t("/Trainer-dashboard/course-content/".concat(e))},className:"edit-btn-back",children:"Go Back"}),u&&(0,Ps.jsx)("p",{className:"edit-success-message",children:"Course updated successfully! Redirecting..."})]})};const Qo=function(){const{courseId:e}=$(),t=Z(),[r,i]=(0,n.useState)([{chapterName:"",lessons:[{number:"",title:"",description:"",video:null}]}]),a=(e,t,n,a)=>{const s=[...r];s[e].lessons[t][n]=a,i(s)};return(0,n.useEffect)((()=>{(async()=>{try{const t=(await Ss.get("https://hilms.onrender.com/api/courses/".concat(e,"/chapters"))).data.map((e=>({id:e.id,chapterName:e.name,lessons:e.lessons.map((e=>({id:e.id,number:e.number||"",title:e.title||"",description:e.description||"",videoUrl:e.videoUrl?"https://hilms.onrender.com/".concat(e.videoUrl):""})))})));i(t)}catch(t){console.error("Error fetching chapters",t)}})()}),[e]),(0,Ps.jsxs)("div",{className:"upload-container",children:[(0,Ps.jsx)("h1",{children:"Upload Chapters and Lessons"}),(0,Ps.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const i=new FormData;i.append("courseId",e),i.append("chapters",JSON.stringify(r.map((e=>({chapterId:e.id||null,chapterName:e.chapterName,lessons:e.lessons.map((e=>({lessonId:e.id||null,number:e.number,title:e.title,description:e.description,videoUrl:e.video?e.video.name:e.videoUrl||""})))}))))),r.forEach((e=>{e.lessons.forEach((e=>{e.video&&i.append("videos",e.video)}))}));try{await Ss.post("https://hilms.onrender.com/api/courses/upload",i,{headers:{"Content-Type":"multipart/form-data"}}),alert("Chapters and lessons uploaded successfully!"),t("/trainer-dashboard/course-content/".concat(e))}catch(a){console.error("Error uploading data",a),alert("Failed to upload data")}},children:[r.map(((t,n)=>(0,Ps.jsxs)("div",{className:"chapter-container",children:[(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{htmlFor:"chapterName-".concat(n),children:"Chapter Name"}),(0,Ps.jsx)("input",{type:"text",id:"chapterName-".concat(n),value:t.chapterName,onChange:e=>((e,t)=>{const n=[...r];n[e].chapterName=t,i(n)})(n,e.target.value),required:!0}),(0,Ps.jsx)("button",{type:"button",className:"upload-btn remove",onClick:()=>(async(e,t,n,r)=>{try{await Ss.delete("https://hilms.onrender.com/api/courses/".concat(e,"/chapters/").concat(t)),n(r.filter((e=>e.id!==t))),alert("Chapter removed successfully!")}catch(i){console.error("Error removing chapter:",i.message),alert("Failed to remove chapter.")}})(e,t.id,i,r),children:"Remove Chapter"})]}),(0,Ps.jsxs)("div",{className:"lessons-container",children:[(0,Ps.jsx)("h3",{children:"Lessons"}),t.lessons.map(((s,o)=>(0,Ps.jsxs)("div",{className:"lesson-item",children:[(0,Ps.jsx)("input",{type:"text",placeholder:"Lesson Number",value:s.number,onChange:e=>a(n,o,"number",e.target.value),required:!0}),(0,Ps.jsx)("input",{type:"text",placeholder:"Lesson Title",value:s.title,onChange:e=>a(n,o,"title",e.target.value),required:!0}),(0,Ps.jsx)("textarea",{placeholder:"Lesson Description",value:s.description,onChange:e=>a(n,o,"description",e.target.value),required:!0}),(0,Ps.jsx)("input",{type:"file",accept:".jpeg,.jpg,.png,.gif,.webp,.mp4,.mpeg,.mov,.pdf,.doc,.docx,.ppt,.pptx",onChange:e=>((e,t,n)=>{if(!n)return;const a=[...r],s=URL.createObjectURL(n);a[e].lessons[t].video=n,a[e].lessons[t].videoUrl=s,i(a)})(n,o,e.target.files[0])}),s.videoUrl?s.videoUrl.match(/\.(mp4|mov|mpeg)$/i)?(0,Ps.jsx)("video",{controls:!0,width:"250",src:s.videoUrl,className:"lesson-video-preview",children:"Your browser does not support the video tag."}):s.videoUrl.match(/\.(jpe?g|png|gif|webp)$/i)?(0,Ps.jsx)("img",{src:s.videoUrl,alt:"Uploaded Preview",width:"250"}):(0,Ps.jsx)("a",{href:s.videoUrl,target:"_blank",rel:"noopener noreferrer",children:"\ud83d\udcc4 View Document"}):(0,Ps.jsx)("p",{children:"No file uploaded"}),(0,Ps.jsx)("button",{type:"button",className:"upload-btn remove",onClick:()=>(async(e,t,n,r,i)=>{try{await Ss.delete("https://hilms.onrender.com/api/courses/".concat(e,"/chapters/").concat(t,"/lessons/").concat(n)),r(i.map((e=>(e.id===t&&(e.lessons=e.lessons.filter((e=>e.id!==n))),e)))),alert("Lesson removed successfully!")}catch(a){console.error("Error removing lesson:",a.message),alert("Failed to remove lesson.")}})(e,t.id,s.id,i,r),children:"Remove Lesson"})]},o))),(0,Ps.jsx)("button",{type:"button",className:"upload-btn add",onClick:()=>(e=>{const t=[...r];t[e].lessons.push({number:"",title:"",description:"",video:null}),i(t)})(n),children:"Add Lesson"})]})]},n))),(0,Ps.jsx)("button",{type:"button",className:"upload-btn add",onClick:()=>{i([...r,{chapterName:"",lessons:[{number:"",title:"",description:"",video:null}]}])},children:"Add Chapter"}),(0,Ps.jsx)("button",{type:"submit",className:"upload-btn submit",children:"Submit"}),(0,Ps.jsx)("button",{type:"button",className:"upload-btn back",onClick:()=>{t("/trainer-dashboard/course-content/".concat(e))},children:"Back"})]})]})},Zo=()=>{const e=Z(),{courseId:t}=$(),[r,i]=(0,n.useState)(""),[a,s]=(0,n.useState)([{question:"",options:["","","",""],correctAnswer:""}]);(0,n.useEffect)((()=>{(async()=>{try{const e=(await Ss.get("/api/courses/".concat(t,"/get-quiz"))).data;e&&(i(e.title),s(e.questions.map((e=>({question:e.question,options:e.options,correctAnswer:e.answer})))))}catch(e){console.error("Error fetching quiz:",e)}})()}),[t]);const o=(e,t,n)=>{const r=[...a];if("question"===t)r[e].question=n;else if("correctAnswer"===t)r[e].correctAnswer=n;else{const i=parseInt(t,10);r[e].options[i]=n}s(r)};return(0,Ps.jsxs)("div",{className:"add-quiz-container",children:[(0,Ps.jsx)("h1",{children:r?"Edit Quiz":"Add Quiz"}),(0,Ps.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{await Ss.post("/api/courses/".concat(t,"/add-quiz"),{title:r,questions:a.map((e=>({question:e.question,options:e.options,answer:e.correctAnswer,marks:1})))}),alert("Quiz added successfully!"),e("/Trainer-dashboard/course-content/".concat(t))}catch(i){console.error("Error adding quiz:",i),alert("Failed to add quiz")}},children:[(0,Ps.jsxs)("div",{className:"form-group",children:[(0,Ps.jsx)("label",{children:"Enter Quiz Title"}),(0,Ps.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Enter quiz title",required:!0})]}),a.map(((e,t)=>(0,Ps.jsxs)("div",{className:"question-group",children:[(0,Ps.jsxs)("h3",{children:["Question ",t+1]}),(0,Ps.jsx)("input",{type:"text",value:e.question,onChange:e=>o(t,"question",e.target.value),placeholder:"Enter your question",required:!0}),["A","B","C","D"].map(((n,r)=>(0,Ps.jsxs)("div",{className:"option-group",children:[(0,Ps.jsxs)("label",{children:["Option ",n]}),(0,Ps.jsx)("input",{type:"text",value:e.options[r],onChange:e=>o(t,r.toString(),e.target.value),placeholder:"Enter option ".concat(n),required:!0})]},r))),(0,Ps.jsx)("label",{children:"Correct Answer"}),(0,Ps.jsx)("input",{type:"text",value:e.correctAnswer,onChange:e=>o(t,"correctAnswer",e.target.value),placeholder:"Enter correct answer",required:!0})]},t))),(0,Ps.jsx)("button",{type:"button",onClick:()=>{s([...a,{question:"",options:["","","",""],correctAnswer:""}])},className:"add-question-btn",children:"Add Question"}),(0,Ps.jsx)("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to delete this quiz?"))try{await Ss.delete("/api/courses/".concat(t,"/delete-quiz")),alert("Quiz deleted successfully!"),e("/Trainer-dashboard/course-content/".concat(t))}catch(n){console.error("Error deleting quiz:",n),alert("Failed to delete quiz")}},className:"delete-quiz-btn",children:"Delete Quiz"}),(0,Ps.jsxs)("div",{className:"button-group",children:[(0,Ps.jsx)("button",{type:"button",onClick:()=>e("/Trainer-dashboard/course-content/".concat(t)),className:"back-btn",children:"Back"}),(0,Ps.jsx)("button",{type:"submit",className:"submit-btn",children:"Save Quiz"})]})]})]})};var $o=__webpack_require__(237);const el=e=>{let{fileUrl:t}=e;return(0,Ps.jsx)("div",{style:{height:"600px",border:"1px solid #ccc",marginTop:"10px"},children:(0,Ps.jsx)($o.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,Ps.jsx)($o.Viewer,{fileUrl:t})})})},tl=()=>(0,Ps.jsxs)("div",{className:"skeleton-course-interaction",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-video"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-description"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-instructor"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-learners"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-chapters-title"}),(0,Ps.jsx)("div",{className:"skeleton-accordion",children:[...Array(2)].map(((e,t)=>(0,Ps.jsxs)("div",{className:"skeleton-chapter",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-line short"}),[...Array(2)].map(((e,t)=>(0,Ps.jsx)("div",{className:"skeleton skeleton-line"},t)))]},t)))})]}),nl=()=>{var e;const{courseId:t}=$(),[r,i]=(0,n.useState)(null),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(0),[b,_]=(0,n.useState)(""),[w,x]=(0,n.useState)(0),[C,k]=(0,n.useState)(""),[S,P]=(0,n.useState)(!1),[A,E]=(0,n.useState)(!1),T=async e=>{try{const t=localStorage.getItem("token");await Ss.put("/api/course-interaction/complete-lesson",{lessonId:e},{headers:{Authorization:"Bearer ".concat(t)}}),l([...o,e])}catch(t){console.error("Failed to mark lesson as complete",t)}};(0,n.useEffect)((()=>{(async()=>{try{var e;const n=localStorage.getItem("token"),r=await Ss.get("/api/course-interaction/".concat(t),{headers:{Authorization:"Bearer ".concat(n)}}),a=vr(vr({},r.data),{},{chapters:(null===(e=r.data.chapters)||void 0===e?void 0:e.map((e=>vr(vr({},e),{},{lessons:e.lessons||[]}))))||[]});i(a),l(r.data.completedLessons||[])}catch(a){var n,r;s((null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to fetch course")}})()}),[t]);const I=(0,n.useCallback)((async()=>{try{const e=localStorage.getItem("token"),n=await Ss.get("/api/course-interaction/quiz/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});h(n.data)}catch(e){console.error("Failed to fetch quiz",e)}}),[t]);(0,n.useEffect)((()=>{r&&r.chapters.every((e=>e.lessons.every((e=>o.includes(e.lesson_id)))))&&(f(!0),I())}),[r,o,I]);const F=async(e,n)=>{try{const r=localStorage.getItem("token");await Ss.post("/api/course-interaction/submit-quiz",{quizId:u.id,courseId:t,chapterId:u.chapterId,score:e,totalMarks:n},{headers:{Authorization:"Bearer ".concat(r)}});const i=e/n*100;y(i),i>=60?(alert("\u2705 Congratulations! You passed with ".concat(i.toFixed(2),"%.")),g(!0)):(alert("\u274c You scored ".concat(i.toFixed(2),"%. Minimum 60% required. Please try again.")),g(!1))}catch(a){var r,i;console.error("Failed to submit quiz attempt:",(null===(r=a.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||a.message)}};return a?(0,Ps.jsx)("p",{className:"courseinteraction-error",children:a}):r?(0,Ps.jsxs)("div",{className:"courseinteraction-page",children:[(0,Ps.jsx)("h1",{children:r.title}),(0,Ps.jsx)("img",{src:r.imageurl,alt:r.title,style:{width:"300px",borderRadius:"10px"}}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Description:"})," ",r.description]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Instructor:"})," ",(null===(e=r.trainer)||void 0===e?void 0:e.fullName)||"Unknown"]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Enrolled Learners:"})," ",r.enrolled_count||0]}),(0,Ps.jsx)("h2",{className:"courseinteraction-chapters-title",children:"Chapters"}),r.chapters.map(((e,t)=>(0,Ps.jsxs)("div",{className:"courseinteraction-chapter",children:[(0,Ps.jsxs)("h3",{className:"courseinteraction-chapter-title",children:["Chapter ",t+1,": ",e.name]}),(0,Ps.jsx)("ul",{className:"courseinteraction-lessons",children:e.lessons.map(((e,t)=>(0,Ps.jsxs)("li",{className:"courseinteraction-lesson",children:[(0,Ps.jsxs)("p",{onClick:()=>{var e;d(c===(e=t)?null:e)},className:"courseinteraction-lesson-title",children:[(0,Ps.jsxs)("strong",{children:["Lesson ",e.number||t+1,":"]})," ",e.title,o.includes(e.lesson_id)&&" \u2714\ufe0f"]}),c===t&&(0,Ps.jsxs)("div",{className:"courseinteraction-lesson-details",children:[(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Description:"})," ",e.description||"No description available."]}),e.videoUrl&&(()=>{const t=(e=>{if(!e)return null;const t=e.split(".").pop().toLowerCase();return["mp4","webm","mov"].includes(t)?"video":"pdf"===t?"pdf":["doc","docx"].includes(t)?"docx":["ppt","pptx"].includes(t)?"pptx":"other"})(e.videoUrl),n="https://hilms.onrender.com/".concat(e.videoUrl.replace(/\\/g,"/"));switch(t){case"video":return(0,Ps.jsxs)("video",{width:"400",controls:!0,controlsList:"nodownload",onEnded:()=>T(e.lesson_id),children:[(0,Ps.jsx)("source",{src:n,type:"video/mp4"}),"Your browser does not support the video tag."]});case"pdf":return(0,Ps.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Ps.jsx)("h4",{children:"\ud83d\udcc4 PDF Document"}),(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(el,{fileUrl:n}),!o.includes(e._id)&&(0,Ps.jsx)("button",{style:{marginTop:"10px"},onClick:()=>T(e._id),children:"Mark as Read"})]})]});case"docx":case"ppt":case"pptx":return(0,Ps.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Ps.jsx)("h4",{children:"\ud83d\udcc4 Document Preview"}),(0,Ps.jsxs)(Ps.Fragment,{children:["localhost"===window.location.hostname?(0,Ps.jsxs)("div",{style:{color:"red"},children:["\u2757 Cannot preview documents on localhost. ",(0,Ps.jsx)("br",{}),(0,Ps.jsx)("a",{href:n,download:!0,target:"_blank",rel:"noopener noreferrer",children:"Click here to download and view the document."})]}):(0,Ps.jsx)("iframe",{src:"https://view.officeapps.live.com/op/embed.aspx?src=".concat(encodeURIComponent(n)),width:"100%",height:"500px",frameBorder:"0",title:"Office File Viewer"}),!o.includes(e._id)&&(0,Ps.jsx)("button",{style:{marginTop:"10px"},onClick:()=>T(e._id),children:"Mark as Read"})]})]});default:return(0,Ps.jsx)("p",{children:"\u26a0\ufe0f Unsupported file format"})}})()]})]},e.lesson_id)))})]},e._id))),p&&u&&(0,Ps.jsxs)("div",{className:"courseinteraction-quiz",children:[(0,Ps.jsxs)("h2",{children:["Quiz: ",u.title]}),(0,Ps.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=0;const n=u.questions.length;u.questions.forEach(((n,r)=>{var i,a;(null===(i=e.target["question-".concat(r)])||void 0===i||null===(a=i.value)||void 0===a?void 0:a.trim())===n.answer.trim()&&t++})),F(t,n)},children:[(u.questions||[]).map(((e,t)=>(0,Ps.jsxs)("div",{className:"quiz-question",children:[(0,Ps.jsxs)("p",{children:[t+1,". ",e.question]}),(e.options||[]).map(((n,r)=>{const i=String.fromCharCode(65+r);return(0,Ps.jsxs)("label",{children:[(0,Ps.jsx)("input",{type:"radio",name:"question-".concat(t),value:"".concat(i,") ").concat(n),required:!0}),i,") ",n]},"".concat(e.id,"-").concat(r))}))]},e.id))),(0,Ps.jsx)("button",{type:"submit",className:"quiz-submit",children:"Submit Quiz"})]}),v>0&&(0,Ps.jsxs)("p",{className:"quiz-score ".concat(v>=60?"pass":"fail"),children:["Your Score: ",v,"% ",v>=60?"\u2705 Passed!":"\u274c Failed!"]})]}),m&&(0,Ps.jsxs)("div",{className:"courseinteraction-review",children:[(0,Ps.jsx)("h2",{children:"Leave a Review"}),(0,Ps.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await Ss.post("/api/course-interaction/submit-review",{courseId:r.id,learnerName:b,rating:w,comment:C},{headers:{Authorization:"Bearer ".concat(e)}});alert(t.data.message),P(!0),v>=60&&E(!0)}catch(i){var t,n;console.error("Failed to submit review:",(null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||i.message),alert("Failed to submit review. Please try again.")}},children:[(0,Ps.jsxs)("label",{children:["Name:",(0,Ps.jsx)("input",{type:"text",value:b,onChange:e=>_(e.target.value),required:!0})]}),(0,Ps.jsxs)("label",{children:["Rating:",(0,Ps.jsx)("div",{className:"rating-stars",children:[1,2,3,4,5].map((e=>(0,Ps.jsx)("span",{onClick:()=>x(e),style:{cursor:"pointer",color:e<=w?"gold":"gray"},children:"\u2605"},e)))})]}),(0,Ps.jsxs)("label",{children:["Comment:",(0,Ps.jsx)("textarea",{placeholder:"Share your thoughts...",rows:"4",cols:"50",value:C,onChange:e=>k(e.target.value),required:!0})]}),(0,Ps.jsx)("button",{type:"submit",children:"Submit Review"})]}),S&&(0,Ps.jsx)("p",{className:"review-submitted",children:"Thank you for your feedback! Your review has been submitted."})]}),A&&(0,Ps.jsxs)("div",{className:"certificate-section",children:[(0,Ps.jsx)("h2",{children:"Congratulations!"}),(0,Ps.jsx)("p",{children:"You have passed the exam and completed the review. You can now download your certificate."}),(0,Ps.jsx)("button",{className:"download-certificate-button",onClick:()=>(async()=>{try{const e=localStorage.getItem("token"),n=await Ss.get("/api/course-interaction/download-certificate/".concat(t),{headers:{Authorization:"Bearer ".concat(e)},responseType:"blob"}),i=window.URL.createObjectURL(new Blob([n.data])),a=document.createElement("a");a.href=i,a.setAttribute("download","Certificate-".concat(r.title,".pdf")),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}catch(i){var e,n;console.error("Failed to download certificate:",(null===(e=i.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||i.message),alert("Failed to download certificate. Please try again.")}})(),children:"Download Certificate"})]})]}):(0,Ps.jsx)(tl,{})},rl=()=>(0,Ps.jsxs)("section",{className:"career-detail-scontainer",children:[(0,Ps.jsxs)("header",{className:"career-path-sheader-page",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-title"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-meta"})]}),(0,Ps.jsx)("h2",{className:"section-stitle",children:(0,Ps.jsx)("div",{className:"skeleton skeleton-section-title"})}),(0,Ps.jsx)("div",{className:"course-list",children:[1,2].map((e=>(0,Ps.jsxs)("div",{className:"career-scourse-card",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-image"}),(0,Ps.jsxs)("div",{className:"course-info",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-ctitle"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-meta"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-block"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-block"})]})]},e)))}),(0,Ps.jsxs)("div",{className:"career-sdetail-buttons",children:[(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"}),(0,Ps.jsx)("div",{className:"skeleton skeleton-btn"})]})]}),il=()=>{var e,t;const{pathId:r}=$(),i=Z(),[a,s]=(0,n.useState)(null),[o,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)([]);if((0,n.useEffect)((()=>{window.scrollTo(0,0);(async()=>{try{const e=await fetch("https://hilms.onrender.com/api/career-paths/".concat(r));if(!e.ok)throw new Error("Failed to fetch career path");const t=await e.json();if(s(t.data),"learner"===localStorage.getItem("role")){const e=localStorage.getItem("token"),t=await fetch("https://hilms.onrender.com/api/learner/progress",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();d(e.enrolledCourses)}}}catch(e){console.error(e.message)}finally{l(!1)}})()}),[r]),o)return(0,Ps.jsx)(rl,{});if(!a)return(0,Ps.jsxs)("div",{className:"career-not-found",children:[(0,Ps.jsx)("h2",{children:"Career Path Not Found"}),(0,Ps.jsx)("button",{onClick:()=>i(-1),className:"btn btn-back",children:"Go Back"})]});const u=c.length>0&&a.courses.every((e=>c.some((t=>t.courseTitle===e.courseId.title&&100===Number(t.progressPercent)))));return(0,Ps.jsxs)("section",{className:"career-detail-container",children:[(0,Ps.jsxs)("header",{className:"career-path-header-page",children:[(0,Ps.jsx)("h1",{children:a.title}),(0,Ps.jsx)("p",{className:"career-detail-description",children:a.description}),(0,Ps.jsx)("div",{className:"career-meta",children:(null===(e=a.roles)||void 0===e?void 0:e.length)>0&&(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Roles:"})," ",a.roles.join(", ")]})})]}),(0,Ps.jsx)("h2",{className:"section-title",children:"Courses"}),(0,Ps.jsx)("div",{className:"course-list",children:null===(t=a.courses)||void 0===t?void 0:t.map(((e,t)=>{var n,r,i;const a=e.courseId;let s=null;"learner"===localStorage.getItem("role")&&(s=c.find((e=>e.courseTitle===a.title)));const o=100===Number(null===(n=s)||void 0===n?void 0:n.progressPercent);return(0,Ps.jsxs)("div",{className:"career-course-card ".concat(o?"completed-card":""),children:[(0,Ps.jsx)("img",{src:a.imageurl,alt:a.title,className:"course-img"}),(0,Ps.jsxs)("div",{className:"course-info",children:[(0,Ps.jsx)("h3",{children:a.title}),s&&(0,Ps.jsxs)("div",{className:"progress-container",children:[(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Progress:"})," ",s.progressPercent,"%"]}),(0,Ps.jsx)("div",{className:"career-progress-bar",children:(0,Ps.jsx)("div",{className:"progress-fill",style:{width:"".concat(s.progressPercent,"%")}})})]}),o&&(0,Ps.jsx)("span",{className:"completed-badge",children:"\u2705 Course Completed"}),(0,Ps.jsx)("p",{children:a.description}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Level:"})," ",e.level]}),(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Duration:"})," ",e.duration]}),(null===(r=e.skillsLearnt)||void 0===r?void 0:r.length)>0&&(0,Ps.jsxs)("p",{children:[(0,Ps.jsx)("strong",{children:"Skills Learnt:"})," ",e.skillsLearnt.join(", ")]}),a.trainer&&(0,Ps.jsx)("div",{className:"trainer-info-path",children:(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("strong",{children:"Trainer Name: "}),a.trainer.full_name]})}),(null===(i=a.chapters)||void 0===i?void 0:i.length)>0&&(0,Ps.jsxs)("div",{className:"chapters",children:[(0,Ps.jsx)("h4",{children:"Chapters"}),(0,Ps.jsx)("ol",{children:a.chapters.map((e=>{var t;return(0,Ps.jsxs)("li",{children:[(0,Ps.jsx)("strong",{children:e.name}),(null===(t=e.lessons)||void 0===t?void 0:t.length)>0&&(0,Ps.jsx)("ul",{className:"lessons",children:e.lessons.map((e=>(0,Ps.jsxs)("li",{children:[e.title," (",e.duration,")"]},e.id)))})]},e.id)}))})]})]})]},t)}))}),(0,Ps.jsxs)("div",{className:"career-detail-buttons",children:[(0,Ps.jsx)("button",{onClick:()=>i(-1),className:"btn btn-back",children:"Back to Career Paths"}),"learner"===localStorage.getItem("role")?u?(0,Ps.jsx)("div",{className:"all-completed-text",children:"\ud83c\udf89 All Courses Completed"}):(0,Ps.jsx)(Re,{to:"/learner-dashboard/courses",className:"btn btn-go-courses",children:"Go to Courses"}):(0,Ps.jsx)(Re,{to:"/signup",className:"btn btn-join-now",children:"Join Now"})]})]})},al=Ss.create({baseURL:"https://hilms.onrender.com"});const sl=function(){const[e,t]=(0,n.useState)(!!localStorage.getItem("adminToken")),[r,i]=(0,n.useState)(!!localStorage.getItem("learnerToken")),[a,s]=(0,n.useState)(!!localStorage.getItem("trainerToken")),[o,l]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=()=>{t(!!localStorage.getItem("adminToken")),i(!!localStorage.getItem("learnerToken")),s(!!localStorage.getItem("trainerToken"))};window.addEventListener("storage",e);const n=setInterval(e,500);return()=>{window.removeEventListener("storage",e),clearInterval(n)}}),[]),(0,n.useEffect)((()=>{(async()=>{const e=await(async()=>{try{return(await al.get("/api/test")).data}catch(e){return console.error("Error fetching test message:",e),null}})();l(e?e.message:"Failed to fetch data")})()}),[]),(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Es,{isAdmin:e,isTrainer:a,isLearner:r}),(0,Ps.jsxs)(be,{children:[(0,Ps.jsx)(ve,{path:"/",element:(0,Ps.jsx)(Ns,{})}),(0,Ps.jsx)(ve,{path:"/courses",element:(0,Ps.jsx)(Ms,{})}),(0,Ps.jsx)(ve,{path:"/about",element:(0,Ps.jsx)(Os,{})}),(0,Ps.jsx)(ve,{path:"/faq",element:(0,Ps.jsx)(Ls,{})}),(0,Ps.jsx)(ve,{path:"/terms",element:(0,Ps.jsx)(Ds,{})}),(0,Ps.jsx)(ve,{path:"/privacy",element:(0,Ps.jsx)(Bs,{})}),(0,Ps.jsx)(ve,{path:"/signin",element:(0,Ps.jsx)(qs,{})}),(0,Ps.jsx)(ve,{path:"/signup",element:(0,Ps.jsx)(Us,{})}),(0,Ps.jsx)(ve,{path:"/microsoft-login",element:(0,Ps.jsx)(As,{})}),(0,Ps.jsx)(ve,{path:"/course-details/:courseId",element:(0,Ps.jsx)(zs,{})}),(0,Ps.jsx)(ve,{path:"/trainer-signup",element:(0,Ps.jsx)(Hs,{})}),(0,Ps.jsx)(ve,{path:"/forgot-password",element:(0,Ps.jsx)(ro,{})}),(0,Ps.jsx)(ve,{path:"/reset-password",element:(0,Ps.jsx)(io,{})}),(0,Ps.jsx)(ve,{path:"/course-interaction/:courseId",element:(0,Ps.jsx)(nl,{})}),(0,Ps.jsx)(ve,{path:"/career-path/:pathId",element:(0,Ps.jsx)(il,{})}),(0,Ps.jsx)(ve,{path:"/api-test",element:(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("h1",{children:"Backend API Test"}),(0,Ps.jsx)("p",{children:o})]})}),e&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(ve,{path:"/admin-dashboard",element:(0,Ps.jsx)(po,{})}),(0,Ps.jsx)(ve,{path:"/admin/add-course",element:(0,Ps.jsx)(fo,{})}),(0,Ps.jsx)(ve,{path:"/admin/add-careerpath",element:(0,Ps.jsx)(yo,{})}),(0,Ps.jsx)(ve,{path:"/admin/send-mail",element:(0,Ps.jsx)(bo,{})}),(0,Ps.jsx)(ve,{path:"/admin/faq",element:(0,Ps.jsx)(_o,{})}),(0,Ps.jsx)(ve,{path:"/admin/courses",element:(0,Ps.jsx)(xo,{})}),(0,Ps.jsx)(ve,{path:"/admin/about",element:(0,Ps.jsx)(Co,{})})]}),r&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(ve,{path:"/learner-dashboard",element:(0,Ps.jsx)(Eo,{})}),(0,Ps.jsx)(ve,{path:"/learner-dashboard/profile",element:(0,Ps.jsx)(Io,{})}),(0,Ps.jsx)(ve,{path:"/learner-dashboard/profile/editaccount",element:(0,Ps.jsx)(Ro,{})}),(0,Ps.jsx)(ve,{path:"/learner-dashboard/faq",element:(0,Ps.jsx)(No,{})}),(0,Ps.jsx)(ve,{path:"/learner-dashboard/courses",element:(0,Ps.jsx)(Mo,{})}),(0,Ps.jsx)(ve,{path:"/learner-dashboard/about",element:(0,Ps.jsx)(Oo,{})})]}),a&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(ve,{path:"/trainer-dashboard",element:(0,Ps.jsx)(Bo,{})}),(0,Ps.jsx)(ve,{path:"/add-course",element:(0,Ps.jsx)(qo,{})}),(0,Ps.jsx)(ve,{path:"/course/edit/:courseId",element:(0,Ps.jsx)(Jo,{})}),(0,Ps.jsx)(ve,{path:"/course/upload/:courseId",element:(0,Ps.jsx)(Qo,{})}),(0,Ps.jsx)(ve,{path:"/course/addquiz/:courseId",element:(0,Ps.jsx)(Zo,{})}),(0,Ps.jsx)(ve,{path:"/trainer-dashboard/course-content/:courseId",element:(0,Ps.jsx)(Xo,{})}),(0,Ps.jsx)(ve,{path:"/trainer-dashboard/profile",element:(0,Ps.jsx)(Go,{})}),(0,Ps.jsx)(ve,{path:"/trainer-dashboard/profile/editaccount",element:(0,Ps.jsx)(Ko,{})}),(0,Ps.jsx)(ve,{path:"/trainer-dashboard/about",element:(0,Ps.jsx)(zo,{})}),(0,Ps.jsx)(ve,{path:"/trainer-dashboard/courses",element:(0,Ps.jsx)(Ho,{})}),(0,Ps.jsx)(ve,{path:"/trainer-dashboard/faq",element:(0,Ps.jsx)(Wo,{})})]}),(0,Ps.jsx)(ve,{path:"*",element:(0,Ps.jsx)(ge,{to:r?"/learner-dashboard":e?"/admin-dashboard":a?"/trainer-dashboard":"/signin"})})]}),(0,Ps.jsx)(Ts,{})]})},ol="AAD",ll="OIDC",cl="EAR",dl="none",ul="client_info_decoding_error",hl="client_info_empty_error",pl="token_parsing_error",fl="null_or_empty_token",ml="endpoints_resolution_error",gl="network_error",vl="openid_config_error",yl="hash_not_deserialized",bl="invalid_state",_l="state_mismatch",wl="state_not_found",xl="nonce_mismatch",Cl="auth_time_not_found",kl="max_age_transpired",Sl="multiple_matching_tokens",Pl="multiple_matching_accounts",Al="multiple_matching_appMetadata",El="request_cannot_be_made",Tl="cannot_remove_empty_scope",Il="cannot_append_scopeset",Fl="empty_input_scopeset",Rl="device_code_polling_cancelled",Nl="device_code_expired",jl="device_code_unknown_error",Ml="no_account_in_silent_request",Ol="invalid_cache_record",Ll="invalid_cache_environment",Dl="no_account_found",Bl="no_crypto_object",ql="unexpected_credential_type",Ul="invalid_assertion",Gl="invalid_client_credential",zl="token_refresh_required",Hl="user_timeout_reached",Wl="token_claims_cnf_required_for_signedjwt",Vl="authorization_code_missing_from_server_response",Kl="binding_key_not_removed",Yl="end_session_endpoint_not_supported",Xl="key_id_missing",Jl="no_network_connectivity",Ql="user_canceled",Zl="missing_tenant_id_error",$l="method_not_implemented",ec="nested_app_auth_bridge_disabled",tc={[ul]:"The client info could not be parsed/decoded correctly",[hl]:"The client info was empty",[pl]:"Token cannot be parsed",[fl]:"The token is null or empty",[ml]:"Endpoints cannot be resolved",[gl]:"Network request failed",[vl]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[yl]:"The hash parameters could not be deserialized",[bl]:"State was not the expected format",[_l]:"State mismatch error",[wl]:"State not found",[xl]:"Nonce mismatch error",[Cl]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[kl]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Sl]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Pl]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Al]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[El]:"Token request cannot be made without authorization code or refresh token.",[Tl]:"Cannot remove null or empty scope from ScopeSet",[Il]:"Cannot append ScopeSet",[Fl]:"Empty input ScopeSet cannot be processed",[Rl]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Nl]:"Device code is expired.",[jl]:"Device code stopped polling for unknown reasons.",[Ml]:"Please pass an account object, silent flow is not supported without account information",[Ol]:"Cache record object was null or undefined.",[Ll]:"Invalid environment when attempting to create cache entry",[Dl]:"No account found in cache for given key.",[Bl]:"No crypto object detected.",[ql]:"Unexpected credential type.",[Ul]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Gl]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[zl]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Hl]:"User defined timeout for device code polling reached",[Wl]:"Cannot generate a POP jwt if the token_claims are not populated",[Vl]:"Server response does not contain an authorization code to proceed",[Kl]:"Could not remove the credential's binding key from storage.",[Yl]:"The provided authority does not support logout",[Xl]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Jl]:"No network connectivity. Check your internet connection.",[Ql]:"User cancelled the flow.",[Zl]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[$l]:"This method has not been implemented",[ec]:"The nested app auth bridge is disabled"};class nc extends Jt{constructor(e,t){super(e,t?"".concat(tc[e],": ").concat(t):tc[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,nc.prototype)}}function rc(e,t){return new nc(e,t)}const ic={createNewGuid:()=>{throw rc($l)},base64Decode:()=>{throw rc($l)},base64Encode:()=>{throw rc($l)},base64UrlEncode:()=>{throw rc($l)},encodeKid:()=>{throw rc($l)},async getPublicKeyThumbprint(){throw rc($l)},async removeTokenBindingKey(){throw rc($l)},async clearKeystore(){throw rc($l)},async signJwt(){throw rc($l)},async hashString(){throw rc($l)}},ac="@azure/msal-common",sc="15.6.0";function oc(e,t){const n=function(e){if(!e)throw rc(fl);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw rc(pl);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(r){throw rc(pl)}}function lc(e,t){if(0===t||Date.now()-3e5>e+t)throw rc(kl)}function cc(){return Math.round((new Date).getTime()/1e3)}function dc(e){return e.getTime()/1e3}function uc(e){return e?new Date(1e3*Number(e)):new Date}function hc(e,t){const n=Number(e)||0;return cc()+t>n}function pc(e){return[yc(e),bc(e),_c(e),wc(e),xc(e)].join(ft).toLowerCase()}function fc(e,t,n,r,i){return{credentialType:gt.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:i}}function mc(e,t,n,r,i,a,s,o,l,c,d,u,h,p,f){var m,g;const v={homeAccountId:e,credentialType:gt.ACCESS_TOKEN,secret:n,cachedAt:cc().toString(),expiresOn:s.toString(),extendedExpiresOn:o.toString(),environment:t,clientId:r,realm:i,target:a,tokenType:d||Pt.BEARER};if(u&&(v.userAssertionHash=u),c&&(v.refreshOn=c.toString()),p&&(v.requestedClaims=p,v.requestedClaimsHash=f),(null===(m=v.tokenType)||void 0===m?void 0:m.toLowerCase())!==Pt.BEARER.toLowerCase())switch(v.credentialType=gt.ACCESS_TOKEN_WITH_AUTH_SCHEME,v.tokenType){case Pt.POP:const e=oc(n,l);if(null===e||void 0===e||null===(g=e.cnf)||void 0===g||!g.kid)throw rc(Wl);v.keyId=e.cnf.kid;break;case Pt.SSH:v.keyId=h}return v}function gc(e,t,n,r,i,a,s){const o={credentialType:gt.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return a&&(o.userAssertionHash=a),i&&(o.familyId=i),s&&(o.expiresOn=s.toString()),o}function vc(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function yc(e){return[e.homeAccountId,e.environment].join(ft).toLowerCase()}function bc(e){const t=e.credentialType===gt.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(ft).toLowerCase()}function _c(e){return(e.target||"").toLowerCase()}function wc(e){return(e.requestedClaimsHash||"").toLowerCase()}function xc(e){return e.tokenType&&e.tokenType.toLowerCase()!==Pt.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function Cc(){return cc()+_t}function kc(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function Sc(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function Pc(e){return e.expiresAt<=cc()}const Ac="redirect_uri_empty",Ec="claims_request_parsing_error",Tc="authority_uri_insecure",Ic="url_parse_error",Fc="empty_url_error",Rc="empty_input_scopes_error",Nc="invalid_prompt_value",jc="invalid_claims",Mc="token_request_empty",Oc="logout_request_empty",Lc="invalid_code_challenge_method",Dc="pkce_params_missing",Bc="invalid_cloud_discovery_metadata",qc="invalid_authority_metadata",Uc="untrusted_authority",Gc="missing_ssh_jwk",zc="missing_ssh_kid",Hc="missing_nonce_authentication_header",Wc="invalid_authentication_header",Vc="cannot_set_OIDCOptions",Kc="cannot_allow_platform_broker",Yc="authority_mismatch",Xc={[Ac]:"A redirect URI is required for all calls, and none has been set.",[Ec]:"Could not parse the given claims request object.",[Tc]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ic]:"URL could not be parsed into appropriate segments.",[Fc]:"URL was empty or null.",[Rc]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Nc]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[jc]:"Given claims parameter must be a stringified JSON object.",[Mc]:"Token request was empty and not found in cache.",[Oc]:"The logout request was null or undefined.",[Lc]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Dc]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Bc]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[qc]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Uc]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Gc]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[zc]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Hc]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Wc]:"Invalid authentication header provided",[Vc]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Kc]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Yc]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Jc extends Jt{constructor(e){super(e,Xc[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Jc.prototype)}}function Qc(e){return new Jc(e)}class Zc{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(Zg){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach((e=>{if(e.trim()){const[n,i]=e.split(/=(.+)/g,2);n&&i&&(t[r(n)]=r(i))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(Zg){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class $c{constructor(e){const t=e?Zc.trimArrayEntries([...e]):[],n=t?Zc.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw Qc(Rc);this.scopes=new Set,n.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||Le.EMPTY_STRING).split(" ");return new $c(t)}static createSearchScopes(e){const t=new $c(e);return t.containsOnlyOIDCScopes()?t.removeScope(Le.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new $c(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e))))}containsOnlyOIDCScopes(){let e=0;return ze.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(Zg){throw rc(Il)}}removeScope(e){if(!e)throw rc(Tl);this.scopes.delete(e.trim())}removeOIDCScopes(){ze.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw rc(Fl);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw rc(Fl);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return Le.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function ed(e,t){if(!e)throw rc(hl);try{const n=t(e);return JSON.parse(n)}catch(Zg){throw rc(ul)}}function td(e){if(!e)throw rc(ul);const t=e.split(mt,2);return{uid:t[0],utid:t.length<2?Le.EMPTY_STRING:t[1]}}function nd(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const rd=["isHomeTenant"],id=["isHomeTenant"];function ad(e,t){return!!e&&!!t&&e===t.split(".")[1]}function sd(e,t,n,r){if(r){const{oid:t,sub:n,tid:i,name:a,tfp:s,acr:o}=r,l=i||s||o||"";return{tenantId:l,localAccountId:t||n||"",name:a,isHomeTenant:ad(l,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:ad(n,e)}}function od(e,t,n,r){let i=e;if(t){const{isHomeTenant:n}=t,r=nd(t,rd);i=vr(vr({},e),r)}if(n){const t=sd(e.homeAccountId,e.localAccountId,e.tenantId,n),{isHomeTenant:a}=t,s=nd(t,id);return i=vr(vr(vr({},i),s),{},{idTokenClaims:n,idToken:r}),i}return i}const ld=0,cd=1,dd=2,ud=3;function hd(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class pd{generateAccountId(){return[this.homeAccountId,this.environment].join(ft).toLowerCase()}generateAccountKey(){return pd.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(ft).toLowerCase()}static createAccount(e,t,n){var r,i,a,s,o,l,c,d;const u=new pd;let h;t.authorityType===cd?u.authorityType=ht:t.protocolMode===ll?u.authorityType=pt:u.authorityType=ut,e.clientInfo&&n&&(h=ed(e.clientInfo,n)),u.clientInfo=e.clientInfo,u.homeAccountId=e.homeAccountId,u.nativeAccountId=e.nativeAccountId;const p=e.environment||t&&t.getPreferredCache();if(!p)throw rc(Ll);u.environment=p,u.realm=(null===(r=h)||void 0===r?void 0:r.utid)||hd(e.idTokenClaims)||"",u.localAccountId=(null===(i=h)||void 0===i?void 0:i.uid)||(null===(a=e.idTokenClaims)||void 0===a?void 0:a.oid)||(null===(s=e.idTokenClaims)||void 0===s?void 0:s.sub)||"";const f=(null===(o=e.idTokenClaims)||void 0===o?void 0:o.preferred_username)||(null===(l=e.idTokenClaims)||void 0===l?void 0:l.upn),m=null!==(c=e.idTokenClaims)&&void 0!==c&&c.emails?e.idTokenClaims.emails[0]:null;if(u.username=f||m||"",u.name=(null===(d=e.idTokenClaims)||void 0===d?void 0:d.name)||"",u.cloudGraphHostName=e.cloudGraphHostName,u.msGraphHost=e.msGraphHost,e.tenantProfiles)u.tenantProfiles=e.tenantProfiles;else{const t=sd(e.homeAccountId,u.localAccountId,u.realm,e.idTokenClaims);u.tenantProfiles=[t]}return u}static createFromAccountInfo(e,t,n){var r;const i=new pd;return i.authorityType=e.authorityType||pt,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=t,i.msGraphHost=n,i.tenantProfiles=Array.from((null===(r=e.tenantProfiles)||void 0===r?void 0:r.values())||[]),i}static generateHomeAccountId(e,t,n,r,i){if(t!==cd&&t!==dd){if(e)try{const t=ed(e,r.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(Zg){}n.warning("No client info in response")}return(null===i||void 0===i?void 0:i.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},i=t.idTokenClaims||{};r=n.iat===i.iat&&n.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function fd(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function md(e){if(!e||e.indexOf("=")<0)return null;try{const t=fd(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch(Zg){throw rc(yl)}return null}function gd(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=new Array;return e.forEach(((e,i)=>{!t&&n&&i in n?r.push("".concat(i,"=").concat(e)):r.push("".concat(i,"=").concat(encodeURIComponent(e)))})),r.join("&")}class vd{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Qc(Fc);e.includes("#")||(this._urlString=vd.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Zc.endsWith(t,"?")?t=t.slice(0,-1):Zc.endsWith(t,"?/")&&(t=t.slice(0,-2)),Zc.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(Zg){throw Qc(Ic)}if(!e.HostNameAndPort||!e.PathSegments)throw Qc(Ic);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Qc(Tc)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return vd.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==Qe&&n[0]!==Ze||(n[0]=e),vd.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Qc(Ic);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter((e=>e&&e.length>0)),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Qc(Ic);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===Le.FORWARD_SLASH){const n=new vd(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new vd(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!md(e)}}const yd={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},bd={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},_d=new Set;function wd(e,t,n,r){if(null===r||void 0===r||r.trace("getAliasesFromMetadata called with source: ".concat(n)),e&&t){const i=xd(t,e);if(i)return null===r||void 0===r||r.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(n,", returning aliases")),i.aliases;null===r||void 0===r||r.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(n))}return null}function xd(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}bd.metadata.forEach((e=>{e.aliases.forEach((e=>{_d.add(e)}))}));const Cd="cache_quota_exceeded",kd="cache_error_unknown",Sd={[Cd]:"Exceeded cache storage capacity.",[kd]:"Unexpected error occurred when using cache storage."};class Pd extends Error{constructor(e,t){const n=t||(Sd[e]?Sd[e]:Sd[kd]);super("".concat(e,": ").concat(n)),Object.setPrototypeOf(this,Pd.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class Ad{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(ac,sc),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort((e=>e.idTokenClaims?-1:1))[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,null===t||void 0===t?void 0:t.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,n,r){let i,a=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const s=this.getIdToken(e,t,n.tenantId);return s&&(i=oc(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(i,r))?null:(a=od(e,n,i,null===s||void 0===s?void 0:s.secret),a)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let i=r.tenantProfiles||new Map;const a=this.getTokenKeys();if(t){const e=i.get(t);if(!e)return[];i=new Map([[t,e]])}const s=[];return i.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(r,a,e,n);t&&s.push(t)})),s}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw rc(Ol);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==(null===n||void 0===n?void 0:n.idToken)&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==(null===n||void 0===n?void 0:n.accessToken)&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==(null===n||void 0===n?void 0:n.refreshToken)&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(Zg){var r,i;if(null===(r=this.commonLogger)||void 0===r||r.error("CacheManager.saveCacheRecord: failed"),Zg instanceof Error){var a,s;if(null===(a=this.commonLogger)||void 0===a||a.errorPii("CacheManager.saveCacheRecord: ".concat(Zg.message),t),"QuotaExceededError"===Zg.name||"NS_ERROR_DOM_QUOTA_REACHED"===Zg.name||Zg.message.includes("exceeded the quota"))throw null===(s=this.commonLogger)||void 0===s||s.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new Pd(Cd);throw new Pd(Zg.name,Zg.message)}throw null===(i=this.commonLogger)||void 0===i||i.errorPii("CacheManager.saveCacheRecord: ".concat(Zg),t),new Pd(kd)}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),i=$c.fromString(e.target),a=[];r.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const t=this.getAccessTokenCredential(e);if(t&&this.credentialMatchesFilter(t,n)){$c.fromString(t.target).intersectingScopeSets(i)&&a.push(this.removeAccessToken(e))}})),await Promise.all(a),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach((t=>{var r;if(!this.isAccountKey(t,e.homeAccountId))return;const i=this.getAccount(t,this.commonLogger);if(!i)return;if(e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId))return;if(e.username&&!this.matchUsername(i.username,e.username))return;if(e.environment&&!this.matchEnvironment(i,e.environment))return;if(e.realm&&!this.matchRealm(i,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const a={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},s=null===(r=i.tenantProfiles)||void 0===r?void 0:r.filter((e=>this.tenantProfileMatchesFilter(e,a)));s&&0===s.length||n.push(i)})),n}isAccountKey(e,t,n){return!(e.split(ft).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(ft).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(gt.ID_TOKEN.toLowerCase())&&-1===t.indexOf(gt.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(gt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(gt.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(gt.REFRESH_TOKEN.toLowerCase())>-1){const e="".concat(gt.REFRESH_TOKEN).concat(ft).concat(this.clientId).concat(ft),n="".concat(gt.REFRESH_TOKEN).concat(ft).concat(yt).concat(ft);if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===gt.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===Pt.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))})),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)})),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach((e=>{0===e.indexOf(n)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)})),await Promise.all(r)}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===gt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Pt.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(n){throw rc(Kl)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=pd.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,i){this.commonLogger.trace("CacheManager - getIdToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:gt.ID_TOKEN,clientId:this.clientId,realm:n},s=this.getIdTokensByFilter(a,t),o=s.size;if(o<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(o>1){let t=s;if(!n){const n=new Map;s.forEach(((t,r)=>{t.realm===e.tenantId&&n.set(r,t)}));const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),s.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),r&&i&&r.addFields({multiMatchedID:s.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),s.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,vr({clientId:this.clientId},e)))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)})),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,i,a){this.commonLogger.trace("CacheManager - getAccessToken called");const s=$c.createSearchScopes(t.scopes),o=t.authenticationScheme||Pt.BEARER,l=o&&o.toLowerCase()!==Pt.BEARER.toLowerCase()?gt.ACCESS_TOKEN_WITH_AUTH_SCHEME:gt.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:r||e.tenantId,target:s,tokenType:o,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=n&&n.accessToken||this.getTokenKeys().accessToken,u=[];d.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,c)&&u.push(t)}}));const h=u.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),u.forEach((e=>{this.removeAccessToken(pc(e))})),i&&a&&i.addFields({multiMatchedAT:u.length},a),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),u[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)})),n}getRefreshToken(e,t,n,r,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a=t?yt:void 0,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:gt.REFRESH_TOKEN,clientId:this.clientId,familyId:a},o=n&&n.refreshToken||this.getTokenKeys().refreshToken,l=[];o.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,s)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,s)&&l.push(t)}}));const c=l.length;return c<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(c>1&&r&&i&&r.addFields({multiMatchedRT:c},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((e=>n[e])),i=r.length;if(i<1)return null;if(i>1)throw rc(Al);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==yt)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var n;return!(t.toLowerCase()!==(null===(n=e.name)||void 0===n?void 0:n.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){var i;const a=new vd(r).getUrlComponents().HostNameAndPort;n=wd(a,null===(i=e.cloudDiscoveryMetadata)||void 0===i?void 0:i.metadata,wt,t)||wd(a,bd.metadata,kt,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var n;return!((null===(n=e.realm)||void 0===n?void 0:n.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==gt.ACCESS_TOKEN&&e.credentialType!==gt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return $c.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(vt)}isAuthorityMetadata(e){return-1!==e.indexOf(bt)}generateAuthorityMetadataCacheKey(e){return"".concat(bt,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class Ed extends Ad{async setAccount(){throw rc($l)}getAccount(){throw rc($l)}async setIdTokenCredential(){throw rc($l)}getIdTokenCredential(){throw rc($l)}async setAccessTokenCredential(){throw rc($l)}getAccessTokenCredential(){throw rc($l)}async setRefreshTokenCredential(){throw rc($l)}getRefreshTokenCredential(){throw rc($l)}setAppMetadata(){throw rc($l)}getAppMetadata(){throw rc($l)}setServerTelemetry(){throw rc($l)}getServerTelemetry(){throw rc($l)}setAuthorityMetadata(){throw rc($l)}getAuthorityMetadata(){throw rc($l)}getAuthorityMetadataKeys(){throw rc($l)}setThrottlingCache(){throw rc($l)}getThrottlingCache(){throw rc($l)}removeItem(){throw rc($l)}getKeys(){throw rc($l)}getAccountKeys(){throw rc($l)}getTokenKeys(){throw rc($l)}}const Td={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Id={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:cr.Info,correlationId:Le.EMPTY_STRING},Fd={claimsBasedCachingEnabled:!1},Rd={async sendGetRequestAsync(){throw rc($l)},async sendPostRequestAsync(){throw rc($l)}},Nd={sku:Le.SKU,version:sc,cpu:Le.EMPTY_STRING,os:Le.EMPTY_STRING},jd={clientSecret:Le.EMPTY_STRING,clientAssertion:void 0},Md={azureCloudInstance:dl,tenant:"".concat(Le.DEFAULT_COMMON_TENANT)},Od={application:{appName:"",appVersion:""}};function Ld(e){return e.authOptions.authority.options.protocolMode===ll}const Dd={sendGetRequestAsync:()=>Promise.reject(rc($l)),sendPostRequestAsync:()=>Promise.reject(rc($l))},Bd="acquireTokenByCode",qd="acquireTokenByRefreshToken",Ud="acquireTokenSilent",Gd="acquireTokenSilentAsync",zd="acquireTokenPopup",Hd="acquireTokenPreRedirect",Wd="acquireTokenRedirect",Vd="cryptoOptsGetPublicKeyThumbprint",Kd="cryptoOptsSignJwt",Yd="silentCacheClientAcquireToken",Xd="silentIframeClientAcquireToken",Jd="awaitConcurrentIframe",Qd="silentRefreshClientAcquireToken",Zd="ssoSilent",$d="standardInteractionClientGetDiscoveredAuthority",eu="nativeInteractionClientAcquireToken",tu="networkClientSendPostRequestAsync",nu="refreshTokenClientExecutePostToTokenEndpoint",ru="authorizationCodeClientExecutePostToTokenEndpoint",iu="refreshTokenClientExecuteTokenRequest",au="refreshTokenClientAcquireToken",su="refreshTokenClientAcquireTokenWithCachedRefreshToken",ou="refreshTokenClientAcquireTokenByRefreshToken",lu="refreshTokenClientCreateTokenRequestBody",cu="acquireTokenFromCache",du="silentFlowClientAcquireCachedToken",uu="silentFlowClientGenerateResultFromCacheRecord",hu="acquireTokenBySilentIframe",pu="initializeBaseRequest",fu="initializeSilentRequest",mu="initializeClientApplication",gu="initializeCache",vu="silentIframeClientTokenHelper",yu="silentHandlerInitiateAuthRequest",bu="silentHandlerMonitorIframeForHash",_u="silentHandlerLoadFrame",wu="silentHandlerLoadFrameSync",xu="standardInteractionClientCreateAuthCodeClient",Cu="standardInteractionClientGetClientConfiguration",ku="standardInteractionClientInitializeAuthorizationRequest",Su="getAuthCodeUrl",Pu="getStandardParams",Au="handleCodeResponseFromServer",Eu="handleCodeResponse",Tu="handleResponseEar",Iu="handleResponsePlatformBroker",Fu="handleResponseCode",Ru="updateTokenEndpointAuthority",Nu="authClientAcquireToken",ju="authClientExecuteTokenRequest",Mu="authClientCreateTokenRequestBody",Ou="popTokenGenerateCnf",Lu="popTokenGenerateKid",Du="handleServerTokenResponse",Bu="deserializeResponse",qu="authorityFactoryCreateDiscoveredInstance",Uu="authorityResolveEndpointsAsync",Gu="authorityGetCloudDiscoveryMetadataFromNetwork",zu="authorityUpdateCloudDiscoveryMetadata",Hu="authorityGetEndpointMetadataFromNetwork",Wu="authorityUpdateEndpointMetadata",Vu="authorityUpdateMetadataWithRegionalInformation",Ku="regionDiscoveryDetectRegion",Yu="regionDiscoveryGetRegionFromIMDS",Xu="regionDiscoveryGetCurrentVersion",Ju="acquireTokenByCodeAsync",Qu="handleRedirectPromise",Zu="handleNativeRedirectPromise",$u="nativeMessageHandlerHandshake",eh="removeHiddenIframe",th="clearTokensAndKeysWithClaims",nh="cacheManagerGetRefreshToken",rh="importExistingCache",ih="setUserData",ah="localStorageUpdated",sh="generatePkceCodes",oh="generateCodeVerifier",lh="generateCodeChallengeFromVerifier",ch="sha256Digest",dh="getRandomValues",uh="generateHKDF",hh="generateBaseKey",ph="base64Decode",fh="urlEncodeArr",mh="encrypt",gh="decrypt",vh="generateEarKey",yh="decryptEarResponse",bh=(new Map([[Bd,"ATByCode"],[qd,"ATByRT"],[Ud,"ATS"],[Gd,"ATSAsync"],[zd,"ATPopup"],[Wd,"ATRedirect"],[Vd,"CryptoGetPKThumb"],[Kd,"CryptoSignJwt"],[Yd,"SltCacheClientAT"],[Xd,"SltIframeClientAT"],[Qd,"SltRClientAT"],[Zd,"SsoSlt"],[$d,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[eu,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[tu,"NetClientSendPost"],[nu,"RTClientExecPost"],[ru,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[iu,"RTClientExecTReq"],[au,"RTClientAT"],[su,"RTClientATWithCachedRT"],[ou,"RTClientATByRT"],[lu,"RTClientCreateTReqBody"],[cu,"ATFromCache"],[du,"SltFlowClientATCached"],[uu,"SltFlowClientGenResFromCache"],[hu,"ATBySltIframe"],[pu,"InitBaseReq"],[fu,"InitSltReq"],[mu,"InitClientApplication"],[gu,"InitCache"],[rh,"importCache"],[ih,"setUserData"],[ah,"localStorageUpdated"],[vu,"SIClientTHelper"],[yu,"SHandlerInitAuthReq"],[bu,"SltHandlerMonitorIframeForHash"],[_u,"SHandlerLoadFrame"],[wu,"SHandlerLoadFrameSync"],[xu,"StdIntClientCreateAuthCodeClient"],[Cu,"StdIntClientGetClientConf"],[ku,"StdIntClientInitAuthReq"],[Su,"GetAuthCodeUrl"],[Au,"HandleCodeResFromServer"],[Eu,"HandleCodeResp"],[Tu,"HandleRespEar"],[Fu,"HandleRespCode"],[Iu,"HandleRespPlatBroker"],[Ru,"UpdTEndpointAuth"],[Nu,"AuthClientAT"],[ju,"AuthClientExecTReq"],[Mu,"AuthClientCreateTReqBody"],[Ou,"PopTGenCnf"],[Lu,"PopTGenKid"],[Du,"HandleServerTRes"],[Bu,"DeserializeRes"],[qu,"AuthFactCreateDiscInst"],[Uu,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[Gu,"AuthGetCDMetaFromNet"],[zu,"AuthUpdCDMeta"],[Hu,"AuthUpdCDMetaFromNet"],[Wu,"AuthUpdEndpointMeta"],[Vu,"AuthUpdMetaWithRegInfo"],[Ku,"RegDiscDetectReg"],[Yu,"RegDiscGetRegFromIMDS"],[Xu,"RegDiscGetCurrentVer"],[Ju,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[Qu,"HandleRedirectPromise"],[Zu,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[$u,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[eh,"RemoveHiddenIframe"],[th,"ClearTAndKeysWithClaims"],[nh,"CacheManagerGetRT"],[sh,"GenPkceCodes"],[oh,"GenCodeVerifier"],[lh,"GenCodeChallengeFromVerifier"],[ch,"Sha256Digest"],[dh,"GetRandomValues"],[uh,"genHKDF"],[hh,"genBaseKey"],[ph,"b64Decode"],[fh,"urlEncArr"],[mh,"encrypt"],[gh,"decrypt"],[vh,"genEarKey"],[yh,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount"]);class _h{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class wh{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:bh,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new _h}}startPerformanceMeasurement(){return new _h}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}class xh{navigateInternal(e,t){return xh.defaultNavigateWindow(e,t)}navigateExternal(e,t){return xh.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e=>{setTimeout((()=>{e(!0)}),t.timeout)}))}}class Ch extends Jt{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Ch.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function kh(e,t,n,r){return e.errorMessage="".concat(e.errorMessage,", additionalErrorInfo: error.name:").concat(null===r||void 0===r?void 0:r.name,", error.message:").concat(null===r||void 0===r?void 0:r.message),new Ch(e,t,n)}const Sh="pkce_not_created",Ph="ear_jwk_empty",Ah="ear_jwe_empty",Eh="crypto_nonexistent",Th="empty_navigate_uri",Ih="hash_empty_error",Fh="no_state_in_hash",Rh="hash_does_not_contain_known_properties",Nh="unable_to_parse_state",jh="state_interaction_type_mismatch",Mh="interaction_in_progress",Oh="popup_window_error",Lh="empty_window_error",Dh="user_cancelled",Bh="monitor_popup_timeout",qh="monitor_window_timeout",Uh="redirect_in_iframe",Gh="block_iframe_reload",zh="block_nested_popups",Hh="iframe_closed_prematurely",Wh="silent_logout_unsupported",Vh="no_account_error",Kh="silent_prompt_value_error",Yh="no_token_request_cache_error",Xh="unable_to_parse_token_request_cache_error",Jh="auth_request_not_set_error",Qh="invalid_cache_type",Zh="non_browser_environment",$h="database_not_open",ep="no_network_connectivity",tp="post_request_failed",np="get_request_failed",rp="failed_to_parse_response",ip="unable_to_load_token",ap="crypto_key_not_found",sp="auth_code_required",op="auth_code_or_nativeAccountId_required",lp="spa_code_and_nativeAccountId_present",cp="database_unavailable",dp="unable_to_acquire_token_from_native_platform",up="native_handshake_timeout",hp="native_extension_not_installed",pp="native_connection_not_established",fp="uninitialized_public_client_application",mp="native_prompt_not_supported",gp="invalid_base64_string",vp="invalid_pop_token_request",yp="failed_to_build_headers",bp="failed_to_parse_headers",_p="failed_to_decrypt_ear_response",wp="For more visit: aka.ms/msaljs/browser-errors",xp={[Sh]:"The PKCE code challenge and verifier could not be generated.",[Ph]:"No EAR encryption key provided. This is unexpected.",[Ah]:"Server response does not contain ear_jwe property. This is unexpected.",[Eh]:"The crypto object or function is not available.",[Th]:"Navigation URI is empty. Please check stack trace for more info.",[Ih]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(wp),[Fh]:"Hash does not contain state. Please verify that the request originated from msal.",[Rh]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(wp),[Nh]:"Unable to parse state. Please verify that the request originated from msal.",[jh]:"Hash contains state but the interaction type does not match the caller.",[Mh]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(wp),[Oh]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Lh]:"window.open returned null or undefined window object.",[Dh]:"User cancelled the flow.",[Bh]:"Token acquisition in popup failed due to timeout.  ".concat(wp),[qh]:"Token acquisition in iframe failed due to timeout.  ".concat(wp),[Uh]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Gh]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(wp),[zh]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Hh]:"The iframe being monitored was closed prematurely.",[Wh]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Vh]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Kh]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Yh]:"No token request found in cache.",[Xh]:"The cached token request could not be parsed.",[Jh]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Qh]:"Invalid cache type",[Zh]:"Login and token requests are not supported in non-browser environments.",[$h]:"Database is not open!",[ep]:"No network connectivity. Check your internet connection.",[tp]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[np]:"Network request failed. Please check the network trace to determine root cause.",[rp]:"Failed to parse network response. Check network trace.",[ip]:"Error loading token to cache.",[ap]:"Cryptographic Key or Keypair not found in browser storage.",[sp]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[op]:"An authorization code or nativeAccountId must be provided to this flow.",[lp]:"Request cannot contain both spa code and native account id.",[cp]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[dp]:"Unable to acquire token from native platform.  ".concat(wp),[up]:"Timed out while attempting to establish connection to browser extension",[hp]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[pp]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(wp),[fp]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(wp),[mp]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[gp]:"Invalid base64 encoded string.",[vp]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[yp]:"Failed to build request headers object.",[bp]:"Failed to parse response headers",[_p]:"Failed to decrypt ear response"};class Cp extends Jt{constructor(e,t){super(e,xp[e],t),Object.setPrototypeOf(this,Cp.prototype),this.name="BrowserAuthError"}}function kp(e,t){return new Cp(e,t)}class Sp{async sendGetRequestAsync(e,t){let n,r={},i=0;const a=Pp(t);try{n=await fetch(e,{method:xn,headers:a})}catch(Zg){throw kh(kp(window.navigator.onLine?np:ep),void 0,void 0,Zg)}r=Ap(n.headers);try{return i=n.status,{headers:r,body:await n.json(),status:i}}catch(Zg){throw kh(kp(rp),i,r,Zg)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=Pp(t);let i,a=0,s={};try{i=await fetch(e,{method:Cn,headers:r,body:n})}catch(Zg){throw kh(kp(window.navigator.onLine?tp:ep),void 0,void 0,Zg)}s=Ap(i.headers);try{return a=i.status,{headers:s,body:await i.json(),status:a}}catch(Zg){throw kh(kp(rp),a,s,Zg)}}}function Pp(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach((e=>{let[n,r]=e;t.append(n,r)})),t}catch(Zg){throw kh(kp(yp),void 0,void 0,Zg)}}function Ap(e){try{const t={};return e.forEach(((e,n)=>{t[n]=e})),t}catch(Zg){throw kp(bp)}}function Ep(e){return encodeURIComponent(Ip(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Tp(e){return Fp(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ip(e){return Fp((new TextEncoder).encode(e))}function Fp(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}function Rp(e){return(new TextDecoder).decode(Np(e))}function Np(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw kp(gp)}const n=atob(t);return Uint8Array.from(n,(e=>e.codePointAt(0)||0))}const jp="AES-GCM",Mp="HKDF",Op="SHA-256",Lp=new Uint8Array([1,0,1]),Dp="0123456789abcdef",Bp=new Uint32Array(1),qp="raw",Up="encrypt",Gp="decrypt",zp={name:"RSASSA-PKCS1-v1_5",hash:Op,modulusLength:2048,publicExponent:Lp};async function Hp(e,t,n){null===t||void 0===t||t.addQueueMeasurement(ch,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(Op,r)}function Wp(e){return window.crypto.getRandomValues(e)}function Vp(){return window.crypto.getRandomValues(Bp),Bp[0]}function Kp(){const e=Date.now(),t=1024*Vp()+(1023&Vp()),n=new Uint8Array(16),r=Math.trunc(t/2**30),i=t&2**30-1,a=Vp();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=a>>>24,n[13]=a>>>16,n[14]=a>>>8,n[15]=a;let s="";for(let o=0;o<n.length;o++)s+=Dp.charAt(n[o]>>>4),s+=Dp.charAt(15&n[o]),3!==o&&5!==o&&7!==o&&9!==o||(s+="-");return s}async function Yp(e){return window.crypto.subtle.exportKey("jwk",e)}async function Xp(){const e=await Qp(),t={alg:"dir",kty:"oct",k:Tp(new Uint8Array(e))};return Ip(JSON.stringify(t))}async function Jp(e,t){const n=t.split(".");if(5!==n.length)throw kp(_p,"jwe_length");const r=await async function(e){const t=Rp(e),n=Np(JSON.parse(t).k);return window.crypto.subtle.importKey(qp,n,jp,!1,[Gp])}(e).catch((()=>{throw kp(_p,"import_key")}));try{const e=(new TextEncoder).encode(n[0]),t=Np(n[2]),i=Np(n[3]),a=Np(n[4]),s=8*a.byteLength,o=new Uint8Array(i.length+a.length);o.set(i),o.set(a,i.length);const l=await window.crypto.subtle.decrypt({name:jp,iv:t,tagLength:s,additionalData:e},r,o);return(new TextDecoder).decode(l)}catch(Zg){throw kp(_p,"decrypt")}}async function Qp(){const e=await window.crypto.subtle.generateKey({name:jp,length:256},!0,[Up,Gp]);return window.crypto.subtle.exportKey(qp,e)}async function Zp(e){return window.crypto.subtle.importKey(qp,e,Mp,!1,["deriveKey"])}async function $p(e,t,n){return window.crypto.subtle.deriveKey({name:Mp,salt:t,hash:Op,info:(new TextEncoder).encode(n)},e,{name:jp,length:256},!1,[Up,Gp])}async function ef(e,t,n){const r=(new TextEncoder).encode(t),i=window.crypto.getRandomValues(new Uint8Array(16)),a=await $p(e,i,n),s=await window.crypto.subtle.encrypt({name:jp,iv:new Uint8Array(12)},a,r);return{data:Tp(new Uint8Array(s)),nonce:Tp(i)}}async function tf(e,t,n,r){const i=Np(r),a=await $p(e,Np(t),n),s=await window.crypto.subtle.decrypt({name:jp,iv:new Uint8Array(12)},a,i);return(new TextDecoder).decode(s)}async function nf(e){const t=await Hp(e);return Tp(new Uint8Array(t))}function rf(e){e.location.hash="","function"===typeof e.history.replaceState&&e.history.replaceState(null,"","".concat(e.location.origin).concat(e.location.pathname).concat(e.location.search))}function af(){return window.parent!==window}function sf(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function of(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(cn,".")))throw kp(zh)}function lf(){if("undefined"===typeof window)throw kp(Zh)}function cf(e){if(!e)throw kp(fp)}function df(e){lf(),function(){if(vd.hashContainsKnownProperties(window.location.hash)&&af())throw kp(Gh)}(),of(),cf(e)}function uf(e,t){if(df(e),function(e){if(af()&&!e)throw kp(Uh)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===wn&&!t.cache.storeAuthStateInCookie)throw rn(en)}function hf(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout((()=>{try{document.head.removeChild(t)}catch(e){}}),1e4)}const pf=1e4;const ff="4.12.0";class mf{static loggerCallback(e,t){switch(e){case cr.Error:return void console.error(t);case cr.Info:return void console.info(t);case cr.Verbose:return void console.debug(t);case cr.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,n;let r;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:i,telemetry:a}=e;const s={clientId:Le.EMPTY_STRING,authority:"".concat(Le.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:Le.EMPTY_STRING,authorityMetadata:Le.EMPTY_STRING,redirectUri:"undefined"!==typeof window?sf():"",postLogoutRedirectUri:Le.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ol,OIDCOptions:{serverResponseType:ot,defaultScopes:[Le.OPENID_SCOPE,Le.PROFILE_SCOPE,Le.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:dl,tenant:Le.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},o={cacheLocation:_n,temporaryCacheLocation:_n,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==bn),claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:cr.Info,piiLoggingEnabled:!1},c=vr(vr({},Td),{},{loggerOptions:l,networkClient:t?new Sp:Dd,navigationClient:new xh,loadFrameTimeout:0,windowHashTimeout:(null===i||void 0===i?void 0:i.loadFrameTimeout)||6e4,iframeHashTimeout:(null===i||void 0===i?void 0:i.loadFrameTimeout)||pf,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(null===i||void 0===i?void 0:i.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:dn}),d=vr(vr(vr({},c),i),{},{loggerOptions:(null===i||void 0===i?void 0:i.loggerOptions)||l}),u={application:{appName:Le.EMPTY_STRING,appVersion:Le.EMPTY_STRING},client:new wh};(null===n||void 0===n?void 0:n.protocolMode)!==ll&&null!==n&&void 0!==n&&n.OIDCOptions&&new dr(d.loggerOptions).warning(JSON.stringify(Qc(Vc)));if(null!==n&&void 0!==n&&n.protocolMode&&n.protocolMode===ll&&null!==d&&void 0!==d&&d.allowPlatformBroker)throw Qc(Kc);return{auth:vr(vr(vr({},s),n),{},{OIDCOptions:vr(vr({},s.OIDCOptions),null===n||void 0===n?void 0:n.OIDCOptions)}),cache:vr(vr({},o),r),system:d,telemetry:vr(vr({},u),a)}}(e,this.browserEnvironment);try{r=window[_n]}catch(Zg){}const i=null===(t=r)||void 0===t?void 0:t.getItem("msal.browser.log.level"),a=null===(n=r)||void 0===n||null===(n=n.getItem("msal.browser.log.pii"))||void 0===n?void 0:n.toLowerCase(),s="true"===a||"false"!==a&&void 0,o=vr({},this.config.system.loggerOptions),l=i&&Object.keys(cr).includes(i)?cr[i]:void 0;l&&(o.loggerCallback=mf.loggerCallback,o.logLevel=l),void 0!==s&&(o.piiLoggingEnabled=s),this.logger=new dr(o,"@azure/msal-browser",ff),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class gf extends mf{getModuleName(){return gf.MODULE_NAME}getId(){return gf.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}gf.MODULE_NAME="",gf.ID="StandardOperatingContext";const vf="missing_kid_error",yf="missing_alg_error",bf={[vf]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[yf]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class _f extends Jt{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,_f.prototype)}}function wf(e){return new _f(e,bf[e])}class xf{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw wf(vf);if(!e.alg)throw wf(yf);const t=new xf({typ:e.typ||Vt,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class Cf{constructor(){this.dbName=er,this.version=1,this.tableName=tr,this.dbOpen=!1}async open(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",(e=>{e.target.result.createObjectStore(this.tableName)})),n.addEventListener("success",(t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()})),n.addEventListener("error",(()=>t(kp(cp))))}))}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(kp($h));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async setItem(e,t){return await this.validateDbIsOpen(),new Promise(((n,r)=>{if(!this.db)return r(kp($h));const i=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);i.addEventListener("success",(()=>{this.closeConnection(),n()})),i.addEventListener("error",(e=>{this.closeConnection(),r(e)}))}))}async removeItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(kp($h));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",(()=>{this.closeConnection(),t()})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async getKeys(){return await this.validateDbIsOpen(),new Promise(((e,t)=>{if(!this.db)return t(kp($h));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",(t=>{const n=t;this.closeConnection(),e(n.target.result)})),n.addEventListener("error",(e=>{this.closeConnection(),t(e)}))}))}async containsKey(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(kp($h));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(1===n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise(((e,t)=>{const n=window.indexedDB.deleteDatabase(er),r=setTimeout((()=>t(!1)),200);n.addEventListener("success",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("blocked",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("error",(()=>(clearTimeout(r),t(!1))))}))}}class kf{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach(((t,n)=>{e.push(n)})),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class Sf{constructor(e){this.inMemoryCache=new kf,this.indexedDBCache=new Cf,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Cp&&e.errorCode===cp))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(Zg){this.handleDatabaseAccessError(Zg)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(Zg){this.handleDatabaseAccessError(Zg)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(Zg){this.handleDatabaseAccessError(Zg)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(Zg){this.handleDatabaseAccessError(Zg)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(Zg){this.handleDatabaseAccessError(Zg)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(Zg){return this.handleDatabaseAccessError(Zg),!1}}}class Pf{constructor(e,t,n){this.logger=e,function(e){if(!window)throw kp(Zh);if(!window.crypto)throw kp(Eh);if(!e&&!window.crypto.subtle)throw kp(Eh,"crypto_subtle_undefined")}(null!==n&&void 0!==n&&n),this.cache=new Sf(this.logger),this.performanceClient=t}createNewGuid(){return Kp()}base64Encode(e){return Ip(e)}base64Decode(e){return Rp(e)}base64UrlEncode(e){return Ep(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const n=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(Vd,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(zp,e,t)}(Pf.EXTRACTABLE,Pf.POP_KEY_USAGES),i=await Yp(r.publicKey),a=Af({e:i.e,kty:i.kty,n:i.n}),s=await this.hashString(a),o=await Yp(r.privateKey),l=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,zp,t,n)}(o,!1,["sign"]);return await this.cache.setItem(s,{privateKey:l,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),s}async removeTokenBindingKey(e){await this.cache.removeItem(e);return!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(Zg){return Zg instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(Zg.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){var i;const a=null===(i=this.performanceClient)||void 0===i?void 0:i.startMeasurement(Kd,r),s=await this.cache.getItem(t);if(!s)throw kp(ap);const o=await Yp(s.publicKey),l=Af(o),c=Ep(JSON.stringify({kid:t})),d=Ep(xf.getShrHeaderString(vr(vr({},null===n||void 0===n?void 0:n.header),{},{alg:o.alg,kid:c})));e.cnf={jwk:JSON.parse(l)};const u=Ep(JSON.stringify(e)),h="".concat(d,".").concat(u),p=(new TextEncoder).encode(h),f=await async function(e,t){return window.crypto.subtle.sign(zp,e,t)}(s.privateKey,p),m=Tp(new Uint8Array(f)),g="".concat(h,".").concat(m);return a&&a.end({success:!0}),g}async hashString(e){return nf(e)}}function Af(e){return JSON.stringify(e,Object.keys(e).sort())}Pf.POP_KEY_USAGES=["sign","verify"],Pf.EXTRACTABLE=!0;const Ef=(e,t,n,r,i)=>function(){n.trace("Executing function ".concat(t));const a=null===r||void 0===r?void 0:r.startMeasurement(t,i);if(i){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},i)}try{const r=e(...arguments);return null===a||void 0===a||a.end({success:!0}),n.trace("Returning result from ".concat(t)),r}catch(Zg){n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(Zg))}catch(Zg){n.trace("Unable to print error message.")}throw null===a||void 0===a||a.end({success:!1},Zg),Zg}},Tf=(e,t,n,r,i)=>function(){n.trace("Executing function ".concat(t));const a=null===r||void 0===r?void 0:r.startMeasurement(t,i);if(i){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},i)}return null===r||void 0===r||r.setPreQueueTime(t,i),e(...arguments).then((e=>(n.trace("Returning result from ".concat(t)),null===a||void 0===a||a.end({success:!0}),e))).catch((e=>{n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw null===a||void 0===a||a.end({success:!1},e),e}))};class If{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ku,this.correlationId);let r=e;if(r)t.region_source=Ot;else{const e=If.IMDS_OPTIONS;try{const n=await Tf(this.getRegionFromIMDS.bind(this),Yu,this.logger,this.performanceClient,this.correlationId)(Le.IMDS_VERSION,e);if(n.status===Nt&&(r=n.body,t.region_source=Lt),n.status===jt){const n=await Tf(this.getCurrentVersion.bind(this),Xu,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=Mt,null;const i=await Tf(this.getRegionFromIMDS.bind(this),Yu,this.logger,this.performanceClient,this.correlationId)(n,e);i.status===Nt&&(r=i.body,t.region_source=Lt)}}catch(Zg){return t.region_source=Mt,null}}return r||(t.region_source=Mt),r||null}async getRegionFromIMDS(e,t){var n;return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Yu,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(Le.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,Le.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Xu,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(Le.IMDS_ENDPOINT,"?format=json"),e);return t.status===jt&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(Zg){return null}}}If.IMDS_OPTIONS={headers:{Metadata:"true"}};class Ff{constructor(e,t,n,r,i,a,s,o){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=a,this.managedIdentity=o||!1,this.regionDiscovery=new If(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Le.CIAM_AUTH_URL))return ud;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Le.ADFS:return cd;case Le.DSTS:return dd}return ld}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new vd(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw rc(ml)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw rc(ml)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw rc(ml)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw rc(Yl);return this.replacePath(this.metadata.end_session_endpoint)}throw rc(ml)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw rc(ml)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw rc(ml)}canReplaceTenant(e){return 1===e.PathSegments.length&&!Ff.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ld&&this.protocolMode!==ll}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new vd(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,i)=>{let a=r[i];if(0===i&&this.canReplaceTenant(n)){const e=new vd(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];a!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(a," with id ").concat(e)),a=e)}e!==a&&(t=t.replace("/".concat(a,"/"),"/".concat(e,"/")))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===cd||this.protocolMode===ll&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Uu,this.correlationId);const n=this.getCurrentMetadataEntity(),r=await Tf(this.updateCloudDiscoveryMetadata.bind(this),zu,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const i=await Tf(this.updateEndpointMetadata.bind(this),Wu,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,r,{source:i}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:r,authorityEndpointSource:i},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Cc(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==xt&&(null===n||void 0===n?void 0:n.source)!==xt&&(e.expiresAt=Cc(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Wu,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){var r;if(n.source===kt)if(null!==(r=this.authorityOptions.azureRegionConfiguration)&&void 0!==r&&r.azureRegion&&n.metadata){kc(e,await Tf(this.updateMetadataWithRegionalInformation.bind(this),Vu,this.logger,this.performanceClient,this.correlationId)(n.metadata),!1),e.canonical_authority=this.canonicalAuthority}return n.source}let i=await Tf(this.getEndpointMetadataFromNetwork.bind(this),Hu,this.logger,this.performanceClient,this.correlationId)();var a;if(i)return null!==(a=this.authorityOptions.azureRegionConfiguration)&&void 0!==a&&a.azureRegion&&(i=await Tf(this.updateMetadataWithRegionalInformation.bind(this),Vu,this.logger,this.performanceClient,this.correlationId)(i)),kc(e,i,!0),Ct;throw rc(vl,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),kc(e,t,!1),{source:wt};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return kc(e,t,!1),{source:kt,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=Pc(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:xt}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new vd(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(Zg){throw Qc(qc)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Hu,this.correlationId);const t={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(n));try{const e=await this.networkInterface.sendGetRequestAsync(n,t),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return r?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(Zg){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(Zg)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in yd?yd[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Vu,this.correlationId);const r=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion;if(r){var i;if(r!==Le.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Dt,this.regionDiscoveryMetadata.region_used=r,Ff.replaceWithRegionalInformation(e,r);const t=await Tf(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ku,this.logger,this.performanceClient,this.correlationId)(null===(i=this.authorityOptions.azureRegionConfiguration)||void 0===i?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=Bt,this.regionDiscoveryMetadata.region_used=t,Ff.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=qt}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(zu,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await Tf(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Gu,this.logger,this.performanceClient,this.correlationId)();if(r)return Sc(e,r,!0),Ct;throw Qc(Uc)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||Le.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||Le.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||Le.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Sc(e,t,!1),wt;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,xd(bd.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Sc(e,t,!1),kt;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=Pc(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),xt):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ud)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Ff.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=xd(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(Zg){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Qc(Bc)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Ff.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Gu,this.correlationId);const t="".concat(Le.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),n={};let r=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,n);let i,a;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))i=e.body,a=i.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(i.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),i=e.body,i.error===Le.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(i.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(i.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=xd(a,this.hostnameAndPort)}catch(i){if(i instanceof Jt)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(i.errorCode,"\nError Description: ").concat(i.errorMessage));else{const e=i;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Ff.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&vd.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==dl){const e=t.tenant?t.tenant:Le.DEFAULT_COMMON_TENANT;n="".concat(t.azureCloudInstance,"/").concat(e,"/")}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Le.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw rc(ml)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return _d.has(e)}static isPublicCloudAuthority(e){return Le.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new vd(e);r.validateAsUri();const i=r.getUrlComponents();let a="".concat(t,".").concat(i.HostNameAndPort);this.isPublicCloudAuthority(i.HostNameAndPort)&&(a="".concat(t,".").concat(Le.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const s=vd.constructAuthorityUriFromObject(vr(vr({},r.getUrlComponents()),{},{HostNameAndPort:a})).urlString;return n?"".concat(s,"?").concat(n):s}static replaceWithRegionalInformation(e,t){const n=vr({},e);return n.authorization_endpoint=Ff.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=Ff.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=Ff.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new vd(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(Le.CIAM_AUTH_URL)){const e=n.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(Le.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function Rf(e){return e.endsWith(Le.FORWARD_SLASH)?e:"".concat(e).concat(Le.FORWARD_SLASH)}Ff.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Qe,$e,Ze]);const Nf="no_tokens_found",jf="native_account_unavailable",Mf="refresh_token_expired",Of="bad_token",Lf=["interaction_required","consent_required","login_required",Of],Df=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Bf={[Nf]:"No refresh token found in the cache. Please sign-in.",[jf]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Mf]:"Refresh token has expired.",[Of]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class qf extends Jt{constructor(e,t,n,r,i,a,s,o){super(e,t,n),Object.setPrototypeOf(this,qf.prototype),this.timestamp=r||Le.EMPTY_STRING,this.traceId=i||Le.EMPTY_STRING,this.correlationId=a||Le.EMPTY_STRING,this.claims=s||Le.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=o}}function Uf(e,t,n){const r=!!e&&Lf.indexOf(e)>-1,i=!!n&&Df.indexOf(n)>-1,a=!!t&&Lf.some((e=>t.indexOf(e)>-1));return r||a||i}function Gf(e){return new qf(e,Bf[e])}function zf(e,t,n){var r;return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:n,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||(null===(r=t.tokenBodyParameters)||void 0===r?void 0:r.clientId)}}const Hf=864e5,Wf="Lax",Vf="None";class Kf{initialize(){return Promise.resolve()}getItem(e){const t="".concat(encodeURIComponent(e)),n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[i,...a]=decodeURIComponent(e).trim().split("="),s=a.join("=");if(i===t)return s}return""}getUserData(){throw rc($l)}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wf,a="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=").concat(i,";");if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*Hf);return n.toUTCString()}(n);a+="expires=".concat(e,";")}(r||i===Vf)&&(a+="Secure;"),document.cookie=a}async setUserData(){return Promise.reject(rc($l))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach((e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])})),t}containsKey(e){return this.getKeys().includes(e)}}function Yf(e){const t=e.getItem(Rn);return t?JSON.parse(t):[]}function Xf(e,t){const n=t.getItem("".concat(Nn,".").concat(e));if(n){const e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const Jf="msal.cache.encryption";class Qf{constructor(e,t,n){if(!window.localStorage)throw rn(Zt);this.memoryStorage=new kf,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new Kf,n=t.getItem(Jf);let r={key:"",id:""};if(n)try{r=JSON.parse(n)}catch(Zg){}if(r.key&&r.id){const t=Ef(Np,ph,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:await Tf(Zp,uh,this.logger,this.performanceClient,e)(t)},await Tf(this.importExistingCache.bind(this),rh,this.logger,this.performanceClient,e)(e)}else{this.clear();const n=Kp(),r=await Tf(Qp,hh,this.logger,this.performanceClient,e)(),i=Ef(Tp,fh,this.logger,this.performanceClient,e)(new Uint8Array(r));this.encryptionCookie={id:n,key:await Tf(Zp,uh,this.logger,this.performanceClient,e)(r)};const a={id:n,key:i};t.setItem(Jf,JSON.stringify(a),0,!0,Vf)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw kp(fp);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw kp(fp);const{data:r,nonce:i}=await Tf(ef,mh,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:i,data:r};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();Yf(this).forEach((e=>this.removeItem(e)));const e=Xf(this.clientId,this);e.idToken.forEach((e=>this.removeItem(e))),e.accessToken.forEach((e=>this.removeItem(e))),e.refreshToken.forEach((e=>this.removeItem(e))),this.getKeys().forEach((e=>{(e.startsWith(Le.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)}))}async importExistingCache(e){if(!this.encryptionCookie)return;let t=Yf(this);t=await this.importArray(t,e),this.setItem(Rn,JSON.stringify(t));const n=Xf(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),this.setItem("".concat(Nn,".").concat(this.clientId),JSON.stringify(n))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let r;try{r=JSON.parse(n)}catch(Zg){return null}return r.id&&r.nonce&&r.data?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):Tf(tf,gh,this.logger,this.performanceClient,t)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){const n=[],r=[];return e.forEach((e=>{const i=this.getItemFromEncryptedCache(e,t).then((t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)}));r.push(i)})),await Promise.all(r),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(ah);t.add({isBackground:!0});const{key:n,value:r,context:i}=e.data;return n?i&&i!==this.clientId?(this.logger.trace("Ignoring broadcast event from clientId: ".concat(i)),void t.end({success:!1,errorCode:"contextMismatch"})):(r?(this.memoryStorage.setItem(n,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class Zf{constructor(){if(!window.sessionStorage)throw rn(Zt)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}class $f extends Ad{constructor(e,t,n,r,i,a,s){super(e,n,r,s),this.cacheConfig=t,this.logger=r,this.internalStorage=new kf,this.browserStorage=em(e,t.cacheLocation,r,i),this.temporaryCacheStorage=em(e,t.temporaryCacheLocation,r,i),this.cookieStorage=new Kf,this.performanceClient=i,this.eventHandler=a}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&pd.isAccountEntity(n)?Ad.toObject(new pd,n):(this.removeAccountKeyFromMap(e),null)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();await Tf(this.browserStorage.setUserData.bind(this.browserStorage),ih,this.logger,this.performanceClient)(n,JSON.stringify(e),t);const r=this.addAccountKeyToMap(n);this.cacheConfig.cacheLocation===bn&&r&&this.eventHandler.emitEvent(_r,void 0,e.getAccountInfo())}getAccountKeys(){return Yf(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const t=this.getAccountKeys();return-1===t.indexOf(e)?(t.push(e),this.browserStorage.setItem(Rn,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.browserStorage.setItem(Rn,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===bn&&this.eventHandler.emitEvent(wr,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,gt.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,gt.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,gt.REFRESH_TOKEN)}getTokenKeys(){return Xf(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case gt.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case gt.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case gt.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),rc(ql)}this.browserStorage.setItem("".concat(Nn,".").concat(this.clientId),JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case gt.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ".concat(e," from map"));const r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case gt.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ".concat(e," from map"));const i=n.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case gt.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ".concat(e," from map"));const a=n.refreshToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),rc(ql)}this.browserStorage.setItem("".concat(Nn,".").concat(this.clientId),JSON.stringify(n))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,gt.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&vc(r)&&r.hasOwnProperty("realm")&&r.credentialType===gt.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,gt.ID_TOKEN),null);var r}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=pc(e);await Tf(this.browserStorage.setUserData.bind(this.browserStorage),ih,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,gt.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,gt.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&vc(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===gt.ACCESS_TOKEN||r.credentialType===gt.ACCESS_TOKEN_WITH_AUTH_SCHEME)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,gt.ACCESS_TOKEN),null);var r}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=pc(e);await Tf(this.browserStorage.setUserData.bind(this.browserStorage),ih,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,gt.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,gt.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&vc(r)&&r.credentialType===gt.REFRESH_TOKEN?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,gt.REFRESH_TOKEN),null);var r}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=pc(e);await Tf(this.browserStorage.setUserData.bind(this.browserStorage),ih,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,gt.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(i=n)&&0===r.indexOf(vt)&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,i}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[vt,t,n].join(ft).toLowerCase()}(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(St.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(bt)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setWrapperMetadata(e,t){this.internalStorage.setItem(jn,e),this.internalStorage.setItem(Mn,t)}getWrapperMetadata(){return[this.internalStorage.getItem(jn)||Le.EMPTY_STRING,this.internalStorage.getItem(Mn)||Le.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(Je),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(Je);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(n))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(xr)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(Tt));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===bn){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach((e=>{-1===e.indexOf(Le.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)})),this.browserStorage.getKeys().forEach((e=>{-1===e.indexOf(Le.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)})),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(th,t);const n=this.getTokenKeys(),r=[];n.accessToken.forEach((e=>{const t=this.getAccessTokenCredential(e);null!==t&&void 0!==t&&t.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(e))})),await Promise.all(r),r.length>0&&this.logger.warning("".concat(r.length," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Zc.startsWith(e,Le.CACHE_PREFIX)?e:"".concat(Le.CACHE_PREFIX,".").concat(this.clientId,".").concat(e)}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(En)),this.removeTemporaryItem(this.generateCacheKey(Tn)),this.removeTemporaryItem(this.generateCacheKey(Pn)),this.removeTemporaryItem(this.generateCacheKey(An)),this.removeTemporaryItem(this.generateCacheKey(Fn)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const n=Ip(JSON.stringify(e));if(this.setTemporaryCache(En,n,!0),t){const e=Ip(t);this.setTemporaryCache(Tn,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(En,!0);if(!e)throw kp(Yh);const t=this.getTemporaryCache(Tn,!0);let n,r="";try{n=JSON.parse(Rp(e)),t&&(r=Rp(t))}catch(Zg){throw this.logger.errorPii("Attempted to parse: ".concat(e)),this.logger.error("Parsing cached token request threw with error: ".concat(Zg)),kp(Xh)}return[n,r]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Fn,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var t;const n=null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e="".concat(Le.CACHE_PREFIX,".").concat(In),t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(Zg){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),rf(window),null}}setInteractionInProgress(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kn;const r="".concat(Le.CACHE_PREFIX,".").concat(In);if(e){if(this.getInteractionInProgress())throw kp(Mh);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else e||(null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId)!==this.clientId||this.removeTemporaryItem(r)}async hydrateCache(e,t){var n,r,i;const a=fc(null===(n=e.account)||void 0===n?void 0:n.homeAccountId,null===(r=e.account)||void 0===r?void 0:r.environment,e.idToken,this.clientId,e.tenantId);let s;t.claims&&(s=await this.cryptoImpl.hashString(t.claims));const o={idToken:a,accessToken:mc(null===(i=e.account)||void 0===i?void 0:i.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?dc(e.expiresOn):0,e.extExpiresOn?dc(e.extExpiresOn):0,Rp,void 0,e.tokenType,void 0,t.sshKid,t.claims,s)};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(Zg){if(Zg instanceof Pd&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(Zg){}throw Zg}}}function em(e,t,n,r){try{switch(t){case bn:return new Qf(e,n,r);case _n:return new Zf}}catch(Zg){n.error(Zg)}return new kf}class tm{constructor(e){this.eventCallbacks=new Map,this.logger=e||new dr({}),"undefined"!==typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||Kp();return this.eventCallbacks.has(r)?(this.logger.error("Event callback with id: ".concat(r," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(r)),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,n,r){var i;const a={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};switch(e){case _r:case wr:case xr:null===(i=this.broadcastChannel)||void 0===i||i.postMessage(a);break;default:this.invokeCallbacks(a)}}invokeCallbacks(e){this.eventCallbacks.forEach(((t,n)=>{let[r,i]=t;(0===i.length||i.includes(e.eventType))&&(this.logger.verbose("Emitting event to callback ".concat(n,": ").concat(e.eventType)),r.apply(null,[e]))}))}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}const nm="home_account_id",rm="UPN",im="client_id",am="redirect_uri",sm="token_type",om="req_cnf",lm="return_spa_code",cm="x-client-xtra-sku",dm="brk_client_id",um="brk_redirect_uri",hm="instance_aware";function pm(e,t,n){if(!t)return;const r=e.get(im);r&&e.has(dm)&&(null===n||void 0===n||n.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(am)},t))}function fm(e,t){e.set("response_type",t)}function mm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ge;!n||r.includes("openid")||t.includes("openid")||r.push("openid");const i=n?[...t||[],...r]:t||[],a=new $c(i);e.set("scope",a.printScopes())}function gm(e,t){e.set(im,t)}function vm(e,t){e.set(am,t)}function ym(e,t){e.set("login_hint",t)}function bm(e,t){e.set(Ke,"UPN:".concat(t))}function _m(e,t){e.set(Ke,"Oid:".concat(t.uid,"@").concat(t.utid))}function wm(e,t){e.set("sid",t)}function xm(e,t,n){const r=function(e,t){let n;if(e)try{n=JSON.parse(e)}catch(Zg){throw Qc(jc)}else n={};t&&t.length>0&&(n.hasOwnProperty(et)||(n[et]={}),n[et][tt]={values:t});return JSON.stringify(n)}(t,n);try{JSON.parse(r)}catch(Zg){throw Qc(jc)}e.set("claims",r)}function Cm(e,t){e.set("client-request-id",t)}function km(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function Sm(e,t){null!==t&&void 0!==t&&t.appName&&e.set("x-app-name",t.appName),null!==t&&void 0!==t&&t.appVersion&&e.set("x-app-ver",t.appVersion)}function Pm(e,t){t&&e.set("state",t)}function Am(e,t){e.set("client_secret",t)}function Em(e,t){t&&e.set("client_assertion",t)}function Tm(e,t){t&&e.set("client_assertion_type",t)}function Im(e,t){e.set("grant_type",t)}function Fm(e){e.set("client_info","1")}function Rm(e){e.has(hm)||e.set(hm,"true")}function Nm(e,t){Object.entries(t).forEach((t=>{let[n,r]=t;!e.has(n)&&r&&e.set(n,r)}))}function jm(e,t){t&&(e.set(sm,Pt.POP),e.set(om,t))}function Mm(e,t){t&&(e.set(sm,Pt.SSH),e.set(om,t))}function Om(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function Lm(e){e.set("x-ms-lib-capability",It)}function Dm(e,t,n){e.has(dm)||e.set(dm,t),e.has(um)||e.set(um,n)}async function Bm(e,t,n,r,i,a,s){null===s||void 0===s||s.addQueueMeasurement(qu,a);const o=Ff.transformCIAMAuthority(Rf(e)),l=new Ff(o,t,n,r,i,a,s);try{return await Tf(l.resolveEndpointsAsync.bind(l),Uu,i,s,a)(),l}catch(Zg){throw rc(ml)}}class qm extends Jt{constructor(e,t,n,r,i){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=i,Object.setPrototypeOf(this,qm.prototype)}}class Um{static generateThrottlingStorageKey(e){return"".concat(Tt,".").concat(JSON.stringify(e))}static preProcess(e,t){const n=Um.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){var i;if(r.throttleTime<Date.now())return void e.removeItem(n);throw new qm((null===(i=r.errorCodes)||void 0===i?void 0:i.join(" "))||Le.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(Um.checkResponseStatus(n)||Um.checkResponseForRetryAfter(n)){const r={throttleTime:Um.calculateThrottleTime(parseInt(n.headers[Ve])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(Um.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(Ve)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||At),n+Et))}static removeThrottle(e,t,n,r){const i=zf(t,n,r),a=this.generateThrottlingStorageKey(i);e.removeItem(a)}}class Gm{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:i,storageInterface:a,networkInterface:s,cryptoInterface:o,clientCredentials:l,libraryInfo:c,telemetry:d,serverTelemetryManager:u,persistencePlugin:h,serializableCache:p}=e;const f=vr(vr({},Id),r);return{authOptions:(m=t,vr({clientCapabilities:[],azureCloudOptions:Md,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},m)),systemOptions:vr(vr({},Td),n),loggerOptions:f,cacheOptions:vr(vr({},Fd),i),storageInterface:a||new Ed(t.clientId,ic,new dr(f)),networkInterface:s||Rd,cryptoInterface:o||ic,clientCredentials:l||jd,libraryInfo:vr(vr({},Nd),c),telemetry:vr(vr({},Od),d),serverTelemetryManager:u||null,persistencePlugin:h||null,serializableCache:p||null};var m}(e),this.logger=new dr(this.config.loggerOptions,ac,sc),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[He]=Le.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case nm:try{const n=td(e.credential);t[Ke]="Oid:".concat(n.uid,"@").concat(n.utid)}catch(Zg){this.logger.verbose("Could not parse home account ID for CCS Header: "+Zg)}break;case rm:t[Ke]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,n,r,i,a){var s;a&&(null===(s=this.performanceClient)||void 0===s||s.addQueueMeasurement(a,i));const o=await this.sendPostRequest(r,e,{body:t,headers:n},i);return this.config.serverTelemetryManager&&o.status<500&&429!==o.status&&this.config.serverTelemetryManager.clearTelemetryCache(),o}async sendPostRequest(e,t,n,r){let i;Um.preProcess(this.cacheManager,e);try{var a,s;i=await Tf(this.networkClient.sendPostRequestAsync.bind(this.networkClient),tu,this.logger,this.performanceClient,r)(t,n);const e=i.headers||{};null===(a=this.performanceClient)||void 0===a||a.addFields({refreshTokenSize:(null===(s=i.body.refresh_token)||void 0===s?void 0:s.length)||0,httpVerToken:e[Xe]||"",requestId:e[Ye]||""},r)}catch(Zg){if(Zg instanceof Ch){const t=Zg.responseHeaders;var o;if(t)null===(o=this.performanceClient)||void 0===o||o.addFields({httpVerToken:t[Xe]||"",requestId:t[Ye]||"",contentTypeHeader:t[He]||void 0,contentLengthHeader:t[We]||void 0,httpStatus:Zg.httpStatus},r);throw Zg.error}throw Zg instanceof Jt?Zg:rc(gl)}return Um.postProcess(this.cacheManager,e,i),i}async updateAuthority(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ru,t);const r="https://".concat(e,"/").concat(this.authority.tenant,"/"),i=await Bm(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=i}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&Dm(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Nm(t,e.tokenQueryParameters),Cm(t,e.correlationId),pm(t,e.correlationId,this.performanceClient),gd(t)}}class zm{static setRequestState(e,t,n){const r=zm.generateLibraryState(e,n);return t?"".concat(r).concat(Le.RESOURCE_DELIM).concat(t):r}static generateLibraryState(e,t){if(!e)throw rc(Bl);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw rc(Bl);if(!t)throw rc(bl);try{const n=t.split(Le.RESOURCE_DELIM),r=n[0],i=n.length>1?n.slice(1).join(Le.RESOURCE_DELIM):Le.EMPTY_STRING,a=e.base64Decode(r),s=JSON.parse(a);return{userRequestState:i||Le.EMPTY_STRING,libraryState:s}}catch(Zg){throw rc(bl)}}}const Hm="sw";class Wm{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ou,e.correlationId);const r=await Tf(this.generateKid.bind(this),Ou,t,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:i}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Lu,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Hm}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:i,resourceRequestUri:a,shrClaims:s,shrNonce:o,shrOptions:l}=n,c=a?new vd(a):void 0,d=null===c||void 0===c?void 0:c.getUrlComponents();return this.cryptoUtils.signJwt(vr({at:e,ts:cc(),m:null===i||void 0===i?void 0:i.toUpperCase(),u:null===d||void 0===d?void 0:d.HostNameAndPort,nonce:o||this.cryptoUtils.createNewGuid(),p:null===d||void 0===d?void 0:d.AbsolutePath,q:null!==d&&void 0!==d&&d.QueryString?[[],d.QueryString]:void 0,client_claims:s||void 0},r),t,l,n.correlationId)}}class Vm{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Km{constructor(e,t,n,r,i,a,s){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=i,this.persistencePlugin=a,this.performanceClient=s}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var n;const r="Error(s): ".concat(e.error_codes||Le.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||Le.NOT_AVAILABLE," - Description: ").concat(e.error_description||Le.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||Le.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||Le.NOT_AVAILABLE),i=null!==(n=e.error_codes)&&void 0!==n&&n.length?e.error_codes[0]:void 0,a=new qm(e.error,r,e.suberror,i,e.status);if(t&&e.status&&e.status>=qe&&e.status<=Ue)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(a));if(t&&e.status&&e.status>=De&&e.status<=Be)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(a));if(Uf(e.error,e.error_description,e.suberror))throw new qf(e.error,e.error_description,e.suberror,e.timestamp||Le.EMPTY_STRING,e.trace_id||Le.EMPTY_STRING,e.correlation_id||Le.EMPTY_STRING,e.claims||Le.EMPTY_STRING,i);throw a}}async handleServerTokenResponse(e,t,n,r,i,a,s,o,l){var c;let d,u;if(null===(c=this.performanceClient)||void 0===c||c.addQueueMeasurement(Du,e.correlation_id),e.id_token){if(d=oc(e.id_token||Le.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw rc(xl);if(r.maxAge||0===r.maxAge){const e=d.auth_time;if(!e)throw rc(Cl);lc(e,r.maxAge)}}this.homeAccountIdentifier=pd.generateHomeAccountId(e.client_info||Le.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,d),i&&i.state&&(u=zm.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,d,a,i);let p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new Vm(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p)),s&&!o&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Km.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,d,u,void 0,l)}await this.cacheStorage.saveCacheRecord(h,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p))}return Km.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,d,u,e,l)}generateCacheRecord(e,t,n,r,i,a,s){const o=t.getPreferredCache();if(!o)throw rc(Ll);const l=hd(i);let c,d;e.id_token&&i&&(c=fc(this.homeAccountIdentifier,o,e.id_token,this.clientId,l||""),d=Ym(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,o,l,s,void 0,this.logger));let u=null;if(e.access_token){const i=e.scope?$c.fromString(e.scope):new $c(r.scopes||[]),s=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,c=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,d=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+s,p=h+c,f=d&&d>0?n+d:void 0;u=mc(this.homeAccountIdentifier,o,e.access_token,this.clientId,l||t.tenant||"",i.printScopes(),h,p,this.cryptoObj.base64Decode,f,e.token_type,a,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=gc(this.homeAccountIdentifier,o,e.refresh_token,this.clientId,e.foci,a,t)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:o,familyId:e.foci}),{account:d,idToken:c,accessToken:u,refreshToken:h,appMetadata:p}}static async generateAuthenticationResult(e,t,n,r,i,a,s,o,l){var c,d,u,h,p;let f,m,g=Le.EMPTY_STRING,v=[],y=null,b=Le.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==Pt.POP||i.popKid)g=n.accessToken.secret;else{const t=new Wm(e),{secret:r,keyId:a}=n.accessToken;if(!a)throw rc(Xl);g=await t.signPopToken(r,a,i)}v=$c.fromString(n.accessToken.target).asArray(),y=uc(n.accessToken.expiresOn),f=uc(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(m=uc(n.accessToken.refreshOn))}n.appMetadata&&(b=n.appMetadata.familyId===yt?yt:"");const _=(null===a||void 0===a?void 0:a.oid)||(null===a||void 0===a?void 0:a.sub)||"",w=(null===a||void 0===a?void 0:a.tid)||"";null!==o&&void 0!==o&&o.spa_accountid&&n.account&&(n.account.nativeAccountId=null===o||void 0===o?void 0:o.spa_accountid);const x=n.account?od(n.account.getAccountInfo(),void 0,a,null===(c=n.idToken)||void 0===c?void 0:c.secret):null;return{authority:t.canonicalAuthority,uniqueId:_,tenantId:w,scopes:v,account:x,idToken:(null===n||void 0===n||null===(d=n.idToken)||void 0===d?void 0:d.secret)||"",idTokenClaims:a||{},accessToken:g,fromCache:r,expiresOn:y,extExpiresOn:f,refreshOn:m,correlationId:i.correlationId,requestId:l||Le.EMPTY_STRING,familyId:b,tokenType:(null===(u=n.accessToken)||void 0===u?void 0:u.tokenType)||Le.EMPTY_STRING,state:s?s.userRequestState:Le.EMPTY_STRING,cloudGraphHostName:(null===(h=n.account)||void 0===h?void 0:h.cloudGraphHostName)||Le.EMPTY_STRING,msGraphHost:(null===(p=n.account)||void 0===p?void 0:p.msGraphHost)||Le.EMPTY_STRING,code:null===o||void 0===o?void 0:o.spa_code,fromNativeBroker:!1}}}function Ym(e,t,n,r,i,a,s,o,l,c,d){null===d||void 0===d||d.verbose("setCachedAccount called");const u=e.getAccountKeys().find((e=>e.startsWith(n)));let h=null;u&&(h=e.getAccount(u));const p=h||pd.createAccount({homeAccountId:n,idTokenClaims:i,clientInfo:a,environment:s,cloudGraphHostName:null===l||void 0===l?void 0:l.cloud_graph_host_name,msGraphHost:null===l||void 0===l?void 0:l.msgraph_host,nativeAccountId:c},t,r),f=p.tenantProfiles||[],m=o||p.realm;if(m&&!f.find((e=>e.tenantId===m))){const e=sd(n,p.localAccountId,m,i);f.push(e)}return p.tenantProfiles=f,p}class Xm{static validateRedirectUri(e){if(!e)throw Qc(Ac)}static validatePrompt(e){const t=[];for(const n in nt)t.push(nt[n]);if(t.indexOf(e)<0)throw Qc(Nc)}static validateClaims(e){try{JSON.parse(e)}catch(Zg){throw Qc(jc)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Qc(Dc);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([rt.PLAIN,rt.S256].indexOf(e)<0)throw Qc(Lc)}}async function Jm(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class Qm extends Gm{constructor(e,t){var n;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes}async acquireToken(e,t){var n,r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Nu,e.correlationId),!e.code)throw rc(El);const i=cc(),a=await Tf(this.executeTokenRequest.bind(this),ju,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=null===(r=a.headers)||void 0===r?void 0:r[Ye],o=new Km(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(a.body),Tf(o.handleServerTokenResponse.bind(o),Du,this.logger,this.performanceClient,e.correlationId)(a.body,this.authority,i,e,t,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Qc(Oc);const t=this.createLogoutUrlQueryString(e);return vd.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ju,t.correlationId);const r=this.createTokenQueryParameters(t),i=vd.appendQueryString(e.tokenEndpoint,r),a=await Tf(this.createTokenRequestBody.bind(this),Mu,this.logger,this.performanceClient,t.correlationId)(t);let s;if(t.clientInfo)try{const e=ed(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:"".concat(e.uid).concat(mt).concat(e.utid),type:nm}}catch(Zg){this.logger.verbose("Could not parse client info for CCS Header: "+Zg)}const o=this.createTokenRequestHeaders(s||t.ccsCredential),l=zf(this.config.authOptions.clientId,t);return Tf(this.executePostToTokenEndpoint.bind(this),ru,this.logger,this.performanceClient,t.correlationId)(i,a,o,l,t.correlationId,ru)}async createTokenRequestBody(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Mu,e.correlationId);const r=new Map;if(gm(r,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[im])||this.config.authOptions.clientId),this.includeRedirectUri?vm(r,e.redirectUri):Xm.validateRedirectUri(e.redirectUri),mm(r,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(r,e.code),km(r,this.config.libraryInfo),Sm(r,this.config.telemetry.application),Lm(r),this.serverTelemetryManager&&!Ld(this.config)&&Om(r,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&Am(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;Em(r,await Jm(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Tm(r,t.assertionType)}if(Im(r,ct),Fm(r),e.authenticationScheme===Pt.POP){const t=new Wm(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await Tf(t.generateCnf.bind(t),Ou,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}jm(r,n)}else if(e.authenticationScheme===Pt.SSH){if(!e.sshJwk)throw Qc(Gc);Mm(r,e.sshJwk)}let i;if((!Zc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&xm(r,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=ed(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:"".concat(t.uid).concat(mt).concat(t.utid),type:nm}}catch(Zg){this.logger.verbose("Could not parse client info for CCS Header: "+Zg)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case nm:try{_m(r,td(i.credential))}catch(Zg){this.logger.verbose("Could not parse home account ID for CCS Header: "+Zg)}break;case rm:bm(r,i.credential)}return e.embeddedClientId&&Dm(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Nm(r,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[lm]||Nm(r,{[lm]:"1"}),pm(r,e.correlationId,this.performanceClient),gd(r)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&Cm(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&Pm(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&Nm(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Rm(t),gd(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}function Zm(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:a}=e,s=new Map([[0,[n,r]],[2,[i,a]]]);let o=[];if(null!==t&&void 0!==t&&t.length){if(o=t.split(","),o.length<4)return t}else o=Array.from({length:4},(()=>"|"));return s.forEach(((e,t)=>{var n,r;2===e.length&&null!==(n=e[0])&&void 0!==n&&n.length&&null!==(r=e[1])&&void 0!==r&&r.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:i}=e;if(n>=t.length)return;t[n]=[r,i].join("|")}({skuArr:o,index:t,skuName:e[0],skuVersion:e[1]})})),o.join(",")}class $m{constructor(e,t){this.cacheOutcome=Ut,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Le.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Le.EMPTY_STRING,this.telemetryCacheKey=St.CACHE_KEY+ft+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(St.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();null!==n&&void 0!==n&&n.length&&t.push("broker_error=".concat(n));const r=t.join(St.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(St.VALUE_SEPARATOR);return[St.SCHEMA_VERSION,i,r].join(St.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=$m.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(St.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(St.VALUE_SEPARATOR),i=e.errors.length,a=[i,t<i?St.OVERFLOW_TRUE:St.OVERFLOW_FALSE].join(St.VALUE_SEPARATOR);return[St.SCHEMA_VERSION,e.cacheHits,n,r,a].join(St.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=St.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Jt?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(St.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=$m.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||Le.EMPTY_STRING,a=e.failedRequests[2*t+1]||Le.EMPTY_STRING,s=e.errors[t]||Le.EMPTY_STRING;if(r+=i.toString().length+a.toString().length+s.length+3,!(r<St.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Le.EMPTY_STRING),e.push(this.regionSource||Le.EMPTY_STRING),e.push(this.regionOutcome||Le.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Zm(e)}}class eg{constructor(e,t,n,r,i,a,s,o,l){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=a,this.nativeMessageHandler=o,this.correlationId=l||Kp(),this.logger=r.clone(un,ff,this.correlationId),this.performanceClient=s}async clearCacheOnLogout(e){if(e){pd.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(pd.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(Zg){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return vd.getAbsoluteUrl(t,sf())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new $m(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement($d,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,a=null!==n&&void 0!==n&&n.length?"true"===n:this.config.auth.instanceAware,s=t&&a?this.config.auth.authority.replace(vd.getDomainFromUrl(i),t.environment):i,o=Ff.generateAuthority(s,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await Tf(Bm,qu,this.logger,this.performanceClient,this.correlationId)(o,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw Qc(Yc);return l}}async function tg(e,t,n,r){n.addQueueMeasurement(pu,e.correlationId);const i=e.authority||t.auth.authority,a=[...e&&e.scopes||[]],s=vr(vr({},e),{},{correlationId:e.correlationId,authority:i,scopes:a});if(s.authenticationScheme){if(s.authenticationScheme===Pt.SSH){if(!e.sshJwk)throw Qc(Gc);if(!e.sshKid)throw Qc(zc)}r.verbose('Authentication Scheme set to "'.concat(s.authenticationScheme,'" as configured in Auth request'))}else s.authenticationScheme=Pt.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!Zc.isEmptyObj(e.claims)&&(s.requestedClaimsHash=await nf(e.claims)),s}async function ng(e,t,n,r,i){r.addQueueMeasurement(fu,e.correlationId);const a=await Tf(tg,pu,i,r,e.correlationId)(e,n,r,i);return vr(vr(vr({},e),a),{},{account:t,forceRefresh:e.forceRefresh||!1})}class rg extends eg{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=vr({correlationId:this.correlationId||Kp()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=vd.getAbsoluteUrl(e.postLogoutRedirectUri,sf())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=vd.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,sf())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=vd.getAbsoluteUrl(sf(),sf())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(xu,this.correlationId);const t=await Tf(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,this.correlationId)(e);return new Qm(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:i,account:a}=e;this.performanceClient.addQueueMeasurement(Cu,this.correlationId);const s=await Tf(this.getDiscoveredAuthority.bind(this),$d,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:i,account:a}),o=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:o.loggerCallback,piiLoggingEnabled:o.piiLoggingEnabled,logLevel:o.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:un,version:ff,cpu:Le.EMPTY_STRING,os:Le.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(ku,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},i=zm.setRequestState(this.browserCrypto,e&&e.state||Le.EMPTY_STRING,r),a=await Tf(tg,pu,this.logger,this.performanceClient,this.correlationId)(vr(vr({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),s=vr(vr({},a),{},{redirectUri:n,state:i,nonce:e.nonce||Kp(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return s;const o=e.account||this.browserStorage.getActiveAccount();return o&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(o.homeAccountId),this.correlationId),s.account=o),s}}const ig="user_switch",ag={[ig]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class sg extends Jt{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,sg.prototype),this.name="NativeAuthError",this.ext=n}}function og(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function lg(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return Gf(jf);case"USER_INTERACTION_REQUIRED":return new qf(e,t);case"USER_CANCEL":return kp(Dh);case"NO_NETWORK":return kp(ep)}return new sg(e,ag[e]||t,n)}class cg{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement($u)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:hn,extensionId:this.extensionId,responseId:Kp(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: ".concat(JSON.stringify(t))),this.messageChannel.port1.postMessage(t),new Promise(((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})}))}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{const r=new cg(e,t,n,pn);return await r.sendHandshakeRequest(),r}catch(Zg){const i=new cg(e,t,n);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:hn,extensionId:this.extensionId,responseId:Kp(),body:{method:mn}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise(((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout((()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(kp(up)),this.handshakeResolvers.delete(e.responseId)}),this.handshakeTimeoutMs)}))}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===hn&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===mn){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace("NativeMessageHandler.onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(kp(hp))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===yn){if(!n)return;const e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)n.reject(lg(e.code,e.description,e.ext));else{if(!e.result)throw Qt(Kt,"Event does not contain result.");e.result.code&&e.result.description?n.reject(lg(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===gn){if(!r)return void this.logger.trace("NativeMessageHandler.onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(i)),this.logger.errorPii("Unable to parse ".concat(e)),n?n.reject(i):r&&r.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,n,r){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(r)switch(r){case Pt.BEARER:case Pt.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}function dg(e,t,n){const r=md(e);if(!r)throw fd(e)?(n.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),n.errorPii("The ".concat(t," detected is: ").concat(e)),kp(Rh)):(n.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),kp(Ih));return r}function ug(e,t,n){if(!e.state)throw kp(Fh);const r=function(e,t){if(!t)return null;try{return zm.parseRequestState(e,t).libraryState.meta}catch(Zg){throw rc(bl)}}(t,e.state);if(!r)throw kp(Nh);if(r.interactionType!==n)throw kp(jh)}function hg(e,t,n,r){var i,a;const s=t.correlationId,o=new Map;gm(o,t.embeddedClientId||(null===(i=t.extraQueryParameters)||void 0===i?void 0:i[im])||e.clientId);if(mm(o,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,null===(a=e.authority.options.OIDCOptions)||void 0===a?void 0:a.defaultScopes),vm(o,t.redirectUri),Cm(o,s),function(e,t){e.set("response_mode",t||lt)}(o,t.responseMode),Fm(o),t.prompt&&(!function(e,t){e.set("prompt",t)}(o,t.prompt),null===r||void 0===r||r.addFields({prompt:t.prompt},s)),t.domainHint&&(!function(e,t){e.set("domain_hint",t)}(o,t.domainHint),null===r||void 0===r||r.addFields({domainHintFromRequest:!0},s)),t.prompt!==nt.SELECT_ACCOUNT)if(t.sid&&t.prompt===nt.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),wm(o,t.sid),null===r||void 0===r||r.addFields({sidFromRequest:!0},s);else if(t.account){const e=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}(t.account);let i=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}(t.account);if(i&&t.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),i=null),i){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),ym(o,i),null===r||void 0===r||r.addFields({loginHintFromClaim:!0},s);try{_m(o,td(t.account.homeAccountId))}catch(Zg){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===nt.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),wm(o,e),null===r||void 0===r||r.addFields({sidFromClaim:!0},s);try{_m(o,td(t.account.homeAccountId))}catch(Zg){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),ym(o,t.loginHint),bm(o,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},s);else if(t.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),ym(o,t.account.username),null===r||void 0===r||r.addFields({loginHintFromUpn:!0},s);try{_m(o,td(t.account.homeAccountId))}catch(Zg){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),ym(o,t.loginHint),bm(o,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},s));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&function(e,t){e.set("nonce",t)}(o,t.nonce),t.state&&Pm(o,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&xm(o,t.claims,e.clientCapabilities),t.embeddedClientId&&Dm(o,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(hm)||Rm(o),o}function pg(e,t,n,r){const i=gd(t,n,r);return vd.appendQueryString(e.authorizationEndpoint,i)}function fg(e,t){if(!e.state||!t)throw e.state?rc(wl,"Cached State"):rc(wl,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(Zg){throw rc(bl,e.state)}try{r=decodeURIComponent(t)}catch(Zg){throw rc(bl,e.state)}if(n!==r)throw rc(_l);if(e.error||e.error_description||e.suberror){const t=function(e){var t,n;const r="code=",i=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(r);return i&&i>=0?null===(n=e.error_uri)||void 0===n?void 0:n.substring(i+r.length):void 0}(e);if(Uf(e.error,e.error_description,e.suberror))throw new qf(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new qm(e.error||"",e.error_description,e.suberror,t)}}class mg{constructor(e,t,n,r,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=i}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(Eu,t.correlationId);try{n=function(e,t){if(fg(e,t),!e.code)throw rc(Vl);return e}(e,t.state)}catch(Zg){throw Zg instanceof qm&&Zg.subError===Dh?kp(Dh):Zg}return Tf(this.handleCodeResponseFromServer.bind(this),Au,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(Au,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Tf(this.authModule.updateAuthority.bind(this.authModule),Ru,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await Tf(this.authModule.acquireToken.bind(this.authModule),Nu,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:nm}:e.loginHint?{credential:e.loginHint,type:rm}:null}}function gg(e){if(null==e)throw new TypeError("Cannot destructure "+e)}class vg extends Gm{constructor(e,t){super(e,t)}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(du,e.correlationId);let n=Ut;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Zc.isEmptyObj(e.claims))throw this.setCacheOutcome(Gt,e.correlationId),rc(zl);if(!e.account)throw rc(Ml);const r=e.account.tenantId||function(e){var t;const n=null===(t=new vd(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(n){case Qe:case Ze:case $e:return;default:return n}}(e.authority),i=this.cacheManager.getTokenKeys(),a=this.cacheManager.getAccessToken(e.account,e,i,r,this.performanceClient,e.correlationId);if(!a)throw this.setCacheOutcome(zt,e.correlationId),rc(zl);if(s=a.cachedAt,Number(s)>cc()||hc(a.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ht,e.correlationId),rc(zl);var s;a.refreshOn&&hc(a.refreshOn,0)&&(n=Wt);const o=e.authority||this.authority.getPreferredCache(),l={account:this.cacheManager.readAccountFromCache(e.account),accessToken:a,idToken:this.cacheManager.getIdToken(e.account,i,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Tf(this.generateResultFromCacheRecord.bind(this),uu,this.logger,this.performanceClient,e.correlationId)(l,e),n]}setCacheOutcome(e,t){var n,r;null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(e),null===(r=this.performanceClient)||void 0===r||r.addFields({cacheOutcome:e},t),e!==Ut&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var n;let r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(uu,t.correlationId),e.idToken&&(r=oc(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var i;const e=null===(i=r)||void 0===i?void 0:i.auth_time;if(!e)throw rc(Cl);lc(e,t.maxAge)}return Km.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class yg extends rg{async acquireToken(e){this.performanceClient.addQueueMeasurement(Yd,e.correlationId);const t=this.initializeServerTelemetryManager(Un),n=await Tf(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new vg(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await Tf(r.acquireCachedToken.bind(r),du,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(i){throw i instanceof Cp&&i.errorCode===ap&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(null===t||void 0===t?void 0:t.account)}}const bg=["prompt"],_g=["scopes"];class wg extends eg{constructor(e,t,n,r,i,a,s,o,l,c,d,u){var h;super(e,t,n,r,i,a,o,l,u),this.apiId=s,this.accountId=c,this.nativeMessageHandler=l,this.nativeStorageManager=d,this.silentCacheClient=new yg(e,this.nativeStorageManager,n,r,i,a,o,l,u);const p=this.nativeMessageHandler.getExtensionId()===pn?"chrome":null!==(h=this.nativeMessageHandler.getExtensionId())&&void 0!==h&&h.length?"unknown":void 0;this.skus=$m.makeExtraSkuString({libraryName:un,libraryVersion:ff,extensionName:p,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=vr(vr({},e.extraParameters),{},{[cm]:this.skus})}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(eu,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(eu,e.correlationId),r=cc(),i=this.initializeServerTelemetryManager(this.apiId);try{const a=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,a);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(Zg){if(t===rr)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),Zg;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const s=Object.assign({},(gg(a),a)),o={method:vn,request:s},l=await this.nativeMessageHandler.sendMessage(o),c=this.validateNativeResponse(l);return await this.handleNativeResponse(c,a,r).then((e=>(n.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),i.clearNativeBrokerErrorCode(),e))).catch((e=>{throw n.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))}catch(Zg){throw Zg instanceof sg&&i.setNativeBrokerErrorCode(Zg.errorCode),Zg}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:$c.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),rc(Dl);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw rc(Dl);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),i=vr(vr({},n),{},{idTokenClaims:null===r||void 0===r?void 0:r.idTokenClaims,idToken:null===r||void 0===r?void 0:r.idToken});return vr(vr({},r),{},{account:i})}catch(Zg){throw Zg}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=Object.assign({},(gg(e),e));delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n),i={method:vn,request:r};try{const e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e)}catch(Zg){if(Zg instanceof sg){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(Zg.errorCode),og(Zg))throw Zg}}this.browserStorage.setTemporaryCache(Fn,JSON.stringify(r),!0);const a={apiId:On,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(s,a)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:r}=n,i=nd(n,bg);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Fn));const a={method:vn,request:i},s=cc();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.nativeMessageHandler.sendMessage(a);this.validateNativeResponse(e);const t=this.handleNativeResponse(e,i,s),n=await t;return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n}catch(Zg){throw Zg}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){var r,i;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const a=oc(e.id_token,Rp),s=this.createHomeAccountIdentifier(e,a),o=null===(r=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))||void 0===r?void 0:r.homeAccountId;if(null!==(i=t.extraParameters)&&void 0!==i&&i.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(s!==o&&e.account.id!==t.accountId)throw lg(ig);const l=await this.getDiscoveredAuthority({requestAuthority:t.authority}),c=Ym(this.browserStorage,l,s,Rp,a,e.client_info,void 0,a.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const d=await this.generateAuthenticationResult(e,t,a,c,l.canonicalAuthority,n);return await this.cacheAccount(c),await this.cacheNativeTokens(e,t,s,a,e.access_token,d.tenantId,n),d}createHomeAccountIdentifier(e,t){return pd.generateHomeAccountId(e.client_info||Le.EMPTY_STRING,ld,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?$c.fromString(e.scope):$c.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===Pt.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new Wm(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw rc(Xl);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,i,a){const s=this.addTelemetryFromNativeResponse(e),o=e.scope?$c.fromString(e.scope):$c.fromString(t.scope),l=e.account.properties||{},c=l.UID||n.oid||n.sub||Le.EMPTY_STRING,d=l.TenantId||n.tid||Le.EMPTY_STRING,u=od(r.getAccountInfo(),void 0,n,e.id_token);u.nativeAccountId!==e.account.id&&(u.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),p=t.tokenType===Pt.POP?Pt.POP:Pt.BEARER;return{authority:i,uniqueId:c,tenantId:d,scopes:o.asArray(),account:u,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!s&&this.isResponseFromCache(s),expiresOn:uc(a+e.expires_in),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch((e=>{this.logger.error("Error occurred while removing account context from browser storage. ".concat(e))}))}cacheNativeTokens(e,t,n,r,i,a,s){const o=fc(n,t.authority,e.id_token||"",t.clientId,r.tid||""),l=s+(t.tokenType===Pt.POP?Le.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),c=this.generateScopes(e,t),d={idToken:o,accessToken:mc(n,t.authority,i,t.clientId,r.tid||a,c.printScopes(),l,0,Rp,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(d,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Qt(Kt,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(Zg){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new vd(t);n.validateAsUri();const{scopes:r}=e,i=nd(e,_g),a=new $c(r||[]);a.appendScopes(Ge);const s=vr(vr({},i),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:a.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case Dn:case Un:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),nt.NONE}if(e.prompt)switch(e.prompt){case nt.NONE:case nt.CONSENT:case nt.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e.prompt," is not compatible with native flow")),kp(mp)}else this.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:vr(vr({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(s.signPopToken&&e.popKid)throw kp(vp);if(this.handleExtraBrokerParams(s),s.extraParameters=s.extraParameters||{},s.extraParameters.telemetry=fn,e.authenticationScheme===Pt.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new Wm(this.browserCrypto);let r;if(s.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:s.keyId})),s.signPopToken=!1;else{const i=await Tf(n.generateCnf.bind(n),Ou,this.logger,this.performanceClient,e.correlationId)(t,this.logger);r=i.reqCnfString,s.keyId=i.kid,s.signPopToken=!0}s.reqCnf=r}return this.addRequestSKUs(s),s}handleExtraBrokerParams(e){var t;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(dm)&&e.extraParameters.hasOwnProperty(um)&&e.extraParameters.hasOwnProperty(im);if(!e.embeddedClientId&&!n)return;let r="";const i=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[um],r=e.extraParameters[im]),e.extraParameters={child_client_id:r,child_redirect_uri:i},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:r,embeddedRedirectUri:i},e.correlationId)}}async function xg(e,t,n,r,i){const a=hg(vr(vr({},e.auth),{},{authority:t}),n,r,i);if(km(a,{sku:un,version:ff,os:"",cpu:""}),e.auth.protocolMode!==ll&&Sm(a,e.telemetry.application),n.platformBroker&&(function(e){e.set("nativebroker","1")}(a),n.authenticationScheme===Pt.POP)){const e=new Pf(r,i),t=new Wm(e);let s;if(n.popKid)s=e.encodeKid(n.popKid);else{s=(await Tf(t.generateCnf.bind(t),Ou,r,i,n.correlationId)(n,r)).reqCnfString}jm(a,s)}return pm(a,n.correlationId,i),a}async function Cg(e,t,n,r,i){if(!n.codeChallenge)throw Qc(Dc);const a=await Tf(xg,Pu,r,i,n.correlationId)(e,t,n,r,i);return fm(a,it),function(e,t,n){if(!t||!n)throw Qc(Dc);e.set("code_challenge",t),e.set("code_challenge_method",n)}(a,n.codeChallenge,Le.S256_CODE_CHALLENGE_METHOD),Nm(a,n.extraQueryParameters||{}),pg(t,a,e.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function kg(e,t,n,r,i,a){if(!r.earJwk)throw kp(Ph);const s=await xg(t,n,r,i,a);fm(s,at),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(s,r.earJwk);const o=new Map;Nm(o,r.extraQueryParameters||{});return function(e,t,n){const r=e.createElement("form");return r.method="post",r.action=t,n.forEach(((t,n)=>{const i=e.createElement("input");i.hidden=!0,i.name=n,i.value=t,r.appendChild(i)})),e.body.appendChild(r),r}(e,pg(n,o,t.auth.encodeExtraQueryParams,r.extraQueryParameters),s)}async function Sg(e,t,n,r,i,a,s,o,l,c){if(!c)throw kp(pp);const d=new Pf(o,l),u=new wg(r,i,d,o,s,r.system.navigationClient,n,l,c,t,a,e.correlationId),{userRequestState:h}=zm.parseRequestState(d,e.state);return Tf(u.acquireToken.bind(u),eu,o,l,e.correlationId)(vr(vr({},e),{},{state:h,prompt:void 0}))}async function Pg(e,t,n,r,i,a,s,o,l,c,d,u){if(Um.removeThrottle(s,i.auth.clientId,e),t.accountId)return Tf(Sg,Iu,c,d,e.correlationId)(e,t.accountId,r,i,s,o,l,c,d,u);const h=vr(vr({},e),{},{code:t.code||"",codeVerifier:n}),p=new mg(a,s,h,c,d);return await Tf(p.handleCodeResponse.bind(p),Eu,c,d,e.correlationId)(t,e)}async function Ag(e,t,n,r,i,a,s,o,l,c,d){if(Um.removeThrottle(a,r.auth.clientId,e),fg(t,e.state),!t.ear_jwe)throw kp(Ah);if(!e.earJwk)throw kp(Ph);const u=JSON.parse(await Tf(Jp,yh,l,c,e.correlationId)(e.earJwk,t.ear_jwe));if(u.accountId)return Tf(Sg,Iu,l,c,e.correlationId)(e,u.accountId,n,r,a,s,o,l,c,d);const h=new Km(r.auth.clientId,a,new Pf(l,c),l,null,null,c);h.validateTokenResponse(u);const p={code:"",state:e.state,nonce:e.nonce,client_info:u.client_info,cloud_graph_host_name:u.cloud_graph_host_name,cloud_instance_host_name:u.cloud_instance_host_name,cloud_instance_name:u.cloud_instance_name,msgraph_host:u.msgraph_host};return await Tf(h.handleServerTokenResponse.bind(h),Du,l,c,e.correlationId)(u,i,cc(),e,p,void 0,void 0,void 0,void 0)}async function Eg(e,t,n){e.addQueueMeasurement(sh,n);const r=Ef(Tg,oh,t,e,n)(e,t,n);return{verifier:r,challenge:await Tf(Ig,lh,t,e,n)(r,e,t,n)}}function Tg(e,t,n){try{const r=new Uint8Array(32);Ef(Wp,dh,t,e,n)(r);return Tp(r)}catch(Zg){throw kp(Sh)}}async function Ig(e,t,n,r){t.addQueueMeasurement(lh,r);try{const i=await Tf(Hp,ch,n,t,r)(e,t,r);return Tp(new Uint8Array(i))}catch(Zg){throw kp(Sh)}}class Fg extends rg{constructor(e,t,n,r,i,a,s,o,l,c){super(e,t,n,r,i,a,s,l,c),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=o,this.eventHandler=i}acquireToken(e,t){try{var n;const r={popupName:this.generatePopupName(e.scopes||Ge,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(n=e.popupWindowParent)&&void 0!==n?n:window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r,t))}catch(Zg){return Promise.reject(Zg)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},i=e&&e.authority,a=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,i,a)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,i,a))}catch(Zg){return Promise.reject(Zg)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");const r=await Tf(this.initializeAuthorizationRequest.bind(this),ku,this.logger,this.performanceClient,this.correlationId)(e,Hn.Popup);t.popup&&hf(r.authority);const i=cg.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);return r.platformBroker=i,this.config.auth.protocolMode===cl?this.executeEarFlow(r,t):this.executeCodeFlow(r,t,n)}async executeCodeFlow(e,t,n){const r=e.correlationId,i=this.initializeServerTelemetryManager(Ln),a=n||await Tf(Eg,sh,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s=vr(vr({},e),{},{codeChallenge:a.challenge});try{const n=await Tf(this.createAuthCodeClient.bind(this),xu,this.logger,this.performanceClient,r)({serverTelemetryManager:i,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account}),o=await Tf(Cg,Su,this.logger,this.performanceClient,r)(this.config,n.authority,s,this.logger,this.performanceClient),l=this.initiateAuthRequest(o,t);this.eventHandler.emitEvent(Dr,Hn.Popup,{popupWindow:l},null);const c=await this.monitorPopupForHash(l,t.popupWindowParent),d=Ef(dg,Bu,this.logger,this.performanceClient,this.correlationId)(c,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Tf(Pg,Fu,this.logger,this.performanceClient,r)(e,d,a.verifier,Ln,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}catch(Zg){var o;throw null===(o=t.popup)||void 0===o||o.close(),Zg instanceof Jt&&(Zg.setCorrelationId(this.correlationId),i.cacheFailedRequest(Zg)),Zg}}async executeEarFlow(e,t){const n=e.correlationId,r=await Tf(this.getDiscoveredAuthority.bind(this),$d,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await Tf(Xp,vh,this.logger,this.performanceClient,n)(),a=vr(vr({},e),{},{earJwk:i}),s=t.popup||this.openPopup("about:blank",t);(await kg(s.document,this.config,r,a,this.logger,this.performanceClient)).submit();const o=await Tf(this.monitorPopupForHash.bind(this),bu,this.logger,this.performanceClient,n)(s,t.popupWindowParent),l=Ef(dg,Bu,this.logger,this.performanceClient,this.correlationId)(o,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Tf(Ag,Tu,this.logger,this.performanceClient,n)(a,l,Ln,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Br,Hn.Popup,e);const i=this.initializeServerTelemetryManager(zn);try{await this.clearCacheOnLogout(e.account);const l=await Tf(this.createAuthCodeClient.bind(this),xu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:n,account:e.account||void 0});try{l.authority.endSessionEndpoint}catch(c){var a;if(null!==(a=e.account)&&void 0!==a&&a.homeAccountId&&e.postLogoutRedirectUri&&l.authority.protocolMode===ll){var s,o;if(this.browserStorage.removeAccount(null===(s=e.account)||void 0===s?void 0:s.homeAccountId),this.eventHandler.emitEvent(qr,Hn.Popup,e),r){const e={apiId:zn,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=vd.getAbsoluteUrl(r,sf());await this.navigationClient.navigateInternal(t,e)}return void(null===(o=t.popup)||void 0===o||o.close())}}const d=l.getLogoutUri(e);this.eventHandler.emitEvent(qr,Hn.Popup,e);const u=this.openPopup(d,t);if(this.eventHandler.emitEvent(Dr,Hn.Popup,{popupWindow:u},null),await this.monitorPopupForHash(u,t.popupWindowParent).catch((()=>{})),r){const e={apiId:zn,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=vd.getAbsoluteUrl(r,sf());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(Zg){var l;throw null===(l=t.popup)||void 0===l||l.close(),Zg instanceof Jt&&(Zg.setCorrelationId(this.correlationId),i.cacheFailedRequest(Zg)),this.eventHandler.emitEvent(Ur,Hn.Popup,null,Zg),this.eventHandler.emitEvent(Gr,Hn.Popup),Zg}this.eventHandler.emitEvent(Gr,Hn.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),kp(Th)}monitorPopupForHash(e,t){return new Promise(((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval((()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(kp(Dh));let i="";try{i=e.location.href}catch(Zg){}if(!i||"about:blank"===i)return;clearInterval(r);let a="";const s=this.config.auth.OIDCOptions.serverResponseType;e&&(a=s===st?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(a)}),this.config.system.pollIntervalMilliseconds)})).finally((()=>{this.cleanPopup(e,t)}))}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),n=this.openSizedPopup(e,t)),!n)throw kp(Lh);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(Zg){throw this.logger.error("error opening popup "+Zg.message),kp(Oh)}}openSizedPopup(e,t){var n,r,i,a;let{popupName:s,popupWindowAttributes:o,popupWindowParent:l}=t;const c=l.screenLeft?l.screenLeft:l.screenX,d=l.screenTop?l.screenTop:l.screenY,u=l.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=l.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=null===(n=o.popupSize)||void 0===n?void 0:n.width,f=null===(r=o.popupSize)||void 0===r?void 0:r.height,m=null===(i=o.popupPosition)||void 0===i?void 0:i.top,g=null===(a=o.popupPosition)||void 0===a?void 0:a.left;return(!p||p<0||p>u)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),p=on),(!f||f<0||f>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),f=ln),(!m||m<0||m>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),m=Math.max(0,h/2-ln/2+d)),(!g||g<0||g>u)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),g=Math.max(0,u/2-on/2+c)),l.open(e,s,"width=".concat(p,", height=").concat(f,", top=").concat(m,", left=").concat(g,", scrollbars=yes"))}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return"".concat(cn,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(cn,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class Rg extends rg{constructor(e,t,n,r,i,a,s,o,l,c){super(e,t,n,r,i,a,s,l,c),this.nativeStorage=o}async acquireToken(e){const t=await Tf(this.initializeAuthorizationRequest.bind(this),ku,this.logger,this.performanceClient,this.correlationId)(e,Hn.Redirect);t.platformBroker=cg.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);const n=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(zr,Hn.Redirect))},r=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii("Redirect start page: ".concat(r)),this.browserStorage.setTemporaryCache(Pn,r,!0),window.addEventListener("pageshow",n);try{this.config.auth.protocolMode===cl?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(Zg){throw Zg instanceof Jt&&Zg.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),Zg}}async executeCodeFlow(e,t){const n=e.correlationId,r=this.initializeServerTelemetryManager(On),i=await Tf(Eg,sh,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),a=vr(vr({},e),{},{codeChallenge:i.challenge});this.browserStorage.cacheAuthorizeRequest(a,i.verifier);try{const n=await Tf(this.createAuthCodeClient.bind(this),xu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),i=await Tf(Cg,Su,this.logger,this.performanceClient,e.correlationId)(this.config,n.authority,a,this.logger,this.performanceClient);return await this.initiateAuthRequest(i,t)}catch(Zg){throw Zg instanceof Jt&&(Zg.setCorrelationId(this.correlationId),r.cacheFailedRequest(Zg)),Zg}}async executeEarFlow(e){const t=e.correlationId,n=await Tf(this.getDiscoveredAuthority.bind(this),$d,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await Tf(Xp,vh,this.logger,this.performanceClient,t)(),i=vr(vr({},e),{},{earJwk:r});this.browserStorage.cacheAuthorizeRequest(i);(await kg(document,this.config,n,i,this.logger,this.performanceClient)).submit()}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=this.initializeServerTelemetryManager(Bn);try{const[a,s]=this.getRedirectResponse(e||"");if(!a)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?r.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const o=this.browserStorage.getTemporaryCache(Pn,!0)||Le.EMPTY_STRING,l=vd.removeHashFromUrl(o);if(l===vd.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),o.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(o);return await this.handleResponse(a,t,n,i)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(a,t,n,i);if(!af()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(An,s,!0);const e={apiId:Bn,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let r=!0;if(o&&"null"!==o)this.logger.verbose("Navigating to loginRequestUrl: ".concat(o)),r=await this.navigationClient.navigateInternal(o,e);else{const t=function(){const e=new vd(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(Pn,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),r=await this.navigationClient.navigateInternal(t,e)}if(!r)return await this.handleResponse(a,t,n,i)}return null}catch(Zg){throw Zg instanceof Jt&&(Zg.setCorrelationId(this.correlationId),i.cacheFailedRequest(Zg)),Zg}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===st?window.location.search:window.location.hash);let n=md(t);if(n){try{ug(n,this.browserCrypto,Hn.Redirect)}catch(Zg){return Zg instanceof Jt&&this.logger.error("Interaction type validation failed due to ".concat(Zg.errorCode,": ").concat(Zg.errorMessage)),[null,""]}return rf(window),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}const r=this.browserStorage.getTemporaryCache(An,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(An)),r&&(n=md(r),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,r]):[null,""]}async handleResponse(e,t,n,r){if(!e.state)throw kp(Fh);if(e.ear_jwe){const n=await Tf(this.getDiscoveredAuthority.bind(this),$d,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return Tf(Ag,Tu,this.logger,this.performanceClient,t.correlationId)(t,e,On,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}const i=await Tf(this.createAuthCodeClient.bind(this),xu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority});return Tf(Pg,Fu,this.logger,this.performanceClient,t.correlationId)(t,e,n,On,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const n={apiId:On,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},r=t||this.config.auth.onRedirectNavigate;if("function"===typeof r){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==r(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),kp(Th)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(Gn);try{this.eventHandler.emitEvent(Br,Hn.Redirect,e),await this.clearCacheOnLogout(t.account);const s={apiId:Gn,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await Tf(this.createAuthCodeClient.bind(this),xu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===ll)try{o.authority.endSessionEndpoint}catch(a){var r,i;if(null!==(r=t.account)&&void 0!==r&&r.homeAccountId)return this.browserStorage.removeAccount(null===(i=t.account)||void 0===i?void 0:i.homeAccountId),void this.eventHandler.emitEvent(qr,Hn.Redirect,t)}const l=o.getLogoutUri(t);if(this.eventHandler.emitEvent(qr,Hn.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Sn),void await this.navigationClient.navigateExternal(l,s);if(!1!==e.onRedirectNavigate(l))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Sn),void await this.navigationClient.navigateExternal(l,s);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(Zg){throw Zg instanceof Jt&&(Zg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Zg)),this.eventHandler.emitEvent(Ur,Hn.Redirect,null,Zg),this.eventHandler.emitEvent(Gr,Hn.Redirect),Zg}this.eventHandler.emitEvent(Gr,Hn.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return vd.getAbsoluteUrl(t,sf())}}async function Ng(e,t,n,r,i){if(t.addQueueMeasurement(yu,r),!e)throw n.info("Navigate url is empty"),kp(Th);return i?Tf(Og,_u,n,t,r)(e,i,t,r):Ef(Lg,wu,n,t,r)(e)}async function jg(e,t,n,r,i){const a=Dg();if(!a.contentDocument)throw"No document associated with iframe!";return(await kg(a.contentDocument,e,t,n,r,i)).submit(),a}async function Mg(e,t,n,r,i,a,s){return r.addQueueMeasurement(bu,a),new Promise(((r,a)=>{t<pf&&i.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat(pf,"ms). This may result in timeouts."));const o=window.setTimeout((()=>{window.clearInterval(l),a(kp(qh))}),t),l=window.setInterval((()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(Zg){}if(!t||"about:blank"===t)return;let i="";n&&(i=s===st?n.location.search:n.location.hash),window.clearTimeout(o),window.clearInterval(l),r(i)}),n)})).finally((()=>{Ef(Bg,eh,i,r,a)(e)}))}function Og(e,t,n,r){return n.addQueueMeasurement(_u,r),new Promise(((n,r)=>{const i=Dg();window.setTimeout((()=>{i?(i.src=e,n(i)):r("Unable to load iframe")}),t)}))}function Lg(e){const t=Dg();return t.src=e,t}function Dg(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function Bg(e){document.body===e.parentNode&&document.body.removeChild(e)}class qg extends rg{constructor(e,t,n,r,i,a,s,o,l,c,d){super(e,t,n,r,i,a,o,c,d),this.apiId=s,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(Xd,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=vr({},e);t.prompt?t.prompt!==nt.NONE&&t.prompt!==nt.NO_SESSION&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(nt.NONE)),t.prompt=nt.NONE):t.prompt=nt.NONE;const n=await Tf(this.initializeAuthorizationRequest.bind(this),ku,this.logger,this.performanceClient,e.correlationId)(t,Hn.Silent);return n.platformBroker=cg.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme),hf(n.authority),this.config.auth.protocolMode===cl?this.executeEarFlow(n):this.executeCodeFlow(n)}async executeCodeFlow(e){let t;const n=this.initializeServerTelemetryManager(this.apiId);try{return t=await Tf(this.createAuthCodeClient.bind(this),xu,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await Tf(this.silentTokenHelper.bind(this),vu,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(Zg){if(Zg instanceof Jt&&(Zg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Zg)),!t||!(Zg instanceof Jt)||Zg.errorCode!==sn)throw Zg;return this.performanceClient.addFields({retryError:Zg.errorCode},this.correlationId),await Tf(this.silentTokenHelper.bind(this),vu,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,n=await Tf(this.getDiscoveredAuthority.bind(this),$d,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await Tf(Xp,vh,this.logger,this.performanceClient,t)(),i=vr(vr({},e),{},{earJwk:r}),a=await Tf(jg,yu,this.logger,this.performanceClient,t)(this.config,n,i,this.logger,this.performanceClient),s=this.config.auth.OIDCOptions.serverResponseType,o=await Tf(Mg,bu,this.logger,this.performanceClient,t)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,s),l=Ef(dg,Bu,this.logger,this.performanceClient,t)(o,s,this.logger);return Tf(Ag,Tu,this.logger,this.performanceClient,t)(i,l,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}logout(){return Promise.reject(kp(Wh))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(vu,n);const r=await Tf(Eg,sh,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),i=vr(vr({},t),{},{codeChallenge:r.challenge}),a=await Tf(Cg,Su,this.logger,this.performanceClient,n)(this.config,e.authority,i,this.logger,this.performanceClient),s=await Tf(Ng,yu,this.logger,this.performanceClient,n)(a,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),o=this.config.auth.OIDCOptions.serverResponseType,l=await Tf(Mg,bu,this.logger,this.performanceClient,n)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,o),c=Ef(dg,Bu,this.logger,this.performanceClient,n)(l,o,this.logger);return Tf(Pg,Fu,this.logger,this.performanceClient,n)(t,c,r.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}}class Ug extends Gm{constructor(e,t){super(e,t)}async acquireToken(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(au,e.correlationId);const r=cc(),i=await Tf(this.executeTokenRequest.bind(this),iu,this.logger,this.performanceClient,e.correlationId)(e,this.authority),a=null===(n=i.headers)||void 0===n?void 0:n[Ye],s=new Km(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(i.body),Tf(s.handleServerTokenResponse.bind(s),Du,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,a)}async acquireTokenByRefreshToken(e){var t;if(!e)throw Qc(Mc);if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ou,e.correlationId),!e.account)throw rc(Ml);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Tf(this.acquireTokenWithCachedRefreshToken.bind(this),su,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(Zg){const n=Zg instanceof qf&&Zg.errorCode===Nf,r=Zg instanceof qm&&Zg.errorCode===Ft&&Zg.subError===Rt;if(n||r)return Tf(this.acquireTokenWithCachedRefreshToken.bind(this),su,this.logger,this.performanceClient,e.correlationId)(e,!1);throw Zg}return Tf(this.acquireTokenWithCachedRefreshToken.bind(this),su,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(su,e.correlationId);const r=Ef(this.cacheManager.getRefreshToken.bind(this.cacheManager),nh,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw Gf(Nf);var i;if(r.expiresOn&&hc(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw null===(i=this.performanceClient)||void 0===i||i.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Gf(Mf);const a=vr(vr({},e),{},{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Pt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:nm}});try{return await Tf(this.acquireToken.bind(this),au,this.logger,this.performanceClient,e.correlationId)(a)}catch(Zg){var s;if(Zg instanceof qf)if(null===(s=this.performanceClient)||void 0===s||s.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Zg.subError===Of){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=pc(r);this.cacheManager.removeRefreshToken(e)}throw Zg}}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(iu,e.correlationId);const r=this.createTokenQueryParameters(e),i=vd.appendQueryString(t.tokenEndpoint,r),a=await Tf(this.createTokenRequestBody.bind(this),lu,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),o=zf(this.config.authOptions.clientId,e);return Tf(this.executePostToTokenEndpoint.bind(this),nu,this.logger,this.performanceClient,e.correlationId)(i,a,s,o,e.correlationId,nu)}async createTokenRequestBody(e){var t,n,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(lu,e.correlationId);const i=new Map;if(gm(i,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[im])||this.config.authOptions.clientId),e.redirectUri&&vm(i,e.redirectUri),mm(i,e.scopes,!0,null===(r=this.config.authOptions.authority.options.OIDCOptions)||void 0===r?void 0:r.defaultScopes),Im(i,dt),Fm(i),km(i,this.config.libraryInfo),Sm(i,this.config.telemetry.application),Lm(i),this.serverTelemetryManager&&!Ld(this.config)&&Om(i,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(i,e.refreshToken),this.config.clientCredentials.clientSecret&&Am(i,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;Em(i,await Jm(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Tm(i,t.assertionType)}if(e.authenticationScheme===Pt.POP){const t=new Wm(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await Tf(t.generateCnf.bind(t),Ou,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}jm(i,n)}else if(e.authenticationScheme===Pt.SSH){if(!e.sshJwk)throw Qc(Gc);Mm(i,e.sshJwk)}if((!Zc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&xm(i,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case nm:try{_m(i,td(e.ccsCredential.credential))}catch(Zg){this.logger.verbose("Could not parse home account ID for CCS Header: "+Zg)}break;case rm:bm(i,e.ccsCredential.credential)}return e.embeddedClientId&&Dm(i,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Nm(i,e.tokenBodyParameters),pm(i,e.correlationId,this.performanceClient),gd(i)}}class Gg extends rg{async acquireToken(e){this.performanceClient.addQueueMeasurement(Qd,e.correlationId);const t=await Tf(tg,pu,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n=vr(vr({},e),t);e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(Un),i=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return Tf(i.acquireTokenByRefreshToken.bind(i),ou,this.logger,this.performanceClient,e.correlationId)(n).catch((e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e}))}logout(){return Promise.reject(kp(Wh))}async createRefreshTokenClient(e){const t=await Tf(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Ug(t,this.performanceClient)}}class zg{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw kp(Zh);const r=e.correlationId||Kp(),i=t.id_token?oc(t.id_token,Rp):void 0,a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new Ff(Ff.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,a,this.logger,e.correlationId||Kp()):void 0,o=await this.loadAccount(e,n.clientInfo||t.client_info||"",r,i,s),l=await this.loadIdToken(t,o.homeAccountId,o.environment,o.realm,r),c=await this.loadAccessToken(e,t,o.homeAccountId,o.environment,o.realm,n,r),d=await this.loadRefreshToken(t,o.homeAccountId,o.environment,r);return this.generateAuthenticationResult(e,{account:o,idToken:l,accessToken:c,refreshToken:d},i,s)}async loadAccount(e,t,n,r,i){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=pd.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!i||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),kp(ip);const a=pd.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,r),s=null===r||void 0===r?void 0:r.tid,o=Ym(this.storage,i,a,Rp,r,t,i.hostnameAndPort,s,void 0,void 0,this.logger);return await this.storage.setAccount(o,n),o}async loadIdToken(e,t,n,r,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const a=fc(t,n,e.id_token,this.config.auth.clientId,r);return await this.storage.setIdTokenCredential(a,i),a}async loadAccessToken(e,t,n,r,i,a,s){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const o=t.scope?$c.fromString(t.scope):new $c(e.scopes),l=a.expiresOn||t.expires_in+cc(),c=a.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+cc(),d=mc(n,r,t.access_token,this.config.auth.clientId,i,o.printScopes(),l,c,Rp);return await this.storage.setAccessTokenCredential(d,s),d}async loadRefreshToken(e,t,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const i=gc(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(i,r),i}generateAuthenticationResult(e,t,n,r){var i,a,s;let o,l="",c=[],d=null;null!==t&&void 0!==t&&t.accessToken&&(l=t.accessToken.secret,c=$c.fromString(t.accessToken.target).asArray(),d=uc(t.accessToken.expiresOn),o=uc(t.accessToken.extendedExpiresOn));const u=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:c,account:u.getAccountInfo(),idToken:(null===(i=t.idToken)||void 0===i?void 0:i.secret)||"",idTokenClaims:n||{},accessToken:l,fromCache:!0,expiresOn:d,correlationId:e.correlationId||"",requestId:"",extExpiresOn:o,familyId:(null===(a=t.refreshToken)||void 0===a?void 0:a.familyId)||"",tokenType:(null===t||void 0===t||null===(s=t.accessToken)||void 0===s?void 0:s.tokenType)||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}class Hg extends Qm{constructor(e){super(e),this.includeRedirectUri=!1}}class Wg extends rg{constructor(e,t,n,r,i,a,s,o,l,c){super(e,t,n,r,i,a,o,l,c),this.apiId=s}async acquireToken(e){if(!e.code)throw kp(sp);const t=await Tf(this.initializeAuthorizationRequest.bind(this),ku,this.logger,this.performanceClient,e.correlationId)(e,Hn.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r=vr(vr({},t),{},{code:e.code}),i=await Tf(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new Hg(i);this.logger.verbose("Auth code client created");const s=new mg(a,this.browserStorage,r,this.logger,this.performanceClient);return await Tf(s.handleCodeResponseFromServer.bind(s),Au,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(Zg){throw Zg instanceof Jt&&(Zg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Zg)),Zg}}logout(){return Promise.reject(kp(Wh))}}function Vg(e){const t=null===e||void 0===e?void 0:e.idTokenClaims;return null!==t&&void 0!==t&&t.tfp||null!==t&&void 0!==t&&t.acr?"B2C":null!==t&&void 0!==t&&t.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===(null===t||void 0===t?void 0:t.tid)?"MSA":"AAD":void 0}function Kg(e,t){try{df(e)}catch(Zg){throw t.end({success:!1},Zg),Zg}}class Yg{constructor(e){var t,n,r,i;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Pf(this.logger,this.performanceClient):ic,this.eventHandler=new tm(this.logger),this.browserStorage=this.isBrowserEnvironment?new $f(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(Zg){throw Qc(Bc)}return{canonicalAuthority:e.authority?Rf(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)):(t=this.config.auth.clientId,n=this.logger,r=this.performanceClient,i=this.eventHandler,new $f(t,{cacheLocation:wn,temporaryCacheLocation:wn,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},ic,n,r,i));const a={cacheLocation:wn,temporaryCacheLocation:wn,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new $f(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new zg(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const n=new Yg(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(br);const n=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(mu,n);if(this.eventHandler.emitEvent(yr),!t)try{this.logMultipleInstances(i)}catch(a){}if(await Tf(this.browserStorage.initialize.bind(this.browserStorage),gu,this.logger,this.performanceClient,n)(n),r)try{this.nativeExtensionProvider=await cg.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(Zg){this.logger.verbose(Zg)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await Tf(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),th,this.logger,this.performanceClient,n)(this.performanceClient,n)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n),this.initialized=!0,this.eventHandler.emitEvent(br),i.end({allowPlatformBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),cf(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var t;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if((null===(t=this.browserStorage.getInteractionInProgress())||void 0===t?void 0:t.type)===Sn)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),i=r&&cg.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e;let a,s;this.eventHandler.emitEvent(Or,Hn.Redirect);try{if(i&&this.nativeExtensionProvider){a=this.performanceClient.startMeasurement(Wd,(null===r||void 0===r?void 0:r.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new wg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Bn,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);s=Tf(e.handleRedirectPromise.bind(e),Zu,this.logger,this.performanceClient,a.event.correlationId)(this.performanceClient,a.event.correlationId)}else{const[t,n]=this.browserStorage.getCachedRequest(),r=t.correlationId;a=this.performanceClient.startMeasurement(Wd,r),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const i=this.createRedirectClient(r);s=Tf(i.handleRedirectPromise.bind(i),Qu,this.logger,this.performanceClient,a.event.correlationId)(e,t,n,a)}}catch(Zg){throw this.browserStorage.resetRequestCache(),Zg}return s.then((e=>{if(e){this.browserStorage.resetRequestCache();n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(kr,Hn.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Ar,Hn.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0,accountType:Vg(e.account)})}else a.event.errorCode?a.end({success:!1}):a.discard();return this.eventHandler.emitEvent(Lr,Hn.Redirect),e})).catch((e=>{this.browserStorage.resetRequestCache();const t=e;throw n.length>0?this.eventHandler.emitEvent(Er,Hn.Redirect,null,t):this.eventHandler.emitEvent(Sr,Hn.Redirect,null,t),this.eventHandler.emitEvent(Lr,Hn.Redirect),a.end({success:!1},t),e}))}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(Hd,t);n.add({accountType:Vg(e.account),scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{const t="function"===typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const r="function"===typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}const i=this.getAllAccounts().length>0;try{let r;if(uf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,kn),i?this.eventHandler.emitEvent(Pr,Hn.Redirect,e):this.eventHandler.emitEvent(Cr,Hn.Redirect,e),this.nativeExtensionProvider&&this.canUsePlatformBroker(e)){r=new wg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,On,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch((n=>{if(n instanceof sg&&og(n)){this.nativeExtensionProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof qf){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw n}))}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(Zg){throw this.browserStorage.resetRequestCache(),n.end({success:!1},Zg),i?this.eventHandler.emitEvent(Er,Hn.Redirect,null,Zg):this.eventHandler.emitEvent(Sr,Hn.Redirect,null,Zg),Zg}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(zd,t);n.add({scenarioId:e.scenarioId,accountType:Vg(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),Kg(this.initialized,n),this.browserStorage.setInteractionInProgress(!0,kn)}catch(Zg){return Promise.reject(Zg)}const r=this.getAllAccounts();let i;r.length>0?this.eventHandler.emitEvent(Pr,Hn.Popup,e):this.eventHandler.emitEvent(Cr,Hn.Popup,e);const a=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))i=this.acquireTokenNative(vr(vr({},e),{},{correlationId:t}),Ln).then((e=>(n.end({success:!0,isNativeBroker:!0,accountType:Vg(e.account)}),e))).catch((n=>{if(n instanceof sg&&og(n)){this.nativeExtensionProvider=void 0;return this.createPopupClient(t).acquireToken(e,a)}if(n instanceof qf){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,a)}throw n}));else{i=this.createPopupClient(t).acquireToken(e,a)}return i.then((e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(kr,Hn.Popup,e):this.eventHandler.emitEvent(Ar,Hn.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:Vg(e.account)}),e))).catch((e=>(r.length>0?this.eventHandler.emitEvent(Er,Hn.Popup,null,e):this.eventHandler.emitEvent(Sr,Hn.Popup,null,e),n.end({success:!1},e),Promise.reject(e)))).finally((async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)}))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,n;const r=this.getRequestCorrelationId(e),i=vr(vr({},e),{},{prompt:e.prompt,correlationId:r});let a;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(Zd,r),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId,accountType:Vg(e.account)}),Kg(this.initialized,this.ssoSilentMeasurement),null===(n=this.ssoSilentMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(Ir,Hn.Silent,i),this.canUsePlatformBroker(i))a=this.acquireTokenNative(i,Dn).catch((e=>{if(e instanceof sg&&og(e)){this.nativeExtensionProvider=void 0;return this.createSilentIframeClient(i.correlationId).acquireToken(i)}throw e}));else{a=this.createSilentIframeClient(i.correlationId).acquireToken(i)}return a.then((e=>{var t;return this.eventHandler.emitEvent(Fr,Hn.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:Vg(e.account)}),e})).catch((e=>{var t;throw this.eventHandler.emitEvent(Rr,Hn.Silent,null,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(Bd,t);Kg(this.initialized,n),this.eventHandler.emitEvent(Nr,Hn.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw kp(lp);if(e.code){const r=e.code;let i=this.hybridAuthCodeResponses.get(r);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(vr(vr({},e),{},{correlationId:t})).then((e=>(this.eventHandler.emitEvent(jr,Hn.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:Vg(e.account)}),e))).catch((e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Mr,Hn.Silent,null,e),n.end({success:!1},e),e})),this.hybridAuthCodeResponses.set(r,i)),await i}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){const r=await this.acquireTokenNative(vr(vr({},e),{},{correlationId:t}),qn,e.nativeAccountId).catch((e=>{throw e instanceof sg&&og(e)&&(this.nativeExtensionProvider=void 0),e}));return n.end({accountType:Vg(r.account),success:!0}),r}throw kp(dp)}throw kp(op)}catch(Zg){throw this.eventHandler.emitEvent(Mr,Hn.Silent,null,Zg),n.end({success:!1},Zg),Zg}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(Ju,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const n=this.createSilentAuthCodeClient(e.correlationId);return await n.acquireToken(e).then((e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e})).catch((e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(cu,e.correlationId),t){case nr:case rr:case ir:const t=this.createSilentCacheClient(e.correlationId);return Tf(t.acquireToken.bind(t),Yd,this.logger,this.performanceClient,e.correlationId)(e);default:throw rc(zl)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(qd,e.correlationId),t){case nr:case ir:case ar:case sr:const t=this.createSilentRefreshClient(e.correlationId);return Tf(t.acquireToken.bind(t),Qd,this.logger,this.performanceClient,e.correlationId)(e);default:throw rc(zl)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(hu,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return Tf(t.acquireToken.bind(t),Xd,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(vr({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);uf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Sn);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);df(this.initialized),this.browserStorage.setInteractionInProgress(!0,Sn);return this.createPopupClient(t).logout(e).finally((()=>{this.browserStorage.setInteractionInProgress(!1)}))}catch(Zg){return Promise.reject(Zg)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,r){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=pd.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw kp(pp);return new wg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,r)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!cg.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case nt.NONE:case nt.CONSENT:case nt.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace("canUsePlatformBroker: prompt = ".concat(e.prompt," is not compatible with platform broker flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Fg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new Rg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new qg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Dn,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new yg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new Gg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new Wg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,qn,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return lf(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===bn?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===bn?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Kp():Le.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(vr({correlationId:t},e||Zn))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(vr({correlationId:t},e||Zn))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(Ud,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Kg(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw kp(Vh);return n.add({accountType:Vg(r)}),this.acquireTokenSilentDeduped(e,r,t).then((r=>(n.end({success:!0,fromCache:r.fromCache,isNativeBroker:r.fromNativeBroker,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length}),vr(vr({},r),{},{state:e.state,correlationId:t})))).catch((e=>{throw e instanceof Jt&&e.setCorrelationId(t),n.end({success:!1},e),e}))}async acquireTokenSilentDeduped(e,t,n){const r=zf(this.config.auth.clientId,vr(vr({},e),{},{authority:e.authority||this.config.auth.authority,correlationId:n}),t.homeAccountId),i=JSON.stringify(r),a=this.activeSilentTokenRequests.get(i);if("undefined"===typeof a){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n),this.performanceClient.addFields({deduped:!1},n);const r=Tf(this.acquireTokenSilentAsync.bind(this),Gd,this.logger,this.performanceClient,n)(vr(vr({},e),{},{correlationId:n}),t);return this.activeSilentTokenRequests.set(i,r),r.finally((()=>{this.activeSilentTokenRequests.delete(i)}))}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),this.performanceClient.addFields({deduped:!0},n),a}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(Gd,e.correlationId),this.eventHandler.emitEvent(Pr,Hn.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await Tf(ng,fu,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||nr;return this.acquireTokenSilentNoIframe(r,i).catch((async e=>{const t=function(e,t){const n=!(e instanceof qf&&e.subError!==Of),r=e.errorCode===sn||e.errorCode===zl,i=n&&r||e.errorCode===Nf||e.errorCode===Mf,a=lr.includes(t);return i&&a}(e,i);if(t){if(this.activeIframeRequest){if(i!==or){const[t,n]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(n),r.correlationId);const a=this.performanceClient.startMeasurement(Jd,r.correlationId);a.add({awaitIframeCorrelationId:n});const s=await t;if(a.end({success:s}),s)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(n," succeeded. Retrying cache and/or RT redemption"),r.correlationId),this.acquireTokenSilentNoIframe(r,i);throw this.logger.info("Iframe request with correlationId: ".concat(n," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),Tf(this.acquireTokenBySilentIframe.bind(this),hu,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise((t=>{e=t})),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),Tf(this.acquireTokenBySilentIframe.bind(this),hu,this.logger,this.performanceClient,r.correlationId)(r).then((t=>(e(!0),t))).catch((t=>{throw e(!1),t})).finally((()=>{this.activeIframeRequest=void 0}))}}throw e})).then((t=>(this.eventHandler.emitEvent(Ar,Hn.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t))).catch((e=>{throw this.eventHandler.emitEvent(Er,Hn.Silent,null,e),e})).finally((()=>{document.removeEventListener("visibilitychange",n)}))}async acquireTokenSilentNoIframe(e,t){return cg.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,Un,e.account.nativeAccountId,t).catch((async e=>{if(e instanceof sg&&og(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,rc(zl);throw e}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===rr&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Tf(this.acquireTokenFromCache.bind(this),cu,this.logger,this.performanceClient,e.correlationId)(e,t).catch((n=>{if(t===rr)throw n;return this.eventHandler.emitEvent(Tr,Hn.Silent,e),Tf(this.acquireTokenByRefreshToken.bind(this),qd,this.logger,this.performanceClient,e.correlationId)(e,t)})))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Tf(Eg,sh,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?vr({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose("".concat(t?"Found":"Did not find"," pre-generated PKCE codes")),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[];window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,n){var r;const i=(null===(r=window.msal)||void 0===r?void 0:r.clientIds)||[],a=i.length,s=i.filter((t=>t===e)).length;s>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:a,sameClientIdInstanceCount:s})}(t,e,this.logger)}}class Xg{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new gf(e);return await n.initialize(),Yg.createController(n,t)}(e);return new Xg(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new Yg(new gf(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const Jg=new Xg(Zr),Qg=i.createRoot(document.getElementById("root"));Jg.addEventCallback((e=>{if(e.eventType===kr&&e.payload){const t=e.payload;Jg.setActiveAccount(t.account)}})),Jg.enableAccountStorageEvents(),async function(){try{if(await Jg.initialize(),!Jg.getActiveAccount()){const e=Jg.getAllAccounts();e.length>0&&Jg.setActiveAccount(e[0])}Qg.render((0,Ps.jsx)(Te,{children:(0,Ps.jsx)(Jr,{instance:Jg,children:(0,Ps.jsx)(sl,{})})}))}catch(e){console.error("MSAL initialization error:",e)}}()})()})();
//# sourceMappingURL=main.8c57a884.js.map